/* 
 * XNovaPT
 * Copyright (C) 2012
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should read the GNU General Public License, see <http://www.gnu.org/licenses/>.
 * 
 * XNovaPT
 * @author XNovaPT Team <xnovaptteam@gmail.com>
 * @redesign.js
 * @license http://www.gnu.org/licenses/gpl.html GNU GPLv3 License
 * @version 0.01  27/Abr/2014 16:32:07
 */

/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license  */
(function(e, t) {
    var n, r, i = typeof t, o = e.document, a = e.location, s = e.jQuery, u = e.$, l = {}, c = [], p = "1.9.1", f = c.concat, d = c.push, h = c.slice, g = c.indexOf, m = l.toString, y = l.hasOwnProperty, v = p.trim, b = function(e, t) {
        return new b.fn.init(e, t, r)
    }, x = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, w = /\S+/g, T = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, N = /^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/, C = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, k = /^[\],:{}\s]*$/, E = /(?:^|:|,)(?:\s*\[)+/g, S = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g, A = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g, j = /^-ms-/, D = /-([\da-z])/gi, L = function(e, t) {
        return t.toUpperCase()
    }, H = function(e) {
        (o.addEventListener || "load" === e.type || "complete" === o.readyState) && (q(), b.ready())
    }, q = function() {
        o.addEventListener ? (o.removeEventListener("DOMContentLoaded", H, !1), e.removeEventListener("load", H, !1)) : (o.detachEvent("onreadystatechange", H), e.detachEvent("onload", H))
    };
    b.fn = b.prototype = {jquery: p, constructor: b, init: function(e, n, r) {
            var i, a;
            if (!e) {
                return this
            }
            if ("string" == typeof e) {
                if (i = "<" === e.charAt(0) && ">" === e.charAt(e.length - 1) && e.length >= 3 ? [null, e, null] : N.exec(e), !i || !i[1] && n) {
                    return !n || n.jquery ? (n || r).find(e) : this.constructor(n).find(e)
                }
                if (i[1]) {
                    if (n = n instanceof b ? n[0] : n, b.merge(this, b.parseHTML(i[1], n && n.nodeType ? n.ownerDocument || n : o, !0)), C.test(i[1]) && b.isPlainObject(n)) {
                        for (i in n) {
                            b.isFunction(this[i]) ? this[i](n[i]) : this.attr(i, n[i])
                        }
                    }
                    return this
                }
                if (a = o.getElementById(i[2]), a && a.parentNode) {
                    if (a.id !== i[2]) {
                        return r.find(e)
                    }
                    this.length = 1, this[0] = a
                }
                return this.context = o, this.selector = e, this
            }
            return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : b.isFunction(e) ? r.ready(e) : (e.selector !== t && (this.selector = e.selector, this.context = e.context), b.makeArray(e, this))
        }, selector: "", length: 0, size: function() {
            return this.length
        }, toArray: function() {
            return h.call(this)
        }, get: function(e) {
            return null == e ? this.toArray() : 0 > e ? this[this.length + e] : this[e]
        }, pushStack: function(e) {
            var t = b.merge(this.constructor(), e);
            return t.prevObject = this, t.context = this.context, t
        }, each: function(e, t) {
            return b.each(this, e, t)
        }, ready: function(e) {
            return b.ready.promise().done(e), this
        }, slice: function() {
            return this.pushStack(h.apply(this, arguments))
        }, first: function() {
            return this.eq(0)
        }, last: function() {
            return this.eq(-1)
        }, eq: function(e) {
            var t = this.length, n = +e + (0 > e ? t : 0);
            return this.pushStack(n >= 0 && t > n ? [this[n]] : [])
        }, map: function(e) {
            return this.pushStack(b.map(this, function(t, n) {
                return e.call(t, n, t)
            }))
        }, end: function() {
            return this.prevObject || this.constructor(null)
        }, push: d, sort: [].sort, splice: [].splice}, b.fn.init.prototype = b.fn, b.extend = b.fn.extend = function() {
        var e, n, r, i, o, a, s = arguments[0] || {}, u = 1, l = arguments.length, c = !1;
        for ("boolean" == typeof s && (c = s, s = arguments[1] || {}, u = 2), "object" == typeof s || b.isFunction(s) || (s = {}), l === u && (s = this, --u); l > u; u++) {
            if (null != (o = arguments[u])) {
                for (i in o) {
                    e = s[i], r = o[i], s !== r && (c && r && (b.isPlainObject(r) || (n = b.isArray(r))) ? (n ? (n = !1, a = e && b.isArray(e) ? e : []) : a = e && b.isPlainObject(e) ? e : {}, s[i] = b.extend(c, a, r)) : r !== t && (s[i] = r))
                }
            }
        }
        return s
    }, b.extend({noConflict: function(t) {
            return e.$ === b && (e.$ = u), t && e.jQuery === b && (e.jQuery = s), b
        }, isReady: !1, readyWait: 1, holdReady: function(e) {
            e ? b.readyWait++ : b.ready(!0)
        }, ready: function(e) {
            if (e === !0 ? !--b.readyWait : !b.isReady) {
                if (!o.body) {
                    return setTimeout(b.ready)
                }
                b.isReady = !0, e !== !0 && --b.readyWait > 0 || (n.resolveWith(o, [b]), b.fn.trigger && b(o).trigger("ready").off("ready"))
            }
        }, isFunction: function(e) {
            return"function" === b.type(e)
        }, isArray: Array.isArray || function(e) {
            return"array" === b.type(e)
        }, isWindow: function(e) {
            return null != e && e == e.window
        }, isNumeric: function(e) {
            return !isNaN(parseFloat(e)) && isFinite(e)
        }, type: function(e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? l[m.call(e)] || "object" : typeof e
        }, isPlainObject: function(e) {
            if (!e || "object" !== b.type(e) || e.nodeType || b.isWindow(e)) {
                return !1
            }
            try {
                if (e.constructor && !y.call(e, "constructor") && !y.call(e.constructor.prototype, "isPrototypeOf")) {
                    return !1
                }
            } catch (n) {
                return !1
            }
            var r;
            for (r in e) {
            }
            return r === t || y.call(e, r)
        }, isEmptyObject: function(e) {
            var t;
            for (t in e) {
                return !1
            }
            return !0
        }, error: function(e) {
            throw Error(e)
        }, parseHTML: function(e, t, n) {
            if (!e || "string" != typeof e) {
                return null
            }
            "boolean" == typeof t && (n = t, t = !1), t = t || o;
            var r = C.exec(e), i = !n && [];
            return r ? [t.createElement(r[1])] : (r = b.buildFragment([e], t, i), i && b(i).remove(), b.merge([], r.childNodes))
        }, parseJSON: function(n) {
            return e.JSON && e.JSON.parse ? e.JSON.parse(n) : null === n ? n : "string" == typeof n && (n = b.trim(n), n && k.test(n.replace(S, "@").replace(A, "]").replace(E, ""))) ? Function("return " + n)() : (b.error("Invalid JSON: " + n), t)
        }, parseXML: function(n) {
            var r, i;
            if (!n || "string" != typeof n) {
                return null
            }
            try {
                e.DOMParser ? (i = new DOMParser, r = i.parseFromString(n, "text/xml")) : (r = new ActiveXObject("Microsoft.XMLDOM"), r.async = "false", r.loadXML(n))
            } catch (o) {
                r = t
            }
            return r && r.documentElement && !r.getElementsByTagName("parsererror").length || b.error("Invalid XML: " + n), r
        }, noop: function() {
        }, globalEval: function(t) {
            t && b.trim(t) && (e.execScript || function(t) {
                e.eval.call(e, t)
            })(t)
        }, camelCase: function(e) {
            return e.replace(j, "ms-").replace(D, L)
        }, nodeName: function(e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
        }, each: function(e, t, n) {
            var r, i = 0, o = e.length, a = M(e);
            if (n) {
                if (a) {
                    for (; o > i; i++) {
                        if (r = t.apply(e[i], n), r === !1) {
                            break
                        }
                    }
                } else {
                    for (i in e) {
                        if (r = t.apply(e[i], n), r === !1) {
                            break
                        }
                    }
                }
            } else {
                if (a) {
                    for (; o > i; i++) {
                        if (r = t.call(e[i], i, e[i]), r === !1) {
                            break
                        }
                    }
                } else {
                    for (i in e) {
                        if (r = t.call(e[i], i, e[i]), r === !1) {
                            break
                        }
                    }
                }
            }
            return e
        }, trim: v && !v.call("\ufeff\u00a0") ? function(e) {
            return null == e ? "" : v.call(e)
        } : function(e) {
            return null == e ? "" : (e + "").replace(T, "")
        }, makeArray: function(e, t) {
            var n = t || [];
            return null != e && (M(Object(e)) ? b.merge(n, "string" == typeof e ? [e] : e) : d.call(n, e)), n
        }, inArray: function(e, t, n) {
            var r;
            if (t) {
                if (g) {
                    return g.call(t, e, n)
                }
                for (r = t.length, n = n ? 0 > n ? Math.max(0, r + n) : n : 0; r > n; n++) {
                    if (n in t && t[n] === e) {
                        return n
                    }
                }
            }
            return -1
        }, merge: function(e, n) {
            var r = n.length, i = e.length, o = 0;
            if ("number" == typeof r) {
                for (; r > o; o++) {
                    e[i++] = n[o]
                }
            } else {
                while (n[o] !== t) {
                    e[i++] = n[o++]
                }
            }
            return e.length = i, e
        }, grep: function(e, t, n) {
            var r, i = [], o = 0, a = e.length;
            for (n = !!n; a > o; o++) {
                r = !!t(e[o], o), n !== r && i.push(e[o])
            }
            return i
        }, map: function(e, t, n) {
            var r, i = 0, o = e.length, a = M(e), s = [];
            if (a) {
                for (; o > i; i++) {
                    r = t(e[i], i, n), null != r && (s[s.length] = r)
                }
            } else {
                for (i in e) {
                    r = t(e[i], i, n), null != r && (s[s.length] = r)
                }
            }
            return f.apply([], s)
        }, guid: 1, proxy: function(e, n) {
            var r, i, o;
            return"string" == typeof n && (o = e[n], n = e, e = o), b.isFunction(e) ? (r = h.call(arguments, 2), i = function() {
                return e.apply(n || this, r.concat(h.call(arguments)))
            }, i.guid = e.guid = e.guid || b.guid++, i) : t
        }, access: function(e, n, r, i, o, a, s) {
            var u = 0, l = e.length, c = null == r;
            if ("object" === b.type(r)) {
                o = !0;
                for (u in r) {
                    b.access(e, n, u, r[u], !0, a, s)
                }
            } else {
                if (i !== t && (o = !0, b.isFunction(i) || (s = !0), c && (s ? (n.call(e, i), n = null) : (c = n, n = function(e, t, n) {
                    return c.call(b(e), n)
                })), n)) {
                    for (; l > u; u++) {
                        n(e[u], r, s ? i : i.call(e[u], u, n(e[u], r)))
                    }
                }
            }
            return o ? e : c ? n.call(e) : l ? n(e[0], r) : a
        }, now: function() {
            return(new Date).getTime()
        }}), b.ready.promise = function(t) {
        if (!n) {
            if (n = b.Deferred(), "complete" === o.readyState) {
                setTimeout(b.ready)
            } else {
                if (o.addEventListener) {
                    o.addEventListener("DOMContentLoaded", H, !1), e.addEventListener("load", H, !1)
                } else {
                    o.attachEvent("onreadystatechange", H), e.attachEvent("onload", H);
                    var r = !1;
                    try {
                        r = null == e.frameElement && o.documentElement
                    } catch (i) {
                    }
                    r && r.doScroll && function a() {
                        if (!b.isReady) {
                            try {
                                r.doScroll("left")
                            } catch (e) {
                                return setTimeout(a, 50)
                            }
                            q(), b.ready()
                        }
                    }()
                }
            }
        }
        return n.promise(t)
    }, b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
        l["[object " + t + "]"] = t.toLowerCase()
    });
    function M(e) {
        var t = e.length, n = b.type(e);
        return b.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === n || "function" !== n && (0 === t || "number" == typeof t && t > 0 && t - 1 in e)
    }
    r = b(o);
    var _ = {};
    function F(e) {
        var t = _[e] = {};
        return b.each(e.match(w) || [], function(e, n) {
            t[n] = !0
        }), t
    }
    b.Callbacks = function(e) {
        e = "string" == typeof e ? _[e] || F(e) : b.extend({}, e);
        var n, r, i, o, a, s, u = [], l = !e.once && [], c = function(t) {
            for (r = e.memory && t, i = !0, a = s || 0, s = 0, o = u.length, n = !0; u && o > a; a++) {
                if (u[a].apply(t[0], t[1]) === !1 && e.stopOnFalse) {
                    r = !1;
                    break
                }
            }
            n = !1, u && (l ? l.length && c(l.shift()) : r ? u = [] : p.disable())
        }, p = {add: function() {
                if (u) {
                    var t = u.length;
                    (function i(t) {
                        b.each(t, function(t, n) {
                            var r = b.type(n);
                            "function" === r ? e.unique && p.has(n) || u.push(n) : n && n.length && "string" !== r && i(n)
                        })
                    })(arguments), n ? o = u.length : r && (s = t, c(r))
                }
                return this
            }, remove: function() {
                return u && b.each(arguments, function(e, t) {
                    var r;
                    while ((r = b.inArray(t, u, r)) > -1) {
                        u.splice(r, 1), n && (o >= r && o--, a >= r && a--)
                    }
                }), this
            }, has: function(e) {
                return e ? b.inArray(e, u) > -1 : !(!u || !u.length)
            }, empty: function() {
                return u = [], this
            }, disable: function() {
                return u = l = r = t, this
            }, disabled: function() {
                return !u
            }, lock: function() {
                return l = t, r || p.disable(), this
            }, locked: function() {
                return !l
            }, fireWith: function(e, t) {
                return t = t || [], t = [e, t.slice ? t.slice() : t], !u || i && !l || (n ? l.push(t) : c(t)), this
            }, fire: function() {
                return p.fireWith(this, arguments), this
            }, fired: function() {
                return !!i
            }};
        return p
    }, b.extend({Deferred: function(e) {
            var t = [["resolve", "done", b.Callbacks("once memory"), "resolved"], ["reject", "fail", b.Callbacks("once memory"), "rejected"], ["notify", "progress", b.Callbacks("memory")]], n = "pending", r = {state: function() {
                    return n
                }, always: function() {
                    return i.done(arguments).fail(arguments), this
                }, then: function() {
                    var e = arguments;
                    return b.Deferred(function(n) {
                        b.each(t, function(t, o) {
                            var a = o[0], s = b.isFunction(e[t]) && e[t];
                            i[o[1]](function() {
                                var e = s && s.apply(this, arguments);
                                e && b.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[a + "With"](this === r ? n.promise() : this, s ? [e] : arguments)
                            })
                        }), e = null
                    }).promise()
                }, promise: function(e) {
                    return null != e ? b.extend(e, r) : r
                }}, i = {};
            return r.pipe = r.then, b.each(t, function(e, o) {
                var a = o[2], s = o[3];
                r[o[1]] = a.add, s && a.add(function() {
                    n = s
                }, t[1 ^ e][2].disable, t[2][2].lock), i[o[0]] = function() {
                    return i[o[0] + "With"](this === i ? r : this, arguments), this
                }, i[o[0] + "With"] = a.fireWith
            }), r.promise(i), e && e.call(i, i), i
        }, when: function(e) {
            var t = 0, n = h.call(arguments), r = n.length, i = 1 !== r || e && b.isFunction(e.promise) ? r : 0, o = 1 === i ? e : b.Deferred(), a = function(e, t, n) {
                return function(r) {
                    t[e] = this, n[e] = arguments.length > 1 ? h.call(arguments) : r, n === s ? o.notifyWith(t, n) : --i || o.resolveWith(t, n)
                }
            }, s, u, l;
            if (r > 1) {
                for (s = Array(r), u = Array(r), l = Array(r); r > t; t++) {
                    n[t] && b.isFunction(n[t].promise) ? n[t].promise().done(a(t, l, n)).fail(o.reject).progress(a(t, u, s)) : --i
                }
            }
            return i || o.resolveWith(l, n), o.promise()
        }}), b.support = function() {
        var t, n, r, a, s, u, l, c, p, f, d = o.createElement("div");
        if (d.setAttribute("className", "t"), d.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", n = d.getElementsByTagName("*"), r = d.getElementsByTagName("a")[0], !n || !r || !n.length) {
            return{}
        }
        s = o.createElement("select"), l = s.appendChild(o.createElement("option")), a = d.getElementsByTagName("input")[0], r.style.cssText = "top:1px;float:left;opacity:.5", t = {getSetAttribute: "t" !== d.className, leadingWhitespace: 3 === d.firstChild.nodeType, tbody: !d.getElementsByTagName("tbody").length, htmlSerialize: !!d.getElementsByTagName("link").length, style: /top/.test(r.getAttribute("style")), hrefNormalized: "/a" === r.getAttribute("href"), opacity: /^0.5/.test(r.style.opacity), cssFloat: !!r.style.cssFloat, checkOn: !!a.value, optSelected: l.selected, enctype: !!o.createElement("form").enctype, html5Clone: "<:nav></:nav>" !== o.createElement("nav").cloneNode(!0).outerHTML, boxModel: "CSS1Compat" === o.compatMode, deleteExpando: !0, noCloneEvent: !0, inlineBlockNeedsLayout: !1, shrinkWrapBlocks: !1, reliableMarginRight: !0, boxSizingReliable: !0, pixelPosition: !1}, a.checked = !0, t.noCloneChecked = a.cloneNode(!0).checked, s.disabled = !0, t.optDisabled = !l.disabled;
        try {
            delete d.test
        } catch (h) {
            t.deleteExpando = !1
        }
        a = o.createElement("input"), a.setAttribute("value", ""), t.input = "" === a.getAttribute("value"), a.value = "t", a.setAttribute("type", "radio"), t.radioValue = "t" === a.value, a.setAttribute("checked", "t"), a.setAttribute("name", "t"), u = o.createDocumentFragment(), u.appendChild(a), t.appendChecked = a.checked, t.checkClone = u.cloneNode(!0).cloneNode(!0).lastChild.checked, d.attachEvent && (d.attachEvent("onclick", function() {
            t.noCloneEvent = !1
        }), d.cloneNode(!0).click());
        for (f in {submit: !0, change: !0, focusin: !0}) {
            d.setAttribute(c = "on" + f, "t"), t[f + "Bubbles"] = c in e || d.attributes[c].expando === !1
        }
        return d.style.backgroundClip = "content-box", d.cloneNode(!0).style.backgroundClip = "", t.clearCloneStyle = "content-box" === d.style.backgroundClip, b(function() {
            var n, r, a, s = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;", u = o.getElementsByTagName("body")[0];
            u && (n = o.createElement("div"), n.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px", u.appendChild(n).appendChild(d), d.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", a = d.getElementsByTagName("td"), a[0].style.cssText = "padding:0;margin:0;border:0;display:none", p = 0 === a[0].offsetHeight, a[0].style.display = "", a[1].style.display = "none", t.reliableHiddenOffsets = p && 0 === a[0].offsetHeight, d.innerHTML = "", d.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;", t.boxSizing = 4 === d.offsetWidth, t.doesNotIncludeMarginInBodyOffset = 1 !== u.offsetTop, e.getComputedStyle && (t.pixelPosition = "1%" !== (e.getComputedStyle(d, null) || {}).top, t.boxSizingReliable = "4px" === (e.getComputedStyle(d, null) || {width: "4px"}).width, r = d.appendChild(o.createElement("div")), r.style.cssText = d.style.cssText = s, r.style.marginRight = r.style.width = "0", d.style.width = "1px", t.reliableMarginRight = !parseFloat((e.getComputedStyle(r, null) || {}).marginRight)), typeof d.style.zoom !== i && (d.innerHTML = "", d.style.cssText = s + "width:1px;padding:1px;display:inline;zoom:1", t.inlineBlockNeedsLayout = 3 === d.offsetWidth, d.style.display = "block", d.innerHTML = "<div></div>", d.firstChild.style.width = "5px", t.shrinkWrapBlocks = 3 !== d.offsetWidth, t.inlineBlockNeedsLayout && (u.style.zoom = 1)), u.removeChild(n), n = d = a = r = null)
        }), n = s = u = l = r = a = null, t
    }();
    var O = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/, B = /([A-Z])/g;
    function P(e, n, r, i) {
        if (b.acceptData(e)) {
            var o, a, s = b.expando, u = "string" == typeof n, l = e.nodeType, p = l ? b.cache : e, f = l ? e[s] : e[s] && s;
            if (f && p[f] && (i || p[f].data) || !u || r !== t) {
                return f || (l ? e[s] = f = c.pop() || b.guid++ : f = s), p[f] || (p[f] = {}, l || (p[f].toJSON = b.noop)), ("object" == typeof n || "function" == typeof n) && (i ? p[f] = b.extend(p[f], n) : p[f].data = b.extend(p[f].data, n)), o = p[f], i || (o.data || (o.data = {}), o = o.data), r !== t && (o[b.camelCase(n)] = r), u ? (a = o[n], null == a && (a = o[b.camelCase(n)])) : a = o, a
            }
        }
    }
    function R(e, t, n) {
        if (b.acceptData(e)) {
            var r, i, o, a = e.nodeType, s = a ? b.cache : e, u = a ? e[b.expando] : b.expando;
            if (s[u]) {
                if (t && (o = n ? s[u] : s[u].data)) {
                    b.isArray(t) ? t = t.concat(b.map(t, b.camelCase)) : t in o ? t = [t] : (t = b.camelCase(t), t = t in o ? [t] : t.split(" "));
                    for (r = 0, i = t.length; i > r; r++) {
                        delete o[t[r]]
                    }
                    if (!(n ? $ : b.isEmptyObject)(o)) {
                        return
                    }
                }
                (n || (delete s[u].data, $(s[u]))) && (a ? b.cleanData([e], !0) : b.support.deleteExpando || s != s.window ? delete s[u] : s[u] = null)
            }
        }
    }
    b.extend({cache: {}, expando: "jQuery" + (p + Math.random()).replace(/\D/g, ""), noData: {embed: !0, object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000", applet: !0}, hasData: function(e) {
            return e = e.nodeType ? b.cache[e[b.expando]] : e[b.expando], !!e && !$(e)
        }, data: function(e, t, n) {
            return P(e, t, n)
        }, removeData: function(e, t) {
            return R(e, t)
        }, _data: function(e, t, n) {
            return P(e, t, n, !0)
        }, _removeData: function(e, t) {
            return R(e, t, !0)
        }, acceptData: function(e) {
            if (e.nodeType && 1 !== e.nodeType && 9 !== e.nodeType) {
                return !1
            }
            var t = e.nodeName && b.noData[e.nodeName.toLowerCase()];
            return !t || t !== !0 && e.getAttribute("classid") === t
        }}), b.fn.extend({data: function(e, n) {
            var r, i, o = this[0], a = 0, s = null;
            if (e === t) {
                if (this.length && (s = b.data(o), 1 === o.nodeType && !b._data(o, "parsedAttrs"))) {
                    for (r = o.attributes; r.length > a; a++) {
                        i = r[a].name, i.indexOf("data-") || (i = b.camelCase(i.slice(5)), W(o, i, s[i]))
                    }
                    b._data(o, "parsedAttrs", !0)
                }
                return s
            }
            return"object" == typeof e ? this.each(function() {
                b.data(this, e)
            }) : b.access(this, function(n) {
                return n === t ? o ? W(o, e, b.data(o, e)) : null : (this.each(function() {
                    b.data(this, e, n)
                }), t)
            }, null, n, arguments.length > 1, null, !0)
        }, removeData: function(e) {
            return this.each(function() {
                b.removeData(this, e)
            })
        }});
    function W(e, n, r) {
        if (r === t && 1 === e.nodeType) {
            var i = "data-" + n.replace(B, "-$1").toLowerCase();
            if (r = e.getAttribute(i), "string" == typeof r) {
                try {
                    r = "true" === r ? !0 : "false" === r ? !1 : "null" === r ? null : +r + "" === r ? +r : O.test(r) ? b.parseJSON(r) : r
                } catch (o) {
                }
                b.data(e, n, r)
            } else {
                r = t
            }
        }
        return r
    }
    function $(e) {
        var t;
        for (t in e) {
            if (("data" !== t || !b.isEmptyObject(e[t])) && "toJSON" !== t) {
                return !1
            }
        }
        return !0
    }
    b.extend({queue: function(e, n, r) {
            var i;
            return e ? (n = (n || "fx") + "queue", i = b._data(e, n), r && (!i || b.isArray(r) ? i = b._data(e, n, b.makeArray(r)) : i.push(r)), i || []) : t
        }, dequeue: function(e, t) {
            t = t || "fx";
            var n = b.queue(e, t), r = n.length, i = n.shift(), o = b._queueHooks(e, t), a = function() {
                b.dequeue(e, t)
            };
            "inprogress" === i && (i = n.shift(), r--), o.cur = i, i && ("fx" === t && n.unshift("inprogress"), delete o.stop, i.call(e, a, o)), !r && o && o.empty.fire()
        }, _queueHooks: function(e, t) {
            var n = t + "queueHooks";
            return b._data(e, n) || b._data(e, n, {empty: b.Callbacks("once memory").add(function() {
                    b._removeData(e, t + "queue"), b._removeData(e, n)
                })})
        }}), b.fn.extend({queue: function(e, n) {
            var r = 2;
            return"string" != typeof e && (n = e, e = "fx", r--), r > arguments.length ? b.queue(this[0], e) : n === t ? this : this.each(function() {
                var t = b.queue(this, e, n);
                b._queueHooks(this, e), "fx" === e && "inprogress" !== t[0] && b.dequeue(this, e)
            })
        }, dequeue: function(e) {
            return this.each(function() {
                b.dequeue(this, e)
            })
        }, delay: function(e, t) {
            return e = b.fx ? b.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, n) {
                var r = setTimeout(t, e);
                n.stop = function() {
                    clearTimeout(r)
                }
            })
        }, clearQueue: function(e) {
            return this.queue(e || "fx", [])
        }, promise: function(e, n) {
            var r, i = 1, o = b.Deferred(), a = this, s = this.length, u = function() {
                --i || o.resolveWith(a, [a])
            };
            "string" != typeof e && (n = e, e = t), e = e || "fx";
            while (s--) {
                r = b._data(a[s], e + "queueHooks"), r && r.empty && (i++, r.empty.add(u))
            }
            return u(), o.promise(n)
        }});
    var I, z, X = /[\t\r\n]/g, U = /\r/g, V = /^(?:input|select|textarea|button|object)$/i, Y = /^(?:a|area)$/i, J = /^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i, G = /^(?:checked|selected)$/i, Q = b.support.getSetAttribute, K = b.support.input;
    b.fn.extend({attr: function(e, t) {
            return b.access(this, b.attr, e, t, arguments.length > 1)
        }, removeAttr: function(e) {
            return this.each(function() {
                b.removeAttr(this, e)
            })
        }, prop: function(e, t) {
            return b.access(this, b.prop, e, t, arguments.length > 1)
        }, removeProp: function(e) {
            return e = b.propFix[e] || e, this.each(function() {
                try {
                    this[e] = t, delete this[e]
                } catch (n) {
                }
            })
        }, addClass: function(e) {
            var t, n, r, i, o, a = 0, s = this.length, u = "string" == typeof e && e;
            if (b.isFunction(e)) {
                return this.each(function(t) {
                    b(this).addClass(e.call(this, t, this.className))
                })
            }
            if (u) {
                for (t = (e || "").match(w) || []; s > a; a++) {
                    if (n = this[a], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(X, " ") : " ")) {
                        o = 0;
                        while (i = t[o++]) {
                            0 > r.indexOf(" " + i + " ") && (r += i + " ")
                        }
                        n.className = b.trim(r)
                    }
                }
            }
            return this
        }, removeClass: function(e) {
            var t, n, r, i, o, a = 0, s = this.length, u = 0 === arguments.length || "string" == typeof e && e;
            if (b.isFunction(e)) {
                return this.each(function(t) {
                    b(this).removeClass(e.call(this, t, this.className))
                })
            }
            if (u) {
                for (t = (e || "").match(w) || []; s > a; a++) {
                    if (n = this[a], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(X, " ") : "")) {
                        o = 0;
                        while (i = t[o++]) {
                            while (r.indexOf(" " + i + " ") >= 0) {
                                r = r.replace(" " + i + " ", " ")
                            }
                        }
                        n.className = e ? b.trim(r) : ""
                    }
                }
            }
            return this
        }, toggleClass: function(e, t) {
            var n = typeof e, r = "boolean" == typeof t;
            return b.isFunction(e) ? this.each(function(n) {
                b(this).toggleClass(e.call(this, n, this.className, t), t)
            }) : this.each(function() {
                if ("string" === n) {
                    var o, a = 0, s = b(this), u = t, l = e.match(w) || [];
                    while (o = l[a++]) {
                        u = r ? u : !s.hasClass(o), s[u ? "addClass" : "removeClass"](o)
                    }
                } else {
                    (n === i || "boolean" === n) && (this.className && b._data(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : b._data(this, "__className__") || "")
                }
            })
        }, hasClass: function(e) {
            var t = " " + e + " ", n = 0, r = this.length;
            for (; r > n; n++) {
                if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(X, " ").indexOf(t) >= 0) {
                    return !0
                }
            }
            return !1
        }, val: function(e) {
            var n, r, i, o = this[0];
            if (arguments.length) {
                return i = b.isFunction(e), this.each(function(n) {
                    var o, a = b(this);
                    1 === this.nodeType && (o = i ? e.call(this, n, a.val()) : e, null == o ? o = "" : "number" == typeof o ? o += "" : b.isArray(o) && (o = b.map(o, function(e) {
                        return null == e ? "" : e + ""
                    })), r = b.valHooks[this.type] || b.valHooks[this.nodeName.toLowerCase()], r && "set" in r && r.set(this, o, "value") !== t || (this.value = o))
                })
            }
            if (o) {
                return r = b.valHooks[o.type] || b.valHooks[o.nodeName.toLowerCase()], r && "get" in r && (n = r.get(o, "value")) !== t ? n : (n = o.value, "string" == typeof n ? n.replace(U, "") : null == n ? "" : n)
            }
        }}), b.extend({valHooks: {option: {get: function(e) {
                    var t = e.attributes.value;
                    return !t || t.specified ? e.value : e.text
                }}, select: {get: function(e) {
                    var t, n, r = e.options, i = e.selectedIndex, o = "select-one" === e.type || 0 > i, a = o ? null : [], s = o ? i + 1 : r.length, u = 0 > i ? s : o ? i : 0;
                    for (; s > u; u++) {
                        if (n = r[u], !(!n.selected && u !== i || (b.support.optDisabled ? n.disabled : null !== n.getAttribute("disabled")) || n.parentNode.disabled && b.nodeName(n.parentNode, "optgroup"))) {
                            if (t = b(n).val(), o) {
                                return t
                            }
                            a.push(t)
                        }
                    }
                    return a
                }, set: function(e, t) {
                    var n = b.makeArray(t);
                    return b(e).find("option").each(function() {
                        this.selected = b.inArray(b(this).val(), n) >= 0
                    }), n.length || (e.selectedIndex = -1), n
                }}}, attr: function(e, n, r) {
            var o, a, s, u = e.nodeType;
            if (e && 3 !== u && 8 !== u && 2 !== u) {
                return typeof e.getAttribute === i ? b.prop(e, n, r) : (a = 1 !== u || !b.isXMLDoc(e), a && (n = n.toLowerCase(), o = b.attrHooks[n] || (J.test(n) ? z : I)), r === t ? o && a && "get" in o && null !== (s = o.get(e, n)) ? s : (typeof e.getAttribute !== i && (s = e.getAttribute(n)), null == s ? t : s) : null !== r ? o && a && "set" in o && (s = o.set(e, r, n)) !== t ? s : (e.setAttribute(n, r + ""), r) : (b.removeAttr(e, n), t))
            }
        }, removeAttr: function(e, t) {
            var n, r, i = 0, o = t && t.match(w);
            if (o && 1 === e.nodeType) {
                while (n = o[i++]) {
                    r = b.propFix[n] || n, J.test(n) ? !Q && G.test(n) ? e[b.camelCase("default-" + n)] = e[r] = !1 : e[r] = !1 : b.attr(e, n, ""), e.removeAttribute(Q ? n : r)
                }
            }
        }, attrHooks: {type: {set: function(e, t) {
                    if (!b.support.radioValue && "radio" === t && b.nodeName(e, "input")) {
                        var n = e.value;
                        return e.setAttribute("type", t), n && (e.value = n), t
                    }
                }}}, propFix: {tabindex: "tabIndex", readonly: "readOnly", "for": "htmlFor", "class": "className", maxlength: "maxLength", cellspacing: "cellSpacing", cellpadding: "cellPadding", rowspan: "rowSpan", colspan: "colSpan", usemap: "useMap", frameborder: "frameBorder", contenteditable: "contentEditable"}, prop: function(e, n, r) {
            var i, o, a, s = e.nodeType;
            if (e && 3 !== s && 8 !== s && 2 !== s) {
                return a = 1 !== s || !b.isXMLDoc(e), a && (n = b.propFix[n] || n, o = b.propHooks[n]), r !== t ? o && "set" in o && (i = o.set(e, r, n)) !== t ? i : e[n] = r : o && "get" in o && null !== (i = o.get(e, n)) ? i : e[n]
            }
        }, propHooks: {tabIndex: {get: function(e) {
                    var n = e.getAttributeNode("tabindex");
                    return n && n.specified ? parseInt(n.value, 10) : V.test(e.nodeName) || Y.test(e.nodeName) && e.href ? 0 : t
                }}}}), z = {get: function(e, n) {
            var r = b.prop(e, n), i = "boolean" == typeof r && e.getAttribute(n), o = "boolean" == typeof r ? K && Q ? null != i : G.test(n) ? e[b.camelCase("default-" + n)] : !!i : e.getAttributeNode(n);
            return o && o.value !== !1 ? n.toLowerCase() : t
        }, set: function(e, t, n) {
            return t === !1 ? b.removeAttr(e, n) : K && Q || !G.test(n) ? e.setAttribute(!Q && b.propFix[n] || n, n) : e[b.camelCase("default-" + n)] = e[n] = !0, n
        }}, K && Q || (b.attrHooks.value = {get: function(e, n) {
            var r = e.getAttributeNode(n);
            return b.nodeName(e, "input") ? e.defaultValue : r && r.specified ? r.value : t
        }, set: function(e, n, r) {
            return b.nodeName(e, "input") ? (e.defaultValue = n, t) : I && I.set(e, n, r)
        }}), Q || (I = b.valHooks.button = {get: function(e, n) {
            var r = e.getAttributeNode(n);
            return r && ("id" === n || "name" === n || "coords" === n ? "" !== r.value : r.specified) ? r.value : t
        }, set: function(e, n, r) {
            var i = e.getAttributeNode(r);
            return i || e.setAttributeNode(i = e.ownerDocument.createAttribute(r)), i.value = n += "", "value" === r || n === e.getAttribute(r) ? n : t
        }}, b.attrHooks.contenteditable = {get: I.get, set: function(e, t, n) {
            I.set(e, "" === t ? !1 : t, n)
        }}, b.each(["width", "height"], function(e, n) {
        b.attrHooks[n] = b.extend(b.attrHooks[n], {set: function(e, r) {
                return"" === r ? (e.setAttribute(n, "auto"), r) : t
            }})
    })), b.support.hrefNormalized || (b.each(["href", "src", "width", "height"], function(e, n) {
        b.attrHooks[n] = b.extend(b.attrHooks[n], {get: function(e) {
                var r = e.getAttribute(n, 2);
                return null == r ? t : r
            }})
    }), b.each(["href", "src"], function(e, t) {
        b.propHooks[t] = {get: function(e) {
                return e.getAttribute(t, 4)
            }}
    })), b.support.style || (b.attrHooks.style = {get: function(e) {
            return e.style.cssText || t
        }, set: function(e, t) {
            return e.style.cssText = t + ""
        }}), b.support.optSelected || (b.propHooks.selected = b.extend(b.propHooks.selected, {get: function(e) {
            var t = e.parentNode;
            return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null
        }})), b.support.enctype || (b.propFix.enctype = "encoding"), b.support.checkOn || b.each(["radio", "checkbox"], function() {
        b.valHooks[this] = {get: function(e) {
                return null === e.getAttribute("value") ? "on" : e.value
            }}
    }), b.each(["radio", "checkbox"], function() {
        b.valHooks[this] = b.extend(b.valHooks[this], {set: function(e, n) {
                return b.isArray(n) ? e.checked = b.inArray(b(e).val(), n) >= 0 : t
            }})
    });
    var Z = /^(?:input|select|textarea)$/i, et = /^key/, tt = /^(?:mouse|contextmenu)|click/, nt = /^(?:focusinfocus|focusoutblur)$/, rt = /^([^.]*)(?:\.(.+)|)$/;
    function it() {
        return !0
    }
    function ot() {
        return !1
    }
    b.event = {global: {}, add: function(e, n, r, o, a) {
            var s, u, l, c, p, f, d, h, g, m, y, v = b._data(e);
            if (v) {
                r.handler && (c = r, r = c.handler, a = c.selector), r.guid || (r.guid = b.guid++), (u = v.events) || (u = v.events = {}), (f = v.handle) || (f = v.handle = function(e) {
                    return typeof b === i || e && b.event.triggered === e.type ? t : b.event.dispatch.apply(f.elem, arguments)
                }, f.elem = e), n = (n || "").match(w) || [""], l = n.length;
                while (l--) {
                    s = rt.exec(n[l]) || [], g = y = s[1], m = (s[2] || "").split(".").sort(), p = b.event.special[g] || {}, g = (a ? p.delegateType : p.bindType) || g, p = b.event.special[g] || {}, d = b.extend({type: g, origType: y, data: o, handler: r, guid: r.guid, selector: a, needsContext: a && b.expr.match.needsContext.test(a), namespace: m.join(".")}, c), (h = u[g]) || (h = u[g] = [], h.delegateCount = 0, p.setup && p.setup.call(e, o, m, f) !== !1 || (e.addEventListener ? e.addEventListener(g, f, !1) : e.attachEvent && e.attachEvent("on" + g, f))), p.add && (p.add.call(e, d), d.handler.guid || (d.handler.guid = r.guid)), a ? h.splice(h.delegateCount++, 0, d) : h.push(d), b.event.global[g] = !0
                }
                e = null
            }
        }, remove: function(e, t, n, r, i) {
            var o, a, s, u, l, c, p, f, d, h, g, m = b.hasData(e) && b._data(e);
            if (m && (c = m.events)) {
                t = (t || "").match(w) || [""], l = t.length;
                while (l--) {
                    if (s = rt.exec(t[l]) || [], d = g = s[1], h = (s[2] || "").split(".").sort(), d) {
                        p = b.event.special[d] || {}, d = (r ? p.delegateType : p.bindType) || d, f = c[d] || [], s = s[2] && RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)"), u = o = f.length;
                        while (o--) {
                            a = f[o], !i && g !== a.origType || n && n.guid !== a.guid || s && !s.test(a.namespace) || r && r !== a.selector && ("**" !== r || !a.selector) || (f.splice(o, 1), a.selector && f.delegateCount--, p.remove && p.remove.call(e, a))
                        }
                        u && !f.length && (p.teardown && p.teardown.call(e, h, m.handle) !== !1 || b.removeEvent(e, d, m.handle), delete c[d])
                    } else {
                        for (d in c) {
                            b.event.remove(e, d + t[l], n, r, !0)
                        }
                    }
                }
                b.isEmptyObject(c) && (delete m.handle, b._removeData(e, "events"))
            }
        }, trigger: function(n, r, i, a) {
            var s, u, l, c, p, f, d, h = [i || o], g = y.call(n, "type") ? n.type : n, m = y.call(n, "namespace") ? n.namespace.split(".") : [];
            if (l = f = i = i || o, 3 !== i.nodeType && 8 !== i.nodeType && !nt.test(g + b.event.triggered) && (g.indexOf(".") >= 0 && (m = g.split("."), g = m.shift(), m.sort()), u = 0 > g.indexOf(":") && "on" + g, n = n[b.expando] ? n : new b.Event(g, "object" == typeof n && n), n.isTrigger = !0, n.namespace = m.join("."), n.namespace_re = n.namespace ? RegExp("(^|\\.)" + m.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, n.result = t, n.target || (n.target = i), r = null == r ? [n] : b.makeArray(r, [n]), p = b.event.special[g] || {}, a || !p.trigger || p.trigger.apply(i, r) !== !1)) {
                if (!a && !p.noBubble && !b.isWindow(i)) {
                    for (c = p.delegateType || g, nt.test(c + g) || (l = l.parentNode); l; l = l.parentNode) {
                        h.push(l), f = l
                    }
                    f === (i.ownerDocument || o) && h.push(f.defaultView || f.parentWindow || e)
                }
                d = 0;
                while ((l = h[d++]) && !n.isPropagationStopped()) {
                    n.type = d > 1 ? c : p.bindType || g, s = (b._data(l, "events") || {})[n.type] && b._data(l, "handle"), s && s.apply(l, r), s = u && l[u], s && b.acceptData(l) && s.apply && s.apply(l, r) === !1 && n.preventDefault()
                }
                if (n.type = g, !(a || n.isDefaultPrevented() || p._default && p._default.apply(i.ownerDocument, r) !== !1 || "click" === g && b.nodeName(i, "a") || !b.acceptData(i) || !u || !i[g] || b.isWindow(i))) {
                    f = i[u], f && (i[u] = null), b.event.triggered = g;
                    try {
                        i[g]()
                    } catch (v) {
                    }
                    b.event.triggered = t, f && (i[u] = f)
                }
                return n.result
            }
        }, dispatch: function(e) {
            e = b.event.fix(e);
            var n, r, i, o, a, s = [], u = h.call(arguments), l = (b._data(this, "events") || {})[e.type] || [], c = b.event.special[e.type] || {};
            if (u[0] = e, e.delegateTarget = this, !c.preDispatch || c.preDispatch.call(this, e) !== !1) {
                s = b.event.handlers.call(this, e, l), n = 0;
                while ((o = s[n++]) && !e.isPropagationStopped()) {
                    e.currentTarget = o.elem, a = 0;
                    while ((i = o.handlers[a++]) && !e.isImmediatePropagationStopped()) {
                        (!e.namespace_re || e.namespace_re.test(i.namespace)) && (e.handleObj = i, e.data = i.data, r = ((b.event.special[i.origType] || {}).handle || i.handler).apply(o.elem, u), r !== t && (e.result = r) === !1 && (e.preventDefault(), e.stopPropagation()))
                    }
                }
                return c.postDispatch && c.postDispatch.call(this, e), e.result
            }
        }, handlers: function(e, n) {
            var r, i, o, a, s = [], u = n.delegateCount, l = e.target;
            if (u && l.nodeType && (!e.button || "click" !== e.type)) {
                for (; l != this; l = l.parentNode || this) {
                    if (1 === l.nodeType && (l.disabled !== !0 || "click" !== e.type)) {
                        for (o = [], a = 0; u > a; a++) {
                            i = n[a], r = i.selector + " ", o[r] === t && (o[r] = i.needsContext ? b(r, this).index(l) >= 0 : b.find(r, this, null, [l]).length), o[r] && o.push(i)
                        }
                        o.length && s.push({elem: l, handlers: o})
                    }
                }
            }
            return n.length > u && s.push({elem: this, handlers: n.slice(u)}), s
        }, fix: function(e) {
            if (e[b.expando]) {
                return e
            }
            var t, n, r, i = e.type, a = e, s = this.fixHooks[i];
            s || (this.fixHooks[i] = s = tt.test(i) ? this.mouseHooks : et.test(i) ? this.keyHooks : {}), r = s.props ? this.props.concat(s.props) : this.props, e = new b.Event(a), t = r.length;
            while (t--) {
                n = r[t], e[n] = a[n]
            }
            return e.target || (e.target = a.srcElement || o), 3 === e.target.nodeType && (e.target = e.target.parentNode), e.metaKey = !!e.metaKey, s.filter ? s.filter(e, a) : e
        }, props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "), fixHooks: {}, keyHooks: {props: "char charCode key keyCode".split(" "), filter: function(e, t) {
                return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
            }}, mouseHooks: {props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "), filter: function(e, n) {
                var r, i, a, s = n.button, u = n.fromElement;
                return null == e.pageX && null != n.clientX && (i = e.target.ownerDocument || o, a = i.documentElement, r = i.body, e.pageX = n.clientX + (a && a.scrollLeft || r && r.scrollLeft || 0) - (a && a.clientLeft || r && r.clientLeft || 0), e.pageY = n.clientY + (a && a.scrollTop || r && r.scrollTop || 0) - (a && a.clientTop || r && r.clientTop || 0)), !e.relatedTarget && u && (e.relatedTarget = u === e.target ? n.toElement : u), e.which || s === t || (e.which = 1 & s ? 1 : 2 & s ? 3 : 4 & s ? 2 : 0), e
            }}, special: {load: {noBubble: !0}, click: {trigger: function() {
                    return b.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), !1) : t
                }}, focus: {trigger: function() {
                    if (this !== o.activeElement && this.focus) {
                        try {
                            return this.focus(), !1
                        } catch (e) {
                        }
                    }
                }, delegateType: "focusin"}, blur: {trigger: function() {
                    return this === o.activeElement && this.blur ? (this.blur(), !1) : t
                }, delegateType: "focusout"}, beforeunload: {postDispatch: function(e) {
                    e.result !== t && (e.originalEvent.returnValue = e.result)
                }}}, simulate: function(e, t, n, r) {
            var i = b.extend(new b.Event, n, {type: e, isSimulated: !0, originalEvent: {}});
            r ? b.event.trigger(i, null, t) : b.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault()
        }}, b.removeEvent = o.removeEventListener ? function(e, t, n) {
        e.removeEventListener && e.removeEventListener(t, n, !1)
    } : function(e, t, n) {
        var r = "on" + t;
        e.detachEvent && (typeof e[r] === i && (e[r] = null), e.detachEvent(r, n))
    }, b.Event = function(e, n) {
        return this instanceof b.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || e.returnValue === !1 || e.getPreventDefault && e.getPreventDefault() ? it : ot) : this.type = e, n && b.extend(this, n), this.timeStamp = e && e.timeStamp || b.now(), this[b.expando] = !0, t) : new b.Event(e, n)
    }, b.Event.prototype = {isDefaultPrevented: ot, isPropagationStopped: ot, isImmediatePropagationStopped: ot, preventDefault: function() {
            var e = this.originalEvent;
            this.isDefaultPrevented = it, e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1)
        }, stopPropagation: function() {
            var e = this.originalEvent;
            this.isPropagationStopped = it, e && (e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0)
        }, stopImmediatePropagation: function() {
            this.isImmediatePropagationStopped = it, this.stopPropagation()
        }}, b.each({mouseenter: "mouseover", mouseleave: "mouseout"}, function(e, t) {
        b.event.special[e] = {delegateType: t, bindType: t, handle: function(e) {
                var n, r = this, i = e.relatedTarget, o = e.handleObj;
                return(!i || i !== r && !b.contains(r, i)) && (e.type = o.origType, n = o.handler.apply(this, arguments), e.type = t), n
            }}
    }), b.support.submitBubbles || (b.event.special.submit = {setup: function() {
            return b.nodeName(this, "form") ? !1 : (b.event.add(this, "click._submit keypress._submit", function(e) {
                var n = e.target, r = b.nodeName(n, "input") || b.nodeName(n, "button") ? n.form : t;
                r && !b._data(r, "submitBubbles") && (b.event.add(r, "submit._submit", function(e) {
                    e._submit_bubble = !0
                }), b._data(r, "submitBubbles", !0))
            }), t)
        }, postDispatch: function(e) {
            e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && b.event.simulate("submit", this.parentNode, e, !0))
        }, teardown: function() {
            return b.nodeName(this, "form") ? !1 : (b.event.remove(this, "._submit"), t)
        }}), b.support.changeBubbles || (b.event.special.change = {setup: function() {
            return Z.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (b.event.add(this, "propertychange._change", function(e) {
                "checked" === e.originalEvent.propertyName && (this._just_changed = !0)
            }), b.event.add(this, "click._change", function(e) {
                this._just_changed && !e.isTrigger && (this._just_changed = !1), b.event.simulate("change", this, e, !0)
            })), !1) : (b.event.add(this, "beforeactivate._change", function(e) {
                var t = e.target;
                Z.test(t.nodeName) && !b._data(t, "changeBubbles") && (b.event.add(t, "change._change", function(e) {
                    !this.parentNode || e.isSimulated || e.isTrigger || b.event.simulate("change", this.parentNode, e, !0)
                }), b._data(t, "changeBubbles", !0))
            }), t)
        }, handle: function(e) {
            var n = e.target;
            return this !== n || e.isSimulated || e.isTrigger || "radio" !== n.type && "checkbox" !== n.type ? e.handleObj.handler.apply(this, arguments) : t
        }, teardown: function() {
            return b.event.remove(this, "._change"), !Z.test(this.nodeName)
        }}), b.support.focusinBubbles || b.each({focus: "focusin", blur: "focusout"}, function(e, t) {
        var n = 0, r = function(e) {
            b.event.simulate(t, e.target, b.event.fix(e), !0)
        };
        b.event.special[t] = {setup: function() {
                0 === n++ && o.addEventListener(e, r, !0)
            }, teardown: function() {
                0 === --n && o.removeEventListener(e, r, !0)
            }}
    }), b.fn.extend({on: function(e, n, r, i, o) {
            var a, s;
            if ("object" == typeof e) {
                "string" != typeof n && (r = r || n, n = t);
                for (a in e) {
                    this.on(a, n, r, e[a], o)
                }
                return this
            }
            if (null == r && null == i ? (i = n, r = n = t) : null == i && ("string" == typeof n ? (i = r, r = t) : (i = r, r = n, n = t)), i === !1) {
                i = ot
            } else {
                if (!i) {
                    return this
                }
            }
            return 1 === o && (s = i, i = function(e) {
                return b().off(e), s.apply(this, arguments)
            }, i.guid = s.guid || (s.guid = b.guid++)), this.each(function() {
                b.event.add(this, e, i, r, n)
            })
        }, one: function(e, t, n, r) {
            return this.on(e, t, n, r, 1)
        }, off: function(e, n, r) {
            var i, o;
            if (e && e.preventDefault && e.handleObj) {
                return i = e.handleObj, b(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this
            }
            if ("object" == typeof e) {
                for (o in e) {
                    this.off(o, n, e[o])
                }
                return this
            }
            return(n === !1 || "function" == typeof n) && (r = n, n = t), r === !1 && (r = ot), this.each(function() {
                b.event.remove(this, e, r, n)
            })
        }, bind: function(e, t, n) {
            return this.on(e, null, t, n)
        }, unbind: function(e, t) {
            return this.off(e, null, t)
        }, delegate: function(e, t, n, r) {
            return this.on(t, e, n, r)
        }, undelegate: function(e, t, n) {
            return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
        }, trigger: function(e, t) {
            return this.each(function() {
                b.event.trigger(e, t, this)
            })
        }, triggerHandler: function(e, n) {
            var r = this[0];
            return r ? b.event.trigger(e, n, r, !0) : t
        }}), function(e, t) {
        var n, r, i, o, a, s, u, l, c, p, f, d, h, g, m, y, v, x = "sizzle" + -new Date, w = e.document, T = {}, N = 0, C = 0, k = it(), E = it(), S = it(), A = typeof t, j = 1 << 31, D = [], L = D.pop, H = D.push, q = D.slice, M = D.indexOf || function(e) {
            var t = 0, n = this.length;
            for (; n > t; t++) {
                if (this[t] === e) {
                    return t
                }
            }
            return -1
        }, _ = "[\\x20\\t\\r\\n\\f]", F = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", O = F.replace("w", "w#"), B = "([*^$|!~]?=)", P = "\\[" + _ + "*(" + F + ")" + _ + "*(?:" + B + _ + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + O + ")|)|)" + _ + "*\\]", R = ":(" + F + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + P.replace(3, 8) + ")*)|.*)\\)|)", W = RegExp("^" + _ + "+|((?:^|[^\\\\])(?:\\\\.)*)" + _ + "+$", "g"), $ = RegExp("^" + _ + "*," + _ + "*"), I = RegExp("^" + _ + "*([\\x20\\t\\r\\n\\f>+~])" + _ + "*"), z = RegExp(R), X = RegExp("^" + O + "$"), U = {ID: RegExp("^#(" + F + ")"), CLASS: RegExp("^\\.(" + F + ")"), NAME: RegExp("^\\[name=['\"]?(" + F + ")['\"]?\\]"), TAG: RegExp("^(" + F.replace("w", "w*") + ")"), ATTR: RegExp("^" + P), PSEUDO: RegExp("^" + R), CHILD: RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + _ + "*(even|odd|(([+-]|)(\\d*)n|)" + _ + "*(?:([+-]|)" + _ + "*(\\d+)|))" + _ + "*\\)|)", "i"), needsContext: RegExp("^" + _ + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + _ + "*((?:-\\d)?\\d*)" + _ + "*\\)|)(?=[^-]|$)", "i")}, V = /[\x20\t\r\n\f]*[+~]/, Y = /^[^{]+\{\s*\[native code/, J = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, G = /^(?:input|select|textarea|button)$/i, Q = /^h\d$/i, K = /'|\\/g, Z = /\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g, et = /\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g, tt = function(e, t) {
            var n = "0x" + t - 65536;
            return n !== n ? t : 0 > n ? String.fromCharCode(n + 65536) : String.fromCharCode(55296 | n >> 10, 56320 | 1023 & n)
        };
        try {
            q.call(w.documentElement.childNodes, 0)[0].nodeType
        } catch (nt) {
            q = function(e) {
                var t, n = [];
                while (t = this[e++]) {
                    n.push(t)
                }
                return n
            }
        }
        function rt(e) {
            return Y.test(e + "")
        }
        function it() {
            var e, t = [];
            return e = function(n, r) {
                return t.push(n += " ") > i.cacheLength && delete e[t.shift()], e[n] = r
            }
        }
        function ot(e) {
            return e[x] = !0, e
        }
        function at(e) {
            var t = p.createElement("div");
            try {
                return e(t)
            } catch (n) {
                return !1
            } finally {
                t = null
            }
        }
        function st(e, t, n, r) {
            var i, o, a, s, u, l, f, g, m, v;
            if ((t ? t.ownerDocument || t : w) !== p && c(t), t = t || p, n = n || [], !e || "string" != typeof e) {
                return n
            }
            if (1 !== (s = t.nodeType) && 9 !== s) {
                return[]
            }
            if (!d && !r) {
                if (i = J.exec(e)) {
                    if (a = i[1]) {
                        if (9 === s) {
                            if (o = t.getElementById(a), !o || !o.parentNode) {
                                return n
                            }
                            if (o.id === a) {
                                return n.push(o), n
                            }
                        } else {
                            if (t.ownerDocument && (o = t.ownerDocument.getElementById(a)) && y(t, o) && o.id === a) {
                                return n.push(o), n
                            }
                        }
                    } else {
                        if (i[2]) {
                            return H.apply(n, q.call(t.getElementsByTagName(e), 0)), n
                        }
                        if ((a = i[3]) && T.getByClassName && t.getElementsByClassName) {
                            return H.apply(n, q.call(t.getElementsByClassName(a), 0)), n
                        }
                    }
                }
                if (T.qsa && !h.test(e)) {
                    if (f = !0, g = x, m = t, v = 9 === s && e, 1 === s && "object" !== t.nodeName.toLowerCase()) {
                        l = ft(e), (f = t.getAttribute("id")) ? g = f.replace(K, "\\$&") : t.setAttribute("id", g), g = "[id='" + g + "'] ", u = l.length;
                        while (u--) {
                            l[u] = g + dt(l[u])
                        }
                        m = V.test(e) && t.parentNode || t, v = l.join(",")
                    }
                    if (v) {
                        try {
                            return H.apply(n, q.call(m.querySelectorAll(v), 0)), n
                        } catch (b) {
                        } finally {
                            f || t.removeAttribute("id")
                        }
                    }
                }
            }
            return wt(e.replace(W, "$1"), t, n, r)
        }
        a = st.isXML = function(e) {
            var t = e && (e.ownerDocument || e).documentElement;
            return t ? "HTML" !== t.nodeName : !1
        }, c = st.setDocument = function(e) {
            var n = e ? e.ownerDocument || e : w;
            return n !== p && 9 === n.nodeType && n.documentElement ? (p = n, f = n.documentElement, d = a(n), T.tagNameNoComments = at(function(e) {
                return e.appendChild(n.createComment("")), !e.getElementsByTagName("*").length
            }), T.attributes = at(function(e) {
                e.innerHTML = "<select></select>";
                var t = typeof e.lastChild.getAttribute("multiple");
                return"boolean" !== t && "string" !== t
            }), T.getByClassName = at(function(e) {
                return e.innerHTML = "<div class='hidden e'></div><div class='hidden'></div>", e.getElementsByClassName && e.getElementsByClassName("e").length ? (e.lastChild.className = "e", 2 === e.getElementsByClassName("e").length) : !1
            }), T.getByName = at(function(e) {
                e.id = x + 0, e.innerHTML = "<a name='" + x + "'></a><div name='" + x + "'></div>", f.insertBefore(e, f.firstChild);
                var t = n.getElementsByName && n.getElementsByName(x).length === 2 + n.getElementsByName(x + 0).length;
                return T.getIdNotName = !n.getElementById(x), f.removeChild(e), t
            }), i.attrHandle = at(function(e) {
                return e.innerHTML = "<a href='#'></a>", e.firstChild && typeof e.firstChild.getAttribute !== A && "#" === e.firstChild.getAttribute("href")
            }) ? {} : {href: function(e) {
                    return e.getAttribute("href", 2)
                }, type: function(e) {
                    return e.getAttribute("type")
                }}, T.getIdNotName ? (i.find.ID = function(e, t) {
                if (typeof t.getElementById !== A && !d) {
                    var n = t.getElementById(e);
                    return n && n.parentNode ? [n] : []
                }
            }, i.filter.ID = function(e) {
                var t = e.replace(et, tt);
                return function(e) {
                    return e.getAttribute("id") === t
                }
            }) : (i.find.ID = function(e, n) {
                if (typeof n.getElementById !== A && !d) {
                    var r = n.getElementById(e);
                    return r ? r.id === e || typeof r.getAttributeNode !== A && r.getAttributeNode("id").value === e ? [r] : t : []
                }
            }, i.filter.ID = function(e) {
                var t = e.replace(et, tt);
                return function(e) {
                    var n = typeof e.getAttributeNode !== A && e.getAttributeNode("id");
                    return n && n.value === t
                }
            }), i.find.TAG = T.tagNameNoComments ? function(e, n) {
                return typeof n.getElementsByTagName !== A ? n.getElementsByTagName(e) : t
            } : function(e, t) {
                var n, r = [], i = 0, o = t.getElementsByTagName(e);
                if ("*" === e) {
                    while (n = o[i++]) {
                        1 === n.nodeType && r.push(n)
                    }
                    return r
                }
                return o
            }, i.find.NAME = T.getByName && function(e, n) {
                return typeof n.getElementsByName !== A ? n.getElementsByName(name) : t
            }, i.find.CLASS = T.getByClassName && function(e, n) {
                return typeof n.getElementsByClassName === A || d ? t : n.getElementsByClassName(e)
            }, g = [], h = [":focus"], (T.qsa = rt(n.querySelectorAll)) && (at(function(e) {
                e.innerHTML = "<select><option selected=''></option></select>", e.querySelectorAll("[selected]").length || h.push("\\[" + _ + "*(?:checked|disabled|ismap|multiple|readonly|selected|value)"), e.querySelectorAll(":checked").length || h.push(":checked")
            }), at(function(e) {
                e.innerHTML = "<input type='hidden' i=''/>", e.querySelectorAll("[i^='']").length && h.push("[*^$]=" + _ + "*(?:\"\"|'')"), e.querySelectorAll(":enabled").length || h.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), h.push(",.*:")
            })), (T.matchesSelector = rt(m = f.matchesSelector || f.mozMatchesSelector || f.webkitMatchesSelector || f.oMatchesSelector || f.msMatchesSelector)) && at(function(e) {
                T.disconnectedMatch = m.call(e, "div"), m.call(e, "[s!='']:x"), g.push("!=", R)
            }), h = RegExp(h.join("|")), g = RegExp(g.join("|")), y = rt(f.contains) || f.compareDocumentPosition ? function(e, t) {
                var n = 9 === e.nodeType ? e.documentElement : e, r = t && t.parentNode;
                return e === r || !(!r || 1 !== r.nodeType || !(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r)))
            } : function(e, t) {
                if (t) {
                    while (t = t.parentNode) {
                        if (t === e) {
                            return !0
                        }
                    }
                }
                return !1
            }, v = f.compareDocumentPosition ? function(e, t) {
                var r;
                return e === t ? (u = !0, 0) : (r = t.compareDocumentPosition && e.compareDocumentPosition && e.compareDocumentPosition(t)) ? 1 & r || e.parentNode && 11 === e.parentNode.nodeType ? e === n || y(w, e) ? -1 : t === n || y(w, t) ? 1 : 0 : 4 & r ? -1 : 1 : e.compareDocumentPosition ? -1 : 1
            } : function(e, t) {
                var r, i = 0, o = e.parentNode, a = t.parentNode, s = [e], l = [t];
                if (e === t) {
                    return u = !0, 0
                }
                if (!o || !a) {
                    return e === n ? -1 : t === n ? 1 : o ? -1 : a ? 1 : 0
                }
                if (o === a) {
                    return ut(e, t)
                }
                r = e;
                while (r = r.parentNode) {
                    s.unshift(r)
                }
                r = t;
                while (r = r.parentNode) {
                    l.unshift(r)
                }
                while (s[i] === l[i]) {
                    i++
                }
                return i ? ut(s[i], l[i]) : s[i] === w ? -1 : l[i] === w ? 1 : 0
            }, u = !1, [0, 0].sort(v), T.detectDuplicates = u, p) : p
        }, st.matches = function(e, t) {
            return st(e, null, null, t)
        }, st.matchesSelector = function(e, t) {
            if ((e.ownerDocument || e) !== p && c(e), t = t.replace(Z, "='$1']"), !(!T.matchesSelector || d || g && g.test(t) || h.test(t))) {
                try {
                    var n = m.call(e, t);
                    if (n || T.disconnectedMatch || e.document && 11 !== e.document.nodeType) {
                        return n
                    }
                } catch (r) {
                }
            }
            return st(t, p, null, [e]).length > 0
        }, st.contains = function(e, t) {
            return(e.ownerDocument || e) !== p && c(e), y(e, t)
        }, st.attr = function(e, t) {
            var n;
            return(e.ownerDocument || e) !== p && c(e), d || (t = t.toLowerCase()), (n = i.attrHandle[t]) ? n(e) : d || T.attributes ? e.getAttribute(t) : ((n = e.getAttributeNode(t)) || e.getAttribute(t)) && e[t] === !0 ? t : n && n.specified ? n.value : null
        }, st.error = function(e) {
            throw Error("Syntax error, unrecognized expression: " + e)
        }, st.uniqueSort = function(e) {
            var t, n = [], r = 1, i = 0;
            if (u = !T.detectDuplicates, e.sort(v), u) {
                for (; t = e[r]; r++) {
                    t === e[r - 1] && (i = n.push(r))
                }
                while (i--) {
                    e.splice(n[i], 1)
                }
            }
            return e
        };
        function ut(e, t) {
            var n = t && e, r = n && (~t.sourceIndex || j) - (~e.sourceIndex || j);
            if (r) {
                return r
            }
            if (n) {
                while (n = n.nextSibling) {
                    if (n === t) {
                        return -1
                    }
                }
            }
            return e ? 1 : -1
        }
        function lt(e) {
            return function(t) {
                var n = t.nodeName.toLowerCase();
                return"input" === n && t.type === e
            }
        }
        function ct(e) {
            return function(t) {
                var n = t.nodeName.toLowerCase();
                return("input" === n || "button" === n) && t.type === e
            }
        }
        function pt(e) {
            return ot(function(t) {
                return t = +t, ot(function(n, r) {
                    var i, o = e([], n.length, t), a = o.length;
                    while (a--) {
                        n[i = o[a]] && (n[i] = !(r[i] = n[i]))
                    }
                })
            })
        }
        o = st.getText = function(e) {
            var t, n = "", r = 0, i = e.nodeType;
            if (i) {
                if (1 === i || 9 === i || 11 === i) {
                    if ("string" == typeof e.textContent) {
                        return e.textContent
                    }
                    for (e = e.firstChild; e; e = e.nextSibling) {
                        n += o(e)
                    }
                } else {
                    if (3 === i || 4 === i) {
                        return e.nodeValue
                    }
                }
            } else {
                for (; t = e[r]; r++) {
                    n += o(t)
                }
            }
            return n
        }, i = st.selectors = {cacheLength: 50, createPseudo: ot, match: U, find: {}, relative: {">": {dir: "parentNode", first: !0}, " ": {dir: "parentNode"}, "+": {dir: "previousSibling", first: !0}, "~": {dir: "previousSibling"}}, preFilter: {ATTR: function(e) {
                    return e[1] = e[1].replace(et, tt), e[3] = (e[4] || e[5] || "").replace(et, tt), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                }, CHILD: function(e) {
                    return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || st.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && st.error(e[0]), e
                }, PSEUDO: function(e) {
                    var t, n = !e[5] && e[2];
                    return U.CHILD.test(e[0]) ? null : (e[4] ? e[2] = e[4] : n && z.test(n) && (t = ft(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                }}, filter: {TAG: function(e) {
                    return"*" === e ? function() {
                        return !0
                    } : (e = e.replace(et, tt).toLowerCase(), function(t) {
                        return t.nodeName && t.nodeName.toLowerCase() === e
                    })
                }, CLASS: function(e) {
                    var t = k[e + " "];
                    return t || (t = RegExp("(^|" + _ + ")" + e + "(" + _ + "|$)")) && k(e, function(e) {
                        return t.test(e.className || typeof e.getAttribute !== A && e.getAttribute("class") || "")
                    })
                }, ATTR: function(e, t, n) {
                    return function(r) {
                        var i = st.attr(r, e);
                        return null == i ? "!=" === t : t ? (i += "", "=" === t ? i === n : "!=" === t ? i !== n : "^=" === t ? n && 0 === i.indexOf(n) : "*=" === t ? n && i.indexOf(n) > -1 : "$=" === t ? n && i.slice(-n.length) === n : "~=" === t ? (" " + i + " ").indexOf(n) > -1 : "|=" === t ? i === n || i.slice(0, n.length + 1) === n + "-" : !1) : !0
                    }
                }, CHILD: function(e, t, n, r, i) {
                    var o = "nth" !== e.slice(0, 3), a = "last" !== e.slice(-4), s = "of-type" === t;
                    return 1 === r && 0 === i ? function(e) {
                        return !!e.parentNode
                    } : function(t, n, u) {
                        var l, c, p, f, d, h, g = o !== a ? "nextSibling" : "previousSibling", m = t.parentNode, y = s && t.nodeName.toLowerCase(), v = !u && !s;
                        if (m) {
                            if (o) {
                                while (g) {
                                    p = t;
                                    while (p = p[g]) {
                                        if (s ? p.nodeName.toLowerCase() === y : 1 === p.nodeType) {
                                            return !1
                                        }
                                    }
                                    h = g = "only" === e && !h && "nextSibling"
                                }
                                return !0
                            }
                            if (h = [a ? m.firstChild : m.lastChild], a && v) {
                                c = m[x] || (m[x] = {}), l = c[e] || [], d = l[0] === N && l[1], f = l[0] === N && l[2], p = d && m.childNodes[d];
                                while (p = ++d && p && p[g] || (f = d = 0) || h.pop()) {
                                    if (1 === p.nodeType && ++f && p === t) {
                                        c[e] = [N, d, f];
                                        break
                                    }
                                }
                            } else {
                                if (v && (l = (t[x] || (t[x] = {}))[e]) && l[0] === N) {
                                    f = l[1]
                                } else {
                                    while (p = ++d && p && p[g] || (f = d = 0) || h.pop()) {
                                        if ((s ? p.nodeName.toLowerCase() === y : 1 === p.nodeType) && ++f && (v && ((p[x] || (p[x] = {}))[e] = [N, f]), p === t)) {
                                            break
                                        }
                                    }
                                }
                            }
                            return f -= i, f === r || 0 === f % r && f / r >= 0
                        }
                    }
                }, PSEUDO: function(e, t) {
                    var n, r = i.pseudos[e] || i.setFilters[e.toLowerCase()] || st.error("unsupported pseudo: " + e);
                    return r[x] ? r(t) : r.length > 1 ? (n = [e, e, "", t], i.setFilters.hasOwnProperty(e.toLowerCase()) ? ot(function(e, n) {
                        var i, o = r(e, t), a = o.length;
                        while (a--) {
                            i = M.call(e, o[a]), e[i] = !(n[i] = o[a])
                        }
                    }) : function(e) {
                        return r(e, 0, n)
                    }) : r
                }}, pseudos: {not: ot(function(e) {
                    var t = [], n = [], r = s(e.replace(W, "$1"));
                    return r[x] ? ot(function(e, t, n, i) {
                        var o, a = r(e, null, i, []), s = e.length;
                        while (s--) {
                            (o = a[s]) && (e[s] = !(t[s] = o))
                        }
                    }) : function(e, i, o) {
                        return t[0] = e, r(t, null, o, n), !n.pop()
                    }
                }), has: ot(function(e) {
                    return function(t) {
                        return st(e, t).length > 0
                    }
                }), contains: ot(function(e) {
                    return function(t) {
                        return(t.textContent || t.innerText || o(t)).indexOf(e) > -1
                    }
                }), lang: ot(function(e) {
                    return X.test(e || "") || st.error("unsupported lang: " + e), e = e.replace(et, tt).toLowerCase(), function(t) {
                        var n;
                        do {
                            if (n = d ? t.getAttribute("xml:lang") || t.getAttribute("lang") : t.lang) {
                                return n = n.toLowerCase(), n === e || 0 === n.indexOf(e + "-")
                            }
                        } while ((t = t.parentNode) && 1 === t.nodeType);
                        return !1
                    }
                }), target: function(t) {
                    var n = e.location && e.location.hash;
                    return n && n.slice(1) === t.id
                }, root: function(e) {
                    return e === f
                }, focus: function(e) {
                    return e === p.activeElement && (!p.hasFocus || p.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                }, enabled: function(e) {
                    return e.disabled === !1
                }, disabled: function(e) {
                    return e.disabled === !0
                }, checked: function(e) {
                    var t = e.nodeName.toLowerCase();
                    return"input" === t && !!e.checked || "option" === t && !!e.selected
                }, selected: function(e) {
                    return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
                }, empty: function(e) {
                    for (e = e.firstChild; e; e = e.nextSibling) {
                        if (e.nodeName > "@" || 3 === e.nodeType || 4 === e.nodeType) {
                            return !1
                        }
                    }
                    return !0
                }, parent: function(e) {
                    return !i.pseudos.empty(e)
                }, header: function(e) {
                    return Q.test(e.nodeName)
                }, input: function(e) {
                    return G.test(e.nodeName)
                }, button: function(e) {
                    var t = e.nodeName.toLowerCase();
                    return"input" === t && "button" === e.type || "button" === t
                }, text: function(e) {
                    var t;
                    return"input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || t.toLowerCase() === e.type)
                }, first: pt(function() {
                    return[0]
                }), last: pt(function(e, t) {
                    return[t - 1]
                }), eq: pt(function(e, t, n) {
                    return[0 > n ? n + t : n]
                }), even: pt(function(e, t) {
                    var n = 0;
                    for (; t > n; n += 2) {
                        e.push(n)
                    }
                    return e
                }), odd: pt(function(e, t) {
                    var n = 1;
                    for (; t > n; n += 2) {
                        e.push(n)
                    }
                    return e
                }), lt: pt(function(e, t, n) {
                    var r = 0 > n ? n + t : n;
                    for (; --r >= 0; ) {
                        e.push(r)
                    }
                    return e
                }), gt: pt(function(e, t, n) {
                    var r = 0 > n ? n + t : n;
                    for (; t > ++r; ) {
                        e.push(r)
                    }
                    return e
                })}};
        for (n in {radio: !0, checkbox: !0, file: !0, password: !0, image: !0}) {
            i.pseudos[n] = lt(n)
        }
        for (n in {submit: !0, reset: !0}) {
            i.pseudos[n] = ct(n)
        }
        function ft(e, t) {
            var n, r, o, a, s, u, l, c = E[e + " "];
            if (c) {
                return t ? 0 : c.slice(0)
            }
            s = e, u = [], l = i.preFilter;
            while (s) {
                (!n || (r = $.exec(s))) && (r && (s = s.slice(r[0].length) || s), u.push(o = [])), n = !1, (r = I.exec(s)) && (n = r.shift(), o.push({value: n, type: r[0].replace(W, " ")}), s = s.slice(n.length));
                for (a in i.filter) {
                    !(r = U[a].exec(s)) || l[a] && !(r = l[a](r)) || (n = r.shift(), o.push({value: n, type: a, matches: r}), s = s.slice(n.length))
                }
                if (!n) {
                    break
                }
            }
            return t ? s.length : s ? st.error(e) : E(e, u).slice(0)
        }
        function dt(e) {
            var t = 0, n = e.length, r = "";
            for (; n > t; t++) {
                r += e[t].value
            }
            return r
        }
        function ht(e, t, n) {
            var i = t.dir, o = n && "parentNode" === i, a = C++;
            return t.first ? function(t, n, r) {
                while (t = t[i]) {
                    if (1 === t.nodeType || o) {
                        return e(t, n, r)
                    }
                }
            } : function(t, n, s) {
                var u, l, c, p = N + " " + a;
                if (s) {
                    while (t = t[i]) {
                        if ((1 === t.nodeType || o) && e(t, n, s)) {
                            return !0
                        }
                    }
                } else {
                    while (t = t[i]) {
                        if (1 === t.nodeType || o) {
                            if (c = t[x] || (t[x] = {}), (l = c[i]) && l[0] === p) {
                                if ((u = l[1]) === !0 || u === r) {
                                    return u === !0
                                }
                            } else {
                                if (l = c[i] = [p], l[1] = e(t, n, s) || r, l[1] === !0) {
                                    return !0
                                }
                            }
                        }
                    }
                }
            }
        }
        function gt(e) {
            return e.length > 1 ? function(t, n, r) {
                var i = e.length;
                while (i--) {
                    if (!e[i](t, n, r)) {
                        return !1
                    }
                }
                return !0
            } : e[0]
        }
        function mt(e, t, n, r, i) {
            var o, a = [], s = 0, u = e.length, l = null != t;
            for (; u > s; s++) {
                (o = e[s]) && (!n || n(o, r, i)) && (a.push(o), l && t.push(s))
            }
            return a
        }
        function yt(e, t, n, r, i, o) {
            return r && !r[x] && (r = yt(r)), i && !i[x] && (i = yt(i, o)), ot(function(o, a, s, u) {
                var l, c, p, f = [], d = [], h = a.length, g = o || xt(t || "*", s.nodeType ? [s] : s, []), m = !e || !o && t ? g : mt(g, f, e, s, u), y = n ? i || (o ? e : h || r) ? [] : a : m;
                if (n && n(m, y, s, u), r) {
                    l = mt(y, d), r(l, [], s, u), c = l.length;
                    while (c--) {
                        (p = l[c]) && (y[d[c]] = !(m[d[c]] = p))
                    }
                }
                if (o) {
                    if (i || e) {
                        if (i) {
                            l = [], c = y.length;
                            while (c--) {
                                (p = y[c]) && l.push(m[c] = p)
                            }
                            i(null, y = [], l, u)
                        }
                        c = y.length;
                        while (c--) {
                            (p = y[c]) && (l = i ? M.call(o, p) : f[c]) > -1 && (o[l] = !(a[l] = p))
                        }
                    }
                } else {
                    y = mt(y === a ? y.splice(h, y.length) : y), i ? i(null, a, y, u) : H.apply(a, y)
                }
            })
        }
        function vt(e) {
            var t, n, r, o = e.length, a = i.relative[e[0].type], s = a || i.relative[" "], u = a ? 1 : 0, c = ht(function(e) {
                return e === t
            }, s, !0), p = ht(function(e) {
                return M.call(t, e) > -1
            }, s, !0), f = [function(e, n, r) {
                    return !a && (r || n !== l) || ((t = n).nodeType ? c(e, n, r) : p(e, n, r))
                }];
            for (; o > u; u++) {
                if (n = i.relative[e[u].type]) {
                    f = [ht(gt(f), n)]
                } else {
                    if (n = i.filter[e[u].type].apply(null, e[u].matches), n[x]) {
                        for (r = ++u; o > r; r++) {
                            if (i.relative[e[r].type]) {
                                break
                            }
                        }
                        return yt(u > 1 && gt(f), u > 1 && dt(e.slice(0, u - 1)).replace(W, "$1"), n, r > u && vt(e.slice(u, r)), o > r && vt(e = e.slice(r)), o > r && dt(e))
                    }
                    f.push(n)
                }
            }
            return gt(f)
        }
        function bt(e, t) {
            var n = 0, o = t.length > 0, a = e.length > 0, s = function(s, u, c, f, d) {
                var h, g, m, y = [], v = 0, b = "0", x = s && [], w = null != d, T = l, C = s || a && i.find.TAG("*", d && u.parentNode || u), k = N += null == T ? 1 : Math.random() || 0.1;
                for (w && (l = u !== p && u, r = n); null != (h = C[b]); b++) {
                    if (a && h) {
                        g = 0;
                        while (m = e[g++]) {
                            if (m(h, u, c)) {
                                f.push(h);
                                break
                            }
                        }
                        w && (N = k, r = ++n)
                    }
                    o && ((h = !m && h) && v--, s && x.push(h))
                }
                if (v += b, o && b !== v) {
                    g = 0;
                    while (m = t[g++]) {
                        m(x, y, u, c)
                    }
                    if (s) {
                        if (v > 0) {
                            while (b--) {
                                x[b] || y[b] || (y[b] = L.call(f))
                            }
                        }
                        y = mt(y)
                    }
                    H.apply(f, y), w && !s && y.length > 0 && v + t.length > 1 && st.uniqueSort(f)
                }
                return w && (N = k, l = T), x
            };
            return o ? ot(s) : s
        }
        s = st.compile = function(e, t) {
            var n, r = [], i = [], o = S[e + " "];
            if (!o) {
                t || (t = ft(e)), n = t.length;
                while (n--) {
                    o = vt(t[n]), o[x] ? r.push(o) : i.push(o)
                }
                o = S(e, bt(i, r))
            }
            return o
        };
        function xt(e, t, n) {
            var r = 0, i = t.length;
            for (; i > r; r++) {
                st(e, t[r], n)
            }
            return n
        }
        function wt(e, t, n, r) {
            var o, a, u, l, c, p = ft(e);
            if (!r && 1 === p.length) {
                if (a = p[0] = p[0].slice(0), a.length > 2 && "ID" === (u = a[0]).type && 9 === t.nodeType && !d && i.relative[a[1].type]) {
                    if (t = i.find.ID(u.matches[0].replace(et, tt), t)[0], !t) {
                        return n
                    }
                    e = e.slice(a.shift().value.length)
                }
                o = U.needsContext.test(e) ? 0 : a.length;
                while (o--) {
                    if (u = a[o], i.relative[l = u.type]) {
                        break
                    }
                    if ((c = i.find[l]) && (r = c(u.matches[0].replace(et, tt), V.test(a[0].type) && t.parentNode || t))) {
                        if (a.splice(o, 1), e = r.length && dt(a), !e) {
                            return H.apply(n, q.call(r, 0)), n
                        }
                        break
                    }
                }
            }
            return s(e, p)(r, t, d, n, V.test(e)), n
        }
        i.pseudos.nth = i.pseudos.eq;
        function Tt() {
        }
        i.filters = Tt.prototype = i.pseudos, i.setFilters = new Tt, c(), st.attr = b.attr, b.find = st, b.expr = st.selectors, b.expr[":"] = b.expr.pseudos, b.unique = st.uniqueSort, b.text = st.getText, b.isXMLDoc = st.isXML, b.contains = st.contains
    }(e);
    var at = /Until$/, st = /^(?:parents|prev(?:Until|All))/, ut = /^.[^:#\[\.,]*$/, lt = b.expr.match.needsContext, ct = {children: !0, contents: !0, next: !0, prev: !0};
    b.fn.extend({find: function(e) {
            var t, n, r, i = this.length;
            if ("string" != typeof e) {
                return r = this, this.pushStack(b(e).filter(function() {
                    for (t = 0; i > t; t++) {
                        if (b.contains(r[t], this)) {
                            return !0
                        }
                    }
                }))
            }
            for (n = [], t = 0; i > t; t++) {
                b.find(e, this[t], n)
            }
            return n = this.pushStack(i > 1 ? b.unique(n) : n), n.selector = (this.selector ? this.selector + " " : "") + e, n
        }, has: function(e) {
            var t, n = b(e, this), r = n.length;
            return this.filter(function() {
                for (t = 0; r > t; t++) {
                    if (b.contains(this, n[t])) {
                        return !0
                    }
                }
            })
        }, not: function(e) {
            return this.pushStack(ft(this, e, !1))
        }, filter: function(e) {
            return this.pushStack(ft(this, e, !0))
        }, is: function(e) {
            return !!e && ("string" == typeof e ? lt.test(e) ? b(e, this.context).index(this[0]) >= 0 : b.filter(e, this).length > 0 : this.filter(e).length > 0)
        }, closest: function(e, t) {
            var n, r = 0, i = this.length, o = [], a = lt.test(e) || "string" != typeof e ? b(e, t || this.context) : 0;
            for (; i > r; r++) {
                n = this[r];
                while (n && n.ownerDocument && n !== t && 11 !== n.nodeType) {
                    if (a ? a.index(n) > -1 : b.find.matchesSelector(n, e)) {
                        o.push(n);
                        break
                    }
                    n = n.parentNode
                }
            }
            return this.pushStack(o.length > 1 ? b.unique(o) : o)
        }, index: function(e) {
            return e ? "string" == typeof e ? b.inArray(this[0], b(e)) : b.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
        }, add: function(e, t) {
            var n = "string" == typeof e ? b(e, t) : b.makeArray(e && e.nodeType ? [e] : e), r = b.merge(this.get(), n);
            return this.pushStack(b.unique(r))
        }, addBack: function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }}), b.fn.andSelf = b.fn.addBack;
    function pt(e, t) {
        do {
            e = e[t]
        } while (e && 1 !== e.nodeType);
        return e
    }
    b.each({parent: function(e) {
            var t = e.parentNode;
            return t && 11 !== t.nodeType ? t : null
        }, parents: function(e) {
            return b.dir(e, "parentNode")
        }, parentsUntil: function(e, t, n) {
            return b.dir(e, "parentNode", n)
        }, next: function(e) {
            return pt(e, "nextSibling")
        }, prev: function(e) {
            return pt(e, "previousSibling")
        }, nextAll: function(e) {
            return b.dir(e, "nextSibling")
        }, prevAll: function(e) {
            return b.dir(e, "previousSibling")
        }, nextUntil: function(e, t, n) {
            return b.dir(e, "nextSibling", n)
        }, prevUntil: function(e, t, n) {
            return b.dir(e, "previousSibling", n)
        }, siblings: function(e) {
            return b.sibling((e.parentNode || {}).firstChild, e)
        }, children: function(e) {
            return b.sibling(e.firstChild)
        }, contents: function(e) {
            return b.nodeName(e, "iframe") ? e.contentDocument || e.contentWindow.document : b.merge([], e.childNodes)
        }}, function(e, t) {
        b.fn[e] = function(n, r) {
            var i = b.map(this, t, n);
            return at.test(e) || (r = n), r && "string" == typeof r && (i = b.filter(r, i)), i = this.length > 1 && !ct[e] ? b.unique(i) : i, this.length > 1 && st.test(e) && (i = i.reverse()), this.pushStack(i)
        }
    }), b.extend({filter: function(e, t, n) {
            return n && (e = ":not(" + e + ")"), 1 === t.length ? b.find.matchesSelector(t[0], e) ? [t[0]] : [] : b.find.matches(e, t)
        }, dir: function(e, n, r) {
            var i = [], o = e[n];
            while (o && 9 !== o.nodeType && (r === t || 1 !== o.nodeType || !b(o).is(r))) {
                1 === o.nodeType && i.push(o), o = o[n]
            }
            return i
        }, sibling: function(e, t) {
            var n = [];
            for (; e; e = e.nextSibling) {
                1 === e.nodeType && e !== t && n.push(e)
            }
            return n
        }});
    function ft(e, t, n) {
        if (t = t || 0, b.isFunction(t)) {
            return b.grep(e, function(e, r) {
                var i = !!t.call(e, r, e);
                return i === n
            })
        }
        if (t.nodeType) {
            return b.grep(e, function(e) {
                return e === t === n
            })
        }
        if ("string" == typeof t) {
            var r = b.grep(e, function(e) {
                return 1 === e.nodeType
            });
            if (ut.test(t)) {
                return b.filter(t, r, !n)
            }
            t = b.filter(t, r)
        }
        return b.grep(e, function(e) {
            return b.inArray(e, t) >= 0 === n
        })
    }
    function dt(e) {
        var t = ht.split("|"), n = e.createDocumentFragment();
        if (n.createElement) {
            while (t.length) {
                n.createElement(t.pop())
            }
        }
        return n
    }
    var ht = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video", gt = / jQuery\d+="(?:null|\d+)"/g, mt = RegExp("<(?:" + ht + ")[\\s/>]", "i"), yt = /^\s+/, vt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, bt = /<([\w:]+)/, xt = /<tbody/i, wt = /<|&#?\w+;/, Tt = /<(?:script|style|link)/i, Nt = /^(?:checkbox|radio)$/i, Ct = /checked\s*(?:[^=]|=\s*.checked.)/i, kt = /^$|\/(?:java|ecma)script/i, Et = /^true\/(.*)/, St = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, At = {option: [1, "<select multiple='multiple'>", "</select>"], legend: [1, "<fieldset>", "</fieldset>"], area: [1, "<map>", "</map>"], param: [1, "<object>", "</object>"], thead: [1, "<table>", "</table>"], tr: [2, "<table><tbody>", "</tbody></table>"], col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], _default: b.support.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]}, jt = dt(o), Dt = jt.appendChild(o.createElement("div"));
    At.optgroup = At.option, At.tbody = At.tfoot = At.colgroup = At.caption = At.thead, At.th = At.td, b.fn.extend({text: function(e) {
            return b.access(this, function(e) {
                return e === t ? b.text(this) : this.empty().append((this[0] && this[0].ownerDocument || o).createTextNode(e))
            }, null, e, arguments.length)
        }, wrapAll: function(e) {
            if (b.isFunction(e)) {
                return this.each(function(t) {
                    b(this).wrapAll(e.call(this, t))
                })
            }
            if (this[0]) {
                var t = b(e, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
                    var e = this;
                    while (e.firstChild && 1 === e.firstChild.nodeType) {
                        e = e.firstChild
                    }
                    return e
                }).append(this)
            }
            return this
        }, wrapInner: function(e) {
            return b.isFunction(e) ? this.each(function(t) {
                b(this).wrapInner(e.call(this, t))
            }) : this.each(function() {
                var t = b(this), n = t.contents();
                n.length ? n.wrapAll(e) : t.append(e)
            })
        }, wrap: function(e) {
            var t = b.isFunction(e);
            return this.each(function(n) {
                b(this).wrapAll(t ? e.call(this, n) : e)
            })
        }, unwrap: function() {
            return this.parent().each(function() {
                b.nodeName(this, "body") || b(this).replaceWith(this.childNodes)
            }).end()
        }, append: function() {
            return this.domManip(arguments, !0, function(e) {
                (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && this.appendChild(e)
            })
        }, prepend: function() {
            return this.domManip(arguments, !0, function(e) {
                (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && this.insertBefore(e, this.firstChild)
            })
        }, before: function() {
            return this.domManip(arguments, !1, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this)
            })
        }, after: function() {
            return this.domManip(arguments, !1, function(e) {
                this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
            })
        }, remove: function(e, t) {
            var n, r = 0;
            for (; null != (n = this[r]); r++) {
                (!e || b.filter(e, [n]).length > 0) && (t || 1 !== n.nodeType || b.cleanData(Ot(n)), n.parentNode && (t && b.contains(n.ownerDocument, n) && Mt(Ot(n, "script")), n.parentNode.removeChild(n)))
            }
            return this
        }, empty: function() {
            var e, t = 0;
            for (; null != (e = this[t]); t++) {
                1 === e.nodeType && b.cleanData(Ot(e, !1));
                while (e.firstChild) {
                    e.removeChild(e.firstChild)
                }
                e.options && b.nodeName(e, "select") && (e.options.length = 0)
            }
            return this
        }, clone: function(e, t) {
            return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function() {
                return b.clone(this, e, t)
            })
        }, html: function(e) {
            return b.access(this, function(e) {
                var n = this[0] || {}, r = 0, i = this.length;
                if (e === t) {
                    return 1 === n.nodeType ? n.innerHTML.replace(gt, "") : t
                }
                if (!("string" != typeof e || Tt.test(e) || !b.support.htmlSerialize && mt.test(e) || !b.support.leadingWhitespace && yt.test(e) || At[(bt.exec(e) || ["", ""])[1].toLowerCase()])) {
                    e = e.replace(vt, "<$1></$2>");
                    try {
                        for (; i > r; r++) {
                            n = this[r] || {}, 1 === n.nodeType && (b.cleanData(Ot(n, !1)), n.innerHTML = e)
                        }
                        n = 0
                    } catch (o) {
                    }
                }
                n && this.empty().append(e)
            }, null, e, arguments.length)
        }, replaceWith: function(e) {
            var t = b.isFunction(e);
            return t || "string" == typeof e || (e = b(e).not(this).detach()), this.domManip([e], !0, function(e) {
                var t = this.nextSibling, n = this.parentNode;
                n && (b(this).remove(), n.insertBefore(e, t))
            })
        }, detach: function(e) {
            return this.remove(e, !0)
        }, domManip: function(e, n, r) {
            e = f.apply([], e);
            var i, o, a, s, u, l, c = 0, p = this.length, d = this, h = p - 1, g = e[0], m = b.isFunction(g);
            if (m || !(1 >= p || "string" != typeof g || b.support.checkClone) && Ct.test(g)) {
                return this.each(function(i) {
                    var o = d.eq(i);
                    m && (e[0] = g.call(this, i, n ? o.html() : t)), o.domManip(e, n, r)
                })
            }
            if (p && (l = b.buildFragment(e, this[0].ownerDocument, !1, this), i = l.firstChild, 1 === l.childNodes.length && (l = i), i)) {
                for (n = n && b.nodeName(i, "tr"), s = b.map(Ot(l, "script"), Ht), a = s.length; p > c; c++) {
                    o = l, c !== h && (o = b.clone(o, !0, !0), a && b.merge(s, Ot(o, "script"))), r.call(n && b.nodeName(this[c], "table") ? Lt(this[c], "tbody") : this[c], o, c)
                }
                if (a) {
                    for (u = s[s.length - 1].ownerDocument, b.map(s, qt), c = 0; a > c; c++) {
                        o = s[c], kt.test(o.type || "") && !b._data(o, "globalEval") && b.contains(u, o) && (o.src ? b.ajax({url: o.src, type: "GET", dataType: "script", async: !1, global: !1, "throws": !0}) : b.globalEval((o.text || o.textContent || o.innerHTML || "").replace(St, "")))
                    }
                }
                l = i = null
            }
            return this
        }});
    function Lt(e, t) {
        return e.getElementsByTagName(t)[0] || e.appendChild(e.ownerDocument.createElement(t))
    }
    function Ht(e) {
        var t = e.getAttributeNode("type");
        return e.type = (t && t.specified) + "/" + e.type, e
    }
    function qt(e) {
        var t = Et.exec(e.type);
        return t ? e.type = t[1] : e.removeAttribute("type"), e
    }
    function Mt(e, t) {
        var n, r = 0;
        for (; null != (n = e[r]); r++) {
            b._data(n, "globalEval", !t || b._data(t[r], "globalEval"))
        }
    }
    function _t(e, t) {
        if (1 === t.nodeType && b.hasData(e)) {
            var n, r, i, o = b._data(e), a = b._data(t, o), s = o.events;
            if (s) {
                delete a.handle, a.events = {};
                for (n in s) {
                    for (r = 0, i = s[n].length; i > r; r++) {
                        b.event.add(t, n, s[n][r])
                    }
                }
            }
            a.data && (a.data = b.extend({}, a.data))
        }
    }
    function Ft(e, t) {
        var n, r, i;
        if (1 === t.nodeType) {
            if (n = t.nodeName.toLowerCase(), !b.support.noCloneEvent && t[b.expando]) {
                i = b._data(t);
                for (r in i.events) {
                    b.removeEvent(t, r, i.handle)
                }
                t.removeAttribute(b.expando)
            }
            "script" === n && t.text !== e.text ? (Ht(t).text = e.text, qt(t)) : "object" === n ? (t.parentNode && (t.outerHTML = e.outerHTML), b.support.html5Clone && e.innerHTML && !b.trim(t.innerHTML) && (t.innerHTML = e.innerHTML)) : "input" === n && Nt.test(e.type) ? (t.defaultChecked = t.checked = e.checked, t.value !== e.value && (t.value = e.value)) : "option" === n ? t.defaultSelected = t.selected = e.defaultSelected : ("input" === n || "textarea" === n) && (t.defaultValue = e.defaultValue)
        }
    }
    b.each({appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith"}, function(e, t) {
        b.fn[e] = function(e) {
            var n, r = 0, i = [], o = b(e), a = o.length - 1;
            for (; a >= r; r++) {
                n = r === a ? this : this.clone(!0), b(o[r])[t](n), d.apply(i, n.get())
            }
            return this.pushStack(i)
        }
    });
    function Ot(e, n) {
        var r, o, a = 0, s = typeof e.getElementsByTagName !== i ? e.getElementsByTagName(n || "*") : typeof e.querySelectorAll !== i ? e.querySelectorAll(n || "*") : t;
        if (!s) {
            for (s = [], r = e.childNodes || e; null != (o = r[a]); a++) {
                !n || b.nodeName(o, n) ? s.push(o) : b.merge(s, Ot(o, n))
            }
        }
        return n === t || n && b.nodeName(e, n) ? b.merge([e], s) : s
    }
    function Bt(e) {
        Nt.test(e.type) && (e.defaultChecked = e.checked)
    }
    b.extend({clone: function(e, t, n) {
            var r, i, o, a, s, u = b.contains(e.ownerDocument, e);
            if (b.support.html5Clone || b.isXMLDoc(e) || !mt.test("<" + e.nodeName + ">") ? o = e.cloneNode(!0) : (Dt.innerHTML = e.outerHTML, Dt.removeChild(o = Dt.firstChild)), !(b.support.noCloneEvent && b.support.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || b.isXMLDoc(e))) {
                for (r = Ot(o), s = Ot(e), a = 0; null != (i = s[a]); ++a) {
                    r[a] && Ft(i, r[a])
                }
            }
            if (t) {
                if (n) {
                    for (s = s || Ot(e), r = r || Ot(o), a = 0; null != (i = s[a]); a++) {
                        _t(i, r[a])
                    }
                } else {
                    _t(e, o)
                }
            }
            return r = Ot(o, "script"), r.length > 0 && Mt(r, !u && Ot(e, "script")), r = s = i = null, o
        }, buildFragment: function(e, t, n, r) {
            var i, o, a, s, u, l, c, p = e.length, f = dt(t), d = [], h = 0;
            for (; p > h; h++) {
                if (o = e[h], o || 0 === o) {
                    if ("object" === b.type(o)) {
                        b.merge(d, o.nodeType ? [o] : o)
                    } else {
                        if (wt.test(o)) {
                            s = s || f.appendChild(t.createElement("div")), u = (bt.exec(o) || ["", ""])[1].toLowerCase(), c = At[u] || At._default, s.innerHTML = c[1] + o.replace(vt, "<$1></$2>") + c[2], i = c[0];
                            while (i--) {
                                s = s.lastChild
                            }
                            if (!b.support.leadingWhitespace && yt.test(o) && d.push(t.createTextNode(yt.exec(o)[0])), !b.support.tbody) {
                                o = "table" !== u || xt.test(o) ? "<table>" !== c[1] || xt.test(o) ? 0 : s : s.firstChild, i = o && o.childNodes.length;
                                while (i--) {
                                    b.nodeName(l = o.childNodes[i], "tbody") && !l.childNodes.length && o.removeChild(l)
                                }
                            }
                            b.merge(d, s.childNodes), s.textContent = "";
                            while (s.firstChild) {
                                s.removeChild(s.firstChild)
                            }
                            s = f.lastChild
                        } else {
                            d.push(t.createTextNode(o))
                        }
                    }
                }
            }
            s && f.removeChild(s), b.support.appendChecked || b.grep(Ot(d, "input"), Bt), h = 0;
            while (o = d[h++]) {
                if ((!r || -1 === b.inArray(o, r)) && (a = b.contains(o.ownerDocument, o), s = Ot(f.appendChild(o), "script"), a && Mt(s), n)) {
                    i = 0;
                    while (o = s[i++]) {
                        kt.test(o.type || "") && n.push(o)
                    }
                }
            }
            return s = null, f
        }, cleanData: function(e, t) {
            var n, r, o, a, s = 0, u = b.expando, l = b.cache, p = b.support.deleteExpando, f = b.event.special;
            for (; null != (n = e[s]); s++) {
                if ((t || b.acceptData(n)) && (o = n[u], a = o && l[o])) {
                    if (a.events) {
                        for (r in a.events) {
                            f[r] ? b.event.remove(n, r) : b.removeEvent(n, r, a.handle)
                        }
                    }
                    l[o] && (delete l[o], p ? delete n[u] : typeof n.removeAttribute !== i ? n.removeAttribute(u) : n[u] = null, c.push(o))
                }
            }
        }});
    var Pt, Rt, Wt, $t = /alpha\([^)]*\)/i, It = /opacity\s*=\s*([^)]*)/, zt = /^(top|right|bottom|left)$/, Xt = /^(none|table(?!-c[ea]).+)/, Ut = /^margin/, Vt = RegExp("^(" + x + ")(.*)$", "i"), Yt = RegExp("^(" + x + ")(?!px)[a-z%]+$", "i"), Jt = RegExp("^([+-])=(" + x + ")", "i"), Gt = {BODY: "block"}, Qt = {position: "absolute", visibility: "hidden", display: "block"}, Kt = {letterSpacing: 0, fontWeight: 400}, Zt = ["Top", "Right", "Bottom", "Left"], en = ["Webkit", "O", "Moz", "ms"];
    function tn(e, t) {
        if (t in e) {
            return t
        }
        var n = t.charAt(0).toUpperCase() + t.slice(1), r = t, i = en.length;
        while (i--) {
            if (t = en[i] + n, t in e) {
                return t
            }
        }
        return r
    }
    function nn(e, t) {
        return e = t || e, "none" === b.css(e, "display") || !b.contains(e.ownerDocument, e)
    }
    function rn(e, t) {
        var n, r, i, o = [], a = 0, s = e.length;
        for (; s > a; a++) {
            r = e[a], r.style && (o[a] = b._data(r, "olddisplay"), n = r.style.display, t ? (o[a] || "none" !== n || (r.style.display = ""), "" === r.style.display && nn(r) && (o[a] = b._data(r, "olddisplay", un(r.nodeName)))) : o[a] || (i = nn(r), (n && "none" !== n || !i) && b._data(r, "olddisplay", i ? n : b.css(r, "display"))))
        }
        for (a = 0; s > a; a++) {
            r = e[a], r.style && (t && "none" !== r.style.display && "" !== r.style.display || (r.style.display = t ? o[a] || "" : "none"))
        }
        return e
    }
    b.fn.extend({css: function(e, n) {
            return b.access(this, function(e, n, r) {
                var i, o, a = {}, s = 0;
                if (b.isArray(n)) {
                    for (o = Rt(e), i = n.length; i > s; s++) {
                        a[n[s]] = b.css(e, n[s], !1, o)
                    }
                    return a
                }
                return r !== t ? b.style(e, n, r) : b.css(e, n)
            }, e, n, arguments.length > 1)
        }, show: function() {
            return rn(this, !0)
        }, hide: function() {
            return rn(this)
        }, toggle: function(e) {
            var t = "boolean" == typeof e;
            return this.each(function() {
                (t ? e : nn(this)) ? b(this).show() : b(this).hide()
            })
        }}), b.extend({cssHooks: {opacity: {get: function(e, t) {
                    if (t) {
                        var n = Wt(e, "opacity");
                        return"" === n ? "1" : n
                    }
                }}}, cssNumber: {columnCount: !0, fillOpacity: !0, fontWeight: !0, lineHeight: !0, opacity: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0}, cssProps: {"float": b.support.cssFloat ? "cssFloat" : "styleFloat"}, style: function(e, n, r, i) {
            if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                var o, a, s, u = b.camelCase(n), l = e.style;
                if (n = b.cssProps[u] || (b.cssProps[u] = tn(l, u)), s = b.cssHooks[n] || b.cssHooks[u], r === t) {
                    return s && "get" in s && (o = s.get(e, !1, i)) !== t ? o : l[n]
                }
                if (a = typeof r, "string" === a && (o = Jt.exec(r)) && (r = (o[1] + 1) * o[2] + parseFloat(b.css(e, n)), a = "number"), !(null == r || "number" === a && isNaN(r) || ("number" !== a || b.cssNumber[u] || (r += "px"), b.support.clearCloneStyle || "" !== r || 0 !== n.indexOf("background") || (l[n] = "inherit"), s && "set" in s && (r = s.set(e, r, i)) === t))) {
                    try {
                        l[n] = r
                    } catch (c) {
                    }
                }
            }
        }, css: function(e, n, r, i) {
            var o, a, s, u = b.camelCase(n);
            return n = b.cssProps[u] || (b.cssProps[u] = tn(e.style, u)), s = b.cssHooks[n] || b.cssHooks[u], s && "get" in s && (a = s.get(e, !0, r)), a === t && (a = Wt(e, n, i)), "normal" === a && n in Kt && (a = Kt[n]), "" === r || r ? (o = parseFloat(a), r === !0 || b.isNumeric(o) ? o || 0 : a) : a
        }, swap: function(e, t, n, r) {
            var i, o, a = {};
            for (o in t) {
                a[o] = e.style[o], e.style[o] = t[o]
            }
            i = n.apply(e, r || []);
            for (o in t) {
                e.style[o] = a[o]
            }
            return i
        }}), e.getComputedStyle ? (Rt = function(t) {
        return e.getComputedStyle(t, null)
    }, Wt = function(e, n, r) {
        var i, o, a, s = r || Rt(e), u = s ? s.getPropertyValue(n) || s[n] : t, l = e.style;
        return s && ("" !== u || b.contains(e.ownerDocument, e) || (u = b.style(e, n)), Yt.test(u) && Ut.test(n) && (i = l.width, o = l.minWidth, a = l.maxWidth, l.minWidth = l.maxWidth = l.width = u, u = s.width, l.width = i, l.minWidth = o, l.maxWidth = a)), u
    }) : o.documentElement.currentStyle && (Rt = function(e) {
        return e.currentStyle
    }, Wt = function(e, n, r) {
        var i, o, a, s = r || Rt(e), u = s ? s[n] : t, l = e.style;
        return null == u && l && l[n] && (u = l[n]), Yt.test(u) && !zt.test(n) && (i = l.left, o = e.runtimeStyle, a = o && o.left, a && (o.left = e.currentStyle.left), l.left = "fontSize" === n ? "1em" : u, u = l.pixelLeft + "px", l.left = i, a && (o.left = a)), "" === u ? "auto" : u
    });
    function on(e, t, n) {
        var r = Vt.exec(t);
        return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t
    }
    function an(e, t, n, r, i) {
        var o = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0, a = 0;
        for (; 4 > o; o += 2) {
            "margin" === n && (a += b.css(e, n + Zt[o], !0, i)), r ? ("content" === n && (a -= b.css(e, "padding" + Zt[o], !0, i)), "margin" !== n && (a -= b.css(e, "border" + Zt[o] + "Width", !0, i))) : (a += b.css(e, "padding" + Zt[o], !0, i), "padding" !== n && (a += b.css(e, "border" + Zt[o] + "Width", !0, i)))
        }
        return a
    }
    function sn(e, t, n) {
        var r = !0, i = "width" === t ? e.offsetWidth : e.offsetHeight, o = Rt(e), a = b.support.boxSizing && "border-box" === b.css(e, "boxSizing", !1, o);
        if (0 >= i || null == i) {
            if (i = Wt(e, t, o), (0 > i || null == i) && (i = e.style[t]), Yt.test(i)) {
                return i
            }
            r = a && (b.support.boxSizingReliable || i === e.style[t]), i = parseFloat(i) || 0
        }
        return i + an(e, t, n || (a ? "border" : "content"), r, o) + "px"
    }
    function un(e) {
        var t = o, n = Gt[e];
        return n || (n = ln(e, t), "none" !== n && n || (Pt = (Pt || b("<iframe frameborder='0' width='0' height='0'/>").css("cssText", "display:block !important")).appendTo(t.documentElement), t = (Pt[0].contentWindow || Pt[0].contentDocument).document, t.write("<!doctype html><html><body>"), t.close(), n = ln(e, t), Pt.detach()), Gt[e] = n), n
    }
    function ln(e, t) {
        var n = b(t.createElement(e)).appendTo(t.body), r = b.css(n[0], "display");
        return n.remove(), r
    }
    b.each(["height", "width"], function(e, n) {
        b.cssHooks[n] = {get: function(e, r, i) {
                return r ? 0 === e.offsetWidth && Xt.test(b.css(e, "display")) ? b.swap(e, Qt, function() {
                    return sn(e, n, i)
                }) : sn(e, n, i) : t
            }, set: function(e, t, r) {
                var i = r && Rt(e);
                return on(e, t, r ? an(e, n, r, b.support.boxSizing && "border-box" === b.css(e, "boxSizing", !1, i), i) : 0)
            }}
    }), b.support.opacity || (b.cssHooks.opacity = {get: function(e, t) {
            return It.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? 0.01 * parseFloat(RegExp.$1) + "" : t ? "1" : ""
        }, set: function(e, t) {
            var n = e.style, r = e.currentStyle, i = b.isNumeric(t) ? "alpha(opacity=" + 100 * t + ")" : "", o = r && r.filter || n.filter || "";
            n.zoom = 1, (t >= 1 || "" === t) && "" === b.trim(o.replace($t, "")) && n.removeAttribute && (n.removeAttribute("filter"), "" === t || r && !r.filter) || (n.filter = $t.test(o) ? o.replace($t, i) : o + " " + i)
        }}), b(function() {
        b.support.reliableMarginRight || (b.cssHooks.marginRight = {get: function(e, n) {
                return n ? b.swap(e, {display: "inline-block"}, Wt, [e, "marginRight"]) : t
            }}), !b.support.pixelPosition && b.fn.position && b.each(["top", "left"], function(e, n) {
            b.cssHooks[n] = {get: function(e, r) {
                    return r ? (r = Wt(e, n), Yt.test(r) ? b(e).position()[n] + "px" : r) : t
                }}
        })
    }), b.expr && b.expr.filters && (b.expr.filters.hidden = function(e) {
        return 0 >= e.offsetWidth && 0 >= e.offsetHeight || !b.support.reliableHiddenOffsets && "none" === (e.style && e.style.display || b.css(e, "display"))
    }, b.expr.filters.visible = function(e) {
        return !b.expr.filters.hidden(e)
    }), b.each({margin: "", padding: "", border: "Width"}, function(e, t) {
        b.cssHooks[e + t] = {expand: function(n) {
                var r = 0, i = {}, o = "string" == typeof n ? n.split(" ") : [n];
                for (; 4 > r; r++) {
                    i[e + Zt[r] + t] = o[r] || o[r - 2] || o[0]
                }
                return i
            }}, Ut.test(e) || (b.cssHooks[e + t].set = on)
    });
    var cn = /%20/g, pn = /\[\]$/, fn = /\r?\n/g, dn = /^(?:submit|button|image|reset|file)$/i, hn = /^(?:input|select|textarea|keygen)/i;
    b.fn.extend({serialize: function() {
            return b.param(this.serializeArray())
        }, serializeArray: function() {
            return this.map(function() {
                var e = b.prop(this, "elements");
                return e ? b.makeArray(e) : this
            }).filter(function() {
                var e = this.type;
                return this.name && !b(this).is(":disabled") && hn.test(this.nodeName) && !dn.test(e) && (this.checked || !Nt.test(e))
            }).map(function(e, t) {
                var n = b(this).val();
                return null == n ? null : b.isArray(n) ? b.map(n, function(e) {
                    return{name: t.name, value: e.replace(fn, "\r\n")}
                }) : {name: t.name, value: n.replace(fn, "\r\n")}
            }).get()
        }}), b.param = function(e, n) {
        var r, i = [], o = function(e, t) {
            t = b.isFunction(t) ? t() : null == t ? "" : t, i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
        };
        if (n === t && (n = b.ajaxSettings && b.ajaxSettings.traditional), b.isArray(e) || e.jquery && !b.isPlainObject(e)) {
            b.each(e, function() {
                o(this.name, this.value)
            })
        } else {
            for (r in e) {
                gn(r, e[r], n, o)
            }
        }
        return i.join("&").replace(cn, "+")
    };
    function gn(e, t, n, r) {
        var i;
        if (b.isArray(t)) {
            b.each(t, function(t, i) {
                n || pn.test(e) ? r(e, i) : gn(e + "[" + ("object" == typeof i ? t : "") + "]", i, n, r)
            })
        } else {
            if (n || "object" !== b.type(t)) {
                r(e, t)
            } else {
                for (i in t) {
                    gn(e + "[" + i + "]", t[i], n, r)
                }
            }
        }
    }
    b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
        b.fn[t] = function(e, n) {
            return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
        }
    }), b.fn.hover = function(e, t) {
        return this.mouseenter(e).mouseleave(t || e)
    };
    var mn, yn, vn = b.now(), bn = /\?/, xn = /#.*$/, wn = /([?&])_=[^&]*/, Tn = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, Nn = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, Cn = /^(?:GET|HEAD)$/, kn = /^\/\//, En = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/, Sn = b.fn.load, An = {}, jn = {}, Dn = "*/".concat("*");
    try {
        yn = a.href
    } catch (Ln) {
        yn = o.createElement("a"), yn.href = "", yn = yn.href
    }
    mn = En.exec(yn.toLowerCase()) || [];
    function Hn(e) {
        return function(t, n) {
            "string" != typeof t && (n = t, t = "*");
            var r, i = 0, o = t.toLowerCase().match(w) || [];
            if (b.isFunction(n)) {
                while (r = o[i++]) {
                    "+" === r[0] ? (r = r.slice(1) || "*", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
                }
            }
        }
    }
    function qn(e, n, r, i) {
        var o = {}, a = e === jn;
        function s(u) {
            var l;
            return o[u] = !0, b.each(e[u] || [], function(e, u) {
                var c = u(n, r, i);
                return"string" != typeof c || a || o[c] ? a ? !(l = c) : t : (n.dataTypes.unshift(c), s(c), !1)
            }), l
        }
        return s(n.dataTypes[0]) || !o["*"] && s("*")
    }
    function Mn(e, n) {
        var r, i, o = b.ajaxSettings.flatOptions || {};
        for (i in n) {
            n[i] !== t && ((o[i] ? e : r || (r = {}))[i] = n[i])
        }
        return r && b.extend(!0, e, r), e
    }
    b.fn.load = function(e, n, r) {
        if ("string" != typeof e && Sn) {
            return Sn.apply(this, arguments)
        }
        var i, o, a, s = this, u = e.indexOf(" ");
        return u >= 0 && (i = e.slice(u, e.length), e = e.slice(0, u)), b.isFunction(n) ? (r = n, n = t) : n && "object" == typeof n && (a = "POST"), s.length > 0 && b.ajax({url: e, type: a, dataType: "html", data: n}).done(function(e) {
            o = arguments, s.html(i ? b("<div>").append(b.parseHTML(e)).find(i) : e)
        }).complete(r && function(e, t) {
            s.each(r, o || [e.responseText, t, e])
        }), this
    }, b.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(e, t) {
        b.fn[t] = function(e) {
            return this.on(t, e)
        }
    }), b.each(["get", "post"], function(e, n) {
        b[n] = function(e, r, i, o) {
            return b.isFunction(r) && (o = o || i, i = r, r = t), b.ajax({url: e, type: n, dataType: o, data: r, success: i})
        }
    }), b.extend({active: 0, lastModified: {}, etag: {}, ajaxSettings: {url: yn, type: "GET", isLocal: Nn.test(mn[1]), global: !0, processData: !0, async: !0, contentType: "application/x-www-form-urlencoded; charset=UTF-8", accepts: {"*": Dn, text: "text/plain", html: "text/html", xml: "application/xml, text/xml", json: "application/json, text/javascript"}, contents: {xml: /xml/, html: /html/, json: /json/}, responseFields: {xml: "responseXML", text: "responseText"}, converters: {"* text": e.String, "text html": !0, "text json": b.parseJSON, "text xml": b.parseXML}, flatOptions: {url: !0, context: !0}}, ajaxSetup: function(e, t) {
            return t ? Mn(Mn(e, b.ajaxSettings), t) : Mn(b.ajaxSettings, e)
        }, ajaxPrefilter: Hn(An), ajaxTransport: Hn(jn), ajax: function(e, n) {
            "object" == typeof e && (n = e, e = t), n = n || {};
            var r, i, o, a, s, u, l, c, p = b.ajaxSetup({}, n), f = p.context || p, d = p.context && (f.nodeType || f.jquery) ? b(f) : b.event, h = b.Deferred(), g = b.Callbacks("once memory"), m = p.statusCode || {}, y = {}, v = {}, x = 0, T = "canceled", N = {readyState: 0, getResponseHeader: function(e) {
                    var t;
                    if (2 === x) {
                        if (!c) {
                            c = {};
                            while (t = Tn.exec(a)) {
                                c[t[1].toLowerCase()] = t[2]
                            }
                        }
                        t = c[e.toLowerCase()]
                    }
                    return null == t ? null : t
                }, getAllResponseHeaders: function() {
                    return 2 === x ? a : null
                }, setRequestHeader: function(e, t) {
                    var n = e.toLowerCase();
                    return x || (e = v[n] = v[n] || e, y[e] = t), this
                }, overrideMimeType: function(e) {
                    return x || (p.mimeType = e), this
                }, statusCode: function(e) {
                    var t;
                    if (e) {
                        if (2 > x) {
                            for (t in e) {
                                m[t] = [m[t], e[t]]
                            }
                        } else {
                            N.always(e[N.status])
                        }
                    }
                    return this
                }, abort: function(e) {
                    var t = e || T;
                    return l && l.abort(t), k(0, t), this
                }};
            if (h.promise(N).complete = g.add, N.success = N.done, N.error = N.fail, p.url = ((e || p.url || yn) + "").replace(xn, "").replace(kn, mn[1] + "//"), p.type = n.method || n.type || p.method || p.type, p.dataTypes = b.trim(p.dataType || "*").toLowerCase().match(w) || [""], null == p.crossDomain && (r = En.exec(p.url.toLowerCase()), p.crossDomain = !(!r || r[1] === mn[1] && r[2] === mn[2] && (r[3] || ("http:" === r[1] ? 80 : 443)) == (mn[3] || ("http:" === mn[1] ? 80 : 443)))), p.data && p.processData && "string" != typeof p.data && (p.data = b.param(p.data, p.traditional)), qn(An, p, n, N), 2 === x) {
                return N
            }
            u = p.global, u && 0 === b.active++ && b.event.trigger("ajaxStart"), p.type = p.type.toUpperCase(), p.hasContent = !Cn.test(p.type), o = p.url, p.hasContent || (p.data && (o = p.url += (bn.test(o) ? "&" : "?") + p.data, delete p.data), p.cache === !1 && (p.url = wn.test(o) ? o.replace(wn, "$1_=" + vn++) : o + (bn.test(o) ? "&" : "?") + "_=" + vn++)), p.ifModified && (b.lastModified[o] && N.setRequestHeader("If-Modified-Since", b.lastModified[o]), b.etag[o] && N.setRequestHeader("If-None-Match", b.etag[o])), (p.data && p.hasContent && p.contentType !== !1 || n.contentType) && N.setRequestHeader("Content-Type", p.contentType), N.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + Dn + "; q=0.01" : "") : p.accepts["*"]);
            for (i in p.headers) {
                N.setRequestHeader(i, p.headers[i])
            }
            if (p.beforeSend && (p.beforeSend.call(f, N, p) === !1 || 2 === x)) {
                return N.abort()
            }
            T = "abort";
            for (i in {success: 1, error: 1, complete: 1}) {
                N[i](p[i])
            }
            if (l = qn(jn, p, n, N)) {
                N.readyState = 1, u && d.trigger("ajaxSend", [N, p]), p.async && p.timeout > 0 && (s = setTimeout(function() {
                    N.abort("timeout")
                }, p.timeout));
                try {
                    x = 1, l.send(y, k)
                } catch (C) {
                    if (!(2 > x)) {
                        throw C
                    }
                    k(-1, C)
                }
            } else {
                k(-1, "No Transport")
            }
            function k(e, n, r, i) {
                var c, y, v, w, T, C = n;
                2 !== x && (x = 2, s && clearTimeout(s), l = t, a = i || "", N.readyState = e > 0 ? 4 : 0, r && (w = _n(p, N, r)), e >= 200 && 300 > e || 304 === e ? (p.ifModified && (T = N.getResponseHeader("Last-Modified"), T && (b.lastModified[o] = T), T = N.getResponseHeader("etag"), T && (b.etag[o] = T)), 204 === e ? (c = !0, C = "nocontent") : 304 === e ? (c = !0, C = "notmodified") : (c = Fn(p, w), C = c.state, y = c.data, v = c.error, c = !v)) : (v = C, (e || !C) && (C = "error", 0 > e && (e = 0))), N.status = e, N.statusText = (n || C) + "", c ? h.resolveWith(f, [y, C, N]) : h.rejectWith(f, [N, C, v]), N.statusCode(m), m = t, u && d.trigger(c ? "ajaxSuccess" : "ajaxError", [N, p, c ? y : v]), g.fireWith(f, [N, C]), u && (d.trigger("ajaxComplete", [N, p]), --b.active || b.event.trigger("ajaxStop")))
            }
            return N
        }, getScript: function(e, n) {
            return b.get(e, t, n, "script")
        }, getJSON: function(e, t, n) {
            return b.get(e, t, n, "json")
        }});
    function _n(e, n, r) {
        var i, o, a, s, u = e.contents, l = e.dataTypes, c = e.responseFields;
        for (s in c) {
            s in r && (n[c[s]] = r[s])
        }
        while ("*" === l[0]) {
            l.shift(), o === t && (o = e.mimeType || n.getResponseHeader("Content-Type"))
        }
        if (o) {
            for (s in u) {
                if (u[s] && u[s].test(o)) {
                    l.unshift(s);
                    break
                }
            }
        }
        if (l[0] in r) {
            a = l[0]
        } else {
            for (s in r) {
                if (!l[0] || e.converters[s + " " + l[0]]) {
                    a = s;
                    break
                }
                i || (i = s)
            }
            a = a || i
        }
        return a ? (a !== l[0] && l.unshift(a), r[a]) : t
    }
    function Fn(e, t) {
        var n, r, i, o, a = {}, s = 0, u = e.dataTypes.slice(), l = u[0];
        if (e.dataFilter && (t = e.dataFilter(t, e.dataType)), u[1]) {
            for (i in e.converters) {
                a[i.toLowerCase()] = e.converters[i]
            }
        }
        for (; r = u[++s]; ) {
            if ("*" !== r) {
                if ("*" !== l && l !== r) {
                    if (i = a[l + " " + r] || a["* " + r], !i) {
                        for (n in a) {
                            if (o = n.split(" "), o[1] === r && (i = a[l + " " + o[0]] || a["* " + o[0]])) {
                                i === !0 ? i = a[n] : a[n] !== !0 && (r = o[0], u.splice(s--, 0, r));
                                break
                            }
                        }
                    }
                    if (i !== !0) {
                        if (i && e["throws"]) {
                            t = i(t)
                        } else {
                            try {
                                t = i(t)
                            } catch (c) {
                                return{state: "parsererror", error: i ? c : "No conversion from " + l + " to " + r}
                            }
                        }
                    }
                }
                l = r
            }
        }
        return{state: "success", data: t}
    }
    b.ajaxSetup({accepts: {script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"}, contents: {script: /(?:java|ecma)script/}, converters: {"text script": function(e) {
                return b.globalEval(e), e
            }}}), b.ajaxPrefilter("script", function(e) {
        e.cache === t && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1)
    }), b.ajaxTransport("script", function(e) {
        if (e.crossDomain) {
            var n, r = o.head || b("head")[0] || o.documentElement;
            return{send: function(t, i) {
                    n = o.createElement("script"), n.async = !0, e.scriptCharset && (n.charset = e.scriptCharset), n.src = e.url, n.onload = n.onreadystatechange = function(e, t) {
                        (t || !n.readyState || /loaded|complete/.test(n.readyState)) && (n.onload = n.onreadystatechange = null, n.parentNode && n.parentNode.removeChild(n), n = null, t || i(200, "success"))
                    }, r.insertBefore(n, r.firstChild)
                }, abort: function() {
                    n && n.onload(t, !0)
                }}
        }
    });
    var On = [], Bn = /(=)\?(?=&|$)|\?\?/;
    b.ajaxSetup({jsonp: "callback", jsonpCallback: function() {
            var e = On.pop() || b.expando + "_" + vn++;
            return this[e] = !0, e
        }}), b.ajaxPrefilter("json jsonp", function(n, r, i) {
        var o, a, s, u = n.jsonp !== !1 && (Bn.test(n.url) ? "url" : "string" == typeof n.data && !(n.contentType || "").indexOf("application/x-www-form-urlencoded") && Bn.test(n.data) && "data");
        return u || "jsonp" === n.dataTypes[0] ? (o = n.jsonpCallback = b.isFunction(n.jsonpCallback) ? n.jsonpCallback() : n.jsonpCallback, u ? n[u] = n[u].replace(Bn, "$1" + o) : n.jsonp !== !1 && (n.url += (bn.test(n.url) ? "&" : "?") + n.jsonp + "=" + o), n.converters["script json"] = function() {
            return s || b.error(o + " was not called"), s[0]
        }, n.dataTypes[0] = "json", a = e[o], e[o] = function() {
            s = arguments
        }, i.always(function() {
            e[o] = a, n[o] && (n.jsonpCallback = r.jsonpCallback, On.push(o)), s && b.isFunction(a) && a(s[0]), s = a = t
        }), "script") : t
    });
    var Pn, Rn, Wn = 0, $n = e.ActiveXObject && function() {
        var e;
        for (e in Pn) {
            Pn[e](t, !0)
        }
    };
    function In() {
        try {
            return new e.XMLHttpRequest
        } catch (t) {
        }
    }
    function zn() {
        try {
            return new e.ActiveXObject("Microsoft.XMLHTTP")
        } catch (t) {
        }
    }
    b.ajaxSettings.xhr = e.ActiveXObject ? function() {
        return !this.isLocal && In() || zn()
    } : In, Rn = b.ajaxSettings.xhr(), b.support.cors = !!Rn && "withCredentials" in Rn, Rn = b.support.ajax = !!Rn, Rn && b.ajaxTransport(function(n) {
        if (!n.crossDomain || b.support.cors) {
            var r;
            return{send: function(i, o) {
                    var a, s, u = n.xhr();
                    if (n.username ? u.open(n.type, n.url, n.async, n.username, n.password) : u.open(n.type, n.url, n.async), n.xhrFields) {
                        for (s in n.xhrFields) {
                            u[s] = n.xhrFields[s]
                        }
                    }
                    n.mimeType && u.overrideMimeType && u.overrideMimeType(n.mimeType), n.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest");
                    try {
                        for (s in i) {
                            u.setRequestHeader(s, i[s])
                        }
                    } catch (l) {
                    }
                    u.send(n.hasContent && n.data || null), r = function(e, i) {
                        var s, l, c, p;
                        try {
                            if (r && (i || 4 === u.readyState)) {
                                if (r = t, a && (u.onreadystatechange = b.noop, $n && delete Pn[a]), i) {
                                    4 !== u.readyState && u.abort()
                                } else {
                                    p = {}, s = u.status, l = u.getAllResponseHeaders(), "string" == typeof u.responseText && (p.text = u.responseText);
                                    try {
                                        c = u.statusText
                                    } catch (f) {
                                        c = ""
                                    }
                                    s || !n.isLocal || n.crossDomain ? 1223 === s && (s = 204) : s = p.text ? 200 : 404
                                }
                            }
                        } catch (d) {
                            i || o(-1, d)
                        }
                        p && o(s, c, p, l)
                    }, n.async ? 4 === u.readyState ? setTimeout(r) : (a = ++Wn, $n && (Pn || (Pn = {}, b(e).unload($n)), Pn[a] = r), u.onreadystatechange = r) : r()
                }, abort: function() {
                    r && r(t, !0)
                }}
        }
    });
    var Xn, Un, Vn = /^(?:toggle|show|hide)$/, Yn = RegExp("^(?:([+-])=|)(" + x + ")([a-z%]*)$", "i"), Jn = /queueHooks$/, Gn = [nr], Qn = {"*": [function(e, t) {
                var n, r, i = this.createTween(e, t), o = Yn.exec(t), a = i.cur(), s = +a || 0, u = 1, l = 20;
                if (o) {
                    if (n = +o[2], r = o[3] || (b.cssNumber[e] ? "" : "px"), "px" !== r && s) {
                        s = b.css(i.elem, e, !0) || n || 1;
                        do {
                            u = u || ".5", s /= u, b.style(i.elem, e, s + r)
                        } while (u !== (u = i.cur() / a) && 1 !== u && --l)
                    }
                    i.unit = r, i.start = s, i.end = o[1] ? s + (o[1] + 1) * n : n
                }
                return i
            }]};
    function Kn() {
        return setTimeout(function() {
            Xn = t
        }), Xn = b.now()
    }
    function Zn(e, t) {
        b.each(t, function(t, n) {
            var r = (Qn[t] || []).concat(Qn["*"]), i = 0, o = r.length;
            for (; o > i; i++) {
                if (r[i].call(e, t, n)) {
                    return
                }
            }
        })
    }
    function er(e, t, n) {
        var r, i, o = 0, a = Gn.length, s = b.Deferred().always(function() {
            delete u.elem
        }), u = function() {
            if (i) {
                return !1
            }
            var t = Xn || Kn(), n = Math.max(0, l.startTime + l.duration - t), r = n / l.duration || 0, o = 1 - r, a = 0, u = l.tweens.length;
            for (; u > a; a++) {
                l.tweens[a].run(o)
            }
            return s.notifyWith(e, [l, o, n]), 1 > o && u ? n : (s.resolveWith(e, [l]), !1)
        }, l = s.promise({elem: e, props: b.extend({}, t), opts: b.extend(!0, {specialEasing: {}}, n), originalProperties: t, originalOptions: n, startTime: Xn || Kn(), duration: n.duration, tweens: [], createTween: function(t, n) {
                var r = b.Tween(e, l.opts, t, n, l.opts.specialEasing[t] || l.opts.easing);
                return l.tweens.push(r), r
            }, stop: function(t) {
                var n = 0, r = t ? l.tweens.length : 0;
                if (i) {
                    return this
                }
                for (i = !0; r > n; n++) {
                    l.tweens[n].run(1)
                }
                return t ? s.resolveWith(e, [l, t]) : s.rejectWith(e, [l, t]), this
            }}), c = l.props;
        for (tr(c, l.opts.specialEasing); a > o; o++) {
            if (r = Gn[o].call(l, e, c, l.opts)) {
                return r
            }
        }
        return Zn(l, c), b.isFunction(l.opts.start) && l.opts.start.call(e, l), b.fx.timer(b.extend(u, {elem: e, anim: l, queue: l.opts.queue})), l.progress(l.opts.progress).done(l.opts.done, l.opts.complete).fail(l.opts.fail).always(l.opts.always)
    }
    function tr(e, t) {
        var n, r, i, o, a;
        for (i in e) {
            if (r = b.camelCase(i), o = t[r], n = e[i], b.isArray(n) && (o = n[1], n = e[i] = n[0]), i !== r && (e[r] = n, delete e[i]), a = b.cssHooks[r], a && "expand" in a) {
                n = a.expand(n), delete e[r];
                for (i in n) {
                    i in e || (e[i] = n[i], t[i] = o)
                }
            } else {
                t[r] = o
            }
        }
    }
    b.Animation = b.extend(er, {tweener: function(e, t) {
            b.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" ");
            var n, r = 0, i = e.length;
            for (; i > r; r++) {
                n = e[r], Qn[n] = Qn[n] || [], Qn[n].unshift(t)
            }
        }, prefilter: function(e, t) {
            t ? Gn.unshift(e) : Gn.push(e)
        }});
    function nr(e, t, n) {
        var r, i, o, a, s, u, l, c, p, f = this, d = e.style, h = {}, g = [], m = e.nodeType && nn(e);
        n.queue || (c = b._queueHooks(e, "fx"), null == c.unqueued && (c.unqueued = 0, p = c.empty.fire, c.empty.fire = function() {
            c.unqueued || p()
        }), c.unqueued++, f.always(function() {
            f.always(function() {
                c.unqueued--, b.queue(e, "fx").length || c.empty.fire()
            })
        })), 1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [d.overflow, d.overflowX, d.overflowY], "inline" === b.css(e, "display") && "none" === b.css(e, "float") && (b.support.inlineBlockNeedsLayout && "inline" !== un(e.nodeName) ? d.zoom = 1 : d.display = "inline-block")), n.overflow && (d.overflow = "hidden", b.support.shrinkWrapBlocks || f.always(function() {
            d.overflow = n.overflow[0], d.overflowX = n.overflow[1], d.overflowY = n.overflow[2]
        }));
        for (i in t) {
            if (a = t[i], Vn.exec(a)) {
                if (delete t[i], u = u || "toggle" === a, a === (m ? "hide" : "show")) {
                    continue
                }
                g.push(i)
            }
        }
        if (o = g.length) {
            s = b._data(e, "fxshow") || b._data(e, "fxshow", {}), "hidden" in s && (m = s.hidden), u && (s.hidden = !m), m ? b(e).show() : f.done(function() {
                b(e).hide()
            }), f.done(function() {
                var t;
                b._removeData(e, "fxshow");
                for (t in h) {
                    b.style(e, t, h[t])
                }
            });
            for (i = 0; o > i; i++) {
                r = g[i], l = f.createTween(r, m ? s[r] : 0), h[r] = s[r] || b.style(e, r), r in s || (s[r] = l.start, m && (l.end = l.start, l.start = "width" === r || "height" === r ? 1 : 0))
            }
        }
    }
    function rr(e, t, n, r, i) {
        return new rr.prototype.init(e, t, n, r, i)
    }
    b.Tween = rr, rr.prototype = {constructor: rr, init: function(e, t, n, r, i, o) {
            this.elem = e, this.prop = n, this.easing = i || "swing", this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = o || (b.cssNumber[n] ? "" : "px")
        }, cur: function() {
            var e = rr.propHooks[this.prop];
            return e && e.get ? e.get(this) : rr.propHooks._default.get(this)
        }, run: function(e) {
            var t, n = rr.propHooks[this.prop];
            return this.pos = t = this.options.duration ? b.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : rr.propHooks._default.set(this), this
        }}, rr.prototype.init.prototype = rr.prototype, rr.propHooks = {_default: {get: function(e) {
                var t;
                return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = b.css(e.elem, e.prop, ""), t && "auto" !== t ? t : 0) : e.elem[e.prop]
            }, set: function(e) {
                b.fx.step[e.prop] ? b.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[b.cssProps[e.prop]] || b.cssHooks[e.prop]) ? b.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now
            }}}, rr.propHooks.scrollTop = rr.propHooks.scrollLeft = {set: function(e) {
            e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
        }}, b.each(["toggle", "show", "hide"], function(e, t) {
        var n = b.fn[t];
        b.fn[t] = function(e, r, i) {
            return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(ir(t, !0), e, r, i)
        }
    }), b.fn.extend({fadeTo: function(e, t, n, r) {
            return this.filter(nn).css("opacity", 0).show().end().animate({opacity: t}, e, n, r)
        }, animate: function(e, t, n, r) {
            var i = b.isEmptyObject(e), o = b.speed(t, n, r), a = function() {
                var t = er(this, b.extend({}, e), o);
                a.finish = function() {
                    t.stop(!0)
                }, (i || b._data(this, "finish")) && t.stop(!0)
            };
            return a.finish = a, i || o.queue === !1 ? this.each(a) : this.queue(o.queue, a)
        }, stop: function(e, n, r) {
            var i = function(e) {
                var t = e.stop;
                delete e.stop, t(r)
            };
            return"string" != typeof e && (r = n, n = e, e = t), n && e !== !1 && this.queue(e || "fx", []), this.each(function() {
                var t = !0, n = null != e && e + "queueHooks", o = b.timers, a = b._data(this);
                if (n) {
                    a[n] && a[n].stop && i(a[n])
                } else {
                    for (n in a) {
                        a[n] && a[n].stop && Jn.test(n) && i(a[n])
                    }
                }
                for (n = o.length; n--; ) {
                    o[n].elem !== this || null != e && o[n].queue !== e || (o[n].anim.stop(r), t = !1, o.splice(n, 1))
                }
                (t || !r) && b.dequeue(this, e)
            })
        }, finish: function(e) {
            return e !== !1 && (e = e || "fx"), this.each(function() {
                var t, n = b._data(this), r = n[e + "queue"], i = n[e + "queueHooks"], o = b.timers, a = r ? r.length : 0;
                for (n.finish = !0, b.queue(this, e, []), i && i.cur && i.cur.finish && i.cur.finish.call(this), t = o.length; t--; ) {
                    o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1))
                }
                for (t = 0; a > t; t++) {
                    r[t] && r[t].finish && r[t].finish.call(this)
                }
                delete n.finish
            })
        }});
    function ir(e, t) {
        var n, r = {height: e}, i = 0;
        for (t = t ? 1 : 0; 4 > i; i += 2 - t) {
            n = Zt[i], r["margin" + n] = r["padding" + n] = e
        }
        return t && (r.opacity = r.width = e), r
    }
    b.each({slideDown: ir("show"), slideUp: ir("hide"), slideToggle: ir("toggle"), fadeIn: {opacity: "show"}, fadeOut: {opacity: "hide"}, fadeToggle: {opacity: "toggle"}}, function(e, t) {
        b.fn[e] = function(e, n, r) {
            return this.animate(t, e, n, r)
        }
    }), b.speed = function(e, t, n) {
        var r = e && "object" == typeof e ? b.extend({}, e) : {complete: n || !n && t || b.isFunction(e) && e, duration: e, easing: n && t || t && !b.isFunction(t) && t};
        return r.duration = b.fx.off ? 0 : "number" == typeof r.duration ? r.duration : r.duration in b.fx.speeds ? b.fx.speeds[r.duration] : b.fx.speeds._default, (null == r.queue || r.queue === !0) && (r.queue = "fx"), r.old = r.complete, r.complete = function() {
            b.isFunction(r.old) && r.old.call(this), r.queue && b.dequeue(this, r.queue)
        }, r
    }, b.easing = {linear: function(e) {
            return e
        }, swing: function(e) {
            return 0.5 - Math.cos(e * Math.PI) / 2
        }}, b.timers = [], b.fx = rr.prototype.init, b.fx.tick = function() {
        var e, n = b.timers, r = 0;
        for (Xn = b.now(); n.length > r; r++) {
            e = n[r], e() || n[r] !== e || n.splice(r--, 1)
        }
        n.length || b.fx.stop(), Xn = t
    }, b.fx.timer = function(e) {
        e() && b.timers.push(e) && b.fx.start()
    }, b.fx.interval = 13, b.fx.start = function() {
        Un || (Un = setInterval(b.fx.tick, b.fx.interval))
    }, b.fx.stop = function() {
        clearInterval(Un), Un = null
    }, b.fx.speeds = {slow: 600, fast: 200, _default: 400}, b.fx.step = {}, b.expr && b.expr.filters && (b.expr.filters.animated = function(e) {
        return b.grep(b.timers, function(t) {
            return e === t.elem
        }).length
    }), b.fn.offset = function(e) {
        if (arguments.length) {
            return e === t ? this : this.each(function(t) {
                b.offset.setOffset(this, e, t)
            })
        }
        var n, r, o = {top: 0, left: 0}, a = this[0], s = a && a.ownerDocument;
        if (s) {
            return n = s.documentElement, b.contains(n, a) ? (typeof a.getBoundingClientRect !== i && (o = a.getBoundingClientRect()), r = or(s), {top: o.top + (r.pageYOffset || n.scrollTop) - (n.clientTop || 0), left: o.left + (r.pageXOffset || n.scrollLeft) - (n.clientLeft || 0)}) : o
        }
    }, b.offset = {setOffset: function(e, t, n) {
            var r = b.css(e, "position");
            "static" === r && (e.style.position = "relative");
            var i = b(e), o = i.offset(), a = b.css(e, "top"), s = b.css(e, "left"), u = ("absolute" === r || "fixed" === r) && b.inArray("auto", [a, s]) > -1, l = {}, c = {}, p, f;
            u ? (c = i.position(), p = c.top, f = c.left) : (p = parseFloat(a) || 0, f = parseFloat(s) || 0), b.isFunction(t) && (t = t.call(e, n, o)), null != t.top && (l.top = t.top - o.top + p), null != t.left && (l.left = t.left - o.left + f), "using" in t ? t.using.call(e, l) : i.css(l)
        }}, b.fn.extend({position: function() {
            if (this[0]) {
                var e, t, n = {top: 0, left: 0}, r = this[0];
                return"fixed" === b.css(r, "position") ? t = r.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), b.nodeName(e[0], "html") || (n = e.offset()), n.top += b.css(e[0], "borderTopWidth", !0), n.left += b.css(e[0], "borderLeftWidth", !0)), {top: t.top - n.top - b.css(r, "marginTop", !0), left: t.left - n.left - b.css(r, "marginLeft", !0)}
            }
        }, offsetParent: function() {
            return this.map(function() {
                var e = this.offsetParent || o.documentElement;
                while (e && !b.nodeName(e, "html") && "static" === b.css(e, "position")) {
                    e = e.offsetParent
                }
                return e || o.documentElement
            })
        }}), b.each({scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function(e, n) {
        var r = /Y/.test(n);
        b.fn[e] = function(i) {
            return b.access(this, function(e, i, o) {
                var a = or(e);
                return o === t ? a ? n in a ? a[n] : a.document.documentElement[i] : e[i] : (a ? a.scrollTo(r ? b(a).scrollLeft() : o, r ? o : b(a).scrollTop()) : e[i] = o, t)
            }, e, i, arguments.length, null)
        }
    });
    function or(e) {
        return b.isWindow(e) ? e : 9 === e.nodeType ? e.defaultView || e.parentWindow : !1
    }
    b.each({Height: "height", Width: "width"}, function(e, n) {
        b.each({padding: "inner" + e, content: n, "": "outer" + e}, function(r, i) {
            b.fn[i] = function(i, o) {
                var a = arguments.length && (r || "boolean" != typeof i), s = r || (i === !0 || o === !0 ? "margin" : "border");
                return b.access(this, function(n, r, i) {
                    var o;
                    return b.isWindow(n) ? n.document.documentElement["client" + e] : 9 === n.nodeType ? (o = n.documentElement, Math.max(n.body["scroll" + e], o["scroll" + e], n.body["offset" + e], o["offset" + e], o["client" + e])) : i === t ? b.css(n, r, s) : b.style(n, r, i, s)
                }, n, a ? i : t, a, null)
            }
        })
    }), e.jQuery = e.$ = b, "function" == typeof define && define.amd && define.amd.jQuery && define("jquery", [], function() {
        return b
    })
})(window);
document.createElement("canvas").getContext || function() {
    function q() {
    }
    function n(D) {
        this.type_ = D, this.r1_ = this.y1_ = this.x1_ = this.r0_ = this.y0_ = this.x0_ = 0, this.colors_ = []
    }
    function l(E, F, D) {
        !A(F) || (E.m_ = F, D && (E.lineScale_ = ah(ag(F[0][0] * F[1][1] - F[0][1] * F[1][0]))))
    }
    function A(E) {
        var F = 0;
        for (; F < 3; F++) {
            var D = 0;
            for (; D < 2; D++) {
                if (!isFinite(E[F][D]) || isNaN(E[F][D])) {
                    return !1
                }
            }
        }
        return !0
    }
    function y(F, G, D, E) {
        F.currentPath_.push({type: "bezierCurveTo", cp1x: G.x, cp1y: G.y, cp2x: D.x, cp2y: D.y, x: E.x, y: E.y}), F.currentX_ = E.x, F.currentY_ = E.y
    }
    function w(D) {
        this.m_ = p(), this.mStack_ = [], this.aStack_ = [], this.currentPath_ = [], this.fillStyle = this.strokeStyle = "#000", this.lineWidth = 1, this.lineJoin = "miter", this.lineCap = "butt", this.miterLimit = a * 1, this.globalAlpha = 1, this.canvas = D;
        var E = D.ownerDocument.createElement("div");
        E.style.width = D.clientWidth + "px", E.style.height = D.clientHeight + "px", E.style.overflow = "hidden", E.style.position = "absolute", D.appendChild(E), this.element_ = E, this.lineScale_ = this.arcScaleY_ = this.arcScaleX_ = 1
    }
    function v(D) {
        switch (D) {
            case"butt":
                return"flat";
            case"round":
                return"round";
            case"square":
            default:
                return"square"
            }
    }
    function u(F) {
        var G, H = 1;
        F = String(F);
        if (F.substring(0, 3) == "rgb") {
            var I = F.indexOf("(", 3), J = F.indexOf(")", I + 1), D = F.substring(I + 1, J).split(",");
            G = "#";
            var E = 0;
            for (; E < 3; E++) {
                G += k[Number(D[E])]
            }
            D.length == 4 && F.substr(3, 1) == "a" && (H = D[3])
        } else {
            G = F
        }
        return{color: G, alpha: H}
    }
    function s(D, E) {
        E.fillStyle = D.fillStyle, E.lineCap = D.lineCap, E.lineJoin = D.lineJoin, E.lineWidth = D.lineWidth, E.miterLimit = D.miterLimit, E.shadowBlur = D.shadowBlur, E.shadowColor = D.shadowColor, E.shadowOffsetX = D.shadowOffsetX, E.shadowOffsetY = D.shadowOffsetY, E.strokeStyle = D.strokeStyle, E.globalAlpha = D.globalAlpha, E.arcScaleX_ = D.arcScaleX_, E.arcScaleY_ = D.arcScaleY_, E.lineScale_ = D.lineScale_
    }
    function r(F, G) {
        var H = p(), I = 0;
        for (; I < 3; I++) {
            var J = 0;
            for (; J < 3; J++) {
                var D = 0, E = 0;
                for (; E < 3; E++) {
                    D += F[I][E] * G[E][J]
                }
                H[I][J] = D
            }
        }
        return H
    }
    function p() {
        return[[1, 0, 0], [0, 1, 0], [0, 0, 1]]
    }
    function h(D) {
        var E = D.srcElement;
        E.firstChild && (E.firstChild.style.width = E.clientWidth + "px", E.firstChild.style.height = E.clientHeight + "px")
    }
    function g(D) {
        var E = D.srcElement;
        switch (D.propertyName) {
            case"width":
                E.style.width = E.attributes.width.nodeValue + "px", E.getContext().clearRect();
                break;
            case"height":
                E.style.height = E.attributes.height.nodeValue + "px", E.getContext().clearRect()
            }
    }
    function e(E, F) {
        var D = d.call(arguments, 2);
        return function() {
            return E.apply(F, D.concat(d.call(arguments)))
        }
    }
    function c() {
        return this.context_ || (this.context_ = new w(this))
    }
    var B = Math, C = B.round, ae = B.sin, af = B.cos, ag = B.abs, ah = B.sqrt, a = 10, b = a / 2, d = Array.prototype.slice, f = {init: function(D) {
            if (/MSIE/.test(navigator.userAgent) && !window.opera) {
                var E = D || document;
                E.createElement("canvas"), E.attachEvent("onreadystatechange", e(this.init_, this, E))
            }
        }, init_: function(F) {
            F.namespaces.g_vml_ || F.namespaces.add("g_vml_", "urn:schemas-microsoft-com:vml", "#default#VML"), F.namespaces.g_o_ || F.namespaces.add("g_o_", "urn:schemas-microsoft-com:office:office", "#default#VML");
            if (!F.styleSheets.ex_canvas_) {
                var G = F.createStyleSheet();
                G.owningElement.id = "ex_canvas_", G.cssText = "canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"
            }
            var D = F.getElementsByTagName("canvas"), E = 0;
            for (; E < D.length; E++) {
                this.initElement(D[E])
            }
        }, initElement: function(D) {
            if (!D.getContext) {
                D.getContext = c, D.innerHTML = "", D.attachEvent("onpropertychange", g), D.attachEvent("onresize", h);
                var E = D.attributes;
                E.width && E.width.specified ? D.style.width = E.width.nodeValue + "px" : D.width = D.clientWidth, E.height && E.height.specified ? D.style.height = E.height.nodeValue + "px" : D.height = D.clientHeight
            }
            return D
        }};
    f.init();
    var k = [], m = 0;
    for (; m < 16; m++) {
        var o = 0;
        for (; o < 16; o++) {
            k[m * 16 + o] = m.toString(16) + o.toString(16)
        }
    }
    var x = w.prototype;
    x.clearRect = function() {
        this.element_.innerHTML = ""
    }, x.beginPath = function() {
        this.currentPath_ = []
    }, x.moveTo = function(E, F) {
        var D = this.getCoords_(E, F);
        this.currentPath_.push({type: "moveTo", x: D.x, y: D.y}), this.currentX_ = D.x, this.currentY_ = D.y
    }, x.lineTo = function(E, F) {
        var D = this.getCoords_(E, F);
        this.currentPath_.push({type: "lineTo", x: D.x, y: D.y}), this.currentX_ = D.x, this.currentY_ = D.y
    }, x.bezierCurveTo = function(L, D, E, F, G, H) {
        var I = this.getCoords_(G, H), J = this.getCoords_(L, D), K = this.getCoords_(E, F);
        y(this, J, K, I)
    }, x.quadraticCurveTo = function(F, G, H, I) {
        var J = this.getCoords_(F, G), D = this.getCoords_(H, I), E = {x: this.currentX_ + 0.6666666666666666 * (J.x - this.currentX_), y: this.currentY_ + 0.6666666666666666 * (J.y - this.currentY_)};
        y(this, E, {x: E.x + (D.x - this.currentX_) / 3, y: E.y + (D.y - this.currentY_) / 3}, D)
    }, x.arc = function(L, D, E, F, K, M) {
        E *= a;
        var N = M ? "at" : "wa", O = L + af(F) * E - b, P = D + ae(F) * E - b, Q = L + af(K) * E - b, G = D + ae(K) * E - b;
        O == Q && !M && (O += 0.125);
        var H = this.getCoords_(L, D), I = this.getCoords_(O, P), J = this.getCoords_(Q, G);
        this.currentPath_.push({type: N, x: H.x, y: H.y, radius: E, xStart: I.x, yStart: I.y, xEnd: J.x, yEnd: J.y})
    }, x.rect = function(F, G, D, E) {
        this.moveTo(F, G), this.lineTo(F + D, G), this.lineTo(F + D, G + E), this.lineTo(F, G + E), this.closePath()
    }, x.strokeRect = function(G, H, D, E) {
        var F = this.currentPath_;
        this.beginPath(), this.moveTo(G, H), this.lineTo(G + D, H), this.lineTo(G + D, H + E), this.lineTo(G, H + E), this.closePath(), this.stroke(), this.currentPath_ = F
    }, x.fillRect = function(G, H, D, E) {
        var F = this.currentPath_;
        this.beginPath(), this.moveTo(G, H), this.lineTo(G + D, H), this.lineTo(G + D, H + E), this.lineTo(G, H + E), this.closePath(), this.fill(), this.currentPath_ = F
    }, x.createLinearGradient = function(G, H, D, E) {
        var F = new n("gradient");
        F.x0_ = G, F.y0_ = H, F.x1_ = D, F.y1_ = E;
        return F
    }, x.createRadialGradient = function(F, G, H, I, J, D) {
        var E = new n("gradientradial");
        E.x0_ = F, E.y0_ = G, E.r0_ = H, E.x1_ = I, E.y1_ = J, E.r1_ = D;
        return E
    }, x.drawImage = function(G) {
        var I, K, L, M, N, O, P, Q, R = G.runtimeStyle.width, T = G.runtimeStyle.height;
        G.runtimeStyle.width = "auto", G.runtimeStyle.height = "auto";
        var U = G.width, F = G.height;
        G.runtimeStyle.width = R, G.runtimeStyle.height = T;
        if (arguments.length == 3) {
            I = arguments[1], K = arguments[2], N = O = 0, P = L = U, Q = M = F
        } else {
            if (arguments.length == 5) {
                I = arguments[1], K = arguments[2], L = arguments[3], M = arguments[4], N = O = 0, P = U, Q = F
            } else {
                if (arguments.length == 9) {
                    N = arguments[1], O = arguments[2], P = arguments[3], Q = arguments[4], I = arguments[5], K = arguments[6], L = arguments[7], M = arguments[8]
                } else {
                    throw Error("Invalid number of arguments")
                }
            }
        }
        var H = this.getCoords_(I, K), J = [];
        J.push(" <g_vml_:group", ' coordsize="', a * 10, ",", a * 10, '"', ' coordorigin="0,0"', ' style="width:', 10, "px;height:", 10, "px;position:absolute;");
        if (this.m_[0][0] != 1 || this.m_[0][1]) {
            var D = [];
            D.push("M11=", this.m_[0][0], ",", "M12=", this.m_[1][0], ",", "M21=", this.m_[0][1], ",", "M22=", this.m_[1][1], ",", "Dx=", C(H.x / a), ",", "Dy=", C(H.y / a), "");
            var E = H, S = this.getCoords_(I + L, K), V = this.getCoords_(I, K + M), W = this.getCoords_(I + L, K + M);
            E.x = B.max(E.x, S.x, V.x, W.x), E.y = B.max(E.y, S.y, V.y, W.y), J.push("padding:0 ", C(E.x / a), "px ", C(E.y / a), "px 0;filter:progid:DXImageTransform.Microsoft.Matrix(", D.join(""), ", sizingmethod='clip');")
        } else {
            J.push("top:", C(H.y / a), "px;left:", C(H.x / a), "px;")
        }
        J.push(' ">', '<g_vml_:image src="', G.src, '"', ' style="width:', a * L, "px;", " height:", a * M, 'px;"', ' cropleft="', N / U, '"', ' croptop="', O / F, '"', ' cropright="', (U - N - P) / U, '"', ' cropbottom="', (F - O - Q) / F, '"', " />", "</g_vml_:group>"), this.element_.insertAdjacentHTML("BeforeEnd", J.join(""))
    }, x.stroke = function(K) {
        var M = [], O = u(K ? this.fillStyle : this.strokeStyle), Q = O.color, R = O.alpha * this.globalAlpha;
        M.push("<g_vml_:shape", ' filled="', !!K, '"', ' style="position:absolute;width:', 10, "px;height:", 10, 'px;"', ' coordorigin="0 0" coordsize="', a * 10, " ", a * 10, '"', ' stroked="', !K, '"', ' path="');
        var U = {x: null, y: null}, D = {x: null, y: null}, E = 0;
        for (; E < this.currentPath_.length; E++) {
            var F = this.currentPath_[E];
            switch (F.type) {
                case"moveTo":
                    M.push(" m ", C(F.x), ",", C(F.y));
                    break;
                case"lineTo":
                    M.push(" l ", C(F.x), ",", C(F.y));
                    break;
                case"close":
                    M.push(" x "), F = null;
                    break;
                case"bezierCurveTo":
                    M.push(" c ", C(F.cp1x), ",", C(F.cp1y), ",", C(F.cp2x), ",", C(F.cp2y), ",", C(F.x), ",", C(F.y));
                    break;
                case"at":
                case"wa":
                    M.push(" ", F.type, " ", C(F.x - this.arcScaleX_ * F.radius), ",", C(F.y - this.arcScaleY_ * F.radius), " ", C(F.x + this.arcScaleX_ * F.radius), ",", C(F.y + this.arcScaleY_ * F.radius), " ", C(F.xStart), ",", C(F.yStart), " ", C(F.xEnd), ",", C(F.yEnd))
            }
            if (F) {
                if (U.x == null || F.x < U.x) {
                    U.x = F.x
                }
                if (D.x == null || F.x > D.x) {
                    D.x = F.x
                }
                if (U.y == null || F.y < U.y) {
                    U.y = F.y
                }
                if (D.y == null || F.y > D.y) {
                    D.y = F.y
                }
            }
        }
        M.push(' ">');
        if (K) {
            if (typeof this.fillStyle == "object") {
                var H = this.fillStyle, J = 0, L = {x: 0, y: 0}, N = 0, S = 1;
                if (H.type_ == "gradient") {
                    var V = H.x1_ / this.arcScaleX_, X = H.y1_ / this.arcScaleY_, Z = this.getCoords_(H.x0_ / this.arcScaleX_, H.y0_ / this.arcScaleY_), ak = this.getCoords_(V, X);
                    J = Math.atan2(ak.x - Z.x, ak.y - Z.y) * 180 / Math.PI, J < 0 && (J += 360), J < 0.000001 && (J = 0)
                } else {
                    var Z = this.getCoords_(H.x0_, H.y0_), I = D.x - U.x, al = D.y - U.y;
                    L = {x: (Z.x - U.x) / I, y: (Z.y - U.y) / al}, I /= this.arcScaleX_ * a, al /= this.arcScaleY_ * a;
                    var am = B.max(I, al);
                    N = 2 * H.r0_ / am, S = 2 * H.r1_ / am - N
                }
                var P = H.colors_;
                P.sort(function(ai, aj) {
                    return ai.offset - aj.offset
                });
                var T = P.length, W = P[0].color, Y = P[T - 1].color, aa = P[0].alpha * this.globalAlpha, ab = P[T - 1].alpha * this.globalAlpha, ad = [], E = 0;
                for (; E < T; E++) {
                    var G = P[E];
                    ad.push(G.offset * S + N + " " + G.color)
                }
                M.push('<g_vml_:fill type="', H.type_, '"', ' method="none" focus="100%"', ' color="', W, '"', ' color2="', Y, '"', ' colors="', ad.join(","), '"', ' opacity="', ab, '"', ' g_o_:opacity2="', aa, '"', ' angle="', J, '"', ' focusposition="', L.x, ",", L.y, '" />')
            } else {
                M.push('<g_vml_:fill color="', Q, '" opacity="', R, '" />')
            }
        } else {
            var ac = this.lineScale_ * this.lineWidth;
            ac < 1 && (R *= ac), M.push("<g_vml_:stroke", ' opacity="', R, '"', ' joinstyle="', this.lineJoin, '"', ' miterlimit="', this.miterLimit, '"', ' endcap="', v(this.lineCap), '"', ' weight="', ac, 'px"', ' color="', Q, '" />')
        }
        M.push("</g_vml_:shape>"), this.element_.insertAdjacentHTML("beforeEnd", M.join(""))
    }, x.fill = function() {
        this.stroke(!0)
    }, x.closePath = function() {
        this.currentPath_.push({type: "close"})
    }, x.getCoords_ = function(E, F) {
        var D = this.m_;
        return{x: a * (E * D[0][0] + F * D[1][0] + D[2][0]) - b, y: a * (E * D[0][1] + F * D[1][1] + D[2][1]) - b}
    }, x.save = function() {
        var D = {};
        s(this, D), this.aStack_.push(D), this.mStack_.push(this.m_), this.m_ = r(p(), this.m_)
    }, x.restore = function() {
        s(this.aStack_.pop(), this), this.m_ = this.mStack_.pop()
    }, x.translate = function(D, E) {
        l(this, r([[1, 0, 0], [0, 1, 0], [D, E, 1]], this.m_), !1)
    }, x.rotate = function(E) {
        var F = af(E), D = ae(E);
        l(this, r([[F, D, 0], [-D, F, 0], [0, 0, 1]], this.m_), !1)
    }, x.scale = function(D, E) {
        this.arcScaleX_ *= D, this.arcScaleY_ *= E, l(this, r([[D, 0, 0], [0, E, 0], [0, 0, 1]], this.m_), !0)
    }, x.transform = function(G, H, I, D, E, F) {
        l(this, r([[G, H, 0], [I, D, 0], [E, F, 1]], this.m_), !0)
    }, x.setTransform = function(G, H, I, D, E, F) {
        l(this, [[G, H, 0], [I, D, 0], [E, F, 1]], !0)
    }, x.clip = function() {
    }, x.arcTo = function() {
    }, x.createPattern = function() {
        return new q
    }, n.prototype.addColorStop = function(D, E) {
        E = u(E), this.colors_.push({offset: D, color: E.color, alpha: E.alpha})
    }, G_vmlCanvasManager = f, CanvasRenderingContext2D = w, CanvasGradient = n, CanvasPattern = q
}();
/*! jQuery UI - v1.10.3 - 2013-05-23
 * http://jqueryui.com
 * Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js
 * Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(k, m) {
    function n(c, d) {
        var h, f, b, g = c.nodeName.toLowerCase();
        return"area" === g ? (h = c.parentNode, f = h.name, c.href && f && "map" === h.nodeName.toLowerCase() ? (b = k("img[usemap=#" + f + "]")[0], !!b && l(b)) : !1) : (/input|select|textarea|button|object/.test(g) ? !c.disabled : "a" === g ? c.href || d : d) && l(c)
    }
    function l(b) {
        return k.expr.filters.visible(b) && !k(b).parents().addBack().filter(function() {
            return"hidden" === k.css(this, "visibility")
        }).length
    }
    var a = 0, e = /^ui-id-\d+$/;
    k.ui = k.ui || {}, k.extend(k.ui, {version: "1.10.3", keyCode: {BACKSPACE: 8, COMMA: 188, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, LEFT: 37, NUMPAD_ADD: 107, NUMPAD_DECIMAL: 110, NUMPAD_DIVIDE: 111, NUMPAD_ENTER: 108, NUMPAD_MULTIPLY: 106, NUMPAD_SUBTRACT: 109, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SPACE: 32, TAB: 9, UP: 38}}), k.fn.extend({focus: function(b) {
            return function(d, c) {
                return"number" == typeof d ? this.each(function() {
                    var f = this;
                    setTimeout(function() {
                        k(f).focus(), c && c.call(f)
                    }, d)
                }) : b.apply(this, arguments)
            }
        }(k.fn.focus), scrollParent: function() {
            var b;
            return b = k.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function() {
                return/(relative|absolute|fixed)/.test(k.css(this, "position")) && /(auto|scroll)/.test(k.css(this, "overflow") + k.css(this, "overflow-y") + k.css(this, "overflow-x"))
            }).eq(0) : this.parents().filter(function() {
                return/(auto|scroll)/.test(k.css(this, "overflow") + k.css(this, "overflow-y") + k.css(this, "overflow-x"))
            }).eq(0), /fixed/.test(this.css("position")) || !b.length ? k(document) : b
        }, zIndex: function(d) {
            if (d !== m) {
                return this.css("zIndex", d)
            }
            if (this.length) {
                for (var c, f, b = k(this[0]); b.length && b[0] !== document; ) {
                    if (c = b.css("position"), ("absolute" === c || "relative" === c || "fixed" === c) && (f = parseInt(b.css("zIndex"), 10), !isNaN(f) && 0 !== f)) {
                        return f
                    }
                    b = b.parent()
                }
            }
            return 0
        }, uniqueId: function() {
            return this.each(function() {
                this.id || (this.id = "ui-id-" + ++a)
            })
        }, removeUniqueId: function() {
            return this.each(function() {
                e.test(this.id) && k(this).removeAttr("id")
            })
        }}), k.extend(k.expr[":"], {data: k.expr.createPseudo ? k.expr.createPseudo(function(b) {
            return function(c) {
                return !!k.data(c, b)
            }
        }) : function(d, b, c) {
            return !!k.data(d, c[3])
        }, focusable: function(b) {
            return n(b, !isNaN(k.attr(b, "tabindex")))
        }, tabbable: function(c) {
            var b = k.attr(c, "tabindex"), d = isNaN(b);
            return(d || b >= 0) && n(c, !d)
        }}), k("<a>").outerWidth(1).jquery || k.each(["Width", "Height"], function(d, c) {
        function h(q, s, p, v) {
            return k.each(f, function() {
                s -= parseFloat(k.css(q, "padding" + this)) || 0, p && (s -= parseFloat(k.css(q, "border" + this + "Width")) || 0), v && (s -= parseFloat(k.css(q, "margin" + this)) || 0)
            }), s
        }
        var f = "Width" === c ? ["Left", "Right"] : ["Top", "Bottom"], b = c.toLowerCase(), g = {innerWidth: k.fn.innerWidth, innerHeight: k.fn.innerHeight, outerWidth: k.fn.outerWidth, outerHeight: k.fn.outerHeight};
        k.fn["inner" + c] = function(o) {
            return o === m ? g["inner" + c].call(this) : this.each(function() {
                k(this).css(b, h(this, o) + "px")
            })
        }, k.fn["outer" + c] = function(p, o) {
            return"number" != typeof p ? g["outer" + c].call(this, p) : this.each(function() {
                k(this).css(b, h(this, p, !0, o) + "px")
            })
        }
    }), k.fn.addBack || (k.fn.addBack = function(b) {
        return this.add(null == b ? this.prevObject : this.prevObject.filter(b))
    }), k("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (k.fn.removeData = function(b) {
        return function(c) {
            return arguments.length ? b.call(this, k.camelCase(c)) : b.call(this)
        }
    }(k.fn.removeData)), k.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), k.support.selectstart = "onselectstart" in document.createElement("div"), k.fn.extend({disableSelection: function() {
            return this.bind((k.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(b) {
                b.preventDefault()
            })
        }, enableSelection: function() {
            return this.unbind(".ui-disableSelection")
        }}), k.extend(k.ui, {plugin: {add: function(c, d, b) {
                var f, g = k.ui[c].prototype;
                for (f in b) {
                    g.plugins[f] = g.plugins[f] || [], g.plugins[f].push([d, b[f]])
                }
            }, call: function(f, b, c) {
                var g, d = f.plugins[b];
                if (d && f.element[0].parentNode && 11 !== f.element[0].parentNode.nodeType) {
                    for (g = 0; d.length > g; g++) {
                        f.options[d[g][0]] && d[g][1].apply(f.element, c)
                    }
                }
            }}, hasScroll: function(c, d) {
            if ("hidden" === k(c).css("overflow")) {
                return !1
            }
            var b = d && "left" === d ? "scrollLeft" : "scrollTop", f = !1;
            return c[b] > 0 ? !0 : (c[b] = 1, f = c[b] > 0, c[b] = 0, f)
        }})
})(jQuery);
(function(k, e) {
    var g = 0, l = Array.prototype.slice, h = k.cleanData;
    k.cleanData = function(b) {
        for (var c, a = 0; null != (c = b[a]); a++) {
            try {
                k(c).triggerHandler("remove")
            } catch (d) {
            }
        }
        h(b)
    }, k.widget = function(b, o, d) {
        var s, n, f, a, c = {}, r = b.split(".")[0];
        b = b.split(".")[1], s = r + "-" + b, d || (d = o, o = k.Widget), k.expr[":"][s.toLowerCase()] = function(m) {
            return !!k.data(m, s)
        }, k[r] = k[r] || {}, n = k[r][b], f = k[r][b] = function(m, p) {
            return this._createWidget ? (arguments.length && this._createWidget(m, p), e) : new f(m, p)
        }, k.extend(f, n, {version: d.version, _proto: k.extend({}, d), _childConstructors: []}), a = new o, a.options = k.widget.extend({}, a.options), k.each(d, function(p, m) {
            return k.isFunction(m) ? (c[p] = function() {
                var q = function() {
                    return o.prototype[p].apply(this, arguments)
                }, u = function(v) {
                    return o.prototype[p].apply(this, v)
                };
                return function() {
                    var v, x = this._super, w = this._superApply;
                    return this._super = q, this._superApply = u, v = m.apply(this, arguments), this._super = x, this._superApply = w, v
                }
            }(), e) : (c[p] = m, e)
        }), f.prototype = k.widget.extend(a, {widgetEventPrefix: n ? a.widgetEventPrefix : b}, c, {constructor: f, namespace: r, widgetName: b, widgetFullName: s}), n ? (k.each(n._childConstructors, function(m, p) {
            var q = p.prototype;
            k.widget(q.namespace + "." + q.widgetName, f, p._proto)
        }), delete n._childConstructors) : o._childConstructors.push(f), k.widget.bridge(b, f)
    }, k.widget.extend = function(d) {
        for (var n, f, b = l.call(arguments, 1), a = 0, c = b.length; c > a; a++) {
            for (n in b[a]) {
                f = b[a][n], b[a].hasOwnProperty(n) && f !== e && (d[n] = k.isPlainObject(f) ? k.isPlainObject(d[n]) ? k.widget.extend({}, d[n], f) : k.widget.extend({}, f) : f)
            }
        }
        return d
    }, k.widget.bridge = function(b, a) {
        var c = a.prototype.widgetFullName || b;
        k.fn[b] = function(q) {
            var o = "string" == typeof q, d = l.call(arguments, 1), f = this;
            return q = !o && d.length ? k.widget.extend.apply(null, [q].concat(d)) : q, o ? this.each(function() {
                var m, n = k.data(this, c);
                return n ? k.isFunction(n[q]) && "_" !== q.charAt(0) ? (m = n[q].apply(n, d), m !== n && m !== e ? (f = m && m.jquery ? f.pushStack(m.get()) : m, !1) : e) : k.error("no such method '" + q + "' for " + b + " widget instance") : k.error("cannot call methods on " + b + " prior to initialization; attempted to call method '" + q + "'")
            }) : this.each(function() {
                var m = k.data(this, c);
                m ? m.option(q || {})._init() : k.data(this, c, new a(q, this))
            }), f
        }
    }, k.Widget = function() {
    }, k.Widget._childConstructors = [], k.Widget.prototype = {widgetName: "widget", widgetEventPrefix: "", defaultElement: "<div>", options: {disabled: !1, create: null}, _createWidget: function(b, a) {
            a = k(a || this.defaultElement || this)[0], this.element = k(a), this.uuid = g++, this.eventNamespace = "." + this.widgetName + this.uuid, this.options = k.widget.extend({}, this.options, this._getCreateOptions(), b), this.bindings = k(), this.hoverable = k(), this.focusable = k(), a !== this && (k.data(a, this.widgetFullName, this), this._on(!0, this.element, {remove: function(c) {
                    c.target === a && this.destroy()
                }}), this.document = k(a.style ? a.ownerDocument : a.document || a), this.window = k(this.document[0].defaultView || this.document[0].parentWindow)), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
        }, _getCreateOptions: k.noop, _getCreateEventData: k.noop, _create: k.noop, _init: k.noop, destroy: function() {
            this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(k.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
        }, _destroy: k.noop, widget: function() {
            return this.element
        }, option: function(f, d) {
            var a, n, c, b = f;
            if (0 === arguments.length) {
                return k.widget.extend({}, this.options)
            }
            if ("string" == typeof f) {
                if (b = {}, a = f.split("."), f = a.shift(), a.length) {
                    for (n = b[f] = k.widget.extend({}, this.options[f]), c = 0; a.length - 1 > c; c++) {
                        n[a[c]] = n[a[c]] || {}, n = n[a[c]]
                    }
                    if (f = a.pop(), d === e) {
                        return n[f] === e ? null : n[f]
                    }
                    n[f] = d
                } else {
                    if (d === e) {
                        return this.options[f] === e ? null : this.options[f]
                    }
                    b[f] = d
                }
            }
            return this._setOptions(b), this
        }, _setOptions: function(a) {
            var b;
            for (b in a) {
                this._setOption(b, a[b])
            }
            return this
        }, _setOption: function(a, b) {
            return this.options[a] = b, "disabled" === a && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!b).attr("aria-disabled", b), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), this
        }, enable: function() {
            return this._setOption("disabled", !1)
        }, disable: function() {
            return this._setOption("disabled", !0)
        }, _on: function(d, c, a) {
            var f, b = this;
            "boolean" != typeof d && (a = c, c = d, d = !1), a ? (c = f = k(c), this.bindings = this.bindings.add(c)) : (a = c, c = this.element, f = this.widget()), k.each(a, function(o, w) {
                function x() {
                    return d || b.options.disabled !== !0 && !k(this).hasClass("ui-state-disabled") ? ("string" == typeof w ? b[w] : w).apply(b, arguments) : e
                }
                "string" != typeof w && (x.guid = w.guid = w.guid || x.guid || k.guid++);
                var n = o.match(/^(\w+)\s*(.*)$/), y = n[1] + b.eventNamespace, u = n[2];
                u ? f.delegate(u, y, x) : c.bind(y, x)
            })
        }, _off: function(a, b) {
            b = (b || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, a.unbind(b).undelegate(b)
        }, _delay: function(a, c) {
            function d() {
                return("string" == typeof a ? b[a] : a).apply(b, arguments)
            }
            var b = this;
            return setTimeout(d, c || 0)
        }, _hoverable: function(a) {
            this.hoverable = this.hoverable.add(a), this._on(a, {mouseenter: function(b) {
                    k(b.currentTarget).addClass("ui-state-hover")
                }, mouseleave: function(b) {
                    k(b.currentTarget).removeClass("ui-state-hover")
                }})
        }, _focusable: function(a) {
            this.focusable = this.focusable.add(a), this._on(a, {focusin: function(b) {
                    k(b.currentTarget).addClass("ui-state-focus")
                }, focusout: function(b) {
                    k(b.currentTarget).removeClass("ui-state-focus")
                }})
        }, _trigger: function(d, f, c) {
            var a, n, b = this.options[d];
            if (c = c || {}, f = k.Event(f), f.type = (d === this.widgetEventPrefix ? d : this.widgetEventPrefix + d).toLowerCase(), f.target = this.element[0], n = f.originalEvent) {
                for (a in n) {
                    a in f || (f[a] = n[a])
                }
            }
            return this.element.trigger(f, c), !(k.isFunction(b) && b.apply(this.element[0], [f].concat(c)) === !1 || f.isDefaultPrevented())
        }}, k.each({show: "fadeIn", hide: "fadeOut"}, function(a, b) {
        k.Widget.prototype["_" + a] = function(f, o, n) {
            "string" == typeof o && (o = {effect: o});
            var d, c = o ? o === !0 || "number" == typeof o ? b : o.effect || b : a;
            o = o || {}, "number" == typeof o && (o = {duration: o}), d = !k.isEmptyObject(o), o.complete = n, o.delay && f.delay(o.delay), d && k.effects && k.effects.effect[c] ? f[a](o) : c !== a && f[c] ? f[c](o.duration, o.easing, n) : f.queue(function(m) {
                k(this)[a](), n && n.call(f[0]), m()
            })
        }
    })
})(jQuery);
(function(c) {
    var d = !1;
    c(document).mouseup(function() {
        d = !1
    }), c.widget("ui.mouse", {version: "1.10.3", options: {cancel: "input,textarea,button,select,option", distance: 1, delay: 0}, _mouseInit: function() {
            var a = this;
            this.element.bind("mousedown." + this.widgetName, function(b) {
                return a._mouseDown(b)
            }).bind("click." + this.widgetName, function(b) {
                return !0 === c.data(b.target, a.widgetName + ".preventClickEvent") ? (c.removeData(b.target, a.widgetName + ".preventClickEvent"), b.stopImmediatePropagation(), !1) : undefined
            }), this.started = !1
        }, _mouseDestroy: function() {
            this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && c(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
        }, _mouseDown: function(g) {
            if (!d) {
                this._mouseStarted && this._mouseUp(g), this._mouseDownEvent = g;
                var b = this, a = 1 === g.which, h = "string" == typeof this.options.cancel && g.target.nodeName ? c(g.target).closest(this.options.cancel).length : !1;
                return a && !h && this._mouseCapture(g) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    b.mouseDelayMet = !0
                }, this.options.delay)), this._mouseDistanceMet(g) && this._mouseDelayMet(g) && (this._mouseStarted = this._mouseStart(g) !== !1, !this._mouseStarted) ? (g.preventDefault(), !0) : (!0 === c.data(g.target, this.widgetName + ".preventClickEvent") && c.removeData(g.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function(e) {
                    return b._mouseMove(e)
                }, this._mouseUpDelegate = function(e) {
                    return b._mouseUp(e)
                }, c(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), g.preventDefault(), d = !0, !0)) : !0
            }
        }, _mouseMove: function(a) {
            return c.ui.ie && (!document.documentMode || 9 > document.documentMode) && !a.button ? this._mouseUp(a) : this._mouseStarted ? (this._mouseDrag(a), a.preventDefault()) : (this._mouseDistanceMet(a) && this._mouseDelayMet(a) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, a) !== !1, this._mouseStarted ? this._mouseDrag(a) : this._mouseUp(a)), !this._mouseStarted)
        }, _mouseUp: function(a) {
            return c(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, a.target === this._mouseDownEvent.target && c.data(a.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(a)), !1
        }, _mouseDistanceMet: function(a) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - a.pageX), Math.abs(this._mouseDownEvent.pageY - a.pageY)) >= this.options.distance
        }, _mouseDelayMet: function() {
            return this.mouseDelayMet
        }, _mouseStart: function() {
        }, _mouseDrag: function() {
        }, _mouseStop: function() {
        }, _mouseCapture: function() {
            return !0
        }})
})(jQuery);
(function(H, o) {
    function u(k, g, b) {
        return[parseFloat(k[0]) * (n.test(k[0]) ? g / 100 : 1), parseFloat(k[1]) * (n.test(k[1]) ? b / 100 : 1)]
    }
    function G(g, b) {
        return parseInt(H.css(g, b), 10) || 0
    }
    function h(g) {
        var b = g[0];
        return 9 === b.nodeType ? {width: g.width(), height: g.height(), offset: {top: 0, left: 0}} : H.isWindow(b) ? {width: g.width(), height: g.height(), offset: {top: g.scrollTop(), left: g.scrollLeft()}} : b.preventDefault ? {width: 0, height: 0, offset: {top: b.pageY, left: b.pageX}} : {width: g.outerWidth(), height: g.outerHeight(), offset: g.offset()}
    }
    H.ui = H.ui || {};
    var d, l = Math.max, p = Math.abs, s = Math.round, c = /left|center|right/, e = /top|center|bottom/, a = /[\+\-]\d+(\.[\d]+)?%?/, f = /^\w+/, n = /%$/, r = H.fn.position;
    H.position = {scrollbarWidth: function() {
            if (d !== o) {
                return d
            }
            var b, m, g = H("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"), k = g.children()[0];
            return H("body").append(g), b = k.offsetWidth, g.css("overflow", "scroll"), m = k.offsetWidth, b === m && (m = g[0].clientWidth), g.remove(), d = b - m
        }, getScrollInfo: function(g) {
            var m = g.isWindow ? "" : g.element.css("overflow-x"), k = g.isWindow ? "" : g.element.css("overflow-y"), b = "scroll" === m || "auto" === m && g.width < g.element[0].scrollWidth, q = "scroll" === k || "auto" === k && g.height < g.element[0].scrollHeight;
            return{width: q ? H.position.scrollbarWidth() : 0, height: b ? H.position.scrollbarWidth() : 0}
        }, getWithinInfo: function(g) {
            var b = H(g || window), k = H.isWindow(b[0]);
            return{element: b, isWindow: k, offset: b.offset() || {left: 0, top: 0}, scrollLeft: b.scrollLeft(), scrollTop: b.scrollTop(), width: k ? b.width() : b.outerWidth(), height: k ? b.height() : b.outerHeight()}
        }}, H.fn.position = function(m) {
        if (!m || !m.of) {
            return r.apply(this, arguments)
        }
        m = H.extend({}, m);
        var C, x, w, q, y, g, B = H(m.of), k = H.position.getWithinInfo(m.within), A = H.position.getScrollInfo(k), b = (m.collision || "flip").split(" "), v = {};
        return g = h(B), B[0].preventDefault && (m.at = "left top"), x = g.width, w = g.height, q = g.offset, y = H.extend({}, q), H.each(["my", "at"], function() {
            var F, D, E = (m[this] || "").split(" ");
            1 === E.length && (E = c.test(E[0]) ? E.concat(["center"]) : e.test(E[0]) ? ["center"].concat(E) : ["center", "center"]), E[0] = c.test(E[0]) ? E[0] : "center", E[1] = e.test(E[1]) ? E[1] : "center", F = a.exec(E[0]), D = a.exec(E[1]), v[this] = [F ? F[0] : 0, D ? D[0] : 0], m[this] = [f.exec(E[0])[0], f.exec(E[1])[0]]
        }), 1 === b.length && (b[1] = b[0]), "right" === m.at[0] ? y.left += x : "center" === m.at[0] && (y.left += x / 2), "bottom" === m.at[1] ? y.top += w : "center" === m.at[1] && (y.top += w / 2), C = u(v.at, x, w), y.left += C[0], y.top += C[1], this.each(function() {
            var D, X, M = H(this), E = M.outerWidth(), S = M.outerHeight(), U = G(this, "marginLeft"), F = G(this, "marginTop"), W = E + U + G(this, "marginRight") + A.width, V = S + F + G(this, "marginBottom") + A.height, R = H.extend({}, y), T = u(v.my, M.outerWidth(), M.outerHeight());
            "right" === m.my[0] ? R.left -= E : "center" === m.my[0] && (R.left -= E / 2), "bottom" === m.my[1] ? R.top -= S : "center" === m.my[1] && (R.top -= S / 2), R.left += T[0], R.top += T[1], H.support.offsetFractions || (R.left = s(R.left), R.top = s(R.top)), D = {marginLeft: U, marginTop: F}, H.each(["left", "top"], function(J, I) {
                H.ui.position[b[J]] && H.ui.position[b[J]][I](R, {targetWidth: x, targetHeight: w, elemWidth: E, elemHeight: S, collisionPosition: D, collisionWidth: W, collisionHeight: V, offset: [C[0] + T[0], C[1] + T[1]], my: m.my, at: m.at, within: k, elem: M})
            }), m.using && (X = function(L) {
                var N = q.left - R.left, J = N + x - E, I = q.top - R.top, O = I + w - S, K = {target: {element: B, left: q.left, top: q.top, width: x, height: w}, element: {element: M, left: R.left, top: R.top, width: E, height: S}, horizontal: 0 > J ? "left" : N > 0 ? "right" : "center", vertical: 0 > O ? "top" : I > 0 ? "bottom" : "middle"};
                E > x && x > p(N + J) && (K.horizontal = "center"), S > w && w > p(I + O) && (K.vertical = "middle"), K.important = l(p(N), p(J)) > l(p(I), p(O)) ? "horizontal" : "vertical", m.using.call(this, L, K)
            }), M.offset(H.extend(R, {using: X}))
        })
    }, H.ui.position = {fit: {left: function(w, y) {
                var g, v = y.within, m = v.isWindow ? v.scrollLeft : v.offset.left, x = v.width, q = w.left - y.collisionPosition.marginLeft, b = m - q, k = q + y.collisionWidth - x - m;
                y.collisionWidth > x ? b > 0 && 0 >= k ? (g = w.left + b + y.collisionWidth - x - m, w.left += b - g) : w.left = k > 0 && 0 >= b ? m : b > k ? m + x - y.collisionWidth : m : b > 0 ? w.left += b : k > 0 ? w.left -= k : w.left = l(w.left - q, w.left)
            }, top: function(w, y) {
                var g, v = y.within, m = v.isWindow ? v.scrollTop : v.offset.top, x = y.within.height, q = w.top - y.collisionPosition.marginTop, b = m - q, k = q + y.collisionHeight - x - m;
                y.collisionHeight > x ? b > 0 && 0 >= k ? (g = w.top + b + y.collisionHeight - x - m, w.top += b - g) : w.top = k > 0 && 0 >= b ? m : b > k ? m + x - y.collisionHeight : m : b > 0 ? w.top += b : k > 0 ? w.top -= k : w.top = l(w.top - q, w.top)
            }}, flip: {left: function(k, x) {
                var B, g, D = x.within, q = D.offset.left + D.scrollLeft, E = D.width, A = D.isWindow ? D.scrollLeft : D.offset.left, C = k.left - x.collisionPosition.marginLeft, v = C - A, m = C + x.collisionWidth - E - A, w = "left" === x.my[0] ? -x.elemWidth : "right" === x.my[0] ? x.elemWidth : 0, b = "left" === x.at[0] ? x.targetWidth : "right" === x.at[0] ? -x.targetWidth : 0, y = -2 * x.offset[0];
                0 > v ? (B = k.left + w + b + y + x.collisionWidth - E - q, (0 > B || p(v) > B) && (k.left += w + b + y)) : m > 0 && (g = k.left - x.collisionPosition.marginLeft + w + b + y - A, (g > 0 || m > p(g)) && (k.left += w + b + y))
            }, top: function(k, x) {
                var B, g, E = x.within, q = E.offset.top + E.scrollTop, F = E.height, A = E.isWindow ? E.scrollTop : E.offset.top, C = k.top - x.collisionPosition.marginTop, v = C - A, m = C + x.collisionHeight - F - A, w = "top" === x.my[1], b = w ? -x.elemHeight : "bottom" === x.my[1] ? x.elemHeight : 0, y = "top" === x.at[1] ? x.targetHeight : "bottom" === x.at[1] ? -x.targetHeight : 0, D = -2 * x.offset[1];
                0 > v ? (g = k.top + b + y + D + x.collisionHeight - F - q, k.top + b + y + D > v && (0 > g || p(v) > g) && (k.top += b + y + D)) : m > 0 && (B = k.top - x.collisionPosition.marginTop + b + y + D - A, k.top + b + y + D > m && (B > 0 || m > p(B)) && (k.top += b + y + D))
            }}, flipfit: {left: function() {
                H.ui.position.flip.left.apply(this, arguments), H.ui.position.fit.left.apply(this, arguments)
            }, top: function() {
                H.ui.position.flip.top.apply(this, arguments), H.ui.position.fit.top.apply(this, arguments)
            }}}, function() {
        var b, v, m, g, w, q = document.getElementsByTagName("body")[0], k = document.createElement("div");
        b = document.createElement(q ? "div" : "body"), m = {visibility: "hidden", width: 0, height: 0, border: 0, margin: 0, background: "none"}, q && H.extend(m, {position: "absolute", left: "-1000px", top: "-1000px"});
        for (w in m) {
            b.style[w] = m[w]
        }
        b.appendChild(k), v = q || document.documentElement, v.insertBefore(b, v.firstChild), k.style.cssText = "position: absolute; left: 10.7432222px;", g = H(k).offset().left, H.support.offsetFractions = g > 10 && 11 > g, b.innerHTML = "", v.removeChild(b)
    }()
})(jQuery);
(function(b) {
    b.widget("ui.draggable", b.ui.mouse, {version: "1.10.3", widgetEventPrefix: "drag", options: {addClasses: !0, appendTo: "parent", axis: !1, connectToSortable: !1, containment: !1, cursor: "auto", cursorAt: !1, grid: !1, handle: !1, helper: "original", iframeFix: !1, opacity: !1, refreshPositions: !1, revert: !1, revertDuration: 500, scope: "default", scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, snap: !1, snapMode: "both", snapTolerance: 20, stack: !1, zIndex: !1, drag: null, start: null, stop: null}, _create: function() {
            "original" !== this.options.helper || /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative"), this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._mouseInit()
        }, _destroy: function() {
            this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), this._mouseDestroy()
        }, _mouseCapture: function(d) {
            var a = this.options;
            return this.helper || a.disabled || b(d.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(d), this.handle ? (b(a.iframeFix === !0 ? "iframe" : a.iframeFix).each(function() {
                b("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width: this.offsetWidth + "px", height: this.offsetHeight + "px", position: "absolute", opacity: "0.001", zIndex: 1000}).css(b(this).offset()).appendTo("body")
            }), !0) : !1)
        }, _mouseStart: function(d) {
            var a = this.options;
            return this.helper = this._createHelper(d), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), b.ui.ddmanager && (b.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(), this.offsetParent = this.helper.offsetParent(), this.offsetParentCssPosition = this.offsetParent.css("position"), this.offset = this.positionAbs = this.element.offset(), this.offset = {top: this.offset.top - this.margins.top, left: this.offset.left - this.margins.left}, this.offset.scroll = !1, b.extend(this.offset, {click: {left: d.pageX - this.offset.left, top: d.pageY - this.offset.top}, parent: this._getParentOffset(), relative: this._getRelativeOffset()}), this.originalPosition = this.position = this._generatePosition(d), this.originalPageX = d.pageX, this.originalPageY = d.pageY, a.cursorAt && this._adjustOffsetFromHelper(a.cursorAt), this._setContainment(), this._trigger("start", d) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), b.ui.ddmanager && !a.dropBehaviour && b.ui.ddmanager.prepareOffsets(this, d), this._mouseDrag(d, !0), b.ui.ddmanager && b.ui.ddmanager.dragStart(this, d), !0)
        }, _mouseDrag: function(f, a) {
            if ("fixed" === this.offsetParentCssPosition && (this.offset.parent = this._getParentOffset()), this.position = this._generatePosition(f), this.positionAbs = this._convertPositionTo("absolute"), !a) {
                var e = this._uiHash();
                if (this._trigger("drag", f, e) === !1) {
                    return this._mouseUp({}), !1
                }
                this.position = e.position
            }
            return this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), b.ui.ddmanager && b.ui.ddmanager.drag(this, f), !1
        }, _mouseStop: function(f) {
            var a = this, e = !1;
            return b.ui.ddmanager && !this.options.dropBehaviour && (e = b.ui.ddmanager.drop(this, f)), this.dropped && (e = this.dropped, this.dropped = !1), "original" !== this.options.helper || b.contains(this.element[0].ownerDocument, this.element[0]) ? ("invalid" === this.options.revert && !e || "valid" === this.options.revert && e || this.options.revert === !0 || b.isFunction(this.options.revert) && this.options.revert.call(this.element, e) ? b(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                a._trigger("stop", f) !== !1 && a._clear()
            }) : this._trigger("stop", f) !== !1 && this._clear(), !1) : !1
        }, _mouseUp: function(a) {
            return b("div.ui-draggable-iframeFix").each(function() {
                this.parentNode.removeChild(this)
            }), b.ui.ddmanager && b.ui.ddmanager.dragStop(this, a), b.ui.mouse.prototype._mouseUp.call(this, a)
        }, cancel: function() {
            return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this
        }, _getHandle: function(a) {
            return this.options.handle ? !!b(a.target).closest(this.element.find(this.options.handle)).length : !0
        }, _createHelper: function(f) {
            var a = this.options, e = b.isFunction(a.helper) ? b(a.helper.apply(this.element[0], [f])) : "clone" === a.helper ? this.element.clone().removeAttr("id") : this.element;
            return e.parents("body").length || e.appendTo("parent" === a.appendTo ? this.element[0].parentNode : a.appendTo), e[0] === this.element[0] || /(fixed|absolute)/.test(e.css("position")) || e.css("position", "absolute"), e
        }, _adjustOffsetFromHelper: function(a) {
            "string" == typeof a && (a = a.split(" ")), b.isArray(a) && (a = {left: +a[0], top: +a[1] || 0}), "left" in a && (this.offset.click.left = a.left + this.margins.left), "right" in a && (this.offset.click.left = this.helperProportions.width - a.right + this.margins.left), "top" in a && (this.offset.click.top = a.top + this.margins.top), "bottom" in a && (this.offset.click.top = this.helperProportions.height - a.bottom + this.margins.top)
        }, _getParentOffset: function() {
            var a = this.offsetParent.offset();
            return"absolute" === this.cssPosition && this.scrollParent[0] !== document && b.contains(this.scrollParent[0], this.offsetParent[0]) && (a.left += this.scrollParent.scrollLeft(), a.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && b.ui.ie) && (a = {top: 0, left: 0}), {top: a.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: a.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)}
        }, _getRelativeOffset: function() {
            if ("relative" === this.cssPosition) {
                var a = this.element.position();
                return{top: a.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(), left: a.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()}
            }
            return{top: 0, left: 0}
        }, _cacheMargins: function() {
            this.margins = {left: parseInt(this.element.css("marginLeft"), 10) || 0, top: parseInt(this.element.css("marginTop"), 10) || 0, right: parseInt(this.element.css("marginRight"), 10) || 0, bottom: parseInt(this.element.css("marginBottom"), 10) || 0}
        }, _cacheHelperProportions: function() {
            this.helperProportions = {width: this.helper.outerWidth(), height: this.helper.outerHeight()}
        }, _setContainment: function() {
            var h, a, g, f = this.options;
            return f.containment ? "window" === f.containment ? (this.containment = [b(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, b(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, b(window).scrollLeft() + b(window).width() - this.helperProportions.width - this.margins.left, b(window).scrollTop() + (b(window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top], undefined) : "document" === f.containment ? (this.containment = [0, 0, b(document).width() - this.helperProportions.width - this.margins.left, (b(document).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top], undefined) : f.containment.constructor === Array ? (this.containment = f.containment, undefined) : ("parent" === f.containment && (f.containment = this.helper[0].parentNode), a = b(f.containment), g = a[0], g && (h = "hidden" !== a.css("overflow"), this.containment = [(parseInt(a.css("borderLeftWidth"), 10) || 0) + (parseInt(a.css("paddingLeft"), 10) || 0), (parseInt(a.css("borderTopWidth"), 10) || 0) + (parseInt(a.css("paddingTop"), 10) || 0), (h ? Math.max(g.scrollWidth, g.offsetWidth) : g.offsetWidth) - (parseInt(a.css("borderRightWidth"), 10) || 0) - (parseInt(a.css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (h ? Math.max(g.scrollHeight, g.offsetHeight) : g.offsetHeight) - (parseInt(a.css("borderBottomWidth"), 10) || 0) - (parseInt(a.css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relative_container = a), undefined) : (this.containment = null, undefined)
        }, _convertPositionTo: function(h, a) {
            a || (a = this.position);
            var g = "absolute" === h ? 1 : -1, f = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && b.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent;
            return this.offset.scroll || (this.offset.scroll = {top: f.scrollTop(), left: f.scrollLeft()}), {top: a.top + this.offset.relative.top * g + this.offset.parent.top * g - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : this.offset.scroll.top) * g, left: a.left + this.offset.relative.left * g + this.offset.parent.left * g - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : this.offset.scroll.left) * g}
        }, _generatePosition: function(h) {
            var o, a, r, l, s = this.options, u = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && b.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, n = h.pageX, q = h.pageY;
            return this.offset.scroll || (this.offset.scroll = {top: u.scrollTop(), left: u.scrollLeft()}), this.originalPosition && (this.containment && (this.relative_container ? (a = this.relative_container.offset(), o = [this.containment[0] + a.left, this.containment[1] + a.top, this.containment[2] + a.left, this.containment[3] + a.top]) : o = this.containment, h.pageX - this.offset.click.left < o[0] && (n = o[0] + this.offset.click.left), h.pageY - this.offset.click.top < o[1] && (q = o[1] + this.offset.click.top), h.pageX - this.offset.click.left > o[2] && (n = o[2] + this.offset.click.left), h.pageY - this.offset.click.top > o[3] && (q = o[3] + this.offset.click.top)), s.grid && (r = s.grid[1] ? this.originalPageY + Math.round((q - this.originalPageY) / s.grid[1]) * s.grid[1] : this.originalPageY, q = o ? r - this.offset.click.top >= o[1] || r - this.offset.click.top > o[3] ? r : r - this.offset.click.top >= o[1] ? r - s.grid[1] : r + s.grid[1] : r, l = s.grid[0] ? this.originalPageX + Math.round((n - this.originalPageX) / s.grid[0]) * s.grid[0] : this.originalPageX, n = o ? l - this.offset.click.left >= o[0] || l - this.offset.click.left > o[2] ? l : l - this.offset.click.left >= o[0] ? l - s.grid[0] : l + s.grid[0] : l)), {top: q - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : this.offset.scroll.top), left: n - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : this.offset.scroll.left)}
        }, _clear: function() {
            this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1
        }, _trigger: function(f, a, e) {
            return e = e || this._uiHash(), b.ui.plugin.call(this, f, [a, e]), "drag" === f && (this.positionAbs = this._convertPositionTo("absolute")), b.Widget.prototype._trigger.call(this, f, a, e)
        }, plugins: {}, _uiHash: function() {
            return{helper: this.helper, position: this.position, originalPosition: this.originalPosition, offset: this.positionAbs}
        }}), b.ui.plugin.add("draggable", "connectToSortable", {start: function(k, l) {
            var h = b(this).data("ui-draggable"), g = h.options, a = b.extend({}, l, {item: h.element});
            h.sortables = [], b(g.connectToSortable).each(function() {
                var c = b.data(this, "ui-sortable");
                c && !c.options.disabled && (h.sortables.push({instance: c, shouldRevert: c.options.revert}), c.refreshPositions(), c._trigger("activate", k, a))
            })
        }, stop: function(h, a) {
            var g = b(this).data("ui-draggable"), f = b.extend({}, a, {item: g.element});
            b.each(g.sortables, function() {
                this.instance.isOver ? (this.instance.isOver = 0, g.cancelHelperRemoval = !0, this.instance.cancelHelperRemoval = !1, this.shouldRevert && (this.instance.options.revert = this.shouldRevert), this.instance._mouseStop(h), this.instance.options.helper = this.instance.options._helper, "original" === g.options.helper && this.instance.currentItem.css({top: "auto", left: "auto"})) : (this.instance.cancelHelperRemoval = !1, this.instance._trigger("deactivate", h, f))
            })
        }, drag: function(h, a) {
            var g = b(this).data("ui-draggable"), f = this;
            b.each(g.sortables, function() {
                var d = !1, c = this;
                this.instance.positionAbs = g.positionAbs, this.instance.helperProportions = g.helperProportions, this.instance.offset.click = g.offset.click, this.instance._intersectsWith(this.instance.containerCache) && (d = !0, b.each(g.sortables, function() {
                    return this.instance.positionAbs = g.positionAbs, this.instance.helperProportions = g.helperProportions, this.instance.offset.click = g.offset.click, this !== c && this.instance._intersectsWith(this.instance.containerCache) && b.contains(c.instance.element[0], this.instance.element[0]) && (d = !1), d
                })), d ? (this.instance.isOver || (this.instance.isOver = 1, this.instance.currentItem = b(f).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", !0), this.instance.options._helper = this.instance.options.helper, this.instance.options.helper = function() {
                    return a.helper[0]
                }, h.target = this.instance.currentItem[0], this.instance._mouseCapture(h, !0), this.instance._mouseStart(h, !0, !0), this.instance.offset.click.top = g.offset.click.top, this.instance.offset.click.left = g.offset.click.left, this.instance.offset.parent.left -= g.offset.parent.left - this.instance.offset.parent.left, this.instance.offset.parent.top -= g.offset.parent.top - this.instance.offset.parent.top, g._trigger("toSortable", h), g.dropped = this.instance.element, g.currentItem = g.element, this.instance.fromOutside = g), this.instance.currentItem && this.instance._mouseDrag(h)) : this.instance.isOver && (this.instance.isOver = 0, this.instance.cancelHelperRemoval = !0, this.instance.options.revert = !1, this.instance._trigger("out", h, this.instance._uiHash(this.instance)), this.instance._mouseStop(h, !0), this.instance.options.helper = this.instance.options._helper, this.instance.currentItem.remove(), this.instance.placeholder && this.instance.placeholder.remove(), g._trigger("fromSortable", h), g.dropped = !1)
            })
        }}), b.ui.plugin.add("draggable", "cursor", {start: function() {
            var d = b("body"), a = b(this).data("ui-draggable").options;
            d.css("cursor") && (a._cursor = d.css("cursor")), d.css("cursor", a.cursor)
        }, stop: function() {
            var a = b(this).data("ui-draggable").options;
            a._cursor && b("body").css("cursor", a._cursor)
        }}), b.ui.plugin.add("draggable", "opacity", {start: function(h, a) {
            var g = b(a.helper), f = b(this).data("ui-draggable").options;
            g.css("opacity") && (f._opacity = g.css("opacity")), g.css("opacity", f.opacity)
        }, stop: function(f, a) {
            var e = b(this).data("ui-draggable").options;
            e._opacity && b(a.helper).css("opacity", e._opacity)
        }}), b.ui.plugin.add("draggable", "scroll", {start: function() {
            var a = b(this).data("ui-draggable");
            a.scrollParent[0] !== document && "HTML" !== a.scrollParent[0].tagName && (a.overflowOffset = a.scrollParent.offset())
        }, drag: function(h) {
            var a = b(this).data("ui-draggable"), g = a.options, f = !1;
            a.scrollParent[0] !== document && "HTML" !== a.scrollParent[0].tagName ? (g.axis && "x" === g.axis || (a.overflowOffset.top + a.scrollParent[0].offsetHeight - h.pageY < g.scrollSensitivity ? a.scrollParent[0].scrollTop = f = a.scrollParent[0].scrollTop + g.scrollSpeed : h.pageY - a.overflowOffset.top < g.scrollSensitivity && (a.scrollParent[0].scrollTop = f = a.scrollParent[0].scrollTop - g.scrollSpeed)), g.axis && "y" === g.axis || (a.overflowOffset.left + a.scrollParent[0].offsetWidth - h.pageX < g.scrollSensitivity ? a.scrollParent[0].scrollLeft = f = a.scrollParent[0].scrollLeft + g.scrollSpeed : h.pageX - a.overflowOffset.left < g.scrollSensitivity && (a.scrollParent[0].scrollLeft = f = a.scrollParent[0].scrollLeft - g.scrollSpeed))) : (g.axis && "x" === g.axis || (h.pageY - b(document).scrollTop() < g.scrollSensitivity ? f = b(document).scrollTop(b(document).scrollTop() - g.scrollSpeed) : b(window).height() - (h.pageY - b(document).scrollTop()) < g.scrollSensitivity && (f = b(document).scrollTop(b(document).scrollTop() + g.scrollSpeed))), g.axis && "y" === g.axis || (h.pageX - b(document).scrollLeft() < g.scrollSensitivity ? f = b(document).scrollLeft(b(document).scrollLeft() - g.scrollSpeed) : b(window).width() - (h.pageX - b(document).scrollLeft()) < g.scrollSensitivity && (f = b(document).scrollLeft(b(document).scrollLeft() + g.scrollSpeed)))), f !== !1 && b.ui.ddmanager && !g.dropBehaviour && b.ui.ddmanager.prepareOffsets(a, h)
        }}), b.ui.plugin.add("draggable", "snap", {start: function() {
            var d = b(this).data("ui-draggable"), a = d.options;
            d.snapElements = [], b(a.snap.constructor !== String ? a.snap.items || ":data(ui-draggable)" : a.snap).each(function() {
                var f = b(this), c = f.offset();
                this !== d.element[0] && d.snapElements.push({item: this, width: f.outerWidth(), height: f.outerHeight(), top: c.top, left: c.left})
            })
        }, drag: function(n, o) {
            var l, s, a, u, O, m, p, y, d, f, v = b(this).data("ui-draggable"), g = v.options, r = g.snapTolerance, h = o.offset.left, P = h + v.helperProportions.width, c = o.offset.top, Q = c + v.helperProportions.height;
            for (d = v.snapElements.length - 1; d >= 0; d--) {
                O = v.snapElements[d].left, m = O + v.snapElements[d].width, p = v.snapElements[d].top, y = p + v.snapElements[d].height, O - r > P || h > m + r || p - r > Q || c > y + r || !b.contains(v.snapElements[d].item.ownerDocument, v.snapElements[d].item) ? (v.snapElements[d].snapping && v.options.snap.release && v.options.snap.release.call(v.element, n, b.extend(v._uiHash(), {snapItem: v.snapElements[d].item})), v.snapElements[d].snapping = !1) : ("inner" !== g.snapMode && (l = r >= Math.abs(p - Q), s = r >= Math.abs(y - c), a = r >= Math.abs(O - P), u = r >= Math.abs(m - h), l && (o.position.top = v._convertPositionTo("relative", {top: p - v.helperProportions.height, left: 0}).top - v.margins.top), s && (o.position.top = v._convertPositionTo("relative", {top: y, left: 0}).top - v.margins.top), a && (o.position.left = v._convertPositionTo("relative", {top: 0, left: O - v.helperProportions.width}).left - v.margins.left), u && (o.position.left = v._convertPositionTo("relative", {top: 0, left: m}).left - v.margins.left)), f = l || s || a || u, "outer" !== g.snapMode && (l = r >= Math.abs(p - c), s = r >= Math.abs(y - Q), a = r >= Math.abs(O - h), u = r >= Math.abs(m - P), l && (o.position.top = v._convertPositionTo("relative", {top: p, left: 0}).top - v.margins.top), s && (o.position.top = v._convertPositionTo("relative", {top: y - v.helperProportions.height, left: 0}).top - v.margins.top), a && (o.position.left = v._convertPositionTo("relative", {top: 0, left: O}).left - v.margins.left), u && (o.position.left = v._convertPositionTo("relative", {top: 0, left: m - v.helperProportions.width}).left - v.margins.left)), !v.snapElements[d].snapping && (l || s || a || u || f) && v.options.snap.snap && v.options.snap.snap.call(v.element, n, b.extend(v._uiHash(), {snapItem: v.snapElements[d].item})), v.snapElements[d].snapping = l || s || a || u || f)
            }
        }}), b.ui.plugin.add("draggable", "stack", {start: function() {
            var f, a = this.data("ui-draggable").options, e = b.makeArray(b(a.stack)).sort(function(c, d) {
                return(parseInt(b(c).css("zIndex"), 10) || 0) - (parseInt(b(d).css("zIndex"), 10) || 0)
            });
            e.length && (f = parseInt(b(e[0]).css("zIndex"), 10) || 0, b(e).each(function(c) {
                b(this).css("zIndex", f + c)
            }), this.css("zIndex", f + e.length))
        }}), b.ui.plugin.add("draggable", "zIndex", {start: function(h, a) {
            var g = b(a.helper), f = b(this).data("ui-draggable").options;
            g.css("zIndex") && (f._zIndex = g.css("zIndex")), g.css("zIndex", f.zIndex)
        }, stop: function(f, a) {
            var e = b(this).data("ui-draggable").options;
            e._zIndex && b(a.helper).css("zIndex", e._zIndex)
        }})
})(jQuery);
(function(c) {
    function d(a, b, e) {
        return a > b && b + e > a
    }
    c.widget("ui.droppable", {version: "1.10.3", widgetEventPrefix: "drop", options: {accept: "*", activeClass: !1, addClasses: !0, greedy: !1, hoverClass: !1, scope: "default", tolerance: "intersect", activate: null, deactivate: null, drop: null, out: null, over: null}, _create: function() {
            var a = this.options, b = a.accept;
            this.isover = !1, this.isout = !0, this.accept = c.isFunction(b) ? b : function(e) {
                return e.is(b)
            }, this.proportions = {width: this.element[0].offsetWidth, height: this.element[0].offsetHeight}, c.ui.ddmanager.droppables[a.scope] = c.ui.ddmanager.droppables[a.scope] || [], c.ui.ddmanager.droppables[a.scope].push(this), a.addClasses && this.element.addClass("ui-droppable")
        }, _destroy: function() {
            for (var a = 0, b = c.ui.ddmanager.droppables[this.options.scope]; b.length > a; a++) {
                b[a] === this && b.splice(a, 1)
            }
            this.element.removeClass("ui-droppable ui-droppable-disabled")
        }, _setOption: function(a, b) {
            "accept" === a && (this.accept = c.isFunction(b) ? b : function(e) {
                return e.is(b)
            }), c.Widget.prototype._setOption.apply(this, arguments)
        }, _activate: function(a) {
            var b = c.ui.ddmanager.current;
            this.options.activeClass && this.element.addClass(this.options.activeClass), b && this._trigger("activate", a, this.ui(b))
        }, _deactivate: function(a) {
            var b = c.ui.ddmanager.current;
            this.options.activeClass && this.element.removeClass(this.options.activeClass), b && this._trigger("deactivate", a, this.ui(b))
        }, _over: function(a) {
            var b = c.ui.ddmanager.current;
            b && (b.currentItem || b.element)[0] !== this.element[0] && this.accept.call(this.element[0], b.currentItem || b.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", a, this.ui(b)))
        }, _out: function(a) {
            var b = c.ui.ddmanager.current;
            b && (b.currentItem || b.element)[0] !== this.element[0] && this.accept.call(this.element[0], b.currentItem || b.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("out", a, this.ui(b)))
        }, _drop: function(g, h) {
            var b = h || c.ui.ddmanager.current, a = !1;
            return b && (b.currentItem || b.element)[0] !== this.element[0] ? (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function() {
                var e = c.data(this, "ui-droppable");
                return e.options.greedy && !e.options.disabled && e.options.scope === b.options.scope && e.accept.call(e.element[0], b.currentItem || b.element) && c.ui.intersect(b, c.extend(e, {offset: e.element.offset()}), e.options.tolerance) ? (a = !0, !1) : undefined
            }), a ? !1 : this.accept.call(this.element[0], b.currentItem || b.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", g, this.ui(b)), this.element) : !1) : !1
        }, ui: function(a) {
            return{draggable: a.currentItem || a.element, helper: a.helper, position: a.position, offset: a.positionAbs}
        }}), c.ui.intersect = function(u, F, a) {
        if (!F.offset) {
            return !1
        }
        var n, h, o = (u.positionAbs || u.position.absolute).left, r = o + u.helperProportions.width, E = (u.positionAbs || u.position.absolute).top, e = E + u.helperProportions.height, b = F.offset.left, l = b + F.proportions.width, s = F.offset.top, p = s + F.proportions.height;
        switch (a) {
            case"fit":
                return o >= b && l >= r && E >= s && p >= e;
            case"intersect":
                return o + u.helperProportions.width / 2 > b && l > r - u.helperProportions.width / 2 && E + u.helperProportions.height / 2 > s && p > e - u.helperProportions.height / 2;
            case"pointer":
                return n = (u.positionAbs || u.position.absolute).left + (u.clickOffset || u.offset.click).left, h = (u.positionAbs || u.position.absolute).top + (u.clickOffset || u.offset.click).top, d(h, s, F.proportions.height) && d(n, b, F.proportions.width);
            case"touch":
                return(E >= s && p >= E || e >= s && p >= e || s > E && e > p) && (o >= b && l >= o || r >= b && l >= r || b > o && r > l);
            default:
                return !1
            }
    }, c.ui.ddmanager = {current: null, droppables: {"default": []}, prepareOffsets: function(n, o) {
            var m, a, p = c.ui.ddmanager.droppables[n.options.scope] || [], b = o ? o.type : null, l = (n.currentItem || n.element).find(":data(ui-droppable)").addBack();
            c:for (m = 0; p.length > m; m++) {
                if (!(p[m].options.disabled || n && !p[m].accept.call(p[m].element[0], n.currentItem || n.element))) {
                    for (a = 0; l.length > a; a++) {
                        if (l[a] === p[m].element[0]) {
                            p[m].proportions.height = 0;
                            continue c
                        }
                    }
                    p[m].visible = "none" !== p[m].element.css("display"), p[m].visible && ("mousedown" === b && p[m]._activate.call(p[m], o), p[m].offset = p[m].element.offset(), p[m].proportions = {width: p[m].element[0].offsetWidth, height: p[m].element[0].offsetHeight})
                }
            }
        }, drop: function(b, f) {
            var a = !1;
            return c.each((c.ui.ddmanager.droppables[b.options.scope] || []).slice(), function() {
                this.options && (!this.options.disabled && this.visible && c.ui.intersect(b, this, this.options.tolerance) && (a = this._drop.call(this, f) || a), !this.options.disabled && this.visible && this.accept.call(this.element[0], b.currentItem || b.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, f)))
            }), a
        }, dragStart: function(a, b) {
            a.element.parentsUntil("body").bind("scroll.droppable", function() {
                a.options.refreshPositions || c.ui.ddmanager.prepareOffsets(a, b)
            })
        }, drag: function(a, b) {
            a.options.refreshPositions && c.ui.ddmanager.prepareOffsets(a, b), c.each(c.ui.ddmanager.droppables[a.options.scope] || [], function() {
                if (!this.options.disabled && !this.greedyChild && this.visible) {
                    var o, l, p, m = c.ui.intersect(a, this, this.options.tolerance), n = !m && this.isover ? "isout" : m && !this.isover ? "isover" : null;
                    n && (this.options.greedy && (l = this.options.scope, p = this.element.parents(":data(ui-droppable)").filter(function() {
                        return c.data(this, "ui-droppable").options.scope === l
                    }), p.length && (o = c.data(p[0], "ui-droppable"), o.greedyChild = "isover" === n)), o && "isover" === n && (o.isover = !1, o.isout = !0, o._out.call(o, b)), this[n] = !0, this["isout" === n ? "isover" : "isout"] = !1, this["isover" === n ? "_over" : "_out"].call(this, b), o && "isout" === n && (o.isout = !1, o.isover = !0, o._over.call(o, b)))
                }
            })
        }, dragStop: function(a, b) {
            a.element.parentsUntil("body").unbind("scroll.droppable"), a.options.refreshPositions || c.ui.ddmanager.prepareOffsets(a, b)
        }}
})(jQuery);
(function(f) {
    function d(a) {
        return parseInt(a, 10) || 0
    }
    function e(a) {
        return !isNaN(parseInt(a, 10))
    }
    f.widget("ui.resizable", f.ui.mouse, {version: "1.10.3", widgetEventPrefix: "resize", options: {alsoResize: !1, animate: !1, animateDuration: "slow", animateEasing: "swing", aspectRatio: !1, autoHide: !1, containment: !1, ghost: !1, grid: !1, handles: "e,s,se", helper: !1, maxHeight: null, maxWidth: null, minHeight: 10, minWidth: 10, zIndex: 90, resize: null, start: null, stop: null}, _create: function() {
            var n, o, m, a, p, b = this, c = this.options;
            if (this.element.addClass("ui-resizable"), f.extend(this, {_aspectRatio: !!c.aspectRatio, aspectRatio: c.aspectRatio, originalElement: this.element, _proportionallyResizeElements: [], _helper: c.helper || c.ghost || c.animate ? c.helper || "ui-resizable-helper" : null}), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(f("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position: this.element.css("position"), width: this.element.outerWidth(), height: this.element.outerHeight(), top: this.element.css("top"), left: this.element.css("left")})), this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable")), this.elementIsWrapper = !0, this.element.css({marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom")}), this.originalElement.css({marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0}), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({position: "static", zoom: 1, display: "block"})), this.originalElement.css({margin: this.originalElement.css("margin")}), this._proportionallyResize()), this.handles = c.handles || (f(".ui-resizable-handle", this.element).length ? {n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw"} : "e,s,se"), this.handles.constructor === String) {
                for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), n = this.handles.split(","), this.handles = {}, o = 0; n.length > o; o++) {
                    m = f.trim(n[o]), p = "ui-resizable-" + m, a = f("<div class='ui-resizable-handle " + p + "'></div>"), a.css({zIndex: c.zIndex}), "se" === m && a.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[m] = ".ui-resizable-" + m, this.element.append(a)
                }
            }
            this._renderAxis = function(l) {
                var s, k, h, g;
                l = l || this.element;
                for (s in this.handles) {
                    this.handles[s].constructor === String && (this.handles[s] = f(this.handles[s], this.element).show()), this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (k = f(this.handles[s], this.element), g = /sw|ne|nw|se|n|s/.test(s) ? k.outerHeight() : k.outerWidth(), h = ["padding", /ne|nw|n/.test(s) ? "Top" : /se|sw|s/.test(s) ? "Bottom" : /^e$/.test(s) ? "Right" : "Left"].join(""), l.css(h, g), this._proportionallyResize()), f(this.handles[s]).length
                }
            }, this._renderAxis(this.element), this._handles = f(".ui-resizable-handle", this.element).disableSelection(), this._handles.mouseover(function() {
                b.resizing || (this.className && (a = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), b.axis = a && a[1] ? a[1] : "se")
            }), c.autoHide && (this._handles.hide(), f(this.element).addClass("ui-resizable-autohide").mouseenter(function() {
                c.disabled || (f(this).removeClass("ui-resizable-autohide"), b._handles.show())
            }).mouseleave(function() {
                c.disabled || b.resizing || (f(this).addClass("ui-resizable-autohide"), b._handles.hide())
            })), this._mouseInit()
        }, _destroy: function() {
            this._mouseDestroy();
            var a, b = function(c) {
                f(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
            };
            return this.elementIsWrapper && (b(this.element), a = this.element, this.originalElement.css({position: a.css("position"), width: a.outerWidth(), height: a.outerHeight(), top: a.css("top"), left: a.css("left")}).insertAfter(a), a.remove()), this.originalElement.css("resize", this.originalResizeStyle), b(this.originalElement), this
        }, _mouseCapture: function(c) {
            var h, b, a = !1;
            for (h in this.handles) {
                b = f(this.handles[h])[0], (b === c.target || f.contains(b, c.target)) && (a = !0)
            }
            return !this.options.disabled && a
        }, _mouseStart: function(o) {
            var h, a, p, b = this.options, c = this.element.position(), n = this.element;
            return this.resizing = !0, /absolute/.test(n.css("position")) ? n.css({position: "absolute", top: n.css("top"), left: n.css("left")}) : n.is(".ui-draggable") && n.css({position: "absolute", top: c.top, left: c.left}), this._renderProxy(), h = d(this.helper.css("left")), a = d(this.helper.css("top")), b.containment && (h += f(b.containment).scrollLeft() || 0, a += f(b.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {left: h, top: a}, this.size = this._helper ? {width: n.outerWidth(), height: n.outerHeight()} : {width: n.width(), height: n.height()}, this.originalSize = this._helper ? {width: n.outerWidth(), height: n.outerHeight()} : {width: n.width(), height: n.height()}, this.originalPosition = {left: h, top: a}, this.sizeDiff = {width: n.outerWidth() - n.width(), height: n.outerHeight() - n.height()}, this.originalMousePosition = {left: o.pageX, top: o.pageY}, this.aspectRatio = "number" == typeof b.aspectRatio ? b.aspectRatio : this.originalSize.width / this.originalSize.height || 1, p = f(".ui-resizable-" + this.axis).css("cursor"), f("body").css("cursor", "auto" === p ? this.axis + "-resize" : p), n.addClass("ui-resizable-resizing"), this._propagate("start", o), !0
        }, _mouseDrag: function(c) {
            var b, a = this.helper, n = {}, s = this.originalMousePosition, o = this.axis, r = this.position.top, E = this.position.left, l = this.size.width, h = this.size.height, u = c.pageX - s.left || 0, D = c.pageY - s.top || 0, p = this._change[o];
            return p ? (b = p.apply(this, [c, u, D]), this._updateVirtualBoundaries(c.shiftKey), (this._aspectRatio || c.shiftKey) && (b = this._updateRatio(b, c)), b = this._respectSize(b, c), this._updateCache(b), this._propagate("resize", c), this.position.top !== r && (n.top = this.position.top + "px"), this.position.left !== E && (n.left = this.position.left + "px"), this.size.width !== l && (n.width = this.size.width + "px"), this.size.height !== h && (n.height = this.size.height + "px"), a.css(n), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), f.isEmptyObject(n) || this._trigger("resize", c, this.ui()), !1) : !1
        }, _mouseStop: function(u) {
            this.resizing = !1;
            var h, s, n, b, o, r, c, l = this.options, a = this;
            return this._helper && (h = this._proportionallyResizeElements, s = h.length && /textarea/i.test(h[0].nodeName), n = s && f.ui.hasScroll(h[0], "left") ? 0 : a.sizeDiff.height, b = s ? 0 : a.sizeDiff.width, o = {width: a.helper.width() - b, height: a.helper.height() - n}, r = parseInt(a.element.css("left"), 10) + (a.position.left - a.originalPosition.left) || null, c = parseInt(a.element.css("top"), 10) + (a.position.top - a.originalPosition.top) || null, l.animate || this.element.css(f.extend(o, {top: c, left: r})), a.helper.height(a.size.height), a.helper.width(a.size.width), this._helper && !l.animate && this._proportionallyResize()), f("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", u), this._helper && this.helper.remove(), !1
        }, _updateVirtualBoundaries: function(c) {
            var p, o, a, q, b, n = this.options;
            b = {minWidth: e(n.minWidth) ? n.minWidth : 0, maxWidth: e(n.maxWidth) ? n.maxWidth : 1 / 0, minHeight: e(n.minHeight) ? n.minHeight : 0, maxHeight: e(n.maxHeight) ? n.maxHeight : 1 / 0}, (this._aspectRatio || c) && (p = b.minHeight * this.aspectRatio, a = b.minWidth / this.aspectRatio, o = b.maxHeight * this.aspectRatio, q = b.maxWidth / this.aspectRatio, p > b.minWidth && (b.minWidth = p), a > b.minHeight && (b.minHeight = a), b.maxWidth > o && (b.maxWidth = o), b.maxHeight > q && (b.maxHeight = q)), this._vBoundaries = b
        }, _updateCache: function(a) {
            this.offset = this.helper.offset(), e(a.left) && (this.position.left = a.left), e(a.top) && (this.position.top = a.top), e(a.height) && (this.size.height = a.height), e(a.width) && (this.size.width = a.width)
        }, _updateRatio: function(b) {
            var k = this.position, c = this.size, a = this.axis;
            return e(b.height) ? b.width = b.height * this.aspectRatio : e(b.width) && (b.height = b.width / this.aspectRatio), "sw" === a && (b.left = k.left + (c.width - b.width), b.top = null), "nw" === a && (b.top = k.top + (c.height - b.height), b.left = k.left + (c.width - b.width)), b
        }, _respectSize: function(b) {
            var s = this._vBoundaries, r = this.axis, l = e(b.width) && s.maxWidth && s.maxWidth < b.width, A = e(b.height) && s.maxHeight && s.maxHeight < b.height, n = e(b.width) && s.minWidth && s.minWidth > b.width, o = e(b.height) && s.minHeight && s.minHeight > b.height, c = this.originalPosition.left + this.originalSize.width, h = this.position.top + this.size.height, u = /sw|nw|w/.test(r), a = /nw|ne|n/.test(r);
            return n && (b.width = s.minWidth), o && (b.height = s.minHeight), l && (b.width = s.maxWidth), A && (b.height = s.maxHeight), n && u && (b.left = c - s.minWidth), l && u && (b.left = c - s.maxWidth), o && a && (b.top = h - s.minHeight), A && a && (b.top = h - s.maxHeight), b.width || b.height || b.left || !b.top ? b.width || b.height || b.top || !b.left || (b.left = null) : b.top = null, b
        }, _proportionallyResize: function() {
            if (this._proportionallyResizeElements.length) {
                var b, m, n, c, a, o = this.helper || this.element;
                for (b = 0; this._proportionallyResizeElements.length > b; b++) {
                    if (a = this._proportionallyResizeElements[b], !this.borderDif) {
                        for (this.borderDif = [], n = [a.css("borderTopWidth"), a.css("borderRightWidth"), a.css("borderBottomWidth"), a.css("borderLeftWidth")], c = [a.css("paddingTop"), a.css("paddingRight"), a.css("paddingBottom"), a.css("paddingLeft")], m = 0; n.length > m; m++) {
                            this.borderDif[m] = (parseInt(n[m], 10) || 0) + (parseInt(c[m], 10) || 0)
                        }
                    }
                    a.css({height: o.height() - this.borderDif[0] - this.borderDif[2] || 0, width: o.width() - this.borderDif[1] - this.borderDif[3] || 0})
                }
            }
        }, _renderProxy: function() {
            var a = this.element, b = this.options;
            this.elementOffset = a.offset(), this._helper ? (this.helper = this.helper || f("<div style='overflow:hidden;'></div>"), this.helper.addClass(this._helper).css({width: this.element.outerWidth() - 1, height: this.element.outerHeight() - 1, position: "absolute", left: this.elementOffset.left + "px", top: this.elementOffset.top + "px", zIndex: ++b.zIndex}), this.helper.appendTo("body").disableSelection()) : this.helper = this.element
        }, _change: {e: function(a, b) {
                return{width: this.originalSize.width + b}
            }, w: function(a, c) {
                var k = this.originalSize, b = this.originalPosition;
                return{left: b.left + c, width: k.width - c}
            }, n: function(b, l, m) {
                var c = this.originalSize, a = this.originalPosition;
                return{top: a.top + m, height: c.height - m}
            }, s: function(a, b, c) {
                return{height: this.originalSize.height + c}
            }, se: function(b, c, a) {
                return f.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [b, c, a]))
            }, sw: function(b, c, a) {
                return f.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [b, c, a]))
            }, ne: function(b, c, a) {
                return f.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [b, c, a]))
            }, nw: function(b, c, a) {
                return f.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [b, c, a]))
            }}, _propagate: function(a, b) {
            f.ui.plugin.call(this, a, [b, this.ui()]), "resize" !== a && this._trigger(a, b, this.ui())
        }, plugins: {}, ui: function() {
            return{originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize, originalPosition: this.originalPosition}
        }}), f.ui.plugin.add("resizable", "animate", {stop: function(u) {
            var h = f(this).data("ui-resizable"), s = h.options, n = h._proportionallyResizeElements, b = n.length && /textarea/i.test(n[0].nodeName), o = b && f.ui.hasScroll(n[0], "left") ? 0 : h.sizeDiff.height, r = b ? 0 : h.sizeDiff.width, c = {width: h.size.width - r, height: h.size.height - o}, l = parseInt(h.element.css("left"), 10) + (h.position.left - h.originalPosition.left) || null, a = parseInt(h.element.css("top"), 10) + (h.position.top - h.originalPosition.top) || null;
            h.element.animate(f.extend(c, a && l ? {top: a, left: l} : {}), {duration: s.animateDuration, easing: s.animateEasing, step: function() {
                    var g = {width: parseInt(h.element.css("width"), 10), height: parseInt(h.element.css("height"), 10), top: parseInt(h.element.css("top"), 10), left: parseInt(h.element.css("left"), 10)};
                    n && n.length && f(n[0]).css({width: g.width, height: g.height}), h._updateCache(g), h._propagate("resize", u)
                }})
        }}), f.ui.plugin.add("resizable", "containment", {start: function() {
            var a, b, l, r, n, p, C, h = f(this).data("ui-resizable"), c = h.options, s = h.element, u = c.containment, o = u instanceof f ? u.get(0) : /parent/.test(u) ? s.parent().get(0) : u;
            o && (h.containerElement = f(o), /document/.test(u) || u === document ? (h.containerOffset = {left: 0, top: 0}, h.containerPosition = {left: 0, top: 0}, h.parentData = {element: f(document), left: 0, top: 0, width: f(document).width(), height: f(document).height() || document.body.parentNode.scrollHeight}) : (a = f(o), b = [], f(["Top", "Right", "Left", "Bottom"]).each(function(k, g) {
                b[k] = d(a.css("padding" + g))
            }), h.containerOffset = a.offset(), h.containerPosition = a.position(), h.containerSize = {height: a.innerHeight() - b[3], width: a.innerWidth() - b[1]}, l = h.containerOffset, r = h.containerSize.height, n = h.containerSize.width, p = f.ui.hasScroll(o, "left") ? o.scrollWidth : n, C = f.ui.hasScroll(o) ? o.scrollHeight : r, h.parentData = {element: o, left: l.left, top: l.top, width: p, height: C}))
        }, resize: function(s) {
            var h, c, n, B, o = f(this).data("ui-resizable"), r = o.options, b = o.containerOffset, l = o.position, u = o._aspectRatio || s.shiftKey, C = {top: 0, left: 0}, a = o.containerElement;
            a[0] !== document && /static/.test(a.css("position")) && (C = b), l.left < (o._helper ? b.left : 0) && (o.size.width = o.size.width + (o._helper ? o.position.left - b.left : o.position.left - C.left), u && (o.size.height = o.size.width / o.aspectRatio), o.position.left = r.helper ? b.left : 0), l.top < (o._helper ? b.top : 0) && (o.size.height = o.size.height + (o._helper ? o.position.top - b.top : o.position.top), u && (o.size.width = o.size.height * o.aspectRatio), o.position.top = o._helper ? b.top : 0), o.offset.left = o.parentData.left + o.position.left, o.offset.top = o.parentData.top + o.position.top, h = Math.abs((o._helper ? o.offset.left - C.left : o.offset.left - C.left) + o.sizeDiff.width), c = Math.abs((o._helper ? o.offset.top - C.top : o.offset.top - b.top) + o.sizeDiff.height), n = o.containerElement.get(0) === o.element.parent().get(0), B = /relative|absolute/.test(o.containerElement.css("position")), n && B && (h -= o.parentData.left), h + o.size.width >= o.parentData.width && (o.size.width = o.parentData.width - h, u && (o.size.height = o.size.width / o.aspectRatio)), c + o.size.height >= o.parentData.height && (o.size.height = o.parentData.height - c, u && (o.size.width = o.size.height * o.aspectRatio))
        }, stop: function() {
            var a = f(this).data("ui-resizable"), h = a.options, s = a.containerOffset, n = a.containerPosition, b = a.containerElement, o = f(a.helper), r = o.offset(), c = o.outerWidth() - a.sizeDiff.width, l = o.outerHeight() - a.sizeDiff.height;
            a._helper && !h.animate && /relative/.test(b.css("position")) && f(this).css({left: r.left - n.left - s.left, width: c, height: l}), a._helper && !h.animate && /static/.test(b.css("position")) && f(this).css({left: r.left - n.left - s.left, width: c, height: l})
        }}), f.ui.plugin.add("resizable", "alsoResize", {start: function() {
            var b = f(this).data("ui-resizable"), c = b.options, a = function(h) {
                f(h).each(function() {
                    var g = f(this);
                    g.data("ui-resizable-alsoresize", {width: parseInt(g.width(), 10), height: parseInt(g.height(), 10), left: parseInt(g.css("left"), 10), top: parseInt(g.css("top"), 10)})
                })
            };
            "object" != typeof c.alsoResize || c.alsoResize.parentNode ? a(c.alsoResize) : c.alsoResize.length ? (c.alsoResize = c.alsoResize[0], a(c.alsoResize)) : f.each(c.alsoResize, function(h) {
                a(h)
            })
        }, resize: function(n, q) {
            var c = f(this).data("ui-resizable"), o = c.options, r = c.originalSize, a = c.originalPosition, b = {height: c.size.height - r.height || 0, width: c.size.width - r.width || 0, top: c.position.top - a.top || 0, left: c.position.left - a.left || 0}, h = function(g, k) {
                f(g).each(function() {
                    var p = f(this), l = f(this).data("ui-resizable-alsoresize"), v = {}, m = k && k.length ? k : p.parents(q.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                    f.each(m, function(s, u) {
                        var x = (l[u] || 0) + (b[u] || 0);
                        x && x >= 0 && (v[u] = x || null)
                    }), p.css(v)
                })
            };
            "object" != typeof o.alsoResize || o.alsoResize.nodeType ? h(o.alsoResize) : f.each(o.alsoResize, function(k, g) {
                h(k, g)
            })
        }, stop: function() {
            f(this).removeData("resizable-alsoresize")
        }}), f.ui.plugin.add("resizable", "ghost", {start: function() {
            var b = f(this).data("ui-resizable"), c = b.options, a = b.size;
            b.ghost = b.originalElement.clone(), b.ghost.css({opacity: 0.25, display: "block", position: "relative", height: a.height, width: a.width, margin: 0, left: 0, top: 0}).addClass("ui-resizable-ghost").addClass("string" == typeof c.ghost ? c.ghost : ""), b.ghost.appendTo(b.helper)
        }, resize: function() {
            var a = f(this).data("ui-resizable");
            a.ghost && a.ghost.css({position: "relative", height: a.size.height, width: a.size.width})
        }, stop: function() {
            var a = f(this).data("ui-resizable");
            a.ghost && a.helper && a.helper.get(0).removeChild(a.ghost.get(0))
        }}), f.ui.plugin.add("resizable", "grid", {resize: function() {
            var r = f(this).data("ui-resizable"), h = r.options, o = r.size, u = r.originalSize, L = r.originalPosition, c = r.axis, m = "number" == typeof h.grid ? [h.grid, h.grid] : h.grid, g = m[0] || 1, n = m[1] || 1, s = Math.round((o.width - u.width) / g) * g, M = Math.round((o.height - u.height) / n) * n, N = u.width + s, l = u.height + M, a = h.maxWidth && N > h.maxWidth, p = h.maxHeight && l > h.maxHeight, b = h.minWidth && h.minWidth > N, v = h.minHeight && h.minHeight > l;
            h.grid = m, b && (N += g), v && (l += n), a && (N -= g), p && (l -= n), /^(se|s|e)$/.test(c) ? (r.size.width = N, r.size.height = l) : /^(ne)$/.test(c) ? (r.size.width = N, r.size.height = l, r.position.top = L.top - M) : /^(sw)$/.test(c) ? (r.size.width = N, r.size.height = l, r.position.left = L.left - s) : (r.size.width = N, r.size.height = l, r.position.top = L.top - M, r.position.left = L.left - s)
        }})
})(jQuery);
(function(b) {
    b.widget("ui.selectable", b.ui.mouse, {version: "1.10.3", options: {appendTo: "body", autoRefresh: !0, distance: 0, filter: "*", tolerance: "touch", selected: null, selecting: null, start: null, stop: null, unselected: null, unselecting: null}, _create: function() {
            var d, a = this;
            this.element.addClass("ui-selectable"), this.dragged = !1, this.refresh = function() {
                d = b(a.options.filter, a.element[0]), d.addClass("ui-selectee"), d.each(function() {
                    var c = b(this), f = c.offset();
                    b.data(this, "selectable-item", {element: this, $element: c, left: f.left, top: f.top, right: f.left + c.outerWidth(), bottom: f.top + c.outerHeight(), startselected: !1, selected: c.hasClass("ui-selected"), selecting: c.hasClass("ui-selecting"), unselecting: c.hasClass("ui-unselecting")})
                })
            }, this.refresh(), this.selectees = d.addClass("ui-selectee"), this._mouseInit(), this.helper = b("<div class='ui-selectable-helper'></div>")
        }, _destroy: function() {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item"), this.element.removeClass("ui-selectable ui-selectable-disabled"), this._mouseDestroy()
        }, _mouseStart: function(f) {
            var a = this, e = this.options;
            this.opos = [f.pageX, f.pageY], this.options.disabled || (this.selectees = b(e.filter, this.element[0]), this._trigger("start", f), b(e.appendTo).append(this.helper), this.helper.css({left: f.pageX, top: f.pageY, width: 0, height: 0}), e.autoRefresh && this.refresh(), this.selectees.filter(".ui-selected").each(function() {
                var c = b.data(this, "selectable-item");
                c.startselected = !0, f.metaKey || f.ctrlKey || (c.$element.removeClass("ui-selected"), c.selected = !1, c.$element.addClass("ui-unselecting"), c.unselecting = !0, a._trigger("unselecting", f, {unselecting: c.element}))
            }), b(f.target).parents().addBack().each(function() {
                var d, c = b.data(this, "selectable-item");
                return c ? (d = !f.metaKey && !f.ctrlKey || !c.$element.hasClass("ui-selected"), c.$element.removeClass(d ? "ui-unselecting" : "ui-selected").addClass(d ? "ui-selecting" : "ui-unselecting"), c.unselecting = !d, c.selecting = d, c.selected = d, d ? a._trigger("selecting", f, {selecting: c.element}) : a._trigger("unselecting", f, {unselecting: c.element}), !1) : undefined
            }))
        }, _mouseDrag: function(q) {
            if (this.dragged = !0, !this.options.disabled) {
                var r, o = this, h = this.options, a = this.opos[0], m = this.opos[1], n = q.pageX, p = q.pageY;
                return a > n && (r = n, n = a, a = r), m > p && (r = p, p = m, m = r), this.helper.css({left: a, top: m, width: n - a, height: p - m}), this.selectees.each(function() {
                    var c = b.data(this, "selectable-item"), d = !1;
                    c && c.element !== o.element[0] && ("touch" === h.tolerance ? d = !(c.left > n || a > c.right || c.top > p || m > c.bottom) : "fit" === h.tolerance && (d = c.left > a && n > c.right && c.top > m && p > c.bottom), d ? (c.selected && (c.$element.removeClass("ui-selected"), c.selected = !1), c.unselecting && (c.$element.removeClass("ui-unselecting"), c.unselecting = !1), c.selecting || (c.$element.addClass("ui-selecting"), c.selecting = !0, o._trigger("selecting", q, {selecting: c.element}))) : (c.selecting && ((q.metaKey || q.ctrlKey) && c.startselected ? (c.$element.removeClass("ui-selecting"), c.selecting = !1, c.$element.addClass("ui-selected"), c.selected = !0) : (c.$element.removeClass("ui-selecting"), c.selecting = !1, c.startselected && (c.$element.addClass("ui-unselecting"), c.unselecting = !0), o._trigger("unselecting", q, {unselecting: c.element}))), c.selected && (q.metaKey || q.ctrlKey || c.startselected || (c.$element.removeClass("ui-selected"), c.selected = !1, c.$element.addClass("ui-unselecting"), c.unselecting = !0, o._trigger("unselecting", q, {unselecting: c.element})))))
                }), !1
            }
        }, _mouseStop: function(d) {
            var a = this;
            return this.dragged = !1, b(".ui-unselecting", this.element[0]).each(function() {
                var c = b.data(this, "selectable-item");
                c.$element.removeClass("ui-unselecting"), c.unselecting = !1, c.startselected = !1, a._trigger("unselected", d, {unselected: c.element})
            }), b(".ui-selecting", this.element[0]).each(function() {
                var c = b.data(this, "selectable-item");
                c.$element.removeClass("ui-selecting").addClass("ui-selected"), c.selecting = !1, c.selected = !0, c.startselected = !0, a._trigger("selected", d, {selected: c.element})
            }), this._trigger("stop", d), this.helper.remove(), !1
        }})
})(jQuery);
(function(d) {
    function f(b, a, c) {
        return b > a && a + c > b
    }
    function e(a) {
        return/left|right/.test(a.css("float")) || /inline|table-cell/.test(a.css("display"))
    }
    d.widget("ui.sortable", d.ui.mouse, {version: "1.10.3", widgetEventPrefix: "sort", ready: !1, options: {appendTo: "parent", axis: !1, connectWith: !1, containment: !1, cursor: "auto", cursorAt: !1, dropOnEmpty: !0, forcePlaceholderSize: !1, forceHelperSize: !1, grid: !1, handle: !1, helper: "original", items: "> *", opacity: !1, placeholder: !1, revert: !1, scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, scope: "default", tolerance: "intersect", zIndex: 1000, activate: null, beforeStop: null, change: null, deactivate: null, out: null, over: null, receive: null, remove: null, sort: null, start: null, stop: null, update: null}, _create: function() {
            var a = this.options;
            this.containerCache = {}, this.element.addClass("ui-sortable"), this.refresh(), this.floating = this.items.length ? "x" === a.axis || e(this.items[0].item) : !1, this.offset = this.element.offset(), this._mouseInit(), this.ready = !0
        }, _destroy: function() {
            this.element.removeClass("ui-sortable ui-sortable-disabled"), this._mouseDestroy();
            for (var a = this.items.length - 1; a >= 0; a--) {
                this.items[a].item.removeData(this.widgetName + "-item")
            }
            return this
        }, _setOption: function(a, b) {
            "disabled" === a ? (this.options[a] = b, this.widget().toggleClass("ui-sortable-disabled", !!b)) : d.Widget.prototype._setOption.apply(this, arguments)
        }, _mouseCapture: function(b, l) {
            var c = null, a = !1, m = this;
            return this.reverting ? !1 : this.options.disabled || "static" === this.options.type ? !1 : (this._refreshItems(b), d(b.target).parents().each(function() {
                return d.data(this, m.widgetName + "-item") === m ? (c = d(this), !1) : undefined
            }), d.data(b.target, m.widgetName + "-item") === m && (c = d(b.target)), c ? !this.options.handle || l || (d(this.options.handle, c).find("*").addBack().each(function() {
                this === b.target && (a = !0)
            }), a) ? (this.currentItem = c, this._removeCurrentsFromItems(), !0) : !1 : !1)
        }, _mouseStart: function(c, n, m) {
            var a, o, b = this.options;
            if (this.currentContainer = this, this.refreshPositions(), this.helper = this._createHelper(c), this._cacheHelperProportions(), this._cacheMargins(), this.scrollParent = this.helper.scrollParent(), this.offset = this.currentItem.offset(), this.offset = {top: this.offset.top - this.margins.top, left: this.offset.left - this.margins.left}, d.extend(this.offset, {click: {left: c.pageX - this.offset.left, top: c.pageY - this.offset.top}, parent: this._getParentOffset(), relative: this._getRelativeOffset()}), this.helper.css("position", "absolute"), this.cssPosition = this.helper.css("position"), this.originalPosition = this._generatePosition(c), this.originalPageX = c.pageX, this.originalPageY = c.pageY, b.cursorAt && this._adjustOffsetFromHelper(b.cursorAt), this.domPosition = {prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0]}, this.helper[0] !== this.currentItem[0] && this.currentItem.hide(), this._createPlaceholder(), b.containment && this._setContainment(), b.cursor && "auto" !== b.cursor && (o = this.document.find("body"), this.storedCursor = o.css("cursor"), o.css("cursor", b.cursor), this.storedStylesheet = d("<style>*{ cursor: " + b.cursor + " !important; }</style>").appendTo(o)), b.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")), this.helper.css("opacity", b.opacity)), b.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")), this.helper.css("zIndex", b.zIndex)), this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName && (this.overflowOffset = this.scrollParent.offset()), this._trigger("start", c, this._uiHash()), this._preserveHelperProportions || this._cacheHelperProportions(), !m) {
                for (a = this.containers.length - 1; a >= 0; a--) {
                    this.containers[a]._trigger("activate", c, this._uiHash(this))
                }
            }
            return d.ui.ddmanager && (d.ui.ddmanager.current = this), d.ui.ddmanager && !b.dropBehaviour && d.ui.ddmanager.prepareOffsets(this, c), this.dragging = !0, this.helper.addClass("ui-sortable-helper"), this._mouseDrag(c), !0
        }, _mouseDrag: function(c) {
            var p, o, a, q, b = this.options, n = !1;
            for (this.position = this._generatePosition(c), this.positionAbs = this._convertPositionTo("absolute"), this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs), this.options.scroll && (this.scrollParent[0] !== document && "HTML" !== this.scrollParent[0].tagName ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - c.pageY < b.scrollSensitivity ? this.scrollParent[0].scrollTop = n = this.scrollParent[0].scrollTop + b.scrollSpeed : c.pageY - this.overflowOffset.top < b.scrollSensitivity && (this.scrollParent[0].scrollTop = n = this.scrollParent[0].scrollTop - b.scrollSpeed), this.overflowOffset.left + this.scrollParent[0].offsetWidth - c.pageX < b.scrollSensitivity ? this.scrollParent[0].scrollLeft = n = this.scrollParent[0].scrollLeft + b.scrollSpeed : c.pageX - this.overflowOffset.left < b.scrollSensitivity && (this.scrollParent[0].scrollLeft = n = this.scrollParent[0].scrollLeft - b.scrollSpeed)) : (c.pageY - d(document).scrollTop() < b.scrollSensitivity ? n = d(document).scrollTop(d(document).scrollTop() - b.scrollSpeed) : d(window).height() - (c.pageY - d(document).scrollTop()) < b.scrollSensitivity && (n = d(document).scrollTop(d(document).scrollTop() + b.scrollSpeed)), c.pageX - d(document).scrollLeft() < b.scrollSensitivity ? n = d(document).scrollLeft(d(document).scrollLeft() - b.scrollSpeed) : d(window).width() - (c.pageX - d(document).scrollLeft()) < b.scrollSensitivity && (n = d(document).scrollLeft(d(document).scrollLeft() + b.scrollSpeed))), n !== !1 && d.ui.ddmanager && !b.dropBehaviour && d.ui.ddmanager.prepareOffsets(this, c)), this.positionAbs = this._convertPositionTo("absolute"), this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), p = this.items.length - 1; p >= 0; p--) {
                if (o = this.items[p], a = o.item[0], q = this._intersectsWithPointer(o), q && o.instance === this.currentContainer && a !== this.currentItem[0] && this.placeholder[1 === q ? "next" : "prev"]()[0] !== a && !d.contains(this.placeholder[0], a) && ("semi-dynamic" === this.options.type ? !d.contains(this.element[0], a) : !0)) {
                    if (this.direction = 1 === q ? "down" : "up", "pointer" !== this.options.tolerance && !this._intersectsWithSides(o)) {
                        break
                    }
                    this._rearrange(c, o), this._trigger("change", c, this._uiHash());
                    break
                }
            }
            return this._contactContainers(c), d.ui.ddmanager && d.ui.ddmanager.drag(this, c), this._trigger("sort", c, this._uiHash()), this.lastPositionAbs = this.positionAbs, !1
        }, _mouseStop: function(c, n) {
            if (c) {
                if (d.ui.ddmanager && !this.options.dropBehaviour && d.ui.ddmanager.drop(this, c), this.options.revert) {
                    var m = this, a = this.placeholder.offset(), o = this.options.axis, b = {};
                    o && "x" !== o || (b.left = a.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft)), o && "y" !== o || (b.top = a.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop)), this.reverting = !0, d(this.helper).animate(b, parseInt(this.options.revert, 10) || 500, function() {
                        m._clear(c)
                    })
                } else {
                    this._clear(c, n)
                }
                return !1
            }
        }, cancel: function() {
            if (this.dragging) {
                this._mouseUp({target: null}), "original" === this.options.helper ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                for (var a = this.containers.length - 1; a >= 0; a--) {
                    this.containers[a]._trigger("deactivate", null, this._uiHash(this)), this.containers[a].containerCache.over && (this.containers[a]._trigger("out", null, this._uiHash(this)), this.containers[a].containerCache.over = 0)
                }
            }
            return this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]), "original" !== this.options.helper && this.helper && this.helper[0].parentNode && this.helper.remove(), d.extend(this, {helper: null, dragging: !1, reverting: !1, _noFinalSort: null}), this.domPosition.prev ? d(this.domPosition.prev).after(this.currentItem) : d(this.domPosition.parent).prepend(this.currentItem)), this
        }, serialize: function(a) {
            var c = this._getItemsAsjQuery(a && a.connected), b = [];
            return a = a || {}, d(c).each(function() {
                var g = (d(a.item || this).attr(a.attribute || "id") || "").match(a.expression || /(.+)[\-=_](.+)/);
                g && b.push((a.key || g[1] + "[]") + "=" + (a.key && a.expression ? g[1] : g[2]))
            }), !b.length && a.key && b.push(a.key + "="), b.join("&")
        }, toArray: function(a) {
            var c = this._getItemsAsjQuery(a && a.connected), b = [];
            return a = a || {}, c.each(function() {
                b.push(d(a.item || this).attr(a.attribute || "id") || "")
            }), b
        }, _intersectsWith: function(a) {
            var u = this.positionAbs.left, G = u + this.helperProportions.width, H = this.positionAbs.top, n = H + this.helperProportions.height, h = a.left, o = h + a.width, r = a.top, F = r + a.height, c = this.offset.click.top, l = this.offset.click.left, b = "x" === this.options.axis || H + c > r && F > H + c, s = "y" === this.options.axis || u + l > h && o > u + l, p = b && s;
            return"pointer" === this.options.tolerance || this.options.forcePointerForContainers || "pointer" !== this.options.tolerance && this.helperProportions[this.floating ? "width" : "height"] > a[this.floating ? "width" : "height"] ? p : u + this.helperProportions.width / 2 > h && o > G - this.helperProportions.width / 2 && H + this.helperProportions.height / 2 > r && F > n - this.helperProportions.height / 2
        }, _intersectsWithPointer: function(l) {
            var m = "x" === this.options.axis || f(this.positionAbs.top + this.offset.click.top, l.top, l.height), c = "y" === this.options.axis || f(this.positionAbs.left + this.offset.click.left, l.left, l.width), a = m && c, n = this._getDragVerticalDirection(), b = this._getDragHorizontalDirection();
            return a ? this.floating ? b && "right" === b || "down" === n ? 2 : 1 : n && ("down" === n ? 2 : 1) : !1
        }, _intersectsWithSides: function(c) {
            var k = f(this.positionAbs.top + this.offset.click.top, c.top + c.height / 2, c.height), b = f(this.positionAbs.left + this.offset.click.left, c.left + c.width / 2, c.width), a = this._getDragVerticalDirection(), l = this._getDragHorizontalDirection();
            return this.floating && l ? "right" === l && b || "left" === l && !b : a && ("down" === a && k || "up" === a && !k)
        }, _getDragVerticalDirection: function() {
            var a = this.positionAbs.top - this.lastPositionAbs.top;
            return 0 !== a && (a > 0 ? "down" : "up")
        }, _getDragHorizontalDirection: function() {
            var a = this.positionAbs.left - this.lastPositionAbs.left;
            return 0 !== a && (a > 0 ? "right" : "left")
        }, refresh: function(a) {
            return this._refreshItems(a), this.refreshPositions(), this
        }, _connectWith: function() {
            var a = this.options;
            return a.connectWith.constructor === String ? [a.connectWith] : a.connectWith
        }, _getItemsAsjQuery: function(a) {
            var o, c, n, s, r = [], b = [], h = this._connectWith();
            if (h && a) {
                for (o = h.length - 1; o >= 0; o--) {
                    for (n = d(h[o]), c = n.length - 1; c >= 0; c--) {
                        s = d.data(n[c], this.widgetFullName), s && s !== this && !s.options.disabled && b.push([d.isFunction(s.options.items) ? s.options.items.call(s.element) : d(s.options.items, s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), s])
                    }
                }
            }
            for (b.push([d.isFunction(this.options.items) ? this.options.items.call(this.element, null, {options: this.options, item: this.currentItem}) : d(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]), o = b.length - 1; o >= 0; o--) {
                b[o][0].each(function() {
                    r.push(this)
                })
            }
            return d(r)
        }, _removeCurrentsFromItems: function() {
            var a = this.currentItem.find(":data(" + this.widgetName + "-item)");
            this.items = d.grep(this.items, function(b) {
                for (var c = 0; a.length > c; c++) {
                    if (a[c] === b.item[0]) {
                        return !1
                    }
                }
                return !0
            })
        }, _refreshItems: function(D) {
            this.items = [], this.containers = [this];
            var c, b, n, s, o, r, a, l, u = this.items, h = [[d.isFunction(this.options.items) ? this.options.items.call(this.element[0], D, {item: this.currentItem}) : d(this.options.items, this.element), this]], C = this._connectWith();
            if (C && this.ready) {
                for (c = C.length - 1; c >= 0; c--) {
                    for (n = d(C[c]), b = n.length - 1; b >= 0; b--) {
                        s = d.data(n[b], this.widgetFullName), s && s !== this && !s.options.disabled && (h.push([d.isFunction(s.options.items) ? s.options.items.call(s.element[0], D, {item: this.currentItem}) : d(s.options.items, s.element), s]), this.containers.push(s))
                    }
                }
            }
            for (c = h.length - 1; c >= 0; c--) {
                for (o = h[c][1], r = h[c][0], b = 0, l = r.length; l > b; b++) {
                    a = d(r[b]), a.data(this.widgetName + "-item", o), u.push({item: a, instance: o, width: 0, height: 0, left: 0, top: 0})
                }
            }
        }, refreshPositions: function(b) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            var l, c, a, m;
            for (l = this.items.length - 1; l >= 0; l--) {
                c = this.items[l], c.instance !== this.currentContainer && this.currentContainer && c.item[0] !== this.currentItem[0] || (a = this.options.toleranceElement ? d(this.options.toleranceElement, c.item) : c.item, b || (c.width = a.outerWidth(), c.height = a.outerHeight()), m = a.offset(), c.left = m.left, c.top = m.top)
            }
            if (this.options.custom && this.options.custom.refreshContainers) {
                this.options.custom.refreshContainers.call(this)
            } else {
                for (l = this.containers.length - 1; l >= 0; l--) {
                    m = this.containers[l].element.offset(), this.containers[l].containerCache.left = m.left, this.containers[l].containerCache.top = m.top, this.containers[l].containerCache.width = this.containers[l].element.outerWidth(), this.containers[l].containerCache.height = this.containers[l].element.outerHeight()
                }
            }
            return this
        }, _createPlaceholder: function(a) {
            a = a || this;
            var c, b = a.options;
            b.placeholder && b.placeholder.constructor !== String || (c = b.placeholder, b.placeholder = {element: function() {
                    var k = a.currentItem[0].nodeName.toLowerCase(), g = d("<" + k + ">", a.document[0]).addClass(c || a.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper");
                    return"tr" === k ? a.currentItem.children().each(function() {
                        d("<td>&#160;</td>", a.document[0]).attr("colspan", d(this).attr("colspan") || 1).appendTo(g)
                    }) : "img" === k && g.attr("src", a.currentItem.attr("src")), c || g.css("visibility", "hidden"), g
                }, update: function(k, g) {
                    (!c || b.forcePlaceholderSize) && (g.height() || g.height(a.currentItem.innerHeight() - parseInt(a.currentItem.css("paddingTop") || 0, 10) - parseInt(a.currentItem.css("paddingBottom") || 0, 10)), g.width() || g.width(a.currentItem.innerWidth() - parseInt(a.currentItem.css("paddingLeft") || 0, 10) - parseInt(a.currentItem.css("paddingRight") || 0, 10)))
                }}), a.placeholder = d(b.placeholder.element.call(a.element, a.currentItem)), a.currentItem.after(a.placeholder), b.placeholder.update(a, a.placeholder)
        }, _contactContainers: function(F) {
            var c, b, m, o, r, s, h, a, l, n, p = null, u = null;
            for (c = this.containers.length - 1; c >= 0; c--) {
                if (!d.contains(this.currentItem[0], this.containers[c].element[0])) {
                    if (this._intersectsWith(this.containers[c].containerCache)) {
                        if (p && d.contains(this.containers[c].element[0], p.element[0])) {
                            continue
                        }
                        p = this.containers[c], u = c
                    } else {
                        this.containers[c].containerCache.over && (this.containers[c]._trigger("out", F, this._uiHash(this)), this.containers[c].containerCache.over = 0)
                    }
                }
            }
            if (p) {
                if (1 === this.containers.length) {
                    this.containers[u].containerCache.over || (this.containers[u]._trigger("over", F, this._uiHash(this)), this.containers[u].containerCache.over = 1)
                } else {
                    for (m = 10000, o = null, n = p.floating || e(this.currentItem), r = n ? "left" : "top", s = n ? "width" : "height", h = this.positionAbs[r] + this.offset.click[r], b = this.items.length - 1; b >= 0; b--) {
                        d.contains(this.containers[u].element[0], this.items[b].item[0]) && this.items[b].item[0] !== this.currentItem[0] && (!n || f(this.positionAbs.top + this.offset.click.top, this.items[b].top, this.items[b].height)) && (a = this.items[b].item.offset()[r], l = !1, Math.abs(a - h) > Math.abs(a + this.items[b][s] - h) && (l = !0, a += this.items[b][s]), m > Math.abs(a - h) && (m = Math.abs(a - h), o = this.items[b], this.direction = l ? "up" : "down"))
                    }
                    if (!o && !this.options.dropOnEmpty) {
                        return
                    }
                    if (this.currentContainer === this.containers[u]) {
                        return
                    }
                    o ? this._rearrange(F, o, null, !0) : this._rearrange(F, null, this.containers[u].element, !0), this._trigger("change", F, this._uiHash()), this.containers[u]._trigger("change", F, this._uiHash(this)), this.currentContainer = this.containers[u], this.options.placeholder.update(this.currentContainer, this.placeholder), this.containers[u]._trigger("over", F, this._uiHash(this)), this.containers[u].containerCache.over = 1
                }
            }
        }, _createHelper: function(a) {
            var c = this.options, b = d.isFunction(c.helper) ? d(c.helper.apply(this.element[0], [a, this.currentItem])) : "clone" === c.helper ? this.currentItem.clone() : this.currentItem;
            return b.parents("body").length || d("parent" !== c.appendTo ? c.appendTo : this.currentItem[0].parentNode)[0].appendChild(b[0]), b[0] === this.currentItem[0] && (this._storedCSS = {width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left")}), (!b[0].style.width || c.forceHelperSize) && b.width(this.currentItem.width()), (!b[0].style.height || c.forceHelperSize) && b.height(this.currentItem.height()), b
        }, _adjustOffsetFromHelper: function(a) {
            "string" == typeof a && (a = a.split(" ")), d.isArray(a) && (a = {left: +a[0], top: +a[1] || 0}), "left" in a && (this.offset.click.left = a.left + this.margins.left), "right" in a && (this.offset.click.left = this.helperProportions.width - a.right + this.margins.left), "top" in a && (this.offset.click.top = a.top + this.margins.top), "bottom" in a && (this.offset.click.top = this.helperProportions.height - a.bottom + this.margins.top)
        }, _getParentOffset: function() {
            this.offsetParent = this.helper.offsetParent();
            var a = this.offsetParent.offset();
            return"absolute" === this.cssPosition && this.scrollParent[0] !== document && d.contains(this.scrollParent[0], this.offsetParent[0]) && (a.left += this.scrollParent.scrollLeft(), a.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && d.ui.ie) && (a = {top: 0, left: 0}), {top: a.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: a.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)}
        }, _getRelativeOffset: function() {
            if ("relative" === this.cssPosition) {
                var a = this.currentItem.position();
                return{top: a.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(), left: a.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()}
            }
            return{top: 0, left: 0}
        }, _cacheMargins: function() {
            this.margins = {left: parseInt(this.currentItem.css("marginLeft"), 10) || 0, top: parseInt(this.currentItem.css("marginTop"), 10) || 0}
        }, _cacheHelperProportions: function() {
            this.helperProportions = {width: this.helper.outerWidth(), height: this.helper.outerHeight()}
        }, _setContainment: function() {
            var b, k, c, a = this.options;
            "parent" === a.containment && (a.containment = this.helper[0].parentNode), ("document" === a.containment || "window" === a.containment) && (this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, d("document" === a.containment ? document : window).width() - this.helperProportions.width - this.margins.left, (d("document" === a.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]), /^(document|window|parent)$/.test(a.containment) || (b = d(a.containment)[0], k = d(a.containment).offset(), c = "hidden" !== d(b).css("overflow"), this.containment = [k.left + (parseInt(d(b).css("borderLeftWidth"), 10) || 0) + (parseInt(d(b).css("paddingLeft"), 10) || 0) - this.margins.left, k.top + (parseInt(d(b).css("borderTopWidth"), 10) || 0) + (parseInt(d(b).css("paddingTop"), 10) || 0) - this.margins.top, k.left + (c ? Math.max(b.scrollWidth, b.offsetWidth) : b.offsetWidth) - (parseInt(d(b).css("borderLeftWidth"), 10) || 0) - (parseInt(d(b).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, k.top + (c ? Math.max(b.scrollHeight, b.offsetHeight) : b.offsetHeight) - (parseInt(d(b).css("borderTopWidth"), 10) || 0) - (parseInt(d(b).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top])
        }, _convertPositionTo: function(b, l) {
            l || (l = this.position);
            var c = "absolute" === b ? 1 : -1, a = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && d.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, m = /(html|body)/i.test(a[0].tagName);
            return{top: l.top + this.offset.relative.top * c + this.offset.parent.top * c - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : m ? 0 : a.scrollTop()) * c, left: l.left + this.offset.relative.left * c + this.offset.parent.left * c - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : m ? 0 : a.scrollLeft()) * c}
        }, _generatePosition: function(a) {
            var o, c, n = this.options, s = a.pageX, r = a.pageY, b = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && d.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, h = /(html|body)/i.test(b[0].tagName);
            return"relative" !== this.cssPosition || this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0] || (this.offset.relative = this._getRelativeOffset()), this.originalPosition && (this.containment && (a.pageX - this.offset.click.left < this.containment[0] && (s = this.containment[0] + this.offset.click.left), a.pageY - this.offset.click.top < this.containment[1] && (r = this.containment[1] + this.offset.click.top), a.pageX - this.offset.click.left > this.containment[2] && (s = this.containment[2] + this.offset.click.left), a.pageY - this.offset.click.top > this.containment[3] && (r = this.containment[3] + this.offset.click.top)), n.grid && (o = this.originalPageY + Math.round((r - this.originalPageY) / n.grid[1]) * n.grid[1], r = this.containment ? o - this.offset.click.top >= this.containment[1] && o - this.offset.click.top <= this.containment[3] ? o : o - this.offset.click.top >= this.containment[1] ? o - n.grid[1] : o + n.grid[1] : o, c = this.originalPageX + Math.round((s - this.originalPageX) / n.grid[0]) * n.grid[0], s = this.containment ? c - this.offset.click.left >= this.containment[0] && c - this.offset.click.left <= this.containment[2] ? c : c - this.offset.click.left >= this.containment[0] ? c - n.grid[0] : c + n.grid[0] : c)), {top: r - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : h ? 0 : b.scrollTop()), left: s - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : h ? 0 : b.scrollLeft())}
        }, _rearrange: function(l, b, m, c) {
            m ? m[0].appendChild(this.placeholder[0]) : b.item[0].parentNode.insertBefore(this.placeholder[0], "down" === this.direction ? b.item[0] : b.item[0].nextSibling), this.counter = this.counter ? ++this.counter : 1;
            var a = this.counter;
            this._delay(function() {
                a === this.counter && this.refreshPositions(!c)
            })
        }, _clear: function(c, a) {
            this.reverting = !1;
            var k, b = [];
            if (!this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem), this._noFinalSort = null, this.helper[0] === this.currentItem[0]) {
                for (k in this._storedCSS) {
                    ("auto" === this._storedCSS[k] || "static" === this._storedCSS[k]) && (this._storedCSS[k] = "")
                }
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
            } else {
                this.currentItem.show()
            }
            for (this.fromOutside && !a && b.push(function(g) {
                this._trigger("receive", g, this._uiHash(this.fromOutside))
            }), !this.fromOutside && this.domPosition.prev === this.currentItem.prev().not(".ui-sortable-helper")[0] && this.domPosition.parent === this.currentItem.parent()[0] || a || b.push(function(g) {
                this._trigger("update", g, this._uiHash())
            }), this !== this.currentContainer && (a || (b.push(function(g) {
                this._trigger("remove", g, this._uiHash())
            }), b.push(function(g) {
                return function(h) {
                    g._trigger("receive", h, this._uiHash(this))
                }
            }.call(this, this.currentContainer)), b.push(function(g) {
                return function(h) {
                    g._trigger("update", h, this._uiHash(this))
                }
            }.call(this, this.currentContainer)))), k = this.containers.length - 1; k >= 0; k--) {
                a || b.push(function(g) {
                    return function(h) {
                        g._trigger("deactivate", h, this._uiHash(this))
                    }
                }.call(this, this.containers[k])), this.containers[k].containerCache.over && (b.push(function(g) {
                    return function(h) {
                        g._trigger("out", h, this._uiHash(this))
                    }
                }.call(this, this.containers[k])), this.containers[k].containerCache.over = 0)
            }
            if (this.storedCursor && (this.document.find("body").css("cursor", this.storedCursor), this.storedStylesheet.remove()), this._storedOpacity && this.helper.css("opacity", this._storedOpacity), this._storedZIndex && this.helper.css("zIndex", "auto" === this._storedZIndex ? "" : this._storedZIndex), this.dragging = !1, this.cancelHelperRemoval) {
                if (!a) {
                    for (this._trigger("beforeStop", c, this._uiHash()), k = 0; b.length > k; k++) {
                        b[k].call(this, c)
                    }
                    this._trigger("stop", c, this._uiHash())
                }
                return this.fromOutside = !1, !1
            }
            if (a || this._trigger("beforeStop", c, this._uiHash()), this.placeholder[0].parentNode.removeChild(this.placeholder[0]), this.helper[0] !== this.currentItem[0] && this.helper.remove(), this.helper = null, !a) {
                for (k = 0; b.length > k; k++) {
                    b[k].call(this, c)
                }
                this._trigger("stop", c, this._uiHash())
            }
            return this.fromOutside = !1, !0
        }, _trigger: function() {
            d.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel()
        }, _uiHash: function(a) {
            var b = a || this;
            return{helper: b.helper, placeholder: b.placeholder || d([]), position: b.position, originalPosition: b.originalPosition, offset: b.positionAbs, item: b.currentItem, sender: a ? a.element : null}
        }})
})(jQuery);
(function(e) {
    var g = 0, f = {}, h = {};
    f.height = f.paddingTop = f.paddingBottom = f.borderTopWidth = f.borderBottomWidth = "hide", h.height = h.paddingTop = h.paddingBottom = h.borderTopWidth = h.borderBottomWidth = "show", e.widget("ui.accordion", {version: "1.10.3", options: {active: 0, animate: {}, collapsible: !1, event: "click", header: "> li > :first-child,> :not(li):even", heightStyle: "auto", icons: {activeHeader: "ui-icon-triangle-1-s", header: "ui-icon-triangle-1-e"}, activate: null, beforeActivate: null}, _create: function() {
            var a = this.options;
            this.prevShow = this.prevHide = e(), this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role", "tablist"), a.collapsible || a.active !== !1 && null != a.active || (a.active = 0), this._processPanels(), 0 > a.active && (a.active += this.headers.length), this._refresh()
        }, _getCreateEventData: function() {
            return{header: this.active, panel: this.active.length ? this.active.next() : e(), content: this.active.length ? this.active.next() : e()}
        }, _createIcons: function() {
            var a = this.options.icons;
            a && (e("<span>").addClass("ui-accordion-header-icon ui-icon " + a.header).prependTo(this.headers), this.active.children(".ui-accordion-header-icon").removeClass(a.header).addClass(a.activeHeader), this.headers.addClass("ui-accordion-icons"))
        }, _destroyIcons: function() {
            this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()
        }, _destroy: function() {
            var a;
            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"), this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function() {
                /^ui-accordion/.test(this.id) && this.removeAttribute("id")
            }), this._destroyIcons(), a = this.headers.next().css("display", "").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function() {
                /^ui-accordion/.test(this.id) && this.removeAttribute("id")
            }), "content" !== this.options.heightStyle && a.css("height", "")
        }, _setOption: function(b, a) {
            return"active" === b ? (this._activate(a), undefined) : ("event" === b && (this.options.event && this._off(this.headers, this.options.event), this._setupEvents(a)), this._super(b, a), "collapsible" !== b || a || this.options.active !== !1 || this._activate(0), "icons" === b && (this._destroyIcons(), a && this._createIcons()), "disabled" === b && this.headers.add(this.headers.next()).toggleClass("ui-state-disabled", !!a), undefined)
        }, _keydown: function(b) {
            if (!b.altKey && !b.ctrlKey) {
                var d = e.ui.keyCode, c = this.headers.length, a = this.headers.index(b.target), m = !1;
                switch (b.keyCode) {
                    case d.RIGHT:
                    case d.DOWN:
                        m = this.headers[(a + 1) % c];
                        break;
                    case d.LEFT:
                    case d.UP:
                        m = this.headers[(a - 1 + c) % c];
                        break;
                    case d.SPACE:
                    case d.ENTER:
                        this._eventHandler(b);
                        break;
                    case d.HOME:
                        m = this.headers[0];
                        break;
                    case d.END:
                        m = this.headers[c - 1]
                }
                m && (e(b.target).attr("tabIndex", -1), e(m).attr("tabIndex", 0), m.focus(), b.preventDefault())
            }
        }, _panelKeyDown: function(a) {
            a.keyCode === e.ui.keyCode.UP && a.ctrlKey && e(a.currentTarget).prev().focus()
        }, refresh: function() {
            var a = this.options;
            this._processPanels(), a.active === !1 && a.collapsible === !0 || !this.headers.length ? (a.active = !1, this.active = e()) : a.active === !1 ? this._activate(0) : this.active.length && !e.contains(this.element[0], this.active[0]) ? this.headers.length === this.headers.find(".ui-state-disabled").length ? (a.active = !1, this.active = e()) : this._activate(Math.max(0, a.active - 1)) : a.active = this.headers.index(this.active), this._destroyIcons(), this._refresh()
        }, _processPanels: function() {
            this.headers = this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"), this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()
        }, _refresh: function() {
            var d, c = this.options, a = c.heightStyle, l = this.element.parent(), b = this.accordionId = "ui-accordion-" + (this.element.attr("id") || ++g);
            this.active = this._findActive(c.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"), this.active.next().addClass("ui-accordion-content-active").show(), this.headers.attr("role", "tab").each(function(s) {
                var k = e(this), u = k.attr("id"), r = k.next(), n = r.attr("id");
                u || (u = b + "-header-" + s, k.attr("id", u)), n || (n = b + "-panel-" + s, r.attr("id", n)), k.attr("aria-controls", n), r.attr("aria-labelledby", u)
            }).next().attr("role", "tabpanel"), this.headers.not(this.active).attr({"aria-selected": "false", tabIndex: -1}).next().attr({"aria-expanded": "false", "aria-hidden": "true"}).hide(), this.active.length ? this.active.attr({"aria-selected": "true", tabIndex: 0}).next().attr({"aria-expanded": "true", "aria-hidden": "false"}) : this.headers.eq(0).attr("tabIndex", 0), this._createIcons(), this._setupEvents(c.event), "fill" === a ? (d = l.height(), this.element.siblings(":visible").each(function() {
                var k = e(this), n = k.css("position");
                "absolute" !== n && "fixed" !== n && (d -= k.outerHeight(!0))
            }), this.headers.each(function() {
                d -= e(this).outerHeight(!0)
            }), this.headers.next().each(function() {
                e(this).height(Math.max(0, d - e(this).innerHeight() + e(this).height()))
            }).css("overflow", "auto")) : "auto" === a && (d = 0, this.headers.next().each(function() {
                d = Math.max(d, e(this).css("height", "").height())
            }).height(d))
        }, _activate: function(a) {
            var b = this._findActive(a)[0];
            b !== this.active[0] && (b = b || this.active[0], this._eventHandler({target: b, currentTarget: b, preventDefault: e.noop}))
        }, _findActive: function(a) {
            return"number" == typeof a ? this.headers.eq(a) : e()
        }, _setupEvents: function(a) {
            var b = {keydown: "_keydown"};
            a && e.each(a.split(" "), function(d, c) {
                b[c] = "_eventHandler"
            }), this._off(this.headers.add(this.headers.next())), this._on(this.headers, b), this._on(this.headers.next(), {keydown: "_panelKeyDown"}), this._hoverable(this.headers), this._focusable(this.headers)
        }, _eventHandler: function(s) {
            var b = this.options, o = this.active, d = e(s.currentTarget), r = d[0] === o[0], l = r && b.collapsible, n = l ? e() : d.next(), a = o.next(), c = {oldHeader: o, oldPanel: a, newHeader: l ? e() : d, newPanel: n};
            s.preventDefault(), r && !b.collapsible || this._trigger("beforeActivate", s, c) === !1 || (b.active = l ? !1 : this.headers.index(d), this.active = r ? e() : d, this._toggle(c), o.removeClass("ui-accordion-header-active ui-state-active"), b.icons && o.children(".ui-accordion-header-icon").removeClass(b.icons.activeHeader).addClass(b.icons.header), r || (d.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"), b.icons && d.children(".ui-accordion-header-icon").removeClass(b.icons.header).addClass(b.icons.activeHeader), d.next().addClass("ui-accordion-content-active")))
        }, _toggle: function(a) {
            var c = a.newPanel, b = this.prevShow.length ? this.prevShow : a.oldPanel;
            this.prevShow.add(this.prevHide).stop(!0, !0), this.prevShow = c, this.prevHide = b, this.options.animate ? this._animate(c, b, a) : (b.hide(), c.show(), this._toggleComplete(a)), b.attr({"aria-expanded": "false", "aria-hidden": "true"}), b.prev().attr("aria-selected", "false"), c.length && b.length ? b.prev().attr("tabIndex", -1) : c.length && this.headers.filter(function() {
                return 0 === e(this).attr("tabIndex")
            }).attr("tabIndex", -1), c.attr({"aria-expanded": "true", "aria-hidden": "false"}).prev().attr({"aria-selected": "true", tabIndex: 0})
        }, _animate: function(b, C, d) {
            var p, l, o, D = this, a = 0, r = b.length && (!C.length || b.index() < C.index()), c = this.options.animate || {}, u = r && c.down || c, n = function() {
                D._toggleComplete(d)
            };
            return"number" == typeof u && (o = u), "string" == typeof u && (l = u), l = l || u.easing || c.easing, o = o || u.duration || c.duration, C.length ? b.length ? (p = b.show().outerHeight(), C.animate(f, {duration: o, easing: l, step: function(m, k) {
                    k.now = Math.round(m)
                }}), b.hide().animate(h, {duration: o, easing: l, complete: n, step: function(k, m) {
                    m.now = Math.round(k), "height" !== m.prop ? a += m.now : "content" !== D.options.heightStyle && (m.now = Math.round(p - C.outerHeight() - a), a = 0)
                }}), undefined) : C.animate(f, o, l, n) : b.animate(h, o, l, n)
        }, _toggleComplete: function(b) {
            var a = b.oldPanel;
            a.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"), a.length && (a.parent()[0].className = a.parent()[0].className), this._trigger("activate", null, b)
        }})
})(jQuery);
(function(d) {
    var c = 0;
    d.widget("ui.autocomplete", {version: "1.10.3", defaultElement: "<input>", options: {appendTo: null, autoFocus: !1, delay: 300, minLength: 1, position: {my: "left top", at: "left bottom", collision: "none"}, source: null, change: null, close: null, focus: null, open: null, response: null, search: null, select: null}, pending: 0, _create: function() {
            var e, m, l, a = this.element[0].nodeName.toLowerCase(), n = "textarea" === a, b = "input" === a;
            this.isMultiLine = n ? !0 : b ? !1 : this.element.prop("isContentEditable"), this.valueMethod = this.element[n || b ? "val" : "text"], this.isNewMenu = !0, this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off"), this._on(this.element, {keydown: function(f) {
                    if (this.element.prop("readOnly")) {
                        return e = !0, l = !0, m = !0, undefined
                    }
                    e = !1, l = !1, m = !1;
                    var g = d.ui.keyCode;
                    switch (f.keyCode) {
                        case g.PAGE_UP:
                            e = !0, this._move("previousPage", f);
                            break;
                        case g.PAGE_DOWN:
                            e = !0, this._move("nextPage", f);
                            break;
                        case g.UP:
                            e = !0, this._keyEvent("previous", f);
                            break;
                        case g.DOWN:
                            e = !0, this._keyEvent("next", f);
                            break;
                        case g.ENTER:
                        case g.NUMPAD_ENTER:
                            this.menu.active && (e = !0, f.preventDefault(), this.menu.select(f));
                            break;
                        case g.TAB:
                            this.menu.active && this.menu.select(f);
                            break;
                        case g.ESCAPE:
                            this.menu.element.is(":visible") && (this._value(this.term), this.close(f), f.preventDefault());
                            break;
                        default:
                            m = !0, this._searchTimeout(f)
                        }
                }, keypress: function(g) {
                    if (e) {
                        return e = !1, (!this.isMultiLine || this.menu.element.is(":visible")) && g.preventDefault(), undefined
                    }
                    if (!m) {
                        var f = d.ui.keyCode;
                        switch (g.keyCode) {
                            case f.PAGE_UP:
                                this._move("previousPage", g);
                                break;
                            case f.PAGE_DOWN:
                                this._move("nextPage", g);
                                break;
                            case f.UP:
                                this._keyEvent("previous", g);
                                break;
                            case f.DOWN:
                                this._keyEvent("next", g)
                            }
                    }
                }, input: function(f) {
                    return l ? (l = !1, f.preventDefault(), undefined) : (this._searchTimeout(f), undefined)
                }, focus: function() {
                    this.selectedItem = null, this.previous = this._value()
                }, blur: function(f) {
                    return this.cancelBlur ? (delete this.cancelBlur, undefined) : (clearTimeout(this.searching), this.close(f), this._change(f), undefined)
                }}), this._initSource(), this.menu = d("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role: null}).hide().data("ui-menu"), this._on(this.menu.element, {mousedown: function(f) {
                    f.preventDefault(), this.cancelBlur = !0, this._delay(function() {
                        delete this.cancelBlur
                    });
                    var g = this.menu.element[0];
                    d(f.target).closest(".ui-menu-item").length || this._delay(function() {
                        var h = this;
                        this.document.one("mousedown", function(k) {
                            k.target === h.element[0] || k.target === g || d.contains(g, k.target) || h.close()
                        })
                    })
                }, menufocus: function(h, g) {
                    if (this.isNewMenu && (this.isNewMenu = !1, h.originalEvent && /^mouse/.test(h.originalEvent.type))) {
                        return this.menu.blur(), this.document.one("mousemove", function() {
                            d(h.target).trigger(h.originalEvent)
                        }), undefined
                    }
                    var f = g.item.data("ui-autocomplete-item");
                    !1 !== this._trigger("focus", h, {item: f}) ? h.originalEvent && /^key/.test(h.originalEvent.type) && this._value(f.value) : this.liveRegion.text(f.value)
                }, menuselect: function(f, h) {
                    var g = h.item.data("ui-autocomplete-item"), k = this.previous;
                    this.element[0] !== this.document[0].activeElement && (this.element.focus(), this.previous = k, this._delay(function() {
                        this.previous = k, this.selectedItem = g
                    })), !1 !== this._trigger("select", f, {item: g}) && this._value(g.value), this.term = this._value(), this.close(f), this.selectedItem = g
                }}), this.liveRegion = d("<span>", {role: "status", "aria-live": "polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element), this._on(this.window, {beforeunload: function() {
                    this.element.removeAttr("autocomplete")
                }})
        }, _destroy: function() {
            clearTimeout(this.searching), this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"), this.menu.element.remove(), this.liveRegion.remove()
        }, _setOption: function(b, a) {
            this._super(b, a), "source" === b && this._initSource(), "appendTo" === b && this.menu.element.appendTo(this._appendTo()), "disabled" === b && a && this.xhr && this.xhr.abort()
        }, _appendTo: function() {
            var a = this.options.appendTo;
            return a && (a = a.jquery || a.nodeType ? d(a) : this.document.find(a).eq(0)), a || (a = this.element.closest(".ui-front")), a.length || (a = this.document[0].body), a
        }, _initSource: function() {
            var a, e, b = this;
            d.isArray(this.options.source) ? (a = this.options.source, this.source = function(h, f) {
                f(d.ui.autocomplete.filter(a, h.term))
            }) : "string" == typeof this.options.source ? (e = this.options.source, this.source = function(k, f) {
                b.xhr && b.xhr.abort(), b.xhr = d.ajax({url: e, data: k, dataType: "json", success: function(g) {
                        f(g)
                    }, error: function() {
                        f([])
                    }})
            }) : this.source = this.options.source
        }, _searchTimeout: function(a) {
            clearTimeout(this.searching), this.searching = this._delay(function() {
                this.term !== this._value() && (this.selectedItem = null, this.search(null, a))
            }, this.options.delay)
        }, search: function(b, a) {
            return b = null != b ? b : this._value(), this.term = this._value(), b.length < this.options.minLength ? this.close(a) : this._trigger("search", a) !== !1 ? this._search(b) : undefined
        }, _search: function(a) {
            this.pending++, this.element.addClass("ui-autocomplete-loading"), this.cancelSearch = !1, this.source({term: a}, this._response())
        }, _response: function() {
            var a = this, b = ++c;
            return function(f) {
                b === c && a.__response(f), a.pending--, a.pending || a.element.removeClass("ui-autocomplete-loading")
            }
        }, __response: function(a) {
            a && (a = this._normalize(a)), this._trigger("response", null, {content: a}), !this.options.disabled && a && a.length && !this.cancelSearch ? (this._suggest(a), this._trigger("open")) : this._close()
        }, close: function(a) {
            this.cancelSearch = !0, this._close(a)
        }, _close: function(a) {
            this.menu.element.is(":visible") && (this.menu.element.hide(), this.menu.blur(), this.isNewMenu = !0, this._trigger("close", a))
        }, _change: function(a) {
            this.previous !== this._value() && this._trigger("change", a, {item: this.selectedItem})
        }, _normalize: function(a) {
            return a.length && a[0].label && a[0].value ? a : d.map(a, function(b) {
                return"string" == typeof b ? {label: b, value: b} : d.extend({label: b.label || b.value, value: b.value || b.label}, b)
            })
        }, _suggest: function(a) {
            var b = this.menu.element.empty();
            this._renderMenu(b, a), this.isNewMenu = !0, this.menu.refresh(), b.show(), this._resizeMenu(), b.position(d.extend({of: this.element}, this.options.position)), this.options.autoFocus && this.menu.next()
        }, _resizeMenu: function() {
            var a = this.menu.element;
            a.outerWidth(Math.max(a.width("").outerWidth() + 1, this.element.outerWidth()))
        }, _renderMenu: function(a, e) {
            var b = this;
            d.each(e, function(f, h) {
                b._renderItemData(a, h)
            })
        }, _renderItemData: function(b, a) {
            return this._renderItem(b, a).data("ui-autocomplete-item", a)
        }, _renderItem: function(a, b) {
            return d("<li>").append(d("<a>").text(b.label)).appendTo(a)
        }, _move: function(b, a) {
            return this.menu.element.is(":visible") ? this.menu.isFirstItem() && /^previous/.test(b) || this.menu.isLastItem() && /^next/.test(b) ? (this._value(this.term), this.menu.blur(), undefined) : (this.menu[b](a), undefined) : (this.search(null, a), undefined)
        }, widget: function() {
            return this.menu.element
        }, _value: function() {
            return this.valueMethod.apply(this.element, arguments)
        }, _keyEvent: function(b, a) {
            (!this.isMultiLine || this.menu.element.is(":visible")) && (this._move(b, a), a.preventDefault())
        }}), d.extend(d.ui.autocomplete, {escapeRegex: function(a) {
            return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
        }, filter: function(a, e) {
            var b = RegExp(d.ui.autocomplete.escapeRegex(e), "i");
            return d.grep(a, function(f) {
                return b.test(f.label || f.value || f)
            })
        }}), d.widget("ui.autocomplete", d.ui.autocomplete, {options: {messages: {noResults: "No search results.", results: function(a) {
                    return a + (a > 1 ? " results are" : " result is") + " available, use up and down arrow keys to navigate."
                }}}, __response: function(b) {
            var a;
            this._superApply(arguments), this.options.disabled || this.cancelSearch || (a = b && b.length ? this.options.messages.results(b.length) : this.options.messages.noResults, this.liveRegion.text(a))
        }})
})(jQuery);
(function(a) {
    var h, n, w, r, e = "ui-button ui-widget ui-state-default ui-corner-all", s = "ui-state-hover ui-state-active ", v = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", l = function() {
        var b = a(this);
        setTimeout(function() {
            b.find(":ui-button").button("refresh")
        }, 1)
    }, o = function(c) {
        var b = c.name, d = c.form, f = a([]);
        return b && (b = b.replace(/'/g, "\\'"), f = d ? a(d).find("[name='" + b + "']") : a("[name='" + b + "']", c.ownerDocument).filter(function() {
            return !this.form
        })), f
    };
    a.widget("ui.button", {version: "1.10.3", defaultElement: "<button>", options: {disabled: null, text: !0, label: null, icons: {primary: null, secondary: null}}, _create: function() {
            this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, l), "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled), this._determineButtonType(), this.hasTitle = !!this.buttonElement.attr("title");
            var c = this, f = this.options, g = "checkbox" === this.type || "radio" === this.type, b = g ? "" : "ui-state-active", d = "ui-state-focus";
            null === f.label && (f.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html()), this._hoverable(this.buttonElement), this.buttonElement.addClass(e).attr("role", "button").bind("mouseenter" + this.eventNamespace, function() {
                f.disabled || this === h && a(this).addClass("ui-state-active")
            }).bind("mouseleave" + this.eventNamespace, function() {
                f.disabled || a(this).removeClass(b)
            }).bind("click" + this.eventNamespace, function(k) {
                f.disabled && (k.preventDefault(), k.stopImmediatePropagation())
            }), this.element.bind("focus" + this.eventNamespace, function() {
                c.buttonElement.addClass(d)
            }).bind("blur" + this.eventNamespace, function() {
                c.buttonElement.removeClass(d)
            }), g && (this.element.bind("change" + this.eventNamespace, function() {
                r || c.refresh()
            }), this.buttonElement.bind("mousedown" + this.eventNamespace, function(k) {
                f.disabled || (r = !1, n = k.pageX, w = k.pageY)
            }).bind("mouseup" + this.eventNamespace, function(k) {
                f.disabled || (n !== k.pageX || w !== k.pageY) && (r = !0)
            })), "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                return f.disabled || r ? !1 : undefined
            }) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function() {
                if (f.disabled || r) {
                    return !1
                }
                a(this).addClass("ui-state-active"), c.buttonElement.attr("aria-pressed", "true");
                var k = c.element[0];
                o(k).not(k).map(function() {
                    return a(this).button("widget")[0]
                }).removeClass("ui-state-active").attr("aria-pressed", "false")
            }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function() {
                return f.disabled ? !1 : (a(this).addClass("ui-state-active"), h = this, c.document.one("mouseup", function() {
                    h = null
                }), undefined)
            }).bind("mouseup" + this.eventNamespace, function() {
                return f.disabled ? !1 : (a(this).removeClass("ui-state-active"), undefined)
            }).bind("keydown" + this.eventNamespace, function(k) {
                return f.disabled ? !1 : ((k.keyCode === a.ui.keyCode.SPACE || k.keyCode === a.ui.keyCode.ENTER) && a(this).addClass("ui-state-active"), undefined)
            }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function() {
                a(this).removeClass("ui-state-active")
            }), this.buttonElement.is("a") && this.buttonElement.keyup(function(k) {
                k.keyCode === a.ui.keyCode.SPACE && a(this).click()
            })), this._setOption("disabled", f.disabled), this._resetButton()
        }, _determineButtonType: function() {
            var d, c, b;
            this.type = this.element.is("[type=checkbox]") ? "checkbox" : this.element.is("[type=radio]") ? "radio" : this.element.is("input") ? "input" : "button", "checkbox" === this.type || "radio" === this.type ? (d = this.element.parents().last(), c = "label[for='" + this.element.attr("id") + "']", this.buttonElement = d.find(c), this.buttonElement.length || (d = d.length ? d.siblings() : this.element.siblings(), this.buttonElement = d.filter(c), this.buttonElement.length || (this.buttonElement = d.find(c))), this.element.addClass("ui-helper-hidden-accessible"), b = this.element.is(":checked"), b && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", b)) : this.buttonElement = this.element
        }, widget: function() {
            return this.buttonElement
        }, _destroy: function() {
            this.element.removeClass("ui-helper-hidden-accessible"), this.buttonElement.removeClass(e + " " + s + " " + v).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()), this.hasTitle || this.buttonElement.removeAttr("title")
        }, _setOption: function(b, c) {
            return this._super(b, c), "disabled" === b ? (c ? this.element.prop("disabled", !0) : this.element.prop("disabled", !1), undefined) : (this._resetButton(), undefined)
        }, refresh: function() {
            var b = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
            b !== this.options.disabled && this._setOption("disabled", b), "radio" === this.type ? o(this.element[0]).each(function() {
                a(this).is(":checked") ? a(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false")
            }) : "checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"))
        }, _resetButton: function() {
            if ("input" === this.type) {
                return this.options.label && this.element.val(this.options.label), undefined
            }
            var f = this.buttonElement.removeClass(v), b = a("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(f.empty()).text(), g = this.options.icons, c = g.primary && g.secondary, d = [];
            g.primary || g.secondary ? (this.options.text && d.push("ui-button-text-icon" + (c ? "s" : g.primary ? "-primary" : "-secondary")), g.primary && f.prepend("<span class='ui-button-icon-primary ui-icon " + g.primary + "'></span>"), g.secondary && f.append("<span class='ui-button-icon-secondary ui-icon " + g.secondary + "'></span>"), this.options.text || (d.push(c ? "ui-button-icons-only" : "ui-button-icon-only"), this.hasTitle || f.attr("title", a.trim(b)))) : d.push("ui-button-text-only"), f.addClass(d.join(" "))
        }}), a.widget("ui.buttonset", {version: "1.10.3", options: {items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"}, _create: function() {
            this.element.addClass("ui-buttonset")
        }, _init: function() {
            this.refresh()
        }, _setOption: function(b, c) {
            "disabled" === b && this.buttons.button("option", b, c), this._super(b, c)
        }, refresh: function() {
            var b = "rtl" === this.element.css("direction");
            this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function() {
                return a(this).button("widget")[0]
            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(b ? "ui-corner-left" : "ui-corner-right").end().end()
        }, _destroy: function() {
            this.element.removeClass("ui-buttonset"), this.buttons.map(function() {
                return a(this).button("widget")[0]
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy")
        }})
})(jQuery);
(function(o, l) {
    function p() {
        this._curInst = null, this._keyEvent = !1, this._disabledInputs = [], this._datepickerShowing = !1, this._inDialog = !1, this._mainDivId = "ui-datepicker-div", this._inlineClass = "ui-datepicker-inline", this._appendClass = "ui-datepicker-append", this._triggerClass = "ui-datepicker-trigger", this._dialogClass = "ui-datepicker-dialog", this._disableClass = "ui-datepicker-disabled", this._unselectableClass = "ui-datepicker-unselectable", this._currentClass = "ui-datepicker-current-day", this._dayOverClass = "ui-datepicker-days-cell-over", this.regional = [], this.regional[""] = {closeText: "Done", prevText: "Prev", nextText: "Next", currentText: "Today", monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"], monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"], dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"], dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"], dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"], weekHeader: "Wk", dateFormat: "mm/dd/yy", firstDay: 0, isRTL: !1, showMonthAfterYear: !1, yearSuffix: ""}, this._defaults = {showOn: "focus", showAnim: "fadeIn", showOptions: {}, defaultDate: null, appendText: "", buttonText: "...", buttonImage: "", buttonImageOnly: !1, hideIfNoPrevNext: !1, navigationAsDateFormat: !1, gotoCurrent: !1, changeMonth: !1, changeYear: !1, yearRange: "c-10:c+10", showOtherMonths: !1, selectOtherMonths: !1, showWeek: !1, calculateWeek: this.iso8601Week, shortYearCutoff: "+10", minDate: null, maxDate: null, duration: "fast", beforeShowDay: null, beforeShow: null, onSelect: null, onChangeMonthYear: null, onClose: null, numberOfMonths: 1, showCurrentAtPos: 0, stepMonths: 1, stepBigMonths: 12, altField: "", altFormat: "", constrainInput: !0, showButtonPanel: !1, autoSize: !1, disabled: !1}, o.extend(this._defaults, this.regional[""]), this.dpDiv = n(o("<div id='" + this._mainDivId + "' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))
    }
    function n(c) {
        var b = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return c.delegate(b, "mouseout", function() {
            o(this).removeClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && o(this).removeClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && o(this).removeClass("ui-datepicker-next-hover")
        }).delegate(b, "mouseover", function() {
            o.datepicker._isDisabledDatepicker(a.inline ? c.parent()[0] : a.input[0]) || (o(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"), o(this).addClass("ui-state-hover"), -1 !== this.className.indexOf("ui-datepicker-prev") && o(this).addClass("ui-datepicker-prev-hover"), -1 !== this.className.indexOf("ui-datepicker-next") && o(this).addClass("ui-datepicker-next-hover"))
        })
    }
    function e(b, d) {
        o.extend(b, d);
        for (var c in d) {
            null == d[c] && (b[c] = d[c])
        }
        return b
    }
    o.extend(o.ui, {datepicker: {version: "1.10.3"}});
    var a, m = "datepicker";
    o.extend(p.prototype, {markerClassName: "hasDatepicker", maxRows: 4, _widgetDatepicker: function() {
            return this.dpDiv
        }, setDefaults: function(b) {
            return e(this._defaults, b || {}), this
        }, _attachDatepicker: function(f, b) {
            var g, d, c;
            g = f.nodeName.toLowerCase(), d = "div" === g || "span" === g, f.id || (this.uuid += 1, f.id = "dp" + this.uuid), c = this._newInst(o(f), d), c.settings = o.extend({}, b || {}), "input" === g ? this._connectDatepicker(f, c) : d && this._inlineDatepicker(f, c)
        }, _newInst: function(d, c) {
            var b = d[0].id.replace(/([^A-Za-z0-9_\-])/g, "\\\\$1");
            return{id: b, input: d, selectedDay: 0, selectedMonth: 0, selectedYear: 0, drawMonth: 0, drawYear: 0, inline: c, dpDiv: c ? n(o("<div class='" + this._inlineClass + " ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")) : this.dpDiv}
        }, _connectDatepicker: function(b, d) {
            var c = o(b);
            d.append = o([]), d.trigger = o([]), c.hasClass(this.markerClassName) || (this._attachments(c, d), c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp), this._autoSize(d), o.data(b, m, d), d.settings.disabled && this._disableDatepicker(b))
        }, _attachments: function(g, b) {
            var k, d, c, h = this._get(b, "appendText"), f = this._get(b, "isRTL");
            b.append && b.append.remove(), h && (b.append = o("<span class='" + this._appendClass + "'>" + h + "</span>"), g[f ? "before" : "after"](b.append)), g.unbind("focus", this._showDatepicker), b.trigger && b.trigger.remove(), k = this._get(b, "showOn"), ("focus" === k || "both" === k) && g.focus(this._showDatepicker), ("button" === k || "both" === k) && (d = this._get(b, "buttonText"), c = this._get(b, "buttonImage"), b.trigger = o(this._get(b, "buttonImageOnly") ? o("<img/>").addClass(this._triggerClass).attr({src: c, alt: d, title: d}) : o("<button type='button'></button>").addClass(this._triggerClass).html(c ? o("<img/>").attr({src: c, alt: d, title: d}) : d)), g[f ? "before" : "after"](b.trigger), b.trigger.click(function() {
                return o.datepicker._datepickerShowing && o.datepicker._lastInput === g[0] ? o.datepicker._hideDatepicker() : o.datepicker._datepickerShowing && o.datepicker._lastInput !== g[0] ? (o.datepicker._hideDatepicker(), o.datepicker._showDatepicker(g[0])) : o.datepicker._showDatepicker(g[0]), !1
            }))
        }, _autoSize: function(k) {
            if (this._get(k, "autoSize") && !k.inline) {
                var f, b, h, d, c = new Date(2009, 11, 20), g = this._get(k, "dateFormat");
                g.match(/[DM]/) && (f = function(q) {
                    for (b = 0, h = 0, d = 0; q.length > d; d++) {
                        q[d].length > b && (b = q[d].length, h = d)
                    }
                    return h
                }, c.setMonth(f(this._get(k, g.match(/MM/) ? "monthNames" : "monthNamesShort"))), c.setDate(f(this._get(k, g.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - c.getDay())), k.input.attr("size", this._formatDate(k, c).length)
            }
        }, _inlineDatepicker: function(b, d) {
            var c = o(b);
            c.hasClass(this.markerClassName) || (c.addClass(this.markerClassName).append(d.dpDiv), o.data(b, m, d), this._setDate(d, this._getDefaultDate(d), !0), this._updateDatepicker(d), this._updateAlternate(d), d.settings.disabled && this._disableDatepicker(b), d.dpDiv.css("display", "block"))
        }, _dialogDatepicker: function(D, b, c, g, h) {
            var E, d, s, f, u, k = this._dialogInst;
            return k || (this.uuid += 1, E = "dp" + this.uuid, this._dialogInput = o("<input type='text' id='" + E + "' style='position: absolute; top: -100px; width: 0px;'/>"), this._dialogInput.keydown(this._doKeyDown), o("body").append(this._dialogInput), k = this._dialogInst = this._newInst(this._dialogInput, !1), k.settings = {}, o.data(this._dialogInput[0], m, k)), e(k.settings, g || {}), b = b && b.constructor === Date ? this._formatDate(k, b) : b, this._dialogInput.val(b), this._pos = h ? h.length ? h : [h.pageX, h.pageY] : null, this._pos || (d = document.documentElement.clientWidth, s = document.documentElement.clientHeight, f = document.documentElement.scrollLeft || document.body.scrollLeft, u = document.documentElement.scrollTop || document.body.scrollTop, this._pos = [d / 2 - 100 + f, s / 2 - 150 + u]), this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"), k.settings.onSelect = c, this._inDialog = !0, this.dpDiv.addClass(this._dialogClass), this._showDatepicker(this._dialogInput[0]), o.blockUI && o.blockUI(this.dpDiv), o.data(this._dialogInput[0], m, k), this
        }, _destroyDatepicker: function(b) {
            var d, c = o(b), f = o.data(b, m);
            c.hasClass(this.markerClassName) && (d = b.nodeName.toLowerCase(), o.removeData(b, m), "input" === d ? (f.append.remove(), f.trigger.remove(), c.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : ("div" === d || "span" === d) && c.removeClass(this.markerClassName).empty())
        }, _enableDatepicker: function(f) {
            var b, g, d = o(f), c = o.data(f, m);
            d.hasClass(this.markerClassName) && (b = f.nodeName.toLowerCase(), "input" === b ? (f.disabled = !1, c.trigger.filter("button").each(function() {
                this.disabled = !1
            }).end().filter("img").css({opacity: "1.0", cursor: ""})) : ("div" === b || "span" === b) && (g = d.children("." + this._inlineClass), g.children().removeClass("ui-state-disabled"), g.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !1)), this._disabledInputs = o.map(this._disabledInputs, function(h) {
                return h === f ? null : h
            }))
        }, _disableDatepicker: function(f) {
            var b, g, d = o(f), c = o.data(f, m);
            d.hasClass(this.markerClassName) && (b = f.nodeName.toLowerCase(), "input" === b ? (f.disabled = !0, c.trigger.filter("button").each(function() {
                this.disabled = !0
            }).end().filter("img").css({opacity: "0.5", cursor: "default"})) : ("div" === b || "span" === b) && (g = d.children("." + this._inlineClass), g.children().addClass("ui-state-disabled"), g.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled", !0)), this._disabledInputs = o.map(this._disabledInputs, function(h) {
                return h === f ? null : h
            }), this._disabledInputs[this._disabledInputs.length] = f)
        }, _isDisabledDatepicker: function(c) {
            if (!c) {
                return !1
            }
            for (var b = 0; this._disabledInputs.length > b; b++) {
                if (this._disabledInputs[b] === c) {
                    return !0
                }
            }
            return !1
        }, _getInst: function(c) {
            try {
                return o.data(c, m)
            } catch (b) {
                throw"Missing instance data for this datepicker"
            }
        }, _optionDatepicker: function(r, g, b) {
            var f, d, k, h, c = this._getInst(r);
            return 2 === arguments.length && "string" == typeof g ? "defaults" === g ? o.extend({}, o.datepicker._defaults) : c ? "all" === g ? o.extend({}, c.settings) : this._get(c, g) : null : (f = g || {}, "string" == typeof g && (f = {}, f[g] = b), c && (this._curInst === c && this._hideDatepicker(), d = this._getDateDatepicker(r, !0), k = this._getMinMaxDate(c, "min"), h = this._getMinMaxDate(c, "max"), e(c.settings, f), null !== k && f.dateFormat !== l && f.minDate === l && (c.settings.minDate = this._formatDate(c, k)), null !== h && f.dateFormat !== l && f.maxDate === l && (c.settings.maxDate = this._formatDate(c, h)), "disabled" in f && (f.disabled ? this._disableDatepicker(r) : this._enableDatepicker(r)), this._attachments(o(r), c), this._autoSize(c), this._setDate(c, d), this._updateAlternate(c), this._updateDatepicker(c)), l)
        }, _changeDatepicker: function(d, b, c) {
            this._optionDatepicker(d, b, c)
        }, _refreshDatepicker: function(c) {
            var b = this._getInst(c);
            b && this._updateDatepicker(b)
        }, _setDateDatepicker: function(d, b) {
            var c = this._getInst(d);
            c && (this._setDate(c, b), this._updateDatepicker(c), this._updateAlternate(c))
        }, _getDateDatepicker: function(d, b) {
            var c = this._getInst(d);
            return c && !c.inline && this._setDateFromField(c, b), c ? this._getDate(c) : null
        }, _doKeyDown: function(g) {
            var b, k, d, c = o.datepicker._getInst(g.target), h = !0, f = c.dpDiv.is(".ui-datepicker-rtl");
            if (c._keyEvent = !0, o.datepicker._datepickerShowing) {
                switch (g.keyCode) {
                    case 9:
                        o.datepicker._hideDatepicker(), h = !1;
                        break;
                    case 13:
                        return d = o("td." + o.datepicker._dayOverClass + ":not(." + o.datepicker._currentClass + ")", c.dpDiv), d[0] && o.datepicker._selectDay(g.target, c.selectedMonth, c.selectedYear, d[0]), b = o.datepicker._get(c, "onSelect"), b ? (k = o.datepicker._formatDate(c), b.apply(c.input ? c.input[0] : null, [k, c])) : o.datepicker._hideDatepicker(), !1;
                    case 27:
                        o.datepicker._hideDatepicker();
                        break;
                    case 33:
                        o.datepicker._adjustDate(g.target, g.ctrlKey ? -o.datepicker._get(c, "stepBigMonths") : -o.datepicker._get(c, "stepMonths"), "M");
                        break;
                    case 34:
                        o.datepicker._adjustDate(g.target, g.ctrlKey ? +o.datepicker._get(c, "stepBigMonths") : +o.datepicker._get(c, "stepMonths"), "M");
                        break;
                    case 35:
                        (g.ctrlKey || g.metaKey) && o.datepicker._clearDate(g.target), h = g.ctrlKey || g.metaKey;
                        break;
                    case 36:
                        (g.ctrlKey || g.metaKey) && o.datepicker._gotoToday(g.target), h = g.ctrlKey || g.metaKey;
                        break;
                    case 37:
                        (g.ctrlKey || g.metaKey) && o.datepicker._adjustDate(g.target, f ? 1 : -1, "D"), h = g.ctrlKey || g.metaKey, g.originalEvent.altKey && o.datepicker._adjustDate(g.target, g.ctrlKey ? -o.datepicker._get(c, "stepBigMonths") : -o.datepicker._get(c, "stepMonths"), "M");
                        break;
                    case 38:
                        (g.ctrlKey || g.metaKey) && o.datepicker._adjustDate(g.target, -7, "D"), h = g.ctrlKey || g.metaKey;
                        break;
                    case 39:
                        (g.ctrlKey || g.metaKey) && o.datepicker._adjustDate(g.target, f ? -1 : 1, "D"), h = g.ctrlKey || g.metaKey, g.originalEvent.altKey && o.datepicker._adjustDate(g.target, g.ctrlKey ? +o.datepicker._get(c, "stepBigMonths") : +o.datepicker._get(c, "stepMonths"), "M");
                        break;
                    case 40:
                        (g.ctrlKey || g.metaKey) && o.datepicker._adjustDate(g.target, 7, "D"), h = g.ctrlKey || g.metaKey;
                        break;
                    default:
                        h = !1
                    }
            } else {
                36 === g.keyCode && g.ctrlKey ? o.datepicker._showDatepicker(this) : h = !1
            }
            h && (g.preventDefault(), g.stopPropagation())
        }, _doKeyPress: function(c) {
            var b, f, d = o.datepicker._getInst(c.target);
            return o.datepicker._get(d, "constrainInput") ? (b = o.datepicker._possibleChars(o.datepicker._get(d, "dateFormat")), f = String.fromCharCode(null == c.charCode ? c.keyCode : c.charCode), c.ctrlKey || c.metaKey || " " > f || !b || b.indexOf(f) > -1) : l
        }, _doKeyUp: function(b) {
            var d, c = o.datepicker._getInst(b.target);
            if (c.input.val() !== c.lastVal) {
                try {
                    d = o.datepicker.parseDate(o.datepicker._get(c, "dateFormat"), c.input ? c.input.val() : null, o.datepicker._getFormatConfig(c)), d && (o.datepicker._setDateFromField(c), o.datepicker._updateAlternate(c), o.datepicker._updateDatepicker(c))
                } catch (f) {
                }
            }
            return !0
        }, _showDatepicker: function(d) {
            if (d = d.target || d, "input" !== d.nodeName.toLowerCase() && (d = o("input", d.parentNode)[0]), !o.datepicker._isDisabledDatepicker(d) && o.datepicker._lastInput !== d) {
                var k, g, r, f, c, h, b;
                k = o.datepicker._getInst(d), o.datepicker._curInst && o.datepicker._curInst !== k && (o.datepicker._curInst.dpDiv.stop(!0, !0), k && o.datepicker._datepickerShowing && o.datepicker._hideDatepicker(o.datepicker._curInst.input[0])), g = o.datepicker._get(k, "beforeShow"), r = g ? g.apply(d, [d, k]) : {}, r !== !1 && (e(k.settings, r), k.lastVal = null, o.datepicker._lastInput = d, o.datepicker._setDateFromField(k), o.datepicker._inDialog && (d.value = ""), o.datepicker._pos || (o.datepicker._pos = o.datepicker._findPos(d), o.datepicker._pos[1] += d.offsetHeight), f = !1, o(d).parents().each(function() {
                    return f |= "fixed" === o(this).css("position"), !f
                }), c = {left: o.datepicker._pos[0], top: o.datepicker._pos[1]}, o.datepicker._pos = null, k.dpDiv.empty(), k.dpDiv.css({position: "absolute", display: "block", top: "-1000px"}), o.datepicker._updateDatepicker(k), c = o.datepicker._checkOffset(k, c, f), k.dpDiv.css({position: o.datepicker._inDialog && o.blockUI ? "static" : f ? "fixed" : "absolute", display: "none", left: c.left + "px", top: c.top + "px"}), k.inline || (h = o.datepicker._get(k, "showAnim"), b = o.datepicker._get(k, "duration"), k.dpDiv.zIndex(o(d).zIndex() + 1), o.datepicker._datepickerShowing = !0, o.effects && o.effects.effect[h] ? k.dpDiv.show(h, o.datepicker._get(k, "showOptions"), b) : k.dpDiv[h || "show"](h ? b : null), o.datepicker._shouldFocusInput(k) && k.input.focus(), o.datepicker._curInst = k))
            }
        }, _updateDatepicker: function(g) {
            this.maxRows = 4, a = g, g.dpDiv.empty().append(this._generateHTML(g)), this._attachHandlers(g), g.dpDiv.find("." + this._dayOverClass + " a").mouseover();
            var d, c = this._getNumberOfMonths(g), f = c[1], b = 17;
            g.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""), f > 1 && g.dpDiv.addClass("ui-datepicker-multi-" + f).css("width", b * f + "em"), g.dpDiv[(1 !== c[0] || 1 !== c[1] ? "add" : "remove") + "Class"]("ui-datepicker-multi"), g.dpDiv[(this._get(g, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"), g === o.datepicker._curInst && o.datepicker._datepickerShowing && o.datepicker._shouldFocusInput(g) && g.input.focus(), g.yearshtml && (d = g.yearshtml, setTimeout(function() {
                d === g.yearshtml && g.yearshtml && g.dpDiv.find("select.ui-datepicker-year:first").replaceWith(g.yearshtml), d = g.yearshtml = null
            }, 0))
        }, _shouldFocusInput: function(b) {
            return b.input && b.input.is(":visible") && !b.input.is(":disabled") && !b.input.is(":focus")
        }, _checkOffset: function(h, r, d) {
            var b = h.dpDiv.outerWidth(), g = h.dpDiv.outerHeight(), f = h.input ? h.input.outerWidth() : 0, c = h.input ? h.input.outerHeight() : 0, k = document.documentElement.clientWidth + (d ? 0 : o(document).scrollLeft()), s = document.documentElement.clientHeight + (d ? 0 : o(document).scrollTop());
            return r.left -= this._get(h, "isRTL") ? b - f : 0, r.left -= d && r.left === h.input.offset().left ? o(document).scrollLeft() : 0, r.top -= d && r.top === h.input.offset().top + c ? o(document).scrollTop() : 0, r.left -= Math.min(r.left, r.left + b > k && k > b ? Math.abs(r.left + b - k) : 0), r.top -= Math.min(r.top, r.top + g > s && s > g ? Math.abs(g + c) : 0), r
        }, _findPos: function(b) {
            for (var d, c = this._getInst(b), f = this._get(c, "isRTL"); b && ("hidden" === b.type || 1 !== b.nodeType || o.expr.filters.hidden(b)); ) {
                b = b[f ? "previousSibling" : "nextSibling"]
            }
            return d = o(b).offset(), [d.left, d.top]
        }, _hideDatepicker: function(g) {
            var b, h, d, c, f = this._curInst;
            !f || g && f !== o.data(g, m) || this._datepickerShowing && (b = this._get(f, "showAnim"), h = this._get(f, "duration"), d = function() {
                o.datepicker._tidyDialog(f)
            }, o.effects && (o.effects.effect[b] || o.effects[b]) ? f.dpDiv.hide(b, o.datepicker._get(f, "showOptions"), h, d) : f.dpDiv["slideDown" === b ? "slideUp" : "fadeIn" === b ? "fadeOut" : "hide"](b ? h : null, d), b || d(), this._datepickerShowing = !1, c = this._get(f, "onClose"), c && c.apply(f.input ? f.input[0] : null, [f.input ? f.input.val() : "", f]), this._lastInput = null, this._inDialog && (this._dialogInput.css({position: "absolute", left: "0", top: "-100px"}), o.blockUI && (o.unblockUI(), o("body").append(this.dpDiv))), this._inDialog = !1)
        }, _tidyDialog: function(b) {
            b.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")
        }, _checkExternalClick: function(b) {
            if (o.datepicker._curInst) {
                var d = o(b.target), c = o.datepicker._getInst(d[0]);
                (d[0].id !== o.datepicker._mainDivId && 0 === d.parents("#" + o.datepicker._mainDivId).length && !d.hasClass(o.datepicker.markerClassName) && !d.closest("." + o.datepicker._triggerClass).length && o.datepicker._datepickerShowing && (!o.datepicker._inDialog || !o.blockUI) || d.hasClass(o.datepicker.markerClassName) && o.datepicker._curInst !== c) && o.datepicker._hideDatepicker()
            }
        }, _adjustDate: function(f, b, g) {
            var d = o(f), c = this._getInst(d[0]);
            this._isDisabledDatepicker(d[0]) || (this._adjustInstDate(c, b + ("M" === g ? this._get(c, "showCurrentAtPos") : 0), g), this._updateDatepicker(c))
        }, _gotoToday: function(b) {
            var d, c = o(b), f = this._getInst(c[0]);
            this._get(f, "gotoCurrent") && f.currentDay ? (f.selectedDay = f.currentDay, f.drawMonth = f.selectedMonth = f.currentMonth, f.drawYear = f.selectedYear = f.currentYear) : (d = new Date, f.selectedDay = d.getDate(), f.drawMonth = f.selectedMonth = d.getMonth(), f.drawYear = f.selectedYear = d.getFullYear()), this._notifyChange(f), this._adjustDate(c)
        }, _selectMonthYear: function(f, b, g) {
            var d = o(f), c = this._getInst(d[0]);
            c["selected" + ("M" === g ? "Month" : "Year")] = c["draw" + ("M" === g ? "Month" : "Year")] = parseInt(b.options[b.selectedIndex].value, 10), this._notifyChange(c), this._adjustDate(d)
        }, _selectDay: function(f, b, h, d) {
            var c, g = o(f);
            o(d).hasClass(this._unselectableClass) || this._isDisabledDatepicker(g[0]) || (c = this._getInst(g[0]), c.selectedDay = c.currentDay = o("a", d).html(), c.selectedMonth = c.currentMonth = b, c.selectedYear = c.currentYear = h, this._selectDate(f, this._formatDate(c, c.currentDay, c.currentMonth, c.currentYear)))
        }, _clearDate: function(c) {
            var b = o(c);
            this._selectDate(b, "")
        }, _selectDate: function(f, b) {
            var g, d = o(f), c = this._getInst(d[0]);
            b = null != b ? b : this._formatDate(c), c.input && c.input.val(b), this._updateAlternate(c), g = this._get(c, "onSelect"), g ? g.apply(c.input ? c.input[0] : null, [b, c]) : c.input && c.input.trigger("change"), c.inline ? this._updateDatepicker(c) : (this._hideDatepicker(), this._lastInput = c.input[0], "object" != typeof c.input[0] && c.input.focus(), this._lastInput = null)
        }, _updateAlternate: function(f) {
            var b, g, d, c = this._get(f, "altField");
            c && (b = this._get(f, "altFormat") || this._get(f, "dateFormat"), g = this._getDate(f), d = this.formatDate(b, g, this._getFormatConfig(f)), o(c).each(function() {
                o(this).val(d)
            }))
        }, noWeekends: function(c) {
            var b = c.getDay();
            return[b > 0 && 6 > b, ""]
        }, iso8601Week: function(d) {
            var b, c = new Date(d.getTime());
            return c.setDate(c.getDate() + 4 - (c.getDay() || 7)), b = c.getTime(), c.setMonth(0), c.setDate(1), Math.floor(Math.round((b - c) / 86400000) / 7) + 1
        }, parseDate: function(s, X, x) {
            if (null == s || null == X) {
                throw"Invalid arguments"
            }
            if (X = "object" == typeof X ? "" + X : X + "", "" === X) {
                return null
            }
            var c, W, y, r, v = 0, f = (x ? x.shortYearCutoff : null) || this._defaults.shortYearCutoff, Z = "string" != typeof f ? f : (new Date).getFullYear() % 100 + parseInt(f, 10), g = (x ? x.dayNamesShort : null) || this._defaults.dayNamesShort, D = (x ? x.dayNames : null) || this._defaults.dayNames, h = (x ? x.monthNamesShort : null) || this._defaults.monthNamesShort, w = (x ? x.monthNames : null) || this._defaults.monthNames, k = -1, ab = -1, b = -1, d = -1, ad = !1, aa = function(A) {
                var q = s.length > c + 1 && s.charAt(c + 1) === A;
                return q && c++, q
            }, u = function(E) {
                var C = aa(E), q = "@" === E ? 14 : "!" === E ? 20 : "y" === E && C ? 4 : "o" === E ? 3 : 2, B = RegExp("^\\d{1," + q + "}"), A = X.substring(v).match(B);
                if (!A) {
                    throw"Missing number at position " + v
                }
                return v += A[0].length, parseInt(A[0], 10)
            }, ac = function(q, B, A) {
                var E = -1, C = o.map(aa(q) ? A : B, function(F, G) {
                    return[[G, F]]
                }).sort(function(F, G) {
                    return -(F[1].length - G[1].length)
                });
                if (o.each(C, function(H, F) {
                    var G = F[1];
                    return X.substr(v, G.length).toLowerCase() === G.toLowerCase() ? (E = F[0], v += G.length, !1) : l
                }), -1 !== E) {
                    return E + 1
                }
                throw"Unknown name at position " + v
            }, Y = function() {
                if (X.charAt(v) !== s.charAt(c)) {
                    throw"Unexpected literal at position " + v
                }
                v++
            };
            for (c = 0; s.length > c; c++) {
                if (ad) {
                    "'" !== s.charAt(c) || aa("'") ? Y() : ad = !1
                } else {
                    switch (s.charAt(c)) {
                        case"d":
                            b = u("d");
                            break;
                        case"D":
                            ac("D", g, D);
                            break;
                        case"o":
                            d = u("o");
                            break;
                        case"m":
                            ab = u("m");
                            break;
                        case"M":
                            ab = ac("M", h, w);
                            break;
                        case"y":
                            k = u("y");
                            break;
                        case"@":
                            r = new Date(u("@")), k = r.getFullYear(), ab = r.getMonth() + 1, b = r.getDate();
                            break;
                        case"!":
                            r = new Date((u("!") - this._ticksTo1970) / 10000), k = r.getFullYear(), ab = r.getMonth() + 1, b = r.getDate();
                            break;
                        case"'":
                            aa("'") ? Y() : ad = !0;
                            break;
                        default:
                            Y()
                        }
                }
            }
            if (X.length > v && (y = X.substr(v), !/^\s+/.test(y))) {
                throw"Extra/unparsed characters found in date: " + y
            }
            if (-1 === k ? k = (new Date).getFullYear() : 100 > k && (k += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (Z >= k ? 0 : -100)), d > -1) {
                for (ab = 1, b = d; ; ) {
                    if (W = this._getDaysInMonth(k, ab - 1), W >= b) {
                        break
                    }
                    ab++, b -= W
                }
            }
            if (r = this._daylightSavingAdjust(new Date(k, ab - 1, b)), r.getFullYear() !== k || r.getMonth() + 1 !== ab || r.getDate() !== b) {
                throw"Invalid date"
            }
            return r
        }, ATOM: "yy-mm-dd", COOKIE: "D, dd M yy", ISO_8601: "yy-mm-dd", RFC_822: "D, d M y", RFC_850: "DD, dd-M-y", RFC_1036: "D, d M y", RFC_1123: "D, d M yy", RFC_2822: "D, d M yy", RSS: "D, d M y", TICKS: "!", TIMESTAMP: "@", W3C: "yy-mm-dd", _ticksTo1970: 10000000 * 60 * 60 * 24 * (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)), formatDate: function(I, r, u) {
            if (!r) {
                return""
            }
            var H, d = (u ? u.dayNamesShort : null) || this._defaults.dayNamesShort, c = (u ? u.dayNames : null) || this._defaults.dayNames, k = (u ? u.monthNamesShort : null) || this._defaults.monthNamesShort, g = (u ? u.monthNames : null) || this._defaults.monthNames, s = function(v) {
                var q = I.length > H + 1 && I.charAt(H + 1) === v;
                return q && H++, q
            }, G = function(v, w, q) {
                var x = "" + w;
                if (s(v)) {
                    for (; q > x.length; ) {
                        x = "0" + x
                    }
                }
                return x
            }, f = function(v, w, q, x) {
                return s(v) ? x[w] : q[w]
            }, b = "", h = !1;
            if (r) {
                for (H = 0; I.length > H; H++) {
                    if (h) {
                        "'" !== I.charAt(H) || s("'") ? b += I.charAt(H) : h = !1
                    } else {
                        switch (I.charAt(H)) {
                            case"d":
                                b += G("d", r.getDate(), 2);
                                break;
                            case"D":
                                b += f("D", r.getDay(), d, c);
                                break;
                            case"o":
                                b += G("o", Math.round((new Date(r.getFullYear(), r.getMonth(), r.getDate()).getTime() - new Date(r.getFullYear(), 0, 0).getTime()) / 86400000), 3);
                                break;
                            case"m":
                                b += G("m", r.getMonth() + 1, 2);
                                break;
                            case"M":
                                b += f("M", r.getMonth(), k, g);
                                break;
                            case"y":
                                b += s("y") ? r.getFullYear() : (10 > r.getYear() % 100 ? "0" : "") + r.getYear() % 100;
                                break;
                            case"@":
                                b += r.getTime();
                                break;
                            case"!":
                                b += 10000 * r.getTime() + this._ticksTo1970;
                                break;
                            case"'":
                                s("'") ? b += "'" : h = !0;
                                break;
                            default:
                                b += I.charAt(H)
                            }
                    }
                }
            }
            return b
        }, _possibleChars: function(d) {
            var g, c = "", b = !1, f = function(h) {
                var k = d.length > g + 1 && d.charAt(g + 1) === h;
                return k && g++, k
            };
            for (g = 0; d.length > g; g++) {
                if (b) {
                    "'" !== d.charAt(g) || f("'") ? c += d.charAt(g) : b = !1
                } else {
                    switch (d.charAt(g)) {
                        case"d":
                        case"m":
                        case"y":
                        case"@":
                            c += "0123456789";
                            break;
                        case"D":
                        case"M":
                            return null;
                        case"'":
                            f("'") ? c += "'" : b = !0;
                            break;
                        default:
                            c += d.charAt(g)
                        }
                }
            }
            return c
        }, _get: function(c, b) {
            return c.settings[b] !== l ? c.settings[b] : this._defaults[b]
        }, _setDateFromField: function(r, g) {
            if (r.input.val() !== r.lastVal) {
                var c = this._get(r, "dateFormat"), k = r.lastVal = r.input ? r.input.val() : null, b = this._getDefaultDate(r), f = b, h = this._getFormatConfig(r);
                try {
                    f = this.parseDate(c, k, h) || b
                } catch (d) {
                    k = g ? "" : k
                }
                r.selectedDay = f.getDate(), r.drawMonth = r.selectedMonth = f.getMonth(), r.drawYear = r.selectedYear = f.getFullYear(), r.currentDay = k ? f.getDate() : 0, r.currentMonth = k ? f.getMonth() : 0, r.currentYear = k ? f.getFullYear() : 0, this._adjustInstDate(r)
            }
        }, _getDefaultDate: function(b) {
            return this._restrictMinMax(b, this._determineDate(b, this._get(b, "defaultDate"), new Date))
        }, _determineDate: function(f, b, h) {
            var d = function(k) {
                var q = new Date;
                return q.setDate(q.getDate() + k), q
            }, c = function(r) {
                try {
                    return o.datepicker.parseDate(o.datepicker._get(f, "dateFormat"), r, o.datepicker._getFormatConfig(f))
                } catch (F) {
                }
                for (var D = (r.toLowerCase().match(/^c/) ? o.datepicker._getDate(f) : null) || new Date, s = D.getFullYear(), q = D.getMonth(), E = D.getDate(), k = /([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g, u = k.exec(r); u; ) {
                    switch (u[2] || "d") {
                        case"d":
                        case"D":
                            E += parseInt(u[1], 10);
                            break;
                        case"w":
                        case"W":
                            E += 7 * parseInt(u[1], 10);
                            break;
                        case"m":
                        case"M":
                            q += parseInt(u[1], 10), E = Math.min(E, o.datepicker._getDaysInMonth(s, q));
                            break;
                        case"y":
                        case"Y":
                            s += parseInt(u[1], 10), E = Math.min(E, o.datepicker._getDaysInMonth(s, q))
                    }
                    u = k.exec(r)
                }
                return new Date(s, q, E)
            }, g = null == b || "" === b ? h : "string" == typeof b ? c(b) : "number" == typeof b ? isNaN(b) ? h : d(b) : new Date(b.getTime());
            return g = g && "Invalid Date" == "" + g ? h : g, g && (g.setHours(0), g.setMinutes(0), g.setSeconds(0), g.setMilliseconds(0)), this._daylightSavingAdjust(g)
        }, _daylightSavingAdjust: function(b) {
            return b ? (b.setHours(b.getHours() > 12 ? b.getHours() + 2 : 0), b) : null
        }, _setDate: function(k, f, b) {
            var h = !f, d = k.selectedMonth, c = k.selectedYear, g = this._restrictMinMax(k, this._determineDate(k, f, new Date));
            k.selectedDay = k.currentDay = g.getDate(), k.drawMonth = k.selectedMonth = k.currentMonth = g.getMonth(), k.drawYear = k.selectedYear = k.currentYear = g.getFullYear(), d === k.selectedMonth && c === k.selectedYear || b || this._notifyChange(k), this._adjustInstDate(k), k.input && k.input.val(h ? "" : this._formatDate(k))
        }, _getDate: function(c) {
            var b = !c.currentYear || c.input && "" === c.input.val() ? null : this._daylightSavingAdjust(new Date(c.currentYear, c.currentMonth, c.currentDay));
            return b
        }, _attachHandlers: function(b) {
            var d = this._get(b, "stepMonths"), c = "#" + b.id.replace(/\\\\/g, "\\");
            b.dpDiv.find("[data-handler]").map(function() {
                var f = {prev: function() {
                        o.datepicker._adjustDate(c, -d, "M")
                    }, next: function() {
                        o.datepicker._adjustDate(c, +d, "M")
                    }, hide: function() {
                        o.datepicker._hideDatepicker()
                    }, today: function() {
                        o.datepicker._gotoToday(c)
                    }, selectDay: function() {
                        return o.datepicker._selectDay(c, +this.getAttribute("data-month"), +this.getAttribute("data-year"), this), !1
                    }, selectMonth: function() {
                        return o.datepicker._selectMonthYear(c, this, "M"), !1
                    }, selectYear: function() {
                        return o.datepicker._selectMonthYear(c, this, "Y"), !1
                    }};
                o(this).bind(this.getAttribute("data-event"), f[this.getAttribute("data-handler")])
            })
        }, _generateHTML: function(aa) {
            var L, P, Z, U, al, Y, V, O, S, an, ab, K, W, M, T, N, ac, ak, am, af, ae, R, ad, c, C, b, u, B, v, k, x, ai, ag, h, d, f, w, F, Q, A = new Date, s = this._daylightSavingAdjust(new Date(A.getFullYear(), A.getMonth(), A.getDate())), I = this._get(aa, "isRTL"), aj = this._get(aa, "showButtonPanel"), q = this._get(aa, "hideIfNoPrevNext"), r = this._get(aa, "navigationAsDateFormat"), y = this._getNumberOfMonths(aa), E = this._get(aa, "showCurrentAtPos"), D = this._get(aa, "stepMonths"), X = 1 !== y[0] || 1 !== y[1], H = this._daylightSavingAdjust(aa.currentDay ? new Date(aa.currentYear, aa.currentMonth, aa.currentDay) : new Date(9999, 9, 9)), g = this._getMinMaxDate(aa, "min"), ah = this._getMinMaxDate(aa, "max"), J = aa.drawMonth - E, G = aa.drawYear;
            if (0 > J && (J += 12, G--), ah) {
                for (L = this._daylightSavingAdjust(new Date(ah.getFullYear(), ah.getMonth() - y[0] * y[1] + 1, ah.getDate())), L = g && g > L ? g : L; this._daylightSavingAdjust(new Date(G, J, 1)) > L; ) {
                    J--, 0 > J && (J = 11, G--)
                }
            }
            for (aa.drawMonth = J, aa.drawYear = G, P = this._get(aa, "prevText"), P = r ? this.formatDate(P, this._daylightSavingAdjust(new Date(G, J - D, 1)), this._getFormatConfig(aa)) : P, Z = this._canAdjustMonth(aa, -1, G, J) ? "<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='" + P + "'><span class='ui-icon ui-icon-circle-triangle-" + (I ? "e" : "w") + "'>" + P + "</span></a>" : q ? "" : "<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='" + P + "'><span class='ui-icon ui-icon-circle-triangle-" + (I ? "e" : "w") + "'>" + P + "</span></a>", U = this._get(aa, "nextText"), U = r ? this.formatDate(U, this._daylightSavingAdjust(new Date(G, J + D, 1)), this._getFormatConfig(aa)) : U, al = this._canAdjustMonth(aa, 1, G, J) ? "<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='" + U + "'><span class='ui-icon ui-icon-circle-triangle-" + (I ? "w" : "e") + "'>" + U + "</span></a>" : q ? "" : "<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='" + U + "'><span class='ui-icon ui-icon-circle-triangle-" + (I ? "w" : "e") + "'>" + U + "</span></a>", Y = this._get(aa, "currentText"), V = this._get(aa, "gotoCurrent") && aa.currentDay ? H : s, Y = r ? this.formatDate(Y, V, this._getFormatConfig(aa)) : Y, O = aa.inline ? "" : "<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>" + this._get(aa, "closeText") + "</button>", S = aj ? "<div class='ui-datepicker-buttonpane ui-widget-content'>" + (I ? O : "") + (this._isInRange(aa, V) ? "<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>" + Y + "</button>" : "") + (I ? "" : O) + "</div>" : "", an = parseInt(this._get(aa, "firstDay"), 10), an = isNaN(an) ? 0 : an, ab = this._get(aa, "showWeek"), K = this._get(aa, "dayNames"), W = this._get(aa, "dayNamesMin"), M = this._get(aa, "monthNames"), T = this._get(aa, "monthNamesShort"), N = this._get(aa, "beforeShowDay"), ac = this._get(aa, "showOtherMonths"), ak = this._get(aa, "selectOtherMonths"), am = this._getDefaultDate(aa), af = "", R = 0; y[0] > R; R++) {
                for (ad = "", this.maxRows = 4, c = 0; y[1] > c; c++) {
                    if (C = this._daylightSavingAdjust(new Date(G, J, aa.selectedDay)), b = " ui-corner-all", u = "", X) {
                        if (u += "<div class='ui-datepicker-group", y[1] > 1) {
                            switch (c) {
                                case 0:
                                    u += " ui-datepicker-group-first", b = " ui-corner-" + (I ? "right" : "left");
                                    break;
                                case y[1] - 1:
                                    u += " ui-datepicker-group-last", b = " ui-corner-" + (I ? "left" : "right");
                                    break;
                                default:
                                    u += " ui-datepicker-group-middle", b = ""
                                }
                        }
                        u += "'>"
                    }
                    for (u += "<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix" + b + "'>" + (/all|left/.test(b) && 0 === R ? I ? al : Z : "") + (/all|right/.test(b) && 0 === R ? I ? Z : al : "") + this._generateMonthYearHeader(aa, J, G, g, ah, R > 0 || c > 0, M, T) + "</div><table class='ui-datepicker-calendar'><thead><tr>", B = ab ? "<th class='ui-datepicker-week-col'>" + this._get(aa, "weekHeader") + "</th>" : "", ae = 0; 7 > ae; ae++) {
                        v = (ae + an) % 7, B += "<th" + ((ae + an + 6) % 7 >= 5 ? " class='ui-datepicker-week-end'" : "") + "><span title='" + K[v] + "'>" + W[v] + "</span></th>"
                    }
                    for (u += B + "</tr></thead><tbody>", k = this._getDaysInMonth(G, J), G === aa.selectedYear && J === aa.selectedMonth && (aa.selectedDay = Math.min(aa.selectedDay, k)), x = (this._getFirstDayOfMonth(G, J) - an + 7) % 7, ai = Math.ceil((x + k) / 7), ag = X ? this.maxRows > ai ? this.maxRows : ai : ai, this.maxRows = ag, h = this._daylightSavingAdjust(new Date(G, J, 1 - x)), d = 0; ag > d; d++) {
                        for (u += "<tr>", f = ab ? "<td class='ui-datepicker-week-col'>" + this._get(aa, "calculateWeek")(h) + "</td>" : "", ae = 0; 7 > ae; ae++) {
                            w = N ? N.apply(aa.input ? aa.input[0] : null, [h]) : [!0, ""], F = h.getMonth() !== J, Q = F && !ak || !w[0] || g && g > h || ah && h > ah, f += "<td class='" + ((ae + an + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (F ? " ui-datepicker-other-month" : "") + (h.getTime() === C.getTime() && J === aa.selectedMonth && aa._keyEvent || am.getTime() === h.getTime() && am.getTime() === C.getTime() ? " " + this._dayOverClass : "") + (Q ? " " + this._unselectableClass + " ui-state-disabled" : "") + (F && !ac ? "" : " " + w[1] + (h.getTime() === H.getTime() ? " " + this._currentClass : "") + (h.getTime() === s.getTime() ? " ui-datepicker-today" : "")) + "'" + (F && !ac || !w[2] ? "" : " title='" + w[2].replace(/'/g, "&#39;") + "'") + (Q ? "" : " data-handler='selectDay' data-event='click' data-month='" + h.getMonth() + "' data-year='" + h.getFullYear() + "'") + ">" + (F && !ac ? "&#xa0;" : Q ? "<span class='ui-state-default'>" + h.getDate() + "</span>" : "<a class='ui-state-default" + (h.getTime() === s.getTime() ? " ui-state-highlight" : "") + (h.getTime() === H.getTime() ? " ui-state-active" : "") + (F ? " ui-priority-secondary" : "") + "' href='#'>" + h.getDate() + "</a>") + "</td>", h.setDate(h.getDate() + 1), h = this._daylightSavingAdjust(h)
                        }
                        u += f + "</tr>"
                    }
                    J++, J > 11 && (J = 0, G++), u += "</tbody></table>" + (X ? "</div>" + (y[0] > 0 && c === y[1] - 1 ? "<div class='ui-datepicker-row-break'></div>" : "") : ""), ad += u
                }
                af += ad
            }
            return af += S, aa._keyEvent = !1, af
        }, _generateMonthYearHeader: function(aa, h, u, Z, U, c, X, V) {
            var s, S, f, v, g, W, k, T, r = this._get(aa, "changeMonth"), y = this._get(aa, "changeYear"), b = this._get(aa, "showMonthAfterYear"), d = "<div class='ui-datepicker-title'>", Y = "";
            if (c || !r) {
                Y += "<span class='ui-datepicker-month'>" + X[h] + "</span>"
            } else {
                for (s = Z && Z.getFullYear() === u, S = U && U.getFullYear() === u, Y += "<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>", f = 0; 12 > f; f++) {
                    (!s || f >= Z.getMonth()) && (!S || U.getMonth() >= f) && (Y += "<option value='" + f + "'" + (f === h ? " selected='selected'" : "") + ">" + V[f] + "</option>")
                }
                Y += "</select>"
            }
            if (b || (d += Y + (!c && r && y ? "" : "&#xa0;")), !aa.yearshtml) {
                if (aa.yearshtml = "", c || !y) {
                    d += "<span class='ui-datepicker-year'>" + u + "</span>"
                } else {
                    for (v = this._get(aa, "yearRange").split(":"), g = (new Date).getFullYear(), W = function(w) {
                        var q = w.match(/c[+\-].*/) ? u + parseInt(w.substring(1), 10) : w.match(/[+\-].*/) ? g + parseInt(w, 10) : parseInt(w, 10);
                        return isNaN(q) ? g : q
                    }, k = W(v[0]), T = Math.max(k, W(v[1] || "")), k = Z ? Math.max(k, Z.getFullYear()) : k, T = U ? Math.min(T, U.getFullYear()) : T, aa.yearshtml += "<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>"; T >= k; k++) {
                        aa.yearshtml += "<option value='" + k + "'" + (k === u ? " selected='selected'" : "") + ">" + k + "</option>"
                    }
                    aa.yearshtml += "</select>", d += aa.yearshtml, aa.yearshtml = null
                }
            }
            return d += this._get(aa, "yearSuffix"), b && (d += (!c && r && y ? "" : "&#xa0;") + Y), d += "</div>"
        }, _adjustInstDate: function(k, f, b) {
            var h = k.drawYear + ("Y" === b ? f : 0), d = k.drawMonth + ("M" === b ? f : 0), c = Math.min(k.selectedDay, this._getDaysInMonth(h, d)) + ("D" === b ? f : 0), g = this._restrictMinMax(k, this._daylightSavingAdjust(new Date(h, d, c)));
            k.selectedDay = g.getDate(), k.drawMonth = k.selectedMonth = g.getMonth(), k.drawYear = k.selectedYear = g.getFullYear(), ("M" === b || "Y" === b) && this._notifyChange(k)
        }, _restrictMinMax: function(d, g) {
            var c = this._getMinMaxDate(d, "min"), b = this._getMinMaxDate(d, "max"), f = c && c > g ? c : g;
            return b && f > b ? b : f
        }, _notifyChange: function(c) {
            var b = this._get(c, "onChangeMonthYear");
            b && b.apply(c.input ? c.input[0] : null, [c.selectedYear, c.selectedMonth + 1, c])
        }, _getNumberOfMonths: function(c) {
            var b = this._get(c, "numberOfMonths");
            return null == b ? [1, 1] : "number" == typeof b ? [1, b] : b
        }, _getMinMaxDate: function(c, b) {
            return this._determineDate(c, this._get(c, b + "Date"), null)
        }, _getDaysInMonth: function(c, b) {
            return 32 - this._daylightSavingAdjust(new Date(c, b, 32)).getDate()
        }, _getFirstDayOfMonth: function(c, b) {
            return new Date(c, b, 1).getDay()
        }, _canAdjustMonth: function(h, f, b, g) {
            var d = this._getNumberOfMonths(h), c = this._daylightSavingAdjust(new Date(b, g + (0 > f ? f : d[0] * d[1]), 1));
            return 0 > f && c.setDate(this._getDaysInMonth(c.getFullYear(), c.getMonth())), this._isInRange(h, c)
        }, _isInRange: function(h, r) {
            var b, g, c = this._getMinMaxDate(h, "min"), k = this._getMinMaxDate(h, "max"), f = null, d = null, s = this._get(h, "yearRange");
            return s && (b = s.split(":"), g = (new Date).getFullYear(), f = parseInt(b[0], 10), d = parseInt(b[1], 10), b[0].match(/[+\-].*/) && (f += g), b[1].match(/[+\-].*/) && (d += g)), (!c || r.getTime() >= c.getTime()) && (!k || r.getTime() <= k.getTime()) && (!f || r.getFullYear() >= f) && (!d || d >= r.getFullYear())
        }, _getFormatConfig: function(c) {
            var b = this._get(c, "shortYearCutoff");
            return b = "string" != typeof b ? b : (new Date).getFullYear() % 100 + parseInt(b, 10), {shortYearCutoff: b, dayNamesShort: this._get(c, "dayNamesShort"), dayNames: this._get(c, "dayNames"), monthNamesShort: this._get(c, "monthNamesShort"), monthNames: this._get(c, "monthNames")}
        }, _formatDate: function(d, g, c, b) {
            g || (d.currentDay = d.selectedDay, d.currentMonth = d.selectedMonth, d.currentYear = d.selectedYear);
            var f = g ? "object" == typeof g ? g : this._daylightSavingAdjust(new Date(b, c, g)) : this._daylightSavingAdjust(new Date(d.currentYear, d.currentMonth, d.currentDay));
            return this.formatDate(this._get(d, "dateFormat"), f, this._getFormatConfig(d))
        }}), o.fn.datepicker = function(c) {
        if (!this.length) {
            return this
        }
        o.datepicker.initialized || (o(document).mousedown(o.datepicker._checkExternalClick), o.datepicker.initialized = !0), 0 === o("#" + o.datepicker._mainDivId).length && o("body").append(o.datepicker.dpDiv);
        var b = Array.prototype.slice.call(arguments, 1);
        return"string" != typeof c || "isDisabled" !== c && "getDate" !== c && "widget" !== c ? "option" === c && 2 === arguments.length && "string" == typeof arguments[1] ? o.datepicker["_" + c + "Datepicker"].apply(o.datepicker, [this[0]].concat(b)) : this.each(function() {
            "string" == typeof c ? o.datepicker["_" + c + "Datepicker"].apply(o.datepicker, [this].concat(b)) : o.datepicker._attachDatepicker(this, c)
        }) : o.datepicker["_" + c + "Datepicker"].apply(o.datepicker, [this[0]].concat(b))
    }, o.datepicker = new p, o.datepicker.initialized = !1, o.datepicker.uuid = (new Date).getTime(), o.datepicker.version = "1.10.3"
})(jQuery);
(function(d) {
    var f = {buttons: !0, height: !0, maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0, width: !0}, e = {maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0};
    d.widget("ui.dialog", {version: "1.10.3", options: {appendTo: "body", autoOpen: !0, buttons: [], closeOnEscape: !0, closeText: "close", dialogClass: "", draggable: !0, hide: null, height: "auto", maxHeight: null, maxWidth: null, minHeight: 150, minWidth: 150, modal: !1, position: {my: "center", at: "center", of: window, collision: "fit", using: function(a) {
                    var b = d(this).css(a).offset().top;
                    0 > b && d(this).css("top", a.top - b)
                }}, resizable: !0, show: null, title: null, width: 300, beforeClose: null, close: null, drag: null, dragStart: null, dragStop: null, focus: null, open: null, resize: null, resizeStart: null, resizeStop: null}, _create: function() {
            this.originalCss = {display: this.element[0].style.display, width: this.element[0].style.width, minHeight: this.element[0].style.minHeight, maxHeight: this.element[0].style.maxHeight, height: this.element[0].style.height}, this.originalPosition = {parent: this.element.parent(), index: this.element.parent().children().index(this.element)}, this.originalTitle = this.element.attr("title"), this.options.title = this.options.title || this.originalTitle, this._createWrapper(), this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog), this._createTitlebar(), this._createButtonPane(), this.options.draggable && d.fn.draggable && this._makeDraggable(), this.options.resizable && d.fn.resizable && this._makeResizable(), this._isOpen = !1
        }, _init: function() {
            this.options.autoOpen && this.open()
        }, _appendTo: function() {
            var a = this.options.appendTo;
            return a && (a.jquery || a.nodeType) ? d(a) : this.document.find(a || "body").eq(0)
        }, _destroy: function() {
            var b, a = this.originalPosition;
            this._destroyOverlay(), this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(), this.uiDialog.stop(!0, !0).remove(), this.originalTitle && this.element.attr("title", this.originalTitle), b = a.parent.children().eq(a.index), b.length && b[0] !== this.element[0] ? b.before(this.element) : a.parent.append(this.element)
        }, widget: function() {
            return this.uiDialog
        }, disable: d.noop, enable: d.noop, close: function(a) {
            var b = this;
            this._isOpen && this._trigger("beforeClose", a) !== !1 && (this._isOpen = !1, this._destroyOverlay(), this.opener.filter(":focusable").focus().length || d(this.document[0].activeElement).blur(), this._hide(this.uiDialog, this.options.hide, function() {
                b._trigger("close", a)
            }))
        }, isOpen: function() {
            return this._isOpen
        }, moveToTop: function() {
            this._moveToTop()
        }, _moveToTop: function(b, a) {
            var c = !!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
            return c && !a && this._trigger("focus", b), c
        }, open: function() {
            var a = this;
            return this._isOpen ? (this._moveToTop() && this._focusTabbable(), undefined) : (this._isOpen = !0, this.opener = d(this.document[0].activeElement), this._size(), this._position(), this._createOverlay(), this._moveToTop(null, !0), this._show(this.uiDialog, this.options.show, function() {
                a._focusTabbable(), a._trigger("focus")
            }), this._trigger("open"), undefined)
        }, _focusTabbable: function() {
            var a = this.element.find("[autofocus]");
            a.length || (a = this.element.find(":tabbable")), a.length || (a = this.uiDialogButtonPane.find(":tabbable")), a.length || (a = this.uiDialogTitlebarClose.filter(":tabbable")), a.length || (a = this.uiDialog), a.eq(0).focus()
        }, _keepFocus: function(a) {
            function b() {
                var c = this.document[0].activeElement, k = this.uiDialog[0] === c || d.contains(this.uiDialog[0], c);
                k || this._focusTabbable()
            }
            a.preventDefault(), b.call(this), this._delay(b)
        }, _createWrapper: function() {
            this.uiDialog = d("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({tabIndex: -1, role: "dialog"}).appendTo(this._appendTo()), this._on(this.uiDialog, {keydown: function(b) {
                    if (this.options.closeOnEscape && !b.isDefaultPrevented() && b.keyCode && b.keyCode === d.ui.keyCode.ESCAPE) {
                        return b.preventDefault(), this.close(b), undefined
                    }
                    if (b.keyCode === d.ui.keyCode.TAB) {
                        var k = this.uiDialog.find(":tabbable"), c = k.filter(":first"), a = k.filter(":last");
                        b.target !== a[0] && b.target !== this.uiDialog[0] || b.shiftKey ? b.target !== c[0] && b.target !== this.uiDialog[0] || !b.shiftKey || (a.focus(1), b.preventDefault()) : (c.focus(1), b.preventDefault())
                    }
                }, mousedown: function(a) {
                    this._moveToTop(a) && this._focusTabbable()
                }}), this.element.find("[aria-describedby]").length || this.uiDialog.attr({"aria-describedby": this.element.uniqueId().attr("id")})
        }, _createTitlebar: function() {
            var a;
            this.uiDialogTitlebar = d("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog), this._on(this.uiDialogTitlebar, {mousedown: function(b) {
                    d(b.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus()
                }}), this.uiDialogTitlebarClose = d("<button></button>").button({label: this.options.closeText, icons: {primary: "ui-icon-closethick"}, text: !1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar), this._on(this.uiDialogTitlebarClose, {click: function(b) {
                    b.preventDefault(), this.close(b)
                }}), a = d("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar), this._title(a), this.uiDialog.attr({"aria-labelledby": a.attr("id")})
        }, _title: function(a) {
            this.options.title || a.html("&#160;"), a.text(this.options.title)
        }, _createButtonPane: function() {
            this.uiDialogButtonPane = d("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), this.uiButtonSet = d("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane), this._createButtons()
        }, _createButtons: function() {
            var a = this, b = this.options.buttons;
            return this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), d.isEmptyObject(b) || d.isArray(b) && !b.length ? (this.uiDialog.removeClass("ui-dialog-buttons"), undefined) : (d.each(b, function(m, l) {
                var c, n;
                l = d.isFunction(l) ? {click: l, text: m} : l, l = d.extend({type: "button"}, l), c = l.click, l.click = function() {
                    c.apply(a.element[0], arguments)
                }, n = {icons: l.icons, text: l.showText}, delete l.icons, delete l.showText, d("<button></button>", l).button(n).appendTo(a.uiButtonSet)
            }), this.uiDialog.addClass("ui-dialog-buttons"), this.uiDialogButtonPane.appendTo(this.uiDialog), undefined)
        }, _makeDraggable: function() {
            function a(g) {
                return{position: g.position, offset: g.offset}
            }
            var c = this, b = this.options;
            this.uiDialog.draggable({cancel: ".ui-dialog-content, .ui-dialog-titlebar-close", handle: ".ui-dialog-titlebar", containment: "document", start: function(k, g) {
                    d(this).addClass("ui-dialog-dragging"), c._blockFrames(), c._trigger("dragStart", k, a(g))
                }, drag: function(k, g) {
                    c._trigger("drag", k, a(g))
                }, stop: function(g, k) {
                    b.position = [k.position.left - c.document.scrollLeft(), k.position.top - c.document.scrollTop()], d(this).removeClass("ui-dialog-dragging"), c._unblockFrames(), c._trigger("dragStop", g, a(k))
                }})
        }, _makeResizable: function() {
            function c(g) {
                return{originalPosition: g.originalPosition, originalSize: g.originalSize, position: g.position, size: g.size}
            }
            var n = this, m = this.options, a = m.resizable, o = this.uiDialog.css("position"), b = "string" == typeof a ? a : "n,e,s,w,se,sw,ne,nw";
            this.uiDialog.resizable({cancel: ".ui-dialog-content", containment: "document", alsoResize: this.element, maxWidth: m.maxWidth, maxHeight: m.maxHeight, minWidth: m.minWidth, minHeight: this._minHeight(), handles: b, start: function(h, g) {
                    d(this).addClass("ui-dialog-resizing"), n._blockFrames(), n._trigger("resizeStart", h, c(g))
                }, resize: function(h, g) {
                    n._trigger("resize", h, c(g))
                }, stop: function(g, h) {
                    m.height = d(this).height(), m.width = d(this).width(), d(this).removeClass("ui-dialog-resizing"), n._unblockFrames(), n._trigger("resizeStop", g, c(h))
                }}).css("position", o)
        }, _minHeight: function() {
            var a = this.options;
            return"auto" === a.height ? a.minHeight : Math.min(a.minHeight, a.height)
        }, _position: function() {
            var a = this.uiDialog.is(":visible");
            a || this.uiDialog.show(), this.uiDialog.position(this.options.position), a || this.uiDialog.hide()
        }, _setOptions: function(c) {
            var a = this, h = !1, b = {};
            d.each(c, function(l, g) {
                a._setOption(l, g), l in f && (h = !0), l in e && (b[l] = g)
            }), h && (this._size(), this._position()), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", b)
        }, _setOption: function(l, b) {
            var m, c, a = this.uiDialog;
            "dialogClass" === l && a.removeClass(this.options.dialogClass).addClass(b), "disabled" !== l && (this._super(l, b), "appendTo" === l && this.uiDialog.appendTo(this._appendTo()), "buttons" === l && this._createButtons(), "closeText" === l && this.uiDialogTitlebarClose.button({label: "" + b}), "draggable" === l && (m = a.is(":data(ui-draggable)"), m && !b && a.draggable("destroy"), !m && b && this._makeDraggable()), "position" === l && this._position(), "resizable" === l && (c = a.is(":data(ui-resizable)"), c && !b && a.resizable("destroy"), c && "string" == typeof b && a.resizable("option", "handles", b), c || b === !1 || this._makeResizable()), "title" === l && this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))
        }, _size: function() {
            var c, a, k, b = this.options;
            this.element.show().css({width: "auto", minHeight: 0, maxHeight: "none", height: 0}), b.minWidth > b.width && (b.width = b.minWidth), c = this.uiDialog.css({height: "auto", width: b.width}).outerHeight(), a = Math.max(0, b.minHeight - c), k = "number" == typeof b.maxHeight ? Math.max(0, b.maxHeight - c) : "none", "auto" === b.height ? this.element.css({minHeight: a, maxHeight: k, height: "auto"}) : this.element.height(Math.max(0, b.height - c)), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight())
        }, _blockFrames: function() {
            this.iframeBlocks = this.document.find("iframe").map(function() {
                var a = d(this);
                return d("<div>").css({position: "absolute", width: a.outerWidth(), height: a.outerHeight()}).appendTo(a.parent()).offset(a.offset())[0]
            })
        }, _unblockFrames: function() {
            this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
        }, _allowInteraction: function(a) {
            return d(a.target).closest(".ui-dialog").length ? !0 : !!d(a.target).closest(".ui-datepicker").length
        }, _createOverlay: function() {
            if (this.options.modal) {
                var a = this, b = this.widgetFullName;
                d.ui.dialog.overlayInstances || this._delay(function() {
                    d.ui.dialog.overlayInstances && this.document.bind("focusin.dialog", function(c) {
                        a._allowInteraction(c) || (c.preventDefault(), d(".ui-dialog:visible:last .ui-dialog-content").data(b)._focusTabbable())
                    })
                }), this.overlay = d("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()), this._on(this.overlay, {mousedown: "_keepFocus"}), d.ui.dialog.overlayInstances++
            }
        }, _destroyOverlay: function() {
            this.options.modal && this.overlay && (d.ui.dialog.overlayInstances--, d.ui.dialog.overlayInstances || this.document.unbind("focusin.dialog"), this.overlay.remove(), this.overlay = null)
        }}), d.ui.dialog.overlayInstances = 0, d.uiBackCompat !== !1 && d.widget("ui.dialog", d.ui.dialog, {_position: function() {
            var b, k = this.options.position, c = [], a = [0, 0];
            k ? (("string" == typeof k || "object" == typeof k && "0" in k) && (c = k.split ? k.split(" ") : [k[0], k[1]], 1 === c.length && (c[1] = c[0]), d.each(["left", "top"], function(h, g) {
                +c[h] === c[h] && (a[h] = c[h], c[h] = g)
            }), k = {my: c[0] + (0 > a[0] ? a[0] : "+" + a[0]) + " " + c[1] + (0 > a[1] ? a[1] : "+" + a[1]), at: c.join(" ")}), k = d.extend({}, d.ui.dialog.prototype.options.position, k)) : k = d.ui.dialog.prototype.options.position, b = this.uiDialog.is(":visible"), b || this.uiDialog.show(), this.uiDialog.position(k), b || this.uiDialog.hide()
        }})
})(jQuery);
(function(b) {
    b.widget("ui.menu", {version: "1.10.3", defaultElement: "<ul>", delay: 300, options: {icons: {submenu: "ui-icon-carat-1-e"}, menus: "ul", position: {my: "left top", at: "right top"}, role: "menu", blur: null, focus: null, select: null}, _create: function() {
            this.activeMenu = this.element, this.mouseHandled = !1, this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons", !!this.element.find(".ui-icon").length).attr({role: this.options.role, tabIndex: 0}).bind("click" + this.eventNamespace, b.proxy(function(a) {
                this.options.disabled && a.preventDefault()
            }, this)), this.options.disabled && this.element.addClass("ui-state-disabled").attr("aria-disabled", "true"), this._on({"mousedown .ui-menu-item > a": function(a) {
                    a.preventDefault()
                }, "click .ui-state-disabled > a": function(a) {
                    a.preventDefault()
                }, "click .ui-menu-item:has(a)": function(d) {
                    var a = b(d.target).closest(".ui-menu-item");
                    !this.mouseHandled && a.not(".ui-state-disabled").length && (this.mouseHandled = !0, this.select(d), a.has(".ui-menu").length ? this.expand(d) : this.element.is(":focus") || (this.element.trigger("focus", [!0]), this.active && 1 === this.active.parents(".ui-menu").length && clearTimeout(this.timer)))
                }, "mouseenter .ui-menu-item": function(d) {
                    var a = b(d.currentTarget);
                    a.siblings().children(".ui-state-active").removeClass("ui-state-active"), this.focus(d, a)
                }, mouseleave: "collapseAll", "mouseleave .ui-menu": "collapseAll", focus: function(f, e) {
                    var a = this.active || this.element.children(".ui-menu-item").eq(0);
                    e || this.focus(f, a)
                }, blur: function(a) {
                    this._delay(function() {
                        b.contains(this.element[0], this.document[0].activeElement) || this.collapseAll(a)
                    })
                }, keydown: "_keydown"}), this.refresh(), this._on(this.document, {click: function(a) {
                    b(a.target).closest(".ui-menu").length || this.collapseAll(a), this.mouseHandled = !1
                }})
        }, _destroy: function() {
            this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(), this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function() {
                var a = b(this);
                a.data("ui-menu-submenu-carat") && a.remove()
            }), this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")
        }, _keydown: function(n) {
            function r(c) {
                return c.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&")
            }
            var p, e, a, h, o, q = !0;
            switch (n.keyCode) {
                case b.ui.keyCode.PAGE_UP:
                    this.previousPage(n);
                    break;
                case b.ui.keyCode.PAGE_DOWN:
                    this.nextPage(n);
                    break;
                case b.ui.keyCode.HOME:
                    this._move("first", "first", n);
                    break;
                case b.ui.keyCode.END:
                    this._move("last", "last", n);
                    break;
                case b.ui.keyCode.UP:
                    this.previous(n);
                    break;
                case b.ui.keyCode.DOWN:
                    this.next(n);
                    break;
                case b.ui.keyCode.LEFT:
                    this.collapse(n);
                    break;
                case b.ui.keyCode.RIGHT:
                    this.active && !this.active.is(".ui-state-disabled") && this.expand(n);
                    break;
                case b.ui.keyCode.ENTER:
                case b.ui.keyCode.SPACE:
                    this._activate(n);
                    break;
                case b.ui.keyCode.ESCAPE:
                    this.collapse(n);
                    break;
                default:
                    q = !1, e = this.previousFilter || "", a = String.fromCharCode(n.keyCode), h = !1, clearTimeout(this.filterTimer), a === e ? h = !0 : a = e + a, o = RegExp("^" + r(a), "i"), p = this.activeMenu.children(".ui-menu-item").filter(function() {
                        return o.test(b(this).children("a").text())
                    }), p = h && -1 !== p.index(this.active.next()) ? this.active.nextAll(".ui-menu-item") : p, p.length || (a = String.fromCharCode(n.keyCode), o = RegExp("^" + r(a), "i"), p = this.activeMenu.children(".ui-menu-item").filter(function() {
                        return o.test(b(this).children("a").text())
                    })), p.length ? (this.focus(n, p), p.length > 1 ? (this.previousFilter = a, this.filterTimer = this._delay(function() {
                        delete this.previousFilter
                    }, 1000)) : delete this.previousFilter) : delete this.previousFilter
            }
            q && n.preventDefault()
        }, _activate: function(a) {
            this.active.is(".ui-state-disabled") || (this.active.children("a[aria-haspopup='true']").length ? this.expand(a) : this.select(a))
        }, refresh: function() {
            var e, a = this.options.icons.submenu, f = this.element.find(this.options.menus);
            f.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role: this.options.role, "aria-hidden": "true", "aria-expanded": "false"}).each(function() {
                var d = b(this), k = d.prev("a"), c = b("<span>").addClass("ui-menu-icon ui-icon " + a).data("ui-menu-submenu-carat", !0);
                k.attr("aria-haspopup", "true").prepend(c), d.attr("aria-labelledby", k.attr("id"))
            }), e = f.add(this.element), e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex: -1, role: this._itemRole()}), e.children(":not(.ui-menu-item)").each(function() {
                var c = b(this);
                /[^\-\u2014\u2013\s]/.test(c.text()) || c.addClass("ui-widget-content ui-menu-divider")
            }), e.children(".ui-state-disabled").attr("aria-disabled", "true"), this.active && !b.contains(this.element[0], this.active[0]) && this.blur()
        }, _itemRole: function() {
            return{menu: "menuitem", listbox: "option"}[this.options.role]
        }, _setOption: function(a, d) {
            "icons" === a && this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(d.submenu), this._super(a, d)
        }, focus: function(h, e) {
            var a, g;
            this.blur(h, h && "focus" === h.type), this._scrollIntoView(e), this.active = e.first(), g = this.active.children("a").addClass("ui-state-focus"), this.options.role && this.element.attr("aria-activedescendant", g.attr("id")), this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"), h && "keydown" === h.type ? this._close() : this.timer = this._delay(function() {
                this._close()
            }, this.delay), a = e.children(".ui-menu"), a.length && /^mouse/.test(h.type) && this._startOpening(a), this.activeMenu = e.parent(), this._trigger("focus", h, {item: e})
        }, _scrollIntoView: function(m) {
            var p, o, e, a, l, n;
            this._hasScroll() && (p = parseFloat(b.css(this.activeMenu[0], "borderTopWidth")) || 0, o = parseFloat(b.css(this.activeMenu[0], "paddingTop")) || 0, e = m.offset().top - this.activeMenu.offset().top - p - o, a = this.activeMenu.scrollTop(), l = this.activeMenu.height(), n = m.height(), 0 > e ? this.activeMenu.scrollTop(a + e) : e + n > l && this.activeMenu.scrollTop(a + e - l + n))
        }, blur: function(a, d) {
            d || clearTimeout(this.timer), this.active && (this.active.children("a").removeClass("ui-state-focus"), this.active = null, this._trigger("blur", a, {item: this.active}))
        }, _startOpening: function(a) {
            clearTimeout(this.timer), "true" === a.attr("aria-hidden") && (this.timer = this._delay(function() {
                this._close(), this._open(a)
            }, this.delay))
        }, _open: function(d) {
            var a = b.extend({of: this.active}, this.options.position);
            clearTimeout(this.timer), this.element.find(".ui-menu").not(d.parents(".ui-menu")).hide().attr("aria-hidden", "true"), d.show().removeAttr("aria-hidden").attr("aria-expanded", "true").position(a)
        }, collapseAll: function(d, a) {
            clearTimeout(this.timer), this.timer = this._delay(function() {
                var c = a ? this.element : b(d && d.target).closest(this.element.find(".ui-menu"));
                c.length || (c = this.element), this._close(c), this.blur(d), this.activeMenu = c
            }, this.delay)
        }, _close: function(a) {
            a || (a = this.active ? this.active.parent() : this.element), a.find(".ui-menu").hide().attr("aria-hidden", "true").attr("aria-expanded", "false").end().find("a.ui-state-active").removeClass("ui-state-active")
        }, collapse: function(a) {
            var d = this.active && this.active.parent().closest(".ui-menu-item", this.element);
            d && d.length && (this._close(), this.focus(a, d))
        }, expand: function(a) {
            var d = this.active && this.active.children(".ui-menu ").children(".ui-menu-item").first();
            d && d.length && (this._open(d.parent()), this._delay(function() {
                this.focus(a, d)
            }))
        }, next: function(a) {
            this._move("next", "first", a)
        }, previous: function(a) {
            this._move("prev", "last", a)
        }, isFirstItem: function() {
            return this.active && !this.active.prevAll(".ui-menu-item").length
        }, isLastItem: function() {
            return this.active && !this.active.nextAll(".ui-menu-item").length
        }, _move: function(h, e, a) {
            var g;
            this.active && (g = "first" === h || "last" === h ? this.active["first" === h ? "prevAll" : "nextAll"](".ui-menu-item").eq(-1) : this.active[h + "All"](".ui-menu-item").eq(0)), g && g.length && this.active || (g = this.activeMenu.children(".ui-menu-item")[e]()), this.focus(a, g)
        }, nextPage: function(g) {
            var a, h, e;
            return this.active ? (this.isLastItem() || (this._hasScroll() ? (h = this.active.offset().top, e = this.element.height(), this.active.nextAll(".ui-menu-item").each(function() {
                return a = b(this), 0 > a.offset().top - h - e
            }), this.focus(g, a)) : this.focus(g, this.activeMenu.children(".ui-menu-item")[this.active ? "last" : "first"]())), undefined) : (this.next(g), undefined)
        }, previousPage: function(g) {
            var a, h, e;
            return this.active ? (this.isFirstItem() || (this._hasScroll() ? (h = this.active.offset().top, e = this.element.height(), this.active.prevAll(".ui-menu-item").each(function() {
                return a = b(this), a.offset().top - h + e > 0
            }), this.focus(g, a)) : this.focus(g, this.activeMenu.children(".ui-menu-item").first())), undefined) : (this.next(g), undefined)
        }, _hasScroll: function() {
            return this.element.outerHeight() < this.element.prop("scrollHeight")
        }, select: function(d) {
            this.active = this.active || b(d.target).closest(".ui-menu-item");
            var a = {item: this.active};
            this.active.has(".ui-menu").length || this.collapseAll(d, !0), this._trigger("select", d, a)
        }})
})(jQuery);
(function(d, c) {
    d.widget("ui.progressbar", {version: "1.10.3", options: {max: 100, value: 0, change: null, complete: null}, min: 0, _create: function() {
            this.oldValue = this.options.value = this._constrainedValue(), this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role: "progressbar", "aria-valuemin": this.min}), this.valueDiv = d("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element), this._refreshValue()
        }, _destroy: function() {
            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.valueDiv.remove()
        }, value: function(a) {
            return a === c ? this.options.value : (this.options.value = this._constrainedValue(a), this._refreshValue(), c)
        }, _constrainedValue: function(a) {
            return a === c && (a = this.options.value), this.indeterminate = a === !1, "number" != typeof a && (a = 0), this.indeterminate ? !1 : Math.min(this.options.max, Math.max(this.min, a))
        }, _setOptions: function(b) {
            var a = b.value;
            delete b.value, this._super(b), this.options.value = this._constrainedValue(a), this._refreshValue()
        }, _setOption: function(b, a) {
            "max" === b && (a = Math.max(this.min, a)), this._super(b, a)
        }, _percentage: function() {
            return this.indeterminate ? 100 : 100 * (this.options.value - this.min) / (this.options.max - this.min)
        }, _refreshValue: function() {
            var a = this.options.value, b = this._percentage();
            this.valueDiv.toggle(this.indeterminate || a > this.min).toggleClass("ui-corner-right", a === this.options.max).width(b.toFixed(0) + "%"), this.element.toggleClass("ui-progressbar-indeterminate", this.indeterminate), this.indeterminate ? (this.element.removeAttr("aria-valuenow"), this.overlayDiv || (this.overlayDiv = d("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))) : (this.element.attr({"aria-valuemax": this.options.max, "aria-valuenow": a}), this.overlayDiv && (this.overlayDiv.remove(), this.overlayDiv = null)), this.oldValue !== a && (this.oldValue = a, this._trigger("change")), a === this.options.max && this._trigger("complete")
        }})
})(jQuery);
(function(d) {
    var c = 5;
    d.widget("ui.slider", d.ui.mouse, {version: "1.10.3", widgetEventPrefix: "slide", options: {animate: !1, distance: 0, max: 100, min: 0, orientation: "horizontal", range: !1, step: 1, value: 0, values: null, change: null, slide: null, start: null, stop: null}, _create: function() {
            this._keySliding = !1, this._mouseSliding = !1, this._animateOff = !0, this._handleIndex = null, this._detectOrientation(), this._mouseInit(), this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget ui-widget-content ui-corner-all"), this._refresh(), this._setOption("disabled", this.options.disabled), this._animateOff = !1
        }, _refresh: function() {
            this._createRange(), this._createHandles(), this._setupEvents(), this._refreshValue()
        }, _createHandles: function() {
            var e, m, l = this.options, a = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"), n = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>", b = [];
            for (m = l.values && l.values.length || 1, a.length > m && (a.slice(m).remove(), a = a.slice(0, m)), e = a.length; m > e; e++) {
                b.push(n)
            }
            this.handles = a.add(d(b.join("")).appendTo(this.element)), this.handle = this.handles.eq(0), this.handles.each(function(f) {
                d(this).data("ui-slider-handle-index", f)
            })
        }, _createRange: function() {
            var a = this.options, b = "";
            a.range ? (a.range === !0 && (a.values ? a.values.length && 2 !== a.values.length ? a.values = [a.values[0], a.values[0]] : d.isArray(a.values) && (a.values = a.values.slice(0)) : a.values = [this._valueMin(), this._valueMin()]), this.range && this.range.length ? this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left: "", bottom: ""}) : (this.range = d("<div></div>").appendTo(this.element), b = "ui-slider-range ui-widget-header ui-corner-all"), this.range.addClass(b + ("min" === a.range || "max" === a.range ? " ui-slider-range-" + a.range : ""))) : this.range = d([])
        }, _setupEvents: function() {
            var a = this.handles.add(this.range).filter("a");
            this._off(a), this._on(a, this._handleEvents), this._hoverable(a), this._focusable(a)
        }, _destroy: function() {
            this.handles.remove(), this.range.remove(), this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"), this._mouseDestroy()
        }, _mouseCapture: function(a) {
            var e, r, l, u, n, o, b, h, s = this, A = this.options;
            return A.disabled ? !1 : (this.elementSize = {width: this.element.outerWidth(), height: this.element.outerHeight()}, this.elementOffset = this.element.offset(), e = {x: a.pageX, y: a.pageY}, r = this._normValueFromMouse(e), l = this._valueMax() - this._valueMin() + 1, this.handles.each(function(f) {
                var g = Math.abs(r - s.values(f));
                (l > g || l === g && (f === s._lastChangedValue || s.values(f) === A.min)) && (l = g, u = d(this), n = f)
            }), o = this._start(a, n), o === !1 ? !1 : (this._mouseSliding = !0, this._handleIndex = n, u.addClass("ui-state-active").focus(), b = u.offset(), h = !d(a.target).parents().addBack().is(".ui-slider-handle"), this._clickOffset = h ? {left: 0, top: 0} : {left: a.pageX - b.left - u.width() / 2, top: a.pageY - b.top - u.height() / 2 - (parseInt(u.css("borderTopWidth"), 10) || 0) - (parseInt(u.css("borderBottomWidth"), 10) || 0) + (parseInt(u.css("marginTop"), 10) || 0)}, this.handles.hasClass("ui-state-hover") || this._slide(a, n, r), this._animateOff = !0, !0))
        }, _mouseStart: function() {
            return !0
        }, _mouseDrag: function(b) {
            var a = {x: b.pageX, y: b.pageY}, e = this._normValueFromMouse(a);
            return this._slide(b, this._handleIndex, e), !1
        }, _mouseStop: function(a) {
            return this.handles.removeClass("ui-state-active"), this._mouseSliding = !1, this._stop(a, this._handleIndex), this._change(a, this._handleIndex), this._handleIndex = null, this._clickOffset = null, this._animateOff = !1, !1
        }, _detectOrientation: function() {
            this.orientation = "vertical" === this.options.orientation ? "vertical" : "horizontal"
        }, _normValueFromMouse: function(l) {
            var b, m, e, a, n;
            return"horizontal" === this.orientation ? (b = this.elementSize.width, m = l.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (b = this.elementSize.height, m = l.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)), e = m / b, e > 1 && (e = 1), 0 > e && (e = 0), "vertical" === this.orientation && (e = 1 - e), a = this._valueMax() - this._valueMin(), n = this._valueMin() + e * a, this._trimAlignValue(n)
        }, _start: function(b, a) {
            var e = {handle: this.handles[a], value: this.value()};
            return this.options.values && this.options.values.length && (e.value = this.values(a), e.values = this.values()), this._trigger("start", b, e)
        }, _slide: function(l, b, m) {
            var e, a, n;
            this.options.values && this.options.values.length ? (e = this.values(b ? 0 : 1), 2 === this.options.values.length && this.options.range === !0 && (0 === b && m > e || 1 === b && e > m) && (m = e), m !== this.values(b) && (a = this.values(), a[b] = m, n = this._trigger("slide", l, {handle: this.handles[b], value: m, values: a}), e = this.values(b ? 0 : 1), n !== !1 && this.values(b, m, !0))) : m !== this.value() && (n = this._trigger("slide", l, {handle: this.handles[b], value: m}), n !== !1 && this.value(m))
        }, _stop: function(b, a) {
            var e = {handle: this.handles[a], value: this.value()};
            this.options.values && this.options.values.length && (e.value = this.values(a), e.values = this.values()), this._trigger("stop", b, e)
        }, _change: function(b, a) {
            if (!this._keySliding && !this._mouseSliding) {
                var e = {handle: this.handles[a], value: this.value()};
                this.options.values && this.options.values.length && (e.value = this.values(a), e.values = this.values()), this._lastChangedValue = a, this._trigger("change", b, e)
            }
        }, value: function(a) {
            return arguments.length ? (this.options.value = this._trimAlignValue(a), this._refreshValue(), this._change(null, 0), undefined) : this._value()
        }, values: function(b, k) {
            var e, a, l;
            if (arguments.length > 1) {
                return this.options.values[b] = this._trimAlignValue(k), this._refreshValue(), this._change(null, b), undefined
            }
            if (!arguments.length) {
                return this._values()
            }
            if (!d.isArray(arguments[0])) {
                return this.options.values && this.options.values.length ? this._values(b) : this.value()
            }
            for (e = this.options.values, a = arguments[0], l = 0; e.length > l; l += 1) {
                e[l] = this._trimAlignValue(a[l]), this._change(null, l)
            }
            this._refreshValue()
        }, _setOption: function(b, h) {
            var e, a = 0;
            switch ("range" === b && this.options.range === !0 && ("min" === h ? (this.options.value = this._values(0), this.options.values = null) : "max" === h && (this.options.value = this._values(this.options.values.length - 1), this.options.values = null)), d.isArray(this.options.values) && (a = this.options.values.length), d.Widget.prototype._setOption.apply(this, arguments), b) {
                case"orientation":
                    this._detectOrientation(), this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation), this._refreshValue();
                    break;
                case"value":
                    this._animateOff = !0, this._refreshValue(), this._change(null, 0), this._animateOff = !1;
                    break;
                case"values":
                    for (this._animateOff = !0, this._refreshValue(), e = 0; a > e; e += 1) {
                        this._change(null, e)
                    }
                    this._animateOff = !1;
                    break;
                case"min":
                case"max":
                    this._animateOff = !0, this._refreshValue(), this._animateOff = !1;
                    break;
                case"range":
                    this._animateOff = !0, this._refresh(), this._animateOff = !1
                }
        }, _value: function() {
            var a = this.options.value;
            return a = this._trimAlignValue(a)
        }, _values: function(e) {
            var a, h, b;
            if (arguments.length) {
                return a = this.options.values[e], a = this._trimAlignValue(a)
            }
            if (this.options.values && this.options.values.length) {
                for (h = this.options.values.slice(), b = 0; h.length > b; b += 1) {
                    h[b] = this._trimAlignValue(h[b])
                }
                return h
            }
            return[]
        }, _trimAlignValue: function(e) {
            if (this._valueMin() >= e) {
                return this._valueMin()
            }
            if (e >= this._valueMax()) {
                return this._valueMax()
            }
            var a = this.options.step > 0 ? this.options.step : 1, h = (e - this._valueMin()) % a, b = e - h;
            return 2 * Math.abs(h) >= a && (b += h > 0 ? a : -a), parseFloat(b.toFixed(5))
        }, _valueMin: function() {
            return this.options.min
        }, _valueMax: function() {
            return this.options.max
        }, _refreshValue: function() {
            var b, h, s, n, a, o = this.options.range, r = this.options, e = this, l = this._animateOff ? !1 : r.animate, u = {};
            this.options.values && this.options.values.length ? this.handles.each(function(f) {
                h = 100 * ((e.values(f) - e._valueMin()) / (e._valueMax() - e._valueMin())), u["horizontal" === e.orientation ? "left" : "bottom"] = h + "%", d(this).stop(1, 1)[l ? "animate" : "css"](u, r.animate), e.options.range === !0 && ("horizontal" === e.orientation ? (0 === f && e.range.stop(1, 1)[l ? "animate" : "css"]({left: h + "%"}, r.animate), 1 === f && e.range[l ? "animate" : "css"]({width: h - b + "%"}, {queue: !1, duration: r.animate})) : (0 === f && e.range.stop(1, 1)[l ? "animate" : "css"]({bottom: h + "%"}, r.animate), 1 === f && e.range[l ? "animate" : "css"]({height: h - b + "%"}, {queue: !1, duration: r.animate}))), b = h
            }) : (s = this.value(), n = this._valueMin(), a = this._valueMax(), h = a !== n ? 100 * ((s - n) / (a - n)) : 0, u["horizontal" === this.orientation ? "left" : "bottom"] = h + "%", this.handle.stop(1, 1)[l ? "animate" : "css"](u, r.animate), "min" === o && "horizontal" === this.orientation && this.range.stop(1, 1)[l ? "animate" : "css"]({width: h + "%"}, r.animate), "max" === o && "horizontal" === this.orientation && this.range[l ? "animate" : "css"]({width: 100 - h + "%"}, {queue: !1, duration: r.animate}), "min" === o && "vertical" === this.orientation && this.range.stop(1, 1)[l ? "animate" : "css"]({height: h + "%"}, r.animate), "max" === o && "vertical" === this.orientation && this.range[l ? "animate" : "css"]({height: 100 - h + "%"}, {queue: !1, duration: r.animate}))
        }, _handleEvents: {keydown: function(m) {
                var l, a, n, b, k = d(m.target).data("ui-slider-handle-index");
                switch (m.keyCode) {
                    case d.ui.keyCode.HOME:
                    case d.ui.keyCode.END:
                    case d.ui.keyCode.PAGE_UP:
                    case d.ui.keyCode.PAGE_DOWN:
                    case d.ui.keyCode.UP:
                    case d.ui.keyCode.RIGHT:
                    case d.ui.keyCode.DOWN:
                    case d.ui.keyCode.LEFT:
                        if (m.preventDefault(), !this._keySliding && (this._keySliding = !0, d(m.target).addClass("ui-state-active"), l = this._start(m, k), l === !1)) {
                            return
                        }
                }
                switch (b = this.options.step, a = n = this.options.values && this.options.values.length ? this.values(k) : this.value(), m.keyCode) {
                    case d.ui.keyCode.HOME:
                        n = this._valueMin();
                        break;
                    case d.ui.keyCode.END:
                        n = this._valueMax();
                        break;
                    case d.ui.keyCode.PAGE_UP:
                        n = this._trimAlignValue(a + (this._valueMax() - this._valueMin()) / c);
                        break;
                    case d.ui.keyCode.PAGE_DOWN:
                        n = this._trimAlignValue(a - (this._valueMax() - this._valueMin()) / c);
                        break;
                    case d.ui.keyCode.UP:
                    case d.ui.keyCode.RIGHT:
                        if (a === this._valueMax()) {
                            return
                        }
                        n = this._trimAlignValue(a + b);
                        break;
                    case d.ui.keyCode.DOWN:
                    case d.ui.keyCode.LEFT:
                        if (a === this._valueMin()) {
                            return
                        }
                        n = this._trimAlignValue(a - b)
                }
                this._slide(m, k, n)
            }, click: function(a) {
                a.preventDefault()
            }, keyup: function(a) {
                var b = d(a.target).data("ui-slider-handle-index");
                this._keySliding && (this._keySliding = !1, this._stop(a, b), this._change(a, b), d(a.target).removeClass("ui-state-active"))
            }}})
})(jQuery);
(function(d) {
    function c(a) {
        return function() {
            var b = this.element.val();
            a.apply(this, arguments), this._refresh(), b !== this.element.val() && this._trigger("change")
        }
    }
    d.widget("ui.spinner", {version: "1.10.3", defaultElement: "<input>", widgetEventPrefix: "spin", options: {culture: null, icons: {down: "ui-icon-triangle-1-s", up: "ui-icon-triangle-1-n"}, incremental: !0, max: null, min: null, numberFormat: null, page: 10, step: 1, change: null, spin: null, start: null, stop: null}, _create: function() {
            this._setOption("max", this.options.max), this._setOption("min", this.options.min), this._setOption("step", this.options.step), this._value(this.element.val(), !0), this._draw(), this._on(this._events), this._refresh(), this._on(this.window, {beforeunload: function() {
                    this.element.removeAttr("autocomplete")
                }})
        }, _getCreateOptions: function() {
            var a = {}, b = this.element;
            return d.each(["min", "max", "step"], function(l, k) {
                var h = b.attr(k);
                void 0 !== h && h.length && (a[k] = h)
            }), a
        }, _events: {keydown: function(a) {
                this._start(a) && this._keydown(a) && a.preventDefault()
            }, keyup: "_stop", focus: function() {
                this.previous = this.element.val()
            }, blur: function(a) {
                return this.cancelBlur ? (delete this.cancelBlur, void 0) : (this._stop(), this._refresh(), this.previous !== this.element.val() && this._trigger("change", a), void 0)
            }, mousewheel: function(b, a) {
                if (a) {
                    if (!this.spinning && !this._start(b)) {
                        return !1
                    }
                    this._spin((a > 0 ? 1 : -1) * this.options.step, b), clearTimeout(this.mousewheelTimer), this.mousewheelTimer = this._delay(function() {
                        this.spinning && this._stop(b)
                    }, 100), b.preventDefault()
                }
            }, "mousedown .ui-spinner-button": function(a) {
                function e() {
                    var f = this.element[0] === this.document[0].activeElement;
                    f || (this.element.focus(), this.previous = b, this._delay(function() {
                        this.previous = b
                    }))
                }
                var b;
                b = this.element[0] === this.document[0].activeElement ? this.previous : this.element.val(), a.preventDefault(), e.call(this), this.cancelBlur = !0, this._delay(function() {
                    delete this.cancelBlur, e.call(this)
                }), this._start(a) !== !1 && this._repeat(null, d(a.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, a)
            }, "mouseup .ui-spinner-button": "_stop", "mouseenter .ui-spinner-button": function(a) {
                return d(a.currentTarget).hasClass("ui-state-active") ? this._start(a) === !1 ? !1 : (this._repeat(null, d(a.currentTarget).hasClass("ui-spinner-up") ? 1 : -1, a), void 0) : void 0
            }, "mouseleave .ui-spinner-button": "_stop"}, _draw: function() {
            var a = this.uiSpinner = this.element.addClass("ui-spinner-input").attr("autocomplete", "off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());
            this.element.attr("role", "spinbutton"), this.buttons = a.find(".ui-spinner-button").attr("tabIndex", -1).button().removeClass("ui-corner-all"), this.buttons.height() > Math.ceil(0.5 * a.height()) && a.height() > 0 && a.height(a.height()), this.options.disabled && this.disable()
        }, _keydown: function(a) {
            var e = this.options, b = d.ui.keyCode;
            switch (a.keyCode) {
                case b.UP:
                    return this._repeat(null, 1, a), !0;
                case b.DOWN:
                    return this._repeat(null, -1, a), !0;
                case b.PAGE_UP:
                    return this._repeat(null, e.page, a), !0;
                case b.PAGE_DOWN:
                    return this._repeat(null, -e.page, a), !0
            }
            return !1
        }, _uiSpinnerHtml: function() {
            return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"
        }, _buttonHtml: function() {
            return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon " + this.options.icons.up + "'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon " + this.options.icons.down + "'>&#9660;</span></a>"
        }, _start: function(a) {
            return this.spinning || this._trigger("start", a) !== !1 ? (this.counter || (this.counter = 1), this.spinning = !0, !0) : !1
        }, _repeat: function(b, a, e) {
            b = b || 500, clearTimeout(this.timer), this.timer = this._delay(function() {
                this._repeat(40, a, e)
            }, b), this._spin(a * this.options.step, e)
        }, _spin: function(b, a) {
            var e = this.value() || 0;
            this.counter || (this.counter = 1), e = this._adjustValue(e + b * this._increment(this.counter)), this.spinning && this._trigger("spin", a, {value: e}) === !1 || (this._value(e), this.counter++)
        }, _increment: function(a) {
            var b = this.options.incremental;
            return b ? d.isFunction(b) ? b(a) : Math.floor(a * a * a / 50000 - a * a / 500 + 17 * a / 200 + 1) : 1
        }, _precision: function() {
            var a = this._precisionOf(this.options.step);
            return null !== this.options.min && (a = Math.max(a, this._precisionOf(this.options.min))), a
        }, _precisionOf: function(b) {
            var a = "" + b, e = a.indexOf(".");
            return -1 === e ? 0 : a.length - e - 1
        }, _adjustValue: function(e) {
            var a, h, b = this.options;
            return a = null !== b.min ? b.min : 0, h = e - a, h = Math.round(h / b.step) * b.step, e = a + h, e = parseFloat(e.toFixed(this._precision())), null !== b.max && e > b.max ? b.max : null !== b.min && b.min > e ? b.min : e
        }, _stop: function(a) {
            this.spinning && (clearTimeout(this.timer), clearTimeout(this.mousewheelTimer), this.counter = 0, this.spinning = !1, this._trigger("stop", a))
        }, _setOption: function(b, a) {
            if ("culture" === b || "numberFormat" === b) {
                var e = this._parse(this.element.val());
                return this.options[b] = a, this.element.val(this._format(e)), void 0
            }
            ("max" === b || "min" === b || "step" === b) && "string" == typeof a && (a = this._parse(a)), "icons" === b && (this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(a.up), this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(a.down)), this._super(b, a), "disabled" === b && (a ? (this.element.prop("disabled", !0), this.buttons.button("disable")) : (this.element.prop("disabled", !1), this.buttons.button("enable")))
        }, _setOptions: c(function(a) {
            this._super(a), this._value(this.element.val())
        }), _parse: function(a) {
            return"string" == typeof a && "" !== a && (a = window.Globalize && this.options.numberFormat ? Globalize.parseFloat(a, 10, this.options.culture) : +a), "" === a || isNaN(a) ? null : a
        }, _format: function(a) {
            return"" === a ? "" : window.Globalize && this.options.numberFormat ? Globalize.format(a, this.options.numberFormat, this.options.culture) : a
        }, _refresh: function() {
            this.element.attr({"aria-valuemin": this.options.min, "aria-valuemax": this.options.max, "aria-valuenow": this._parse(this.element.val())})
        }, _value: function(b, a) {
            var e;
            "" !== b && (e = this._parse(b), null !== e && (a || (e = this._adjustValue(e)), b = this._format(e))), this.element.val(b), this._refresh()
        }, _destroy: function() {
            this.element.removeClass("ui-spinner-input").prop("disabled", !1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"), this.uiSpinner.replaceWith(this.element)
        }, stepUp: c(function(a) {
            this._stepUp(a)
        }), _stepUp: function(a) {
            this._start() && (this._spin((a || 1) * this.options.step), this._stop())
        }, stepDown: c(function(a) {
            this._stepDown(a)
        }), _stepDown: function(a) {
            this._start() && (this._spin((a || 1) * -this.options.step), this._stop())
        }, pageUp: c(function(a) {
            this._stepUp((a || 1) * this.options.page)
        }), pageDown: c(function(a) {
            this._stepDown((a || 1) * this.options.page)
        }), value: function(a) {
            return arguments.length ? (c(this._value).call(this, a), void 0) : this._parse(this.element.val())
        }, widget: function() {
            return this.uiSpinner
        }})
})(jQuery);
(function(m, k) {
    function n() {
        return ++e
    }
    function l(b) {
        return b.hash.length > 1 && decodeURIComponent(b.href.replace(a, "")) === decodeURIComponent(location.href.replace(a, ""))
    }
    var e = 0, a = /#.*$/;
    m.widget("ui.tabs", {version: "1.10.3", delay: 300, options: {active: null, collapsible: !1, event: "click", heightStyle: "content", hide: null, show: null, activate: null, beforeActivate: null, beforeLoad: null, load: null}, _create: function() {
            var c = this, b = this.options;
            this.running = !1, this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible", b.collapsible).delegate(".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function(d) {
                m(this).is(".ui-state-disabled") && d.preventDefault()
            }).delegate(".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                m(this).closest("li").is(".ui-state-disabled") && this.blur()
            }), this._processTabs(), b.active = this._initialActive(), m.isArray(b.disabled) && (b.disabled = m.unique(b.disabled.concat(m.map(this.tabs.filter(".ui-state-disabled"), function(d) {
                return c.tabs.index(d)
            }))).sort()), this.active = this.options.active !== !1 && this.anchors.length ? this._findActive(b.active) : m(), this._refresh(), this.active.length && this.load(b.active)
        }, _initialActive: function() {
            var b = this.options.active, d = this.options.collapsible, c = location.hash.substring(1);
            return null === b && (c && this.tabs.each(function(f, g) {
                return m(g).attr("aria-controls") === c ? (b = f, !1) : k
            }), null === b && (b = this.tabs.index(this.tabs.filter(".ui-tabs-active"))), (null === b || -1 === b) && (b = this.tabs.length ? 0 : !1)), b !== !1 && (b = this.tabs.index(this.tabs.eq(b)), -1 === b && (b = d ? !1 : 0)), !d && b === !1 && this.anchors.length && (b = 0), b
        }, _getCreateEventData: function() {
            return{tab: this.active, panel: this.active.length ? this._getPanelForTab(this.active) : m()}
        }, _tabKeydown: function(d) {
            var c = m(this.document[0].activeElement).closest("li"), b = this.tabs.index(c), f = !0;
            if (!this._handlePageNav(d)) {
                switch (d.keyCode) {
                    case m.ui.keyCode.RIGHT:
                    case m.ui.keyCode.DOWN:
                        b++;
                        break;
                    case m.ui.keyCode.UP:
                    case m.ui.keyCode.LEFT:
                        f = !1, b--;
                        break;
                    case m.ui.keyCode.END:
                        b = this.anchors.length - 1;
                        break;
                    case m.ui.keyCode.HOME:
                        b = 0;
                        break;
                    case m.ui.keyCode.SPACE:
                        return d.preventDefault(), clearTimeout(this.activating), this._activate(b), k;
                    case m.ui.keyCode.ENTER:
                        return d.preventDefault(), clearTimeout(this.activating), this._activate(b === this.options.active ? !1 : b), k;
                    default:
                        return
                }
                d.preventDefault(), clearTimeout(this.activating), b = this._focusNextTab(b, f), d.ctrlKey || (c.attr("aria-selected", "false"), this.tabs.eq(b).attr("aria-selected", "true"), this.activating = this._delay(function() {
                    this.option("active", b)
                }, this.delay))
            }
        }, _panelKeydown: function(b) {
            this._handlePageNav(b) || b.ctrlKey && b.keyCode === m.ui.keyCode.UP && (b.preventDefault(), this.active.focus())
        }, _handlePageNav: function(b) {
            return b.altKey && b.keyCode === m.ui.keyCode.PAGE_UP ? (this._activate(this._focusNextTab(this.options.active - 1, !1)), !0) : b.altKey && b.keyCode === m.ui.keyCode.PAGE_DOWN ? (this._activate(this._focusNextTab(this.options.active + 1, !0)), !0) : k
        }, _findNextTab: function(d, c) {
            function f() {
                return d > b && (d = 0), 0 > d && (d = b), d
            }
            for (var b = this.tabs.length - 1; -1 !== m.inArray(f(), this.options.disabled); ) {
                d = c ? d + 1 : d - 1
            }
            return d
        }, _focusNextTab: function(b, c) {
            return b = this._findNextTab(b, c), this.tabs.eq(b).focus(), b
        }, _setOption: function(c, b) {
            return"active" === c ? (this._activate(b), k) : "disabled" === c ? (this._setupDisabled(b), k) : (this._super(c, b), "collapsible" === c && (this.element.toggleClass("ui-tabs-collapsible", b), b || this.options.active !== !1 || this._activate(0)), "event" === c && this._setupEvents(b), "heightStyle" === c && this._setupHeightStyle(b), k)
        }, _tabId: function(b) {
            return b.attr("aria-controls") || "ui-tabs-" + n()
        }, _sanitizeSelector: function(b) {
            return b ? b.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&") : ""
        }, refresh: function() {
            var c = this.options, b = this.tablist.children(":has(a[href])");
            c.disabled = m.map(b.filter(".ui-state-disabled"), function(d) {
                return b.index(d)
            }), this._processTabs(), c.active !== !1 && this.anchors.length ? this.active.length && !m.contains(this.tablist[0], this.active[0]) ? this.tabs.length === c.disabled.length ? (c.active = !1, this.active = m()) : this._activate(this._findNextTab(Math.max(0, c.active - 1), !1)) : c.active = this.tabs.index(this.active) : (c.active = !1, this.active = m()), this._refresh()
        }, _refresh: function() {
            this._setupDisabled(this.options.disabled), this._setupEvents(this.options.event), this._setupHeightStyle(this.options.heightStyle), this.tabs.not(this.active).attr({"aria-selected": "false", tabIndex: -1}), this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded": "false", "aria-hidden": "true"}), this.active.length ? (this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected": "true", tabIndex: 0}), this._getPanelForTab(this.active).show().attr({"aria-expanded": "true", "aria-hidden": "false"})) : this.tabs.eq(0).attr("tabIndex", 0)
        }, _processTabs: function() {
            var b = this;
            this.tablist = this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role", "tablist"), this.tabs = this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role: "tab", tabIndex: -1}), this.anchors = this.tabs.map(function() {
                return m("a", this)[0]
            }).addClass("ui-tabs-anchor").attr({role: "presentation", tabIndex: -1}), this.panels = m(), this.anchors.each(function(u, d) {
                var g, f, h, o = m(d).uniqueId().attr("id"), r = m(d).closest("li"), c = r.attr("aria-controls");
                l(d) ? (g = d.hash, f = b.element.find(b._sanitizeSelector(g))) : (h = b._tabId(r), g = "#" + h, f = b.element.find(g), f.length || (f = b._createPanel(h), f.insertAfter(b.panels[u - 1] || b.tablist)), f.attr("aria-live", "polite")), f.length && (b.panels = b.panels.add(f)), c && r.data("ui-tabs-aria-controls", c), r.attr({"aria-controls": g.substring(1), "aria-labelledby": o}), f.attr("aria-labelledby", o)
            }), this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role", "tabpanel")
        }, _getList: function() {
            return this.element.find("ol,ul").eq(0)
        }, _createPanel: function(b) {
            return m("<div>").attr("id", b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy", !0)
        }, _setupDisabled: function(c) {
            m.isArray(c) && (c.length ? c.length === this.anchors.length && (c = !0) : c = !1);
            for (var b, d = 0; b = this.tabs[d]; d++) {
                c === !0 || -1 !== m.inArray(d, c) ? m(b).addClass("ui-state-disabled").attr("aria-disabled", "true") : m(b).removeClass("ui-state-disabled").removeAttr("aria-disabled")
            }
            this.options.disabled = c
        }, _setupEvents: function(c) {
            var b = {click: function(d) {
                    d.preventDefault()
                }};
            c && m.each(c.split(" "), function(f, d) {
                b[d] = "_eventHandler"
            }), this._off(this.anchors.add(this.tabs).add(this.panels)), this._on(this.anchors, b), this._on(this.tabs, {keydown: "_tabKeydown"}), this._on(this.panels, {keydown: "_panelKeydown"}), this._focusable(this.tabs), this._hoverable(this.tabs)
        }, _setupHeightStyle: function(c) {
            var b, d = this.element.parent();
            "fill" === c ? (b = d.height(), b -= this.element.outerHeight() - this.element.height(), this.element.siblings(":visible").each(function() {
                var g = m(this), f = g.css("position");
                "absolute" !== f && "fixed" !== f && (b -= g.outerHeight(!0))
            }), this.element.children().not(this.panels).each(function() {
                b -= m(this).outerHeight(!0)
            }), this.panels.each(function() {
                m(this).height(Math.max(0, b - m(this).innerHeight() + m(this).height()))
            }).css("overflow", "auto")) : "auto" === c && (b = 0, this.panels.each(function() {
                b = Math.max(b, m(this).height("").height())
            }).height(b))
        }, _eventHandler: function(r) {
            var u = this.options, c = this.active, d = m(r.currentTarget), o = d.closest("li"), g = o[0] === c[0], h = g && u.collapsible, s = h ? m() : this._getPanelForTab(o), b = c.length ? this._getPanelForTab(c) : m(), f = {oldTab: c, oldPanel: b, newTab: h ? m() : o, newPanel: s};
            r.preventDefault(), o.hasClass("ui-state-disabled") || o.hasClass("ui-tabs-loading") || this.running || g && !u.collapsible || this._trigger("beforeActivate", r, f) === !1 || (u.active = h ? !1 : this.tabs.index(o), this.active = g ? m() : o, this.xhr && this.xhr.abort(), b.length || s.length || m.error("jQuery UI Tabs: Mismatching fragment identifier."), s.length && this.load(this.tabs.index(o), r), this._toggle(r, f))
        }, _toggle: function(h, c) {
            function b() {
                d.running = !1, d._trigger("activate", h, c)
            }
            function f() {
                c.newTab.closest("li").addClass("ui-tabs-active ui-state-active"), g.length && d.options.show ? d._show(g, d.options.show, b) : (g.show(), b())
            }
            var d = this, g = c.newPanel, o = c.oldPanel;
            this.running = !0, o.length && this.options.hide ? this._hide(o, this.options.hide, function() {
                c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), f()
            }) : (c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"), o.hide(), f()), o.attr({"aria-expanded": "false", "aria-hidden": "true"}), c.oldTab.attr("aria-selected", "false"), g.length && o.length ? c.oldTab.attr("tabIndex", -1) : g.length && this.tabs.filter(function() {
                return 0 === m(this).attr("tabIndex")
            }).attr("tabIndex", -1), g.attr({"aria-expanded": "true", "aria-hidden": "false"}), c.newTab.attr({"aria-selected": "true", tabIndex: 0})
        }, _activate: function(c) {
            var b, d = this._findActive(c);
            d[0] !== this.active[0] && (d.length || (d = this.active), b = d.find(".ui-tabs-anchor")[0], this._eventHandler({target: b, currentTarget: b, preventDefault: m.noop}))
        }, _findActive: function(b) {
            return b === !1 ? m() : this.tabs.eq(b)
        }, _getIndex: function(b) {
            return"string" == typeof b && (b = this.anchors.index(this.anchors.filter("[href$='" + b + "']"))), b
        }, _destroy: function() {
            this.xhr && this.xhr.abort(), this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"), this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"), this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(), this.tabs.add(this.panels).each(function() {
                m.data(this, "ui-tabs-destroy") ? m(this).remove() : m(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")
            }), this.tabs.each(function() {
                var c = m(this), b = c.data("ui-tabs-aria-controls");
                b ? c.attr("aria-controls", b).removeData("ui-tabs-aria-controls") : c.removeAttr("aria-controls")
            }), this.panels.show(), "content" !== this.options.heightStyle && this.panels.css("height", "")
        }, enable: function(b) {
            var c = this.options.disabled;
            c !== !1 && (b === k ? c = !1 : (b = this._getIndex(b), c = m.isArray(c) ? m.map(c, function(d) {
                return d !== b ? d : null
            }) : m.map(this.tabs, function(f, d) {
                return d !== b ? d : null
            })), this._setupDisabled(c))
        }, disable: function(b) {
            var c = this.options.disabled;
            if (c !== !0) {
                if (b === k) {
                    c = !0
                } else {
                    if (b = this._getIndex(b), -1 !== m.inArray(b, c)) {
                        return
                    }
                    c = m.isArray(c) ? m.merge([b], c).sort() : [b]
                }
                this._setupDisabled(c)
            }
        }, load: function(h, c) {
            h = this._getIndex(h);
            var f = this, d = this.tabs.eq(h), g = d.find(".ui-tabs-anchor"), o = this._getPanelForTab(d), b = {tab: d, panel: o};
            l(g[0]) || (this.xhr = m.ajax(this._ajaxSettings(g, c, b)), this.xhr && "canceled" !== this.xhr.statusText && (d.addClass("ui-tabs-loading"), o.attr("aria-busy", "true"), this.xhr.success(function(p) {
                setTimeout(function() {
                    o.html(p), f._trigger("load", c, b)
                }, 1)
            }).complete(function(p, q) {
                setTimeout(function() {
                    "abort" === q && f.panels.stop(!1, !0), d.removeClass("ui-tabs-loading"), o.removeAttr("aria-busy"), p === f.xhr && delete f.xhr
                }, 1)
            })))
        }, _ajaxSettings: function(d, c, f) {
            var b = this;
            return{url: d.attr("href"), beforeSend: function(g, h) {
                    return b._trigger("beforeLoad", c, m.extend({jqXHR: g, ajaxSettings: h}, f))
                }}
        }, _getPanelForTab: function(c) {
            var b = m(c).attr("aria-controls");
            return this.element.find(this._sanitizeSelector("#" + b))
        }})
})(jQuery);
(function(e) {
    function g(a, c) {
        var b = (a.attr("aria-describedby") || "").split(/\s+/);
        b.push(c), a.data("ui-tooltip-id", c).attr("aria-describedby", e.trim(b.join(" ")))
    }
    function f(b) {
        var d = b.data("ui-tooltip-id"), c = (b.attr("aria-describedby") || "").split(/\s+/), a = e.inArray(d, c);
        -1 !== a && c.splice(a, 1), b.removeData("ui-tooltip-id"), c = e.trim(c.join(" ")), c ? b.attr("aria-describedby", c) : b.removeAttr("aria-describedby")
    }
    var h = 0;
    e.widget("ui.tooltip", {version: "1.10.3", options: {content: function() {
                var a = e(this).attr("title") || "";
                return e("<a>").text(a).html()
            }, hide: !0, items: "[title]:not([disabled])", position: {my: "left top+15", at: "left bottom", collision: "flipfit flip"}, show: !0, tooltipClass: null, track: !1, close: null, open: null}, _create: function() {
            this._on({mouseover: "open", focusin: "open"}), this.tooltips = {}, this.parents = {}, this.options.disabled && this._disable()
        }, _setOption: function(a, c) {
            var b = this;
            return"disabled" === a ? (this[c ? "_disable" : "_enable"](), this.options[a] = c, void 0) : (this._super(a, c), "content" === a && e.each(this.tooltips, function(m, d) {
                b._updateContent(d)
            }), void 0)
        }, _disable: function() {
            var a = this;
            e.each(this.tooltips, function(d, c) {
                var b = e.Event("blur");
                b.target = b.currentTarget = c[0], a.close(b, !0)
            }), this.element.find(this.options.items).addBack().each(function() {
                var b = e(this);
                b.is("[title]") && b.data("ui-tooltip-title", b.attr("title")).attr("title", "")
            })
        }, _enable: function() {
            this.element.find(this.options.items).addBack().each(function() {
                var a = e(this);
                a.data("ui-tooltip-title") && a.attr("title", a.data("ui-tooltip-title"))
            })
        }, open: function(a) {
            var c = this, b = e(a ? a.target : this.element).closest(this.options.items);
            b.length && !b.data("ui-tooltip-id") && (b.attr("title") && b.data("ui-tooltip-title", b.attr("title")), b.data("ui-tooltip-open", !0), a && "mouseover" === a.type && b.parents().each(function() {
                var d, m = e(this);
                m.data("ui-tooltip-open") && (d = e.Event("blur"), d.target = d.currentTarget = this, c.close(d, !0)), m.attr("title") && (m.uniqueId(), c.parents[this.id] = {element: this, title: m.attr("title")}, m.attr("title", ""))
            }), this._updateContent(b, a))
        }, _updateContent: function(d, b) {
            var n, c = this.options.content, a = this, o = b ? b.type : null;
            return"string" == typeof c ? this._open(b, d, c) : (n = c.call(d[0], function(k) {
                d.data("ui-tooltip-open") && a._delay(function() {
                    b && (b.type = o), this._open(b, d, k)
                })
            }), n && this._open(b, d, n), void 0)
        }, _open: function(d, a, c) {
            function n(k) {
                o.of = k, l.is(":hidden") || l.position(o)
            }
            var l, r, b, o = e.extend({}, this.options.position);
            if (c) {
                if (l = this._find(a), l.length) {
                    return l.find(".ui-tooltip-content").html(c), void 0
                }
                a.is("[title]") && (d && "mouseover" === d.type ? a.attr("title", "") : a.removeAttr("title")), l = this._tooltip(a), g(a, l.attr("id")), l.find(".ui-tooltip-content").html(c), this.options.track && d && /^mouse/.test(d.type) ? (this._on(this.document, {mousemove: n}), n(d)) : l.position(e.extend({of: a}, this.options.position)), l.hide(), this._show(l, this.options.show), this.options.show && this.options.show.delay && (b = this.delayedShow = setInterval(function() {
                    l.is(":visible") && (n(o.of), clearInterval(b))
                }, e.fx.interval)), this._trigger("open", d, {tooltip: l}), r = {keyup: function(k) {
                        if (k.keyCode === e.ui.keyCode.ESCAPE) {
                            var m = e.Event(k);
                            m.currentTarget = a[0], this.close(m, !0)
                        }
                    }, remove: function() {
                        this._removeTooltip(l)
                    }}, d && "mouseover" !== d.type || (r.mouseleave = "close"), d && "focusin" !== d.type || (r.focusout = "close"), this._on(!0, a, r)
            }
        }, close: function(b) {
            var c = this, a = e(b ? b.currentTarget : this.element), d = this._find(a);
            this.closing || (clearInterval(this.delayedShow), a.data("ui-tooltip-title") && a.attr("title", a.data("ui-tooltip-title")), f(a), d.stop(!0), this._hide(d, this.options.hide, function() {
                c._removeTooltip(e(this))
            }), a.removeData("ui-tooltip-open"), this._off(a, "mouseleave focusout keyup"), a[0] !== this.element[0] && this._off(a, "remove"), this._off(this.document, "mousemove"), b && "mouseleave" === b.type && e.each(this.parents, function(k, n) {
                e(n.element).attr("title", n.title), delete c.parents[k]
            }), this.closing = !0, this._trigger("close", b, {tooltip: d}), this.closing = !1)
        }, _tooltip: function(b) {
            var c = "ui-tooltip-" + h++, a = e("<div>").attr({id: c, role: "tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content " + (this.options.tooltipClass || ""));
            return e("<div>").addClass("ui-tooltip-content").appendTo(a), a.appendTo(this.document[0].body), this.tooltips[c] = b, a
        }, _find: function(a) {
            var b = a.data("ui-tooltip-id");
            return b ? e("#" + b) : e()
        }, _removeTooltip: function(a) {
            a.remove(), delete this.tooltips[a.attr("id")]
        }, _destroy: function() {
            var a = this;
            e.each(this.tooltips, function(d, c) {
                var b = e.Event("blur");
                b.target = b.currentTarget = c[0], a.close(b, !0), e("#" + d).remove(), c.data("ui-tooltip-title") && (c.attr("title", c.data("ui-tooltip-title")), c.removeData("ui-tooltip-title"))
            })
        }})
})(jQuery);
(function(d, f) {
    var e = "ui-effects-";
    d.effects = {effect: {}}, function(J, l) {
        function u(m, g, q) {
            var k = K[g.type] || {};
            return null == m ? q || !g.def ? null : g.def : (m = k.floor ? ~~m : parseFloat(m), isNaN(m) ? g.def : k.mod ? (m + k.mod) % k.mod : 0 > m ? 0 : m > k.max ? k.max : m)
        }
        function I(m) {
            var k = H(), g = k._rgba = [];
            return m = m.toLowerCase(), r(s, function(x, y) {
                var v, w = y.re.exec(m), q = w && y.parse(w), A = y.space || "rgba";
                return q ? (v = k[A](q), k[b[A].cache] = v[b[A].cache], g = k._rgba = v._rgba, !1) : l
            }), g.length ? ("0,0,0,0" === g.join() && J.extend(g, a.transparent), k) : a[m]
        }
        function c(k, g, m) {
            return m = (m + 1) % 1, 1 > 6 * m ? k + 6 * (g - k) * m : 1 > 2 * m ? g : 2 > 3 * m ? k + 6 * (g - k) * (2 / 3 - m) : k
        }
        var a, n = "backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor", p = /^([\-+])=\s*(\d+\.?\d*)/, s = [{re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/, parse: function(g) {
                    return[g[1], g[2], g[3], g[4]]
                }}, {re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/, parse: function(g) {
                    return[2.55 * g[1], 2.55 * g[2], 2.55 * g[3], g[4]]
                }}, {re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/, parse: function(g) {
                    return[parseInt(g[1], 16), parseInt(g[2], 16), parseInt(g[3], 16)]
                }}, {re: /#([a-f0-9])([a-f0-9])([a-f0-9])/, parse: function(g) {
                    return[parseInt(g[1] + g[1], 16), parseInt(g[2] + g[2], 16), parseInt(g[3] + g[3], 16)]
                }}, {re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/, space: "hsla", parse: function(g) {
                    return[g[1], g[2] / 100, g[3] / 100, g[4]]
                }}], H = J.Color = function(k, q, m, g) {
            return new J.Color.fn.parse(k, q, m, g)
        }, b = {rgba: {props: {red: {idx: 0, type: "byte"}, green: {idx: 1, type: "byte"}, blue: {idx: 2, type: "byte"}}}, hsla: {props: {hue: {idx: 0, type: "degrees"}, saturation: {idx: 1, type: "percent"}, lightness: {idx: 2, type: "percent"}}}}, K = {"byte": {floor: !0, max: 255}, percent: {max: 1}, degrees: {mod: 360, floor: !0}}, h = H.support = {}, o = J("<p>")[0], r = J.each;
        o.style.cssText = "background-color:rgba(1,1,1,.5)", h.rgba = o.style.backgroundColor.indexOf("rgba") > -1, r(b, function(k, g) {
            g.cache = "_" + k, g.props.alpha = {idx: 3, type: "percent", def: 1}
        }), H.fn = J.extend(H.prototype, {parse: function(k, m, g, w) {
                if (k === l) {
                    return this._rgba = [null, null, null, null], this
                }
                (k.jquery || k.nodeType) && (k = J(k).css(m), m = l);
                var x = this, q = J.type(k), v = this._rgba = [];
                return m !== l && (k = [k, m, g, w], q = "array"), "string" === q ? this.parse(I(k) || a._default) : "array" === q ? (r(b.rgba.props, function(A, y) {
                    v[y.idx] = u(k[y.idx], y)
                }), this) : "object" === q ? (k instanceof H ? r(b, function(A, y) {
                    k[y.cache] && (x[y.cache] = k[y.cache].slice())
                }) : r(b, function(B, y) {
                    var A = y.cache;
                    r(y.props, function(D, C) {
                        if (!x[A] && y.to) {
                            if ("alpha" === D || null == k[D]) {
                                return
                            }
                            x[A] = y.to(x._rgba)
                        }
                        x[A][C.idx] = u(k[D], C, !0)
                    }), x[A] && 0 > J.inArray(null, x[A].slice(0, 3)) && (x[A][3] = 1, y.from && (x._rgba = y.from(x[A])))
                }), this) : l
            }, is: function(m) {
                var q = H(m), k = !0, g = this;
                return r(b, function(y, v) {
                    var w, x = q[v.cache];
                    return x && (w = g[v.cache] || v.to && v.to(g._rgba) || [], r(v.props, function(A, B) {
                        return null != x[B.idx] ? k = x[B.idx] === w[B.idx] : l
                    })), k
                }), k
            }, _space: function() {
                var k = [], g = this;
                return r(b, function(q, m) {
                    g[m.cache] && k.push(q)
                }), k.pop()
            }, transition: function(w, v) {
                var x = H(w), k = x._space(), y = b[k], q = 0 === this.alpha() ? H("transparent") : this, m = q[y.cache] || y.to(q._rgba), g = m.slice();
                return x = x[y.cache], r(y.props, function(E, A) {
                    var D = A.idx, C = m[D], F = x[D], B = K[A.type] || {};
                    null !== F && (null === C ? g[D] = F : (B.mod && (F - C > B.mod / 2 ? C += B.mod : C - F > B.mod / 2 && (C -= B.mod)), g[D] = u((F - C) * v + C, A)))
                }), this[k](g)
            }, blend: function(k) {
                if (1 === this._rgba[3]) {
                    return this
                }
                var q = this._rgba.slice(), m = q.pop(), g = H(k)._rgba;
                return H(J.map(q, function(w, v) {
                    return(1 - m) * g[v] + m * w
                }))
            }, toRgbaString: function() {
                var g = "rgba(", k = J.map(this._rgba, function(q, m) {
                    return null == q ? m > 2 ? 1 : 0 : q
                });
                return 1 === k[3] && (k.pop(), g = "rgb("), g + k.join() + ")"
            }, toHslaString: function() {
                var g = "hsla(", k = J.map(this.hsla(), function(q, m) {
                    return null == q && (q = m > 2 ? 1 : 0), m && 3 > m && (q = Math.round(100 * q) + "%"), q
                });
                return 1 === k[3] && (k.pop(), g = "hsl("), g + k.join() + ")"
            }, toHexString: function(g) {
                var m = this._rgba.slice(), k = m.pop();
                return g && m.push(~~(255 * k)), "#" + J.map(m, function(q) {
                    return q = (q || 0).toString(16), 1 === q.length ? "0" + q : q
                }).join("")
            }, toString: function() {
                return 0 === this._rgba[3] ? "transparent" : this.toRgbaString()
            }}), H.fn.parse.prototype = H.fn, b.hsla.to = function(m) {
            if (null == m[0] || null == m[1] || null == m[2]) {
                return[null, null, null, m[3]]
            }
            var A, C, k = m[0] / 255, g = m[1] / 255, w = m[2] / 255, q = m[3], x = Math.max(k, g, w), B = Math.min(k, g, w), D = x - B, y = x + B, v = 0.5 * y;
            return A = B === x ? 0 : k === x ? 60 * (g - w) / D + 360 : g === x ? 60 * (w - k) / D + 120 : 60 * (k - g) / D + 240, C = 0 === D ? 0 : 0.5 >= v ? D / y : D / (2 - y), [Math.round(A) % 360, C, v, null == q ? 1 : q]
        }, b.hsla.from = function(m) {
            if (null == m[0] || null == m[1] || null == m[2]) {
                return[null, null, null, m[3]]
            }
            var v = m[0] / 360, q = m[1], g = m[2], w = m[3], k = 0.5 >= g ? g * (1 + q) : g + q - g * q, x = 2 * g - k;
            return[Math.round(255 * c(x, k, v + 1 / 3)), Math.round(255 * c(x, k, v)), Math.round(255 * c(x, k, v - 1 / 3)), w]
        }, r(b, function(m, k) {
            var w = k.props, g = k.cache, v = k.to, q = k.from;
            H.fn[m] = function(C) {
                if (v && !this[g] && (this[g] = v(this._rgba)), C === l) {
                    return this[g].slice()
                }
                var x, A = J.type(C), B = "array" === A || "object" === A ? C : arguments, y = this[g].slice();
                return r(w, function(F, D) {
                    var E = B["object" === A ? F : D.idx];
                    null == E && (E = y[D.idx]), y[D.idx] = u(E, D)
                }), q ? (x = H(q(y)), x[g] = y, x) : H(y)
            }, r(w, function(y, x) {
                H.fn[y] || (H.fn[y] = function(A) {
                    var D, C = J.type(A), E = "alpha" === y ? this._hsla ? "hsla" : "rgba" : m, F = this[E](), B = F[x.idx];
                    return"undefined" === C ? B : ("function" === C && (A = A.call(this, B), C = J.type(A)), null == A && x.empty ? this : ("string" === C && (D = p.exec(A), D && (A = B + parseFloat(D[2]) * ("+" === D[1] ? 1 : -1))), F[x.idx] = A, this[E](F)))
                })
            })
        }), H.hook = function(g) {
            var k = g.split(" ");
            r(k, function(m, q) {
                J.cssHooks[q] = {set: function(y, v) {
                        var B, x, w = "";
                        if ("transparent" !== v && ("string" !== J.type(v) || (B = I(v)))) {
                            if (v = H(B || v), !h.rgba && 1 !== v._rgba[3]) {
                                for (x = "backgroundColor" === q ? y.parentNode : y; ("" === w || "transparent" === w) && x && x.style; ) {
                                    try {
                                        w = J.css(x, "backgroundColor"), x = x.parentNode
                                    } catch (A) {
                                    }
                                }
                                v = v.blend(w && "transparent" !== w ? w : "_default")
                            }
                            v = v.toRgbaString()
                        }
                        try {
                            y.style[q] = v
                        } catch (A) {
                        }
                    }}, J.fx.step[q] = function(v) {
                    v.colorInit || (v.start = H(v.elem, q), v.end = H(v.end), v.colorInit = !0), J.cssHooks[q].set(v.elem, v.start.transition(v.end, v.pos))
                }
            })
        }, H.hook(n), J.cssHooks.borderColor = {expand: function(k) {
                var g = {};
                return r(["Top", "Right", "Bottom", "Left"], function(q, m) {
                    g["border" + m + "Color"] = k
                }), g
            }}, a = J.Color.names = {aqua: "#00ffff", black: "#000000", blue: "#0000ff", fuchsia: "#ff00ff", gray: "#808080", green: "#008000", lime: "#00ff00", maroon: "#800000", navy: "#000080", olive: "#808000", purple: "#800080", red: "#ff0000", silver: "#c0c0c0", teal: "#008080", white: "#ffffff", yellow: "#ffff00", transparent: [null, null, null, 0], _default: "#ffffff"}
    }(jQuery), function() {
        function c(g) {
            var p, n, r = g.ownerDocument.defaultView ? g.ownerDocument.defaultView.getComputedStyle(g, null) : g.currentStyle, q = {};
            if (r && r.length && r[0] && r[r[0]]) {
                for (n = r.length; n--; ) {
                    p = r[n], "string" == typeof r[p] && (q[d.camelCase(p)] = r[p])
                }
            } else {
                for (p in r) {
                    "string" == typeof r[p] && (q[p] = r[p])
                }
            }
            return q
        }
        function b(n, q) {
            var o, r, g = {};
            for (o in q) {
                r = q[o], n[o] !== r && (h[o] || (d.fx.step[o] || !isNaN(parseFloat(r))) && (g[o] = r))
            }
            return g
        }
        var a = ["add", "remove", "toggle"], h = {border: 1, borderBottom: 1, borderColor: 1, borderLeft: 1, borderRight: 1, borderTop: 1, borderWidth: 1, margin: 1, padding: 1};
        d.each(["borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle"], function(g, l) {
            d.fx.step[l] = function(k) {
                ("none" !== k.end && !k.setAttr || 1 === k.pos && !k.setAttr) && (jQuery.style(k.elem, l, k.end), k.setAttr = !0)
            }
        }), d.fn.addBack || (d.fn.addBack = function(g) {
            return this.add(null == g ? this.prevObject : this.prevObject.filter(g))
        }), d.effects.animateClass = function(s, q, r, g) {
            var o = d.speed(q, r, g);
            return this.queue(function() {
                var n, k = d(this), m = k.attr("class") || "", l = o.children ? k.find("*").addBack() : k;
                l = l.map(function() {
                    var p = d(this);
                    return{el: p, start: c(this)}
                }), n = function() {
                    d.each(a, function(p, u) {
                        s[u] && k[u + "Class"](s[u])
                    })
                }, n(), l = l.map(function() {
                    return this.end = c(this.el[0]), this.diff = b(this.start, this.end), this
                }), k.attr("class", m), l = l.map(function() {
                    var p = this, w = d.Deferred(), u = d.extend({}, o, {queue: !1, complete: function() {
                            w.resolve(p)
                        }});
                    return this.el.animate(this.diff, u), w.promise()
                }), d.when.apply(d, l.get()).done(function() {
                    n(), d.each(arguments, function() {
                        var p = this.el;
                        d.each(this.diff, function(u) {
                            p.css(u, "")
                        })
                    }), o.complete.call(k[0])
                })
            })
        }, d.fn.extend({addClass: function(g) {
                return function(p, n, r, q) {
                    return n ? d.effects.animateClass.call(this, {add: p}, n, r, q) : g.apply(this, arguments)
                }
            }(d.fn.addClass), removeClass: function(g) {
                return function(p, n, r, q) {
                    return arguments.length > 1 ? d.effects.animateClass.call(this, {remove: p}, n, r, q) : g.apply(this, arguments)
                }
            }(d.fn.removeClass), toggleClass: function(g) {
                return function(o, s, r, u, n) {
                    return"boolean" == typeof s || s === f ? r ? d.effects.animateClass.call(this, s ? {add: o} : {remove: o}, r, u, n) : g.apply(this, arguments) : d.effects.animateClass.call(this, {toggle: o}, s, r, u)
                }
            }(d.fn.toggleClass), switchClass: function(g, p, n, r, q) {
                return d.effects.animateClass.call(this, {add: p, remove: g}, n, r, q)
            }})
    }(), function() {
        function b(l, n, m, c) {
            return d.isPlainObject(l) && (n = l, l = l.effect), l = {effect: l}, null == n && (n = {}), d.isFunction(n) && (c = n, m = null, n = {}), ("number" == typeof n || d.fx.speeds[n]) && (c = m, m = n, n = {}), d.isFunction(m) && (c = m, m = null), n && d.extend(l, n), m = m || n.duration, l.duration = d.fx.off ? 0 : "number" == typeof m ? m : m in d.fx.speeds ? d.fx.speeds[m] : d.fx.speeds._default, l.complete = c || n.complete, l
        }
        function a(c) {
            return !c || "number" == typeof c || d.fx.speeds[c] ? !0 : "string" != typeof c || d.effects.effect[c] ? d.isFunction(c) ? !0 : "object" != typeof c || c.effect ? !1 : !0 : !0
        }
        d.extend(d.effects, {version: "1.10.3", save: function(l, c) {
                for (var k = 0; c.length > k; k++) {
                    null !== c[k] && l.data(e + c[k], l[0].style[c[k]])
                }
            }, restore: function(m, l) {
                var c, n;
                for (n = 0; l.length > n; n++) {
                    null !== l[n] && (c = m.data(e + l[n]), c === f && (c = ""), m.css(l[n], c))
                }
            }, setMode: function(h, c) {
                return"toggle" === c && (c = h.is(":hidden") ? "show" : "hide"), c
            }, getBaseline: function(m, c) {
                var n, l;
                switch (m[0]) {
                    case"top":
                        n = 0;
                        break;
                    case"middle":
                        n = 0.5;
                        break;
                    case"bottom":
                        n = 1;
                        break;
                    default:
                        n = m[0] / c.height
                }
                switch (m[1]) {
                    case"left":
                        l = 0;
                        break;
                    case"center":
                        l = 0.5;
                        break;
                    case"right":
                        l = 1;
                        break;
                    default:
                        l = m[1] / c.width
                }
                return{x: l, y: n}
            }, createWrapper: function(o) {
                if (o.parent().is(".ui-effects-wrapper")) {
                    return o.parent()
                }
                var q = {width: o.outerWidth(!0), height: o.outerHeight(!0), "float": o.css("float")}, p = d("<div></div>").addClass("ui-effects-wrapper").css({fontSize: "100%", background: "transparent", border: "none", margin: 0, padding: 0}), c = {width: o.width(), height: o.height()}, r = document.activeElement;
                try {
                    r.id
                } catch (n) {
                    r = document.body
                }
                return o.wrap(p), (o[0] === r || d.contains(o[0], r)) && d(r).focus(), p = o.parent(), "static" === o.css("position") ? (p.css({position: "relative"}), o.css({position: "relative"})) : (d.extend(q, {position: o.css("position"), zIndex: o.css("z-index")}), d.each(["top", "left", "bottom", "right"], function(h, g) {
                    q[g] = o.css(g), isNaN(parseInt(q[g], 10)) && (q[g] = "auto")
                }), o.css({position: "relative", top: 0, left: 0, right: "auto", bottom: "auto"})), o.css(c), p.css(q).show()
            }, removeWrapper: function(c) {
                var h = document.activeElement;
                return c.parent().is(".ui-effects-wrapper") && (c.parent().replaceWith(c), (c[0] === h || d.contains(c[0], h)) && d(h).focus()), c
            }, setTransition: function(l, n, m, c) {
                return c = c || {}, d.each(n, function(k, g) {
                    var h = l.cssUnit(g);
                    h[0] > 0 && (c[g] = h[0] * m + h[1])
                }), c
            }}), d.fn.extend({effect: function() {
                function n(k) {
                    function r() {
                        d.isFunction(g) && g.call(h[0]), d.isFunction(k) && k()
                    }
                    var h = d(this), g = o.complete, l = o.mode;
                    (h.is(":hidden") ? "hide" === l : "show" === l) ? (h[l](), r()) : m.call(h[0], o, r)
                }
                var o = b.apply(this, arguments), c = o.mode, p = o.queue, m = d.effects.effect[o.effect];
                return d.fx.off || !m ? c ? this[c](o.duration, o.complete) : this.each(function() {
                    o.complete && o.complete.call(this)
                }) : p === !1 ? this.each(n) : this.queue(p || "fx", n)
            }, show: function(c) {
                return function(k) {
                    if (a(k)) {
                        return c.apply(this, arguments)
                    }
                    var l = b.apply(this, arguments);
                    return l.mode = "show", this.effect.call(this, l)
                }
            }(d.fn.show), hide: function(c) {
                return function(k) {
                    if (a(k)) {
                        return c.apply(this, arguments)
                    }
                    var l = b.apply(this, arguments);
                    return l.mode = "hide", this.effect.call(this, l)
                }
            }(d.fn.hide), toggle: function(c) {
                return function(k) {
                    if (a(k) || "boolean" == typeof k) {
                        return c.apply(this, arguments)
                    }
                    var l = b.apply(this, arguments);
                    return l.mode = "toggle", this.effect.call(this, l)
                }
            }(d.fn.toggle), cssUnit: function(c) {
                var l = this.css(c), k = [];
                return d.each(["em", "px", "%", "pt"], function(h, g) {
                    l.indexOf(g) > 0 && (k = [parseFloat(l), g])
                }), k
            }})
    }(), function() {
        var a = {};
        d.each(["Quad", "Cubic", "Quart", "Quint", "Expo"], function(b, c) {
            a[c] = function(h) {
                return Math.pow(h, b + 2)
            }
        }), d.extend(a, {Sine: function(b) {
                return 1 - Math.cos(b * Math.PI / 2)
            }, Circ: function(b) {
                return 1 - Math.sqrt(1 - b * b)
            }, Elastic: function(b) {
                return 0 === b || 1 === b ? b : -Math.pow(2, 8 * (b - 1)) * Math.sin((80 * (b - 1) - 7.5) * Math.PI / 15)
            }, Back: function(b) {
                return b * b * (3 * b - 2)
            }, Bounce: function(c) {
                for (var b, k = 4; ((b = Math.pow(2, --k)) - 1) / 11 > c; ) {
                }
                return 1 / Math.pow(4, 3 - k) - 7.5625 * Math.pow((3 * b - 2) / 22 - c, 2)
            }}), d.each(a, function(b, c) {
            d.easing["easeIn" + b] = c, d.easing["easeOut" + b] = function(g) {
                return 1 - c(1 - g)
            }, d.easing["easeInOut" + b] = function(g) {
                return 0.5 > g ? c(2 * g) / 2 : 1 - c(-2 * g + 2) / 2
            }
        })
    }()
})(jQuery);
(function(d) {
    var f = /up|down|vertical/, e = /up|left|vertical|horizontal/;
    d.effects.effect.blind = function(p, r) {
        var v, c, m, h = d(this), n = ["position", "top", "bottom", "left", "right", "height", "width"], J = d.effects.setMode(h, p.mode || "hide"), s = p.direction || "up", a = f.test(s), l = a ? "height" : "width", b = a ? "top" : "left", o = e.test(s), g = {}, u = "show" === J;
        h.parent().is(".ui-effects-wrapper") ? d.effects.save(h.parent(), n) : d.effects.save(h, n), h.show(), v = d.effects.createWrapper(h).css({overflow: "hidden"}), c = v[l](), m = parseFloat(v.css(b)) || 0, g[l] = u ? c : 0, o || (h.css(a ? "bottom" : "right", 0).css(a ? "top" : "left", "auto").css({position: "absolute"}), g[b] = u ? m : c + m), u && (v.css(l, 0), o || v.css(b, m + c)), v.animate(g, {duration: p.duration, easing: p.easing, queue: !1, complete: function() {
                "hide" === J && h.hide(), d.effects.restore(h, n), d.effects.removeWrapper(h), r()
            }})
    }
})(jQuery);
(function(b) {
    b.effects.effect.bounce = function(g, p) {
        var m, u, c, v = b(this), R = ["position", "top", "bottom", "left", "right", "height", "width"], n = b.effects.setMode(v, g.mode || "effect"), r = "hide" === n, e = "show" === n, o = g.direction || "up", f = g.distance, y = g.times || 5, h = 2 * y + (e || r ? 1 : 0), s = g.duration / h, l = g.easing, Q = "up" === o || "down" === o ? "top" : "left", a = "up" === o || "left" === o, d = v.queue(), S = d.length;
        for ((e || r) && R.push("opacity"), b.effects.save(v, R), v.show(), b.effects.createWrapper(v), f || (f = v["top" === Q ? "outerHeight" : "outerWidth"]() / 3), e && (c = {opacity: 1}, c[Q] = 0, v.css("opacity", 0).css(Q, a ? 2 * -f : 2 * f).animate(c, s, l)), r && (f /= Math.pow(2, y - 1)), c = {}, c[Q] = 0, m = 0; y > m; m++) {
            u = {}, u[Q] = (a ? "-=" : "+=") + f, v.animate(u, s, l).animate(c, s, l), f = r ? 2 * f : f / 2
        }
        r && (u = {opacity: 0}, u[Q] = (a ? "-=" : "+=") + f, v.animate(u, s, l)), v.queue(function() {
            r && v.hide(), b.effects.restore(v, R), b.effects.removeWrapper(v), p()
        }), S > 1 && d.splice.apply(d, [1, 0].concat(d.splice(S, h + 1))), v.dequeue()
    }
})(jQuery);
(function(b) {
    b.effects.effect.clip = function(o, u) {
        var F, h, d, l = b(this), p = ["position", "top", "bottom", "left", "right", "height", "width"], s = b.effects.setMode(l, o.mode || "hide"), c = "show" === s, e = o.direction || "vertical", a = "vertical" === e, f = a ? "height" : "width", n = a ? "top" : "left", r = {};
        b.effects.save(l, p), l.show(), F = b.effects.createWrapper(l).css({overflow: "hidden"}), h = "IMG" === l[0].tagName ? F : l, d = h[f](), c && (h.css(f, 0), h.css(n, d / 2)), r[f] = c ? d : 0, r[n] = c ? 0 : d / 2, h.animate(r, {queue: !1, duration: o.duration, easing: o.easing, complete: function() {
                c || l.hide(), b.effects.restore(l, p), b.effects.removeWrapper(l), u()
            }})
    }
})(jQuery);
(function(b) {
    b.effects.effect.drop = function(c, h) {
        var s, n = b(this), y = ["position", "top", "bottom", "left", "right", "opacity", "height", "width"], o = b.effects.setMode(n, c.mode || "hide"), r = "show" === o, e = c.direction || "left", l = "up" === e || "down" === e ? "top" : "left", a = "up" === e || "left" === e ? "pos" : "neg", u = {opacity: r ? 1 : 0};
        b.effects.save(n, y), n.show(), b.effects.createWrapper(n), s = c.distance || n["top" === l ? "outerHeight" : "outerWidth"](!0) / 2, r && n.css("opacity", 0).css(l, "pos" === a ? -s : s), u[l] = (r ? "pos" === a ? "+=" : "-=" : "pos" === a ? "-=" : "+=") + s, n.animate(u, {queue: !1, duration: c.duration, easing: c.easing, complete: function() {
                "hide" === o && n.hide(), b.effects.restore(n, y), b.effects.removeWrapper(n), h()
            }})
    }
})(jQuery);
(function(b) {
    b.effects.effect.explode = function(h, r) {
        function n() {
            d.push(this), d.length === O * f && v()
        }
        function v() {
            g.css({visibility: "visible"}), b(d).remove(), u || g.hide(), r()
        }
        var c, P, l, p, s, e, O = h.pieces ? Math.round(Math.sqrt(h.pieces)) : 3, f = O, g = b(this), m = b.effects.setMode(g, h.mode || "hide"), u = "show" === m, o = g.show().css("visibility", "hidden").offset(), Q = Math.ceil(g.outerWidth() / f), a = Math.ceil(g.outerHeight() / O), d = [];
        for (c = 0; O > c; c++) {
            for (p = o.top + c * a, e = c - (O - 1) / 2, P = 0; f > P; P++) {
                l = o.left + P * Q, s = P - (f - 1) / 2, g.clone().appendTo("body").wrap("<div></div>").css({position: "absolute", visibility: "visible", left: -P * Q, top: -c * a}).parent().addClass("ui-effects-explode").css({position: "absolute", overflow: "hidden", width: Q, height: a, left: l + (u ? s * Q : 0), top: p + (u ? e * a : 0), opacity: u ? 0 : 1}).animate({left: l + (u ? 0 : s * Q), top: p + (u ? 0 : e * a), opacity: u ? 1 : 0}, h.duration || 500, h.easing, n)
            }
        }
    }
})(jQuery);
(function(b) {
    b.effects.effect.fade = function(g, a) {
        var h = b(this), e = b.effects.setMode(h, g.mode || "toggle");
        h.animate({opacity: e}, {queue: !1, duration: g.duration, easing: g.easing, complete: a})
    }
})(jQuery);
(function(b) {
    b.effects.effect.fold = function(L, f) {
        var l, r, s = b(this), d = ["position", "top", "bottom", "left", "right", "height", "width"], m = b.effects.setMode(s, L.mode || "hide"), e = "show" === m, h = "hide" === m, u = L.size || 15, o = /([0-9]+)%/.exec(u), v = !!L.horizFirst, g = e !== v, a = g ? ["width", "height"] : ["height", "width"], n = L.duration / 2, c = {}, p = {};
        b.effects.save(s, d), s.show(), l = b.effects.createWrapper(s).css({overflow: "hidden"}), r = g ? [l.width(), l.height()] : [l.height(), l.width()], o && (u = parseInt(o[1], 10) / 100 * r[h ? 0 : 1]), e && l.css(v ? {height: 0, width: u} : {height: u, width: 0}), c[a[0]] = e ? r[0] : u, p[a[1]] = e ? r[1] : 0, l.animate(c, n, L.easing).animate(p, n, L.easing, function() {
            h && s.hide(), b.effects.restore(s, d), b.effects.removeWrapper(s), f()
        })
    }
})(jQuery);
(function(b) {
    b.effects.effect.highlight = function(l, n) {
        var m = b(this), e = ["backgroundImage", "backgroundColor", "opacity"], a = b.effects.setMode(m, l.mode || "show"), k = {backgroundColor: m.css("backgroundColor")};
        "hide" === a && (k.opacity = 0), b.effects.save(m, e), m.show().css({backgroundImage: "none", backgroundColor: l.color || "#ffff99"}).animate(k, {queue: !1, duration: l.duration, easing: l.easing, complete: function() {
                "hide" === a && m.hide(), b.effects.restore(m, e), n()
            }})
    }
})(jQuery);
(function(b) {
    b.effects.effect.pulsate = function(u, c) {
        var a, l = b(this), e = b.effects.setMode(l, u.mode || "show"), n = "show" === e, r = "hide" === e, D = n || "hide" === e, h = 2 * (u.times || 5) + (D ? 1 : 0), p = u.duration / h, d = 0, s = l.queue(), o = s.length;
        for ((n || !l.is(":visible")) && (l.css("opacity", 0).show(), d = 1), a = 1; h > a; a++) {
            l.animate({opacity: d}, p, u.easing), d = 1 - d
        }
        l.animate({opacity: d}, p, u.easing), l.queue(function() {
            r && l.hide(), c()
        }), o > 1 && s.splice.apply(s, [1, 0].concat(s.splice(o, h + 1))), l.dequeue()
    }
})(jQuery);
(function(b) {
    b.effects.effect.puff = function(n, r) {
        var p = b(this), e = b.effects.setMode(p, n.mode || "hide"), a = "hide" === e, h = parseInt(n.percent, 10) || 150, o = h / 100, q = {height: p.height(), width: p.width(), outerHeight: p.outerHeight(), outerWidth: p.outerWidth()};
        b.extend(n, {effect: "scale", queue: !1, fade: !0, mode: e, complete: r, percent: a ? h : 100, from: a ? q : {height: q.height * o, width: q.width * o, outerHeight: q.outerHeight * o, outerWidth: q.outerWidth * o}}), p.effect(n)
    }, b.effects.effect.scale = function(c, h) {
        var s = b(this), n = b.extend(!0, {}, c), w = b.effects.setMode(s, c.mode || "effect"), o = parseInt(c.percent, 10) || (0 === parseInt(c.percent, 10) ? 0 : "hide" === w ? 0 : 100), r = c.direction || "both", e = c.origin, l = {height: s.height(), width: s.width(), outerHeight: s.outerHeight(), outerWidth: s.outerWidth()}, a = {y: "horizontal" !== r ? o / 100 : 1, x: "vertical" !== r ? o / 100 : 1};
        n.effect = "size", n.queue = !1, n.complete = h, "effect" !== w && (n.origin = e || ["middle", "center"], n.restore = !0), n.from = c.from || ("show" === w ? {height: 0, width: 0, outerHeight: 0, outerWidth: 0} : l), n.to = {height: l.height * a.y, width: l.width * a.x, outerHeight: l.outerHeight * a.y, outerWidth: l.outerWidth * a.x}, n.fade && ("show" === w && (n.from.opacity = 0, n.to.opacity = 1), "hide" === w && (n.from.opacity = 1, n.to.opacity = 0)), s.effect(n)
    }, b.effects.effect.size = function(h, r) {
        var n, v, c, P = b(this), l = ["position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity"], p = ["position", "top", "bottom", "left", "right", "overflow", "opacity"], s = ["width", "height", "overflow"], e = ["fontSize"], O = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"], f = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"], g = b.effects.setMode(P, h.mode || "effect"), m = h.restore || "effect" !== g, u = h.scale || "both", o = h.origin || ["middle", "center"], Q = P.css("position"), a = m ? l : p, d = {height: 0, width: 0, outerHeight: 0, outerWidth: 0};
        "show" === g && P.show(), n = {height: P.height(), width: P.width(), outerHeight: P.outerHeight(), outerWidth: P.outerWidth()}, "toggle" === h.mode && "show" === g ? (P.from = h.to || d, P.to = h.from || n) : (P.from = h.from || ("show" === g ? d : n), P.to = h.to || ("hide" === g ? d : n)), c = {from: {y: P.from.height / n.height, x: P.from.width / n.width}, to: {y: P.to.height / n.height, x: P.to.width / n.width}}, ("box" === u || "both" === u) && (c.from.y !== c.to.y && (a = a.concat(O), P.from = b.effects.setTransition(P, O, c.from.y, P.from), P.to = b.effects.setTransition(P, O, c.to.y, P.to)), c.from.x !== c.to.x && (a = a.concat(f), P.from = b.effects.setTransition(P, f, c.from.x, P.from), P.to = b.effects.setTransition(P, f, c.to.x, P.to))), ("content" === u || "both" === u) && c.from.y !== c.to.y && (a = a.concat(e).concat(s), P.from = b.effects.setTransition(P, e, c.from.y, P.from), P.to = b.effects.setTransition(P, e, c.to.y, P.to)), b.effects.save(P, a), P.show(), b.effects.createWrapper(P), P.css("overflow", "hidden").css(P.from), o && (v = b.effects.getBaseline(o, n), P.from.top = (n.outerHeight - P.outerHeight()) * v.y, P.from.left = (n.outerWidth - P.outerWidth()) * v.x, P.to.top = (n.outerHeight - P.to.outerHeight) * v.y, P.to.left = (n.outerWidth - P.to.outerWidth) * v.x), P.css(P.from), ("content" === u || "both" === u) && (O = O.concat(["marginTop", "marginBottom"]).concat(e), f = f.concat(["marginLeft", "marginRight"]), s = l.concat(O).concat(f), P.find("*[width]").each(function() {
            var k = b(this), q = {height: k.height(), width: k.width(), outerHeight: k.outerHeight(), outerWidth: k.outerWidth()};
            m && b.effects.save(k, s), k.from = {height: q.height * c.from.y, width: q.width * c.from.x, outerHeight: q.outerHeight * c.from.y, outerWidth: q.outerWidth * c.from.x}, k.to = {height: q.height * c.to.y, width: q.width * c.to.x, outerHeight: q.height * c.to.y, outerWidth: q.width * c.to.x}, c.from.y !== c.to.y && (k.from = b.effects.setTransition(k, O, c.from.y, k.from), k.to = b.effects.setTransition(k, O, c.to.y, k.to)), c.from.x !== c.to.x && (k.from = b.effects.setTransition(k, f, c.from.x, k.from), k.to = b.effects.setTransition(k, f, c.to.x, k.to)), k.css(k.from), k.animate(k.to, h.duration, h.easing, function() {
                m && b.effects.restore(k, s)
            })
        })), P.animate(P.to, {queue: !1, duration: h.duration, easing: h.easing, complete: function() {
                0 === P.to.opacity && P.css("opacity", P.from.opacity), "hide" === g && P.hide(), b.effects.restore(P, a), m || ("static" === Q ? P.css({position: "relative", top: P.to.top, left: P.to.left}) : b.each(["top", "left"], function(k, q) {
                    P.css(q, function(x, A) {
                        var y = parseInt(A, 10), w = k ? P.to.left : P.to.top;
                        return"auto" === A ? w + "px" : y + w + "px"
                    })
                })), b.effects.removeWrapper(P), r()
            }})
    }
})(jQuery);
(function(b) {
    b.effects.effect.shake = function(h, p) {
        var u, v = b(this), c = ["position", "top", "bottom", "left", "right", "height", "width"], e = b.effects.setMode(v, h.mode || "effect"), l = h.direction || "left", o = h.distance || 20, r = h.times || 3, d = 2 * r + 1, M = Math.round(h.duration / d), f = "up" === l || "down" === l ? "top" : "left", g = "up" === l || "left" === l, m = {}, s = {}, n = {}, N = v.queue(), a = N.length;
        for (b.effects.save(v, c), v.show(), b.effects.createWrapper(v), m[f] = (g ? "-=" : "+=") + o, s[f] = (g ? "+=" : "-=") + 2 * o, n[f] = (g ? "-=" : "+=") + 2 * o, v.animate(m, M, h.easing), u = 1; r > u; u++) {
            v.animate(s, M, h.easing).animate(n, M, h.easing)
        }
        v.animate(s, M, h.easing).animate(m, M / 2, h.easing).queue(function() {
            "hide" === e && v.hide(), b.effects.restore(v, c), b.effects.removeWrapper(v), p()
        }), a > 1 && N.splice.apply(N, [1, 0].concat(N.splice(a, d + 1))), v.dequeue()
    }
})(jQuery);
(function(b) {
    b.effects.effect.slide = function(c, h) {
        var s, n = b(this), y = ["position", "top", "bottom", "left", "right", "width", "height"], o = b.effects.setMode(n, c.mode || "show"), r = "show" === o, e = c.direction || "left", l = "up" === e || "down" === e ? "top" : "left", a = "up" === e || "left" === e, u = {};
        b.effects.save(n, y), n.show(), s = c.distance || n["top" === l ? "outerHeight" : "outerWidth"](!0), b.effects.createWrapper(n).css({overflow: "hidden"}), r && n.css(l, a ? isNaN(s) ? "-" + s : -s : s), u[l] = (r ? a ? "+=" : "-=" : a ? "-=" : "+=") + s, n.animate(u, {queue: !1, duration: c.duration, easing: c.easing, complete: function() {
                "hide" === o && n.hide(), b.effects.restore(n, y), b.effects.removeWrapper(n), h()
            }})
    }
})(jQuery);
(function(b) {
    b.effects.effect.transfer = function(a, e) {
        var d = b(this), l = b(a.to), s = "fixed" === l.css("position"), n = b("body"), r = s ? n.scrollTop() : 0, c = s ? n.scrollLeft() : 0, h = l.offset(), u = {top: h.top - r, left: h.left - c, height: l.innerHeight(), width: l.innerWidth()}, o = d.offset(), B = b("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(a.className).css({top: o.top - r, left: o.left - c, height: d.innerHeight(), width: d.innerWidth(), position: s ? "fixed" : "absolute"}).animate(u, a.duration, a.easing, function() {
            B.remove(), e()
        })
    }
})(jQuery);
/*!
 AnythingSlider v1.8.6
 Original by Chris Coyier: http://css-tricks.com
 Get the latest version: https://github.com/ProLoser/AnythingSlider
 
 To use the navigationFormatter function, you must have a function that
 accepts two paramaters, and returns a string of HTML text.
 
 index = integer index (1 based);
 panel = jQuery wrapped LI item this tab references
 @return = Must return a string of HTML/Text
 
 navigationFormatter: function(index, panel){
 return "Panel #" + index; // This would have each tab with the text 'Panel #X' where X = index
 }
 */
(function(b) {
    b.anythingSlider = function(k, a) {
        var h = this, g, l;
        h.el = k;
        h.$el = b(k).addClass("anythingBase").wrap('<div class="anythingSlider"><div class="anythingWindow" /></div>');
        h.$el.data("AnythingSlider", h);
        h.init = function() {
            h.options = g = b.extend({}, b.anythingSlider.defaults, a);
            h.initialized = false;
            if (b.isFunction(g.onBeforeInitialize)) {
                h.$el.bind("before_initialize", g.onBeforeInitialize)
            }
            h.$el.trigger("before_initialize", h);
            b('<!--[if lte IE 8]><script>jQuery("body").addClass("as-oldie");<\/script><![endif]-->').appendTo("body").remove();
            h.$wrapper = h.$el.parent().closest("div.anythingSlider").addClass("anythingSlider-" + g.theme);
            h.$window = h.$el.closest("div.anythingWindow");
            h.win = window;
            h.$win = b(h.win);
            h.$controls = b('<div class="anythingControls"></div>');
            h.$nav = b('<ul class="thumbNav"><li><a><span></span></a></li></ul>');
            h.$startStop = b('<a href="#" class="start-stop"></a>');
            if (g.buildStartStop || g.buildNavigation) {
                h.$controls.appendTo((g.appendControlsTo && b(g.appendControlsTo).length) ? b(g.appendControlsTo) : h.$wrapper)
            }
            if (g.buildNavigation) {
                h.$nav.appendTo((g.appendNavigationTo && b(g.appendNavigationTo).length) ? b(g.appendNavigationTo) : h.$controls)
            }
            if (g.buildStartStop) {
                h.$startStop.appendTo((g.appendStartStopTo && b(g.appendStartStopTo).length) ? b(g.appendStartStopTo) : h.$controls)
            }
            h.runTimes = b(".anythingBase").length;
            h.regex = new RegExp("panel" + h.runTimes + "-(\\d+)", "i");
            if (h.runTimes === 1) {
                h.makeActive()
            }
            h.flag = false;
            h.playing = g.autoPlay;
            h.slideshow = false;
            h.hovered = false;
            h.panelSize = [];
            h.currentPage = h.targetPage = g.startPanel = parseInt(g.startPanel, 10) || 1;
            g.changeBy = parseInt(g.changeBy, 10) || 1;
            l = (g.mode || "h").toLowerCase().match(/(h|v|f)/);
            l = g.vertical ? "v" : (l || ["h"])[0];
            g.mode = l === "v" ? "vertical" : l === "f" ? "fade" : "horizontal";
            if (l === "f") {
                g.showMultiple = 1;
                g.infiniteSlides = false
            }
            h.adj = (g.infiniteSlides) ? 0 : 1;
            h.adjustMultiple = 0;
            h.width = h.$el.width();
            h.height = h.$el.height();
            h.outerPad = [h.$wrapper.innerWidth() - h.$wrapper.width(), h.$wrapper.innerHeight() - h.$wrapper.height()];
            if (g.playRtl) {
                h.$wrapper.addClass("rtl")
            }
            if (g.expand) {
                h.$outer = h.$wrapper.parent();
                h.$window.css({width: "100%", height: "100%"});
                h.checkResize()
            }
            if (g.buildStartStop) {
                h.buildAutoPlay()
            }
            if (g.buildArrows) {
                h.buildNextBackButtons()
            }
            if (!g.autoPlay) {
                g.autoPlayLocked = false
            }
            h.$lastPage = h.$targetPage = h.$currentPage;
            h.updateSlider();
            if (!b.isFunction(b.easing[g.easing])) {
                g.easing = "swing"
            }
            if (g.pauseOnHover) {
                h.$wrapper.hover(function() {
                    if (h.playing) {
                        h.$el.trigger("slideshow_paused", h);
                        h.clearTimer(true)
                    }
                }, function() {
                    if (h.playing) {
                        h.$el.trigger("slideshow_unpaused", h);
                        h.startStop(h.playing, true)
                    }
                })
            }
            h.slideControls(false);
            h.$wrapper.bind("mouseenter mouseleave", function(d) {
                b(this)[d.type === "mouseenter" ? "addClass" : "removeClass"]("anythingSlider-hovered");
                h.hovered = (d.type === "mouseenter") ? true : false;
                h.slideControls(h.hovered)
            });
            b(document).keyup(function(d) {
                if (g.enableKeyboard && h.$wrapper.hasClass("activeSlider") && !d.target.tagName.match("TEXTAREA|INPUT|SELECT")) {
                    if (g.mode !== "vertical" && (d.which === 38 || d.which === 40)) {
                        return
                    }
                    switch (d.which) {
                        case 39:
                        case 40:
                            h.goForward();
                            break;
                        case 37:
                        case 38:
                            h.goBack();
                            break
                        }
                }
            });
            h.currentPage = h.gotoHash() || g.startPanel || 1;
            h.gotoPage(h.currentPage, false, null, -1);
            var c = "slideshow_paused slideshow_unpaused slide_init slide_begin slideshow_stop slideshow_start initialized swf_completed".split(" ");
            b.each("onShowPause onShowUnpause onSlideInit onSlideBegin onShowStop onShowStart onInitialized onSWFComplete".split(" "), function(e, d) {
                if (b.isFunction(g[d])) {
                    h.$el.bind(c[e], g[d])
                }
            });
            if (b.isFunction(g.onSlideComplete)) {
                h.$el.bind("slide_complete", function() {
                    setTimeout(function() {
                        g.onSlideComplete(h)
                    }, 0);
                    return false
                })
            }
            h.initialized = true;
            h.$el.trigger("initialized", h);
            h.startStop(g.autoPlay)
        };
        h.updateSlider = function() {
            h.$el.children(".cloned").remove();
            h.navTextVisible = h.$nav.find("span:first").css("visibility") !== "hidden";
            h.$nav.empty();
            h.currentPage = h.currentPage || 1;
            h.$items = h.$el.children();
            h.pages = h.$items.length;
            h.dir = (g.mode === "vertical") ? "top" : "left";
            g.showMultiple = (g.mode === "vertical") ? 1 : parseInt(g.showMultiple, 10) || 1;
            g.navigationSize = (g.navigationSize === false) ? 0 : parseInt(g.navigationSize, 10) || 0;
            h.$items.find("a").unbind("focus.AnythingSlider").bind("focus.AnythingSlider", function(d) {
                var f = b(this).closest(".panel"), e = h.$items.index(f) + h.adj;
                h.$items.find(".focusedLink").removeClass("focusedLink");
                b(this).addClass("focusedLink");
                h.$window.scrollLeft(0).scrollTop(0);
                if ((e !== -1 && (e >= h.currentPage + g.showMultiple || e < h.currentPage))) {
                    h.gotoPage(e);
                    d.preventDefault()
                }
            });
            if (g.showMultiple > 1) {
                if (g.showMultiple > h.pages) {
                    g.showMultiple = h.pages
                }
                h.adjustMultiple = (g.infiniteSlides && h.pages > 1) ? 0 : g.showMultiple - 1
            }
            h.$controls.add(h.$nav).add(h.$startStop).add(h.$forward).add(h.$back)[(h.pages <= 1) ? "hide" : "show"]();
            if (h.pages > 1) {
                h.buildNavigation()
            }
            if (g.mode !== "fade" && g.infiniteSlides && h.pages > 1) {
                h.$el.prepend(h.$items.filter(":last").clone().addClass("cloned"));
                if (g.showMultiple > 1) {
                    h.$el.append(h.$items.filter(":lt(" + g.showMultiple + ")").clone().addClass("cloned multiple"))
                } else {
                    h.$el.append(h.$items.filter(":first").clone().addClass("cloned"))
                }
                h.$el.find(".cloned").each(function() {
                    b(this).find("a,input,textarea,select,button,area,form").attr({disabled: "disabled", name: ""});
                    b(this).find("[id]").andSelf().removeAttr("id")
                })
            }
            h.$items = h.$el.addClass(g.mode).children().addClass("panel");
            h.setDimensions();
            if (g.resizeContents) {
                h.$items.css("width", h.width);
                h.$wrapper.css("width", h.getDim(h.currentPage)[0]).add(h.$items).css("height", h.height)
            } else {
                h.$win.load(function() {
                    h.setDimensions();
                    c = h.getDim(h.currentPage);
                    h.$wrapper.css({width: c[0], height: c[1]});
                    h.setCurrentPage(h.currentPage, false)
                })
            }
            if (h.currentPage > h.pages) {
                h.currentPage = h.pages
            }
            h.setCurrentPage(h.currentPage, false);
            h.$nav.find("a").eq(h.currentPage - 1).addClass("cur");
            if (g.mode === "fade") {
                var c = h.$items.eq(h.currentPage - 1);
                if (g.resumeOnVisible) {
                    c.css({opacity: 1}).siblings().css({opacity: 0})
                } else {
                    h.$items.css("opacity", 1);
                    c.fadeIn(0).siblings().fadeOut(0)
                }
            }
        };
        h.buildNavigation = function() {
            if (g.buildNavigation && (h.pages > 1)) {
                var n, c, e, f, d;
                h.$items.filter(":not(.cloned)").each(function(m) {
                    d = b("<li/>");
                    e = m + 1;
                    c = (e === 1 ? " first" : "") + (e === h.pages ? " last" : "");
                    n = '<a class="panel' + e + (h.navTextVisible ? '"' : " " + g.tooltipClass + '" title="@"') + ' href="#"><span>@</span></a>';
                    if (b.isFunction(g.navigationFormatter)) {
                        f = g.navigationFormatter(e, b(this));
                        if (typeof (f) === "string") {
                            d.html(n.replace(/@/g, f))
                        } else {
                            d = b("<li/>", f)
                        }
                    } else {
                        d.html(n.replace(/@/g, e))
                    }
                    d.appendTo(h.$nav).addClass(c).data("index", e)
                });
                h.$nav.children("li").bind(g.clickControls, function(m) {
                    if (!h.flag && g.enableNavigation) {
                        h.flag = true;
                        setTimeout(function() {
                            h.flag = false
                        }, 100);
                        h.gotoPage(b(this).data("index"))
                    }
                    m.preventDefault()
                });
                if (!!g.navigationSize && g.navigationSize < h.pages) {
                    if (!h.$controls.find(".anythingNavWindow").length) {
                        h.$nav.before('<ul><li class="prev"><a href="#"><span>' + g.backText + "</span></a></li></ul>").after('<ul><li class="next"><a href="#"><span>' + g.forwardText + "</span></a></li></ul>").wrap('<div class="anythingNavWindow"></div>')
                    }
                    h.navWidths = h.$nav.find("li").map(function() {
                        return b(this).outerWidth(true) + Math.ceil(parseInt(b(this).find("span").css("left"), 10) / 2 || 0)
                    }).get();
                    h.navLeft = h.currentPage;
                    h.$nav.width(h.navWidth(1, h.pages + 1) + 25);
                    h.$controls.find(".anythingNavWindow").width(h.navWidth(1, g.navigationSize + 1)).end().find(".prev,.next").bind(g.clickControls, function(m) {
                        if (!h.flag) {
                            h.flag = true;
                            setTimeout(function() {
                                h.flag = false
                            }, 200);
                            h.navWindow(h.navLeft + g.navigationSize * (b(this).is(".prev") ? -1 : 1))
                        }
                        m.preventDefault()
                    })
                }
            }
        };
        h.navWidth = function(o, p) {
            var e, d = Math.min(o, p), c = Math.max(o, p), f = 0;
            for (e = d; e < c; e++) {
                f += h.navWidths[e - 1] || 0
            }
            return f
        };
        h.navWindow = function(c) {
            if (!!g.navigationSize && g.navigationSize < h.pages && h.navWidths) {
                var d = h.pages - g.navigationSize + 1;
                c = (c <= 1) ? 1 : (c > 1 && c < d) ? c : d;
                if (c !== h.navLeft) {
                    h.$controls.find(".anythingNavWindow").animate({scrollLeft: h.navWidth(1, c), width: h.navWidth(c, c + g.navigationSize)}, {queue: false, duration: g.animationTime});
                    h.navLeft = c
                }
            }
        };
        h.buildNextBackButtons = function() {
            h.$forward = b('<span class="arrow forward"><a href="#"><span>' + g.forwardText + "</span></a></span>");
            h.$back = b('<span class="arrow back"><a href="#"><span>' + g.backText + "</span></a></span>");
            h.$back.bind(g.clickBackArrow, function(c) {
                if (g.enableArrows && !h.flag) {
                    h.flag = true;
                    setTimeout(function() {
                        h.flag = false
                    }, 100);
                    h.goBack()
                }
                c.preventDefault()
            });
            h.$forward.bind(g.clickForwardArrow, function(c) {
                if (g.enableArrows && !h.flag) {
                    h.flag = true;
                    setTimeout(function() {
                        h.flag = false
                    }, 100);
                    h.goForward()
                }
                c.preventDefault()
            });
            h.$back.add(h.$forward).find("a").bind("focusin focusout", function() {
                b(this).toggleClass("hover")
            });
            h.$back.appendTo((g.appendBackTo && b(g.appendBackTo).length) ? b(g.appendBackTo) : h.$wrapper);
            h.$forward.appendTo((g.appendForwardTo && b(g.appendForwardTo).length) ? b(g.appendForwardTo) : h.$wrapper);
            h.arrowWidth = h.$forward.width();
            h.arrowRight = parseInt(h.$forward.css("right"), 10);
            h.arrowLeft = parseInt(h.$back.css("left"), 10)
        };
        h.buildAutoPlay = function() {
            h.$startStop.html("<span>" + (h.playing ? g.stopText : g.startText) + "</span>").bind(g.clickSlideshow, function(c) {
                if (g.enableStartStop) {
                    h.startStop(!h.playing);
                    h.makeActive();
                    if (h.playing && !g.autoPlayDelayed) {
                        h.goForward(true)
                    }
                }
                c.preventDefault()
            }).bind("focusin focusout", function() {
                b(this).toggleClass("hover")
            })
        };
        h.checkResize = function(c) {
            clearTimeout(h.resizeTimer);
            h.resizeTimer = setTimeout(function() {
                var e = h.$outer.width() - h.outerPad[0], d = (h.$outer[0].tagName === "BODY" ? h.$win.height() : h.$outer.height()) - h.outerPad[1];
                if (h.width * g.showMultiple !== e || h.height !== d) {
                    h.setDimensions();
                    h.gotoPage(h.currentPage, h.playing, null, -1)
                }
                if (typeof (c) === "undefined") {
                    h.checkResize()
                }
            }, 500)
        };
        h.setDimensions = function() {
            var f, u, r, d, s = 0, e = {width: "100%", height: "100%"}, v = (g.showMultiple > 1) ? h.width || h.$window.width() / g.showMultiple : h.$window.width(), c = h.$win.width();
            if (g.expand) {
                f = h.$outer.width() - h.outerPad[0];
                h.height = u = h.$outer.height() - h.outerPad[1];
                h.$wrapper.add(h.$window).add(h.$items).css({width: f, height: u});
                h.width = v = (g.showMultiple > 1) ? f / g.showMultiple : f
            }
            h.$items.each(function(m) {
                d = b(this);
                r = d.children();
                if (g.resizeContents) {
                    f = h.width;
                    u = h.height;
                    d.css({width: f, height: u});
                    if (r.length) {
                        if (r[0].tagName === "EMBED") {
                            r.attr(e)
                        }
                        if (r[0].tagName === "OBJECT") {
                            r.find("embed").attr(e)
                        }
                        if (r.length === 1) {
                            r.css(e)
                        }
                    }
                } else {
                    f = d.width() || h.width;
                    if (r.length === 1 && f >= c) {
                        f = (r.width() >= c) ? v : r.width();
                        r.css("max-width", f)
                    }
                    d.css("width", f);
                    u = (r.length === 1 ? r.outerHeight(true) : d.height());
                    if (u <= h.outerPad[1]) {
                        u = h.height
                    }
                    d.css("height", u)
                }
                h.panelSize[m] = [f, u, s];
                s += (g.mode === "vertical") ? u : f
            });
            h.$el.css((g.mode === "vertical" ? "height" : "width"), g.mode === "fade" ? h.width : s)
        };
        h.getDim = function(c) {
            var e, f = h.width, d = h.height;
            if (h.pages < 1 || isNaN(c)) {
                return[f, d]
            }
            c = (g.infiniteSlides && h.pages > 1) ? c : c - 1;
            e = h.panelSize[c];
            if (e) {
                f = e[0] || f;
                d = e[1] || d
            }
            if (g.showMultiple > 1) {
                for (e = 1; e < g.showMultiple; e++) {
                    f += h.panelSize[(c + e)][0];
                    d = Math.max(d, h.panelSize[c + e][1])
                }
            }
            return[f, d]
        };
        h.goForward = function(c) {
            h.gotoPage(h[g.allowRapidChange ? "targetPage" : "currentPage"] + g.changeBy * (g.playRtl ? -1 : 1), c)
        };
        h.goBack = function(c) {
            h.gotoPage(h[g.allowRapidChange ? "targetPage" : "currentPage"] + g.changeBy * (g.playRtl ? 1 : -1), c)
        };
        h.gotoPage = function(e, f, c, d) {
            if (f !== true) {
                f = false;
                h.startStop(false);
                h.makeActive()
            }
            if (/^[#|.]/.test(e) && b(e).length) {
                e = b(e).closest(".panel").index() + h.adj
            }
            if (g.changeBy !== 1) {
                var n = h.pages - h.adjustMultiple;
                if (e < 1) {
                    e = g.stopAtEnd ? 1 : (g.infiniteSlides ? h.pages + e : (g.showMultiple > 1 - e ? 1 : n))
                }
                if (e > h.pages) {
                    e = g.stopAtEnd ? h.pages : (g.showMultiple > 1 - e ? 1 : e -= n)
                } else {
                    if (e >= n) {
                        e = n
                    }
                }
            }
            if (h.pages <= 1) {
                return
            }
            h.$lastPage = h.$currentPage;
            if (typeof (e) !== "number") {
                e = parseInt(e, 10) || g.startPanel;
                h.setCurrentPage(e)
            }
            if (f && g.isVideoPlaying(h)) {
                return
            }
            h.exactPage = e;
            if (e > h.pages + 1 - h.adj) {
                e = (!g.infiniteSlides && !g.stopAtEnd) ? 1 : h.pages
            }
            if (e < h.adj) {
                e = (!g.infiniteSlides && !g.stopAtEnd) ? h.pages : 1
            }
            if (!g.infiniteSlides) {
                h.exactPage = e
            }
            h.currentPage = (e > h.pages) ? h.pages : (e < 1) ? 1 : h.currentPage;
            h.$currentPage = h.$items.eq(h.currentPage - h.adj);
            h.targetPage = (e === 0) ? h.pages : (e > h.pages) ? 1 : e;
            h.$targetPage = h.$items.eq(h.targetPage - h.adj);
            d = typeof d !== "undefined" ? d : g.animationTime;
            if (d >= 0) {
                h.$el.trigger("slide_init", h)
            }
            if (d > 0) {
                h.slideControls(true)
            }
            if (g.buildNavigation) {
                h.setNavigation(h.targetPage)
            }
            if (f !== true) {
                f = false
            }
            if (!f || (g.stopAtEnd && e === h.pages)) {
                h.startStop(false)
            }
            if (d >= 0) {
                h.$el.trigger("slide_begin", h)
            }
            setTimeout(function(m) {
                var p, r = true;
                if (g.allowRapidChange) {
                    h.$wrapper.add(h.$el).add(h.$items).stop(true, true)
                }
                if (!g.resizeContents) {
                    p = h.getDim(e);
                    m = {};
                    if (h.$wrapper.width() !== p[0]) {
                        m.width = p[0] || h.width;
                        r = false
                    }
                    if (h.$wrapper.height() !== p[1]) {
                        m.height = p[1] || h.height;
                        r = false
                    }
                    if (!r) {
                        h.$wrapper.filter(":not(:animated)").animate(m, {queue: false, duration: (d < 0 ? 0 : d), easing: g.easing})
                    }
                }
                if (g.mode === "fade") {
                    if (h.$lastPage[0] !== h.$targetPage[0]) {
                        h.fadeIt(h.$lastPage, 0, d);
                        h.fadeIt(h.$targetPage, 1, d, function() {
                            h.endAnimation(e, c, d)
                        })
                    } else {
                        h.endAnimation(e, c, d)
                    }
                } else {
                    m = {};
                    m[h.dir] = -h.panelSize[(g.infiniteSlides && h.pages > 1) ? e : e - 1][2];
                    h.$el.filter(":not(:animated)").animate(m, {queue: false, duration: d < 0 ? 0 : d, easing: g.easing, complete: function() {
                            h.endAnimation(e, c, d)
                        }})
                }
            }, parseInt(g.delayBeforeAnimate, 10) || 0)
        };
        h.endAnimation = function(e, c, d) {
            if (e === 0) {
                h.$el.css(h.dir, g.mode === "fade" ? 0 : -h.panelSize[h.pages][2]);
                e = h.pages
            } else {
                if (e > h.pages) {
                    h.$el.css(h.dir, g.mode === "fade" ? 0 : -h.panelSize[1][2]);
                    e = 1
                }
            }
            h.exactPage = e;
            h.setCurrentPage(e, false);
            if (g.mode === "fade") {
                h.fadeIt(h.$items.not(":eq(" + (e - h.adj) + ")"), 0, 0)
            }
            if (!h.hovered) {
                h.slideControls(false)
            }
            if (g.hashTags) {
                h.setHash(e)
            }
            if (d >= 0) {
                h.$el.trigger("slide_complete", h)
            }
            if (typeof c === "function") {
                c(h)
            }
            if (g.autoPlayLocked && !h.playing) {
                setTimeout(function() {
                    h.startStop(true)
                }, g.resumeDelay - (g.autoPlayDelayed ? g.delay : 0))
            }
        };
        h.fadeIt = function(e, n, d, c) {
            var f = d < 0 ? 0 : d;
            if (g.resumeOnVisible) {
                e.filter(":not(:animated)").fadeTo(f, n, c)
            } else {
                e.filter(":not(:animated)")[n === 0 ? "fadeOut" : "fadeIn"](f, c)
            }
        };
        h.setCurrentPage = function(d, e) {
            d = parseInt(d, 10);
            if (h.pages < 1 || d === 0 || isNaN(d)) {
                return
            }
            if (d > h.pages + 1 - h.adj) {
                d = h.pages - h.adj
            }
            if (d < h.adj) {
                d = 1
            }
            if (g.buildArrows && !g.infiniteSlides && g.stopAtEnd) {
                h.$forward[d === h.pages - h.adjustMultiple ? "addClass" : "removeClass"]("disabled");
                h.$back[d === 1 ? "addClass" : "removeClass"]("disabled");
                if (d === h.pages && h.playing) {
                    h.startStop()
                }
            }
            if (!e) {
                var c = h.getDim(d);
                h.$wrapper.css({width: c[0], height: c[1]}).add(h.$window).scrollLeft(0).scrollTop(0);
                h.$el.css(h.dir, g.mode === "fade" ? 0 : -h.panelSize[(g.infiniteSlides && h.pages > 1) ? d : d - 1][2])
            }
            h.currentPage = d;
            h.$currentPage = h.$items.removeClass("activePage").eq(d - h.adj).addClass("activePage");
            if (g.buildNavigation) {
                h.setNavigation(d)
            }
        };
        h.setNavigation = function(c) {
            h.$nav.find(".cur").removeClass("cur").end().find("a").eq(c - 1).addClass("cur")
        };
        h.makeActive = function() {
            if (!h.$wrapper.hasClass("activeSlider")) {
                b(".activeSlider").removeClass("activeSlider");
                h.$wrapper.addClass("activeSlider")
            }
        };
        h.gotoHash = function() {
            var e = h.win.location.hash, f = e.indexOf("&"), c = e.match(h.regex);
            if (c === null && !/^#&/.test(e) && !/#!?\//.test(e)) {
                e = e.substring(0, (f >= 0 ? f : e.length));
                try {
                    c = (b(e).length && b(e).closest(".anythingBase")[0] === h.el) ? h.$items.index(b(e).closest(".panel")) + h.adj : null
                } catch (d) {
                    c = null
                }
            } else {
                if (c !== null) {
                    c = (g.hashTags) ? parseInt(c[1], 10) : null
                }
            }
            return c
        };
        h.setHash = function(c) {
            var d = "panel" + h.runTimes + "-", e = h.win.location.hash;
            if (typeof e !== "undefined") {
                h.win.location.hash = (e.indexOf(d) > 0) ? e.replace(h.regex, d + c) : e + "&" + d + c
            }
        };
        h.slideControls = function(o) {
            var e = (o) ? "slideDown" : "slideUp", c = (o) ? 0 : g.animationTime, d = (o) ? g.animationTime : 0, p = (o) ? 1 : 0, f = (o) ? 0 : 1;
            if (g.toggleControls) {
                h.$controls.stop(true, true).delay(c)[e](g.animationTime / 2).delay(d)
            }
            if (g.buildArrows && g.toggleArrows) {
                if (!h.hovered && h.playing) {
                    f = 1;
                    p = 0
                }
                h.$forward.stop(true, true).delay(c).animate({right: h.arrowRight + (f * h.arrowWidth), opacity: p}, g.animationTime / 2);
                h.$back.stop(true, true).delay(c).animate({left: h.arrowLeft + (f * h.arrowWidth), opacity: p}, g.animationTime / 2)
            }
        };
        h.clearTimer = function(c) {
            if (h.timer) {
                h.win.clearInterval(h.timer);
                if (!c && h.slideshow) {
                    h.$el.trigger("slideshow_stop", h);
                    h.slideshow = false
                }
            }
        };
        h.startStop = function(c, d) {
            if (c !== true) {
                c = false
            }
            h.playing = c;
            if (c && !d) {
                h.$el.trigger("slideshow_start", h);
                h.slideshow = true
            }
            if (g.buildStartStop) {
                h.$startStop.toggleClass("playing", c).find("span").html(c ? g.stopText : g.startText);
                if (h.$startStop.find("span").css("visibility") === "hidden") {
                    h.$startStop.addClass(g.tooltipClass).attr("title", c ? g.stopText : g.startText)
                }
            }
            if (c) {
                h.clearTimer(true);
                h.timer = h.win.setInterval(function() {
                    if (!g.isVideoPlaying(h)) {
                        h.goForward(true)
                    } else {
                        if (!g.resumeOnVideoEnd) {
                            h.startStop()
                        }
                    }
                }, g.delay)
            } else {
                h.clearTimer()
            }
        };
        h.init()
    };
    b.anythingSlider.defaults = {theme: "default", mode: "horiz", expand: false, resizeContents: true, showMultiple: false, easing: "swing", buildArrows: true, buildNavigation: true, buildStartStop: true, toggleArrows: false, toggleControls: false, startText: "Start", stopText: "Stop", forwardText: "&raquo;", backText: "&laquo;", tooltipClass: "tooltip", enableArrows: true, enableNavigation: true, enableStartStop: true, enableKeyboard: true, startPanel: 1, changeBy: 1, hashTags: true, infiniteSlides: true, navigationFormatter: null, navigationSize: false, autoPlay: false, autoPlayLocked: false, autoPlayDelayed: false, pauseOnHover: true, stopAtEnd: false, playRtl: false, delay: 3000, resumeDelay: 15000, animationTime: 600, delayBeforeAnimate: 0, clickForwardArrow: "click", clickBackArrow: "click", clickControls: "click focusin", clickSlideshow: "click", allowRapidChange: false, resumeOnVideoEnd: true, resumeOnVisible: true, addWmodeToObject: "opaque", isVideoPlaying: function(a) {
            return false
        }};
    b.fn.anythingSlider = function(a, d) {
        return this.each(function() {
            var c, f = b(this).data("AnythingSlider");
            if ((typeof (a)).match("object|undefined")) {
                if (!f) {
                    (new b.anythingSlider(this, a))
                } else {
                    f.updateSlider()
                }
            } else {
                if (/\d/.test(a) && !isNaN(a) && f) {
                    c = (typeof (a) === "number") ? a : parseInt(b.trim(a), 10);
                    if (c >= 1 && c <= f.pages) {
                        f.gotoPage(c, false, d)
                    }
                } else {
                    if (/^[#|.]/.test(a) && b(a).length) {
                        f.gotoPage(a, false, d)
                    }
                }
            }
        })
    }
})(jQuery);
/*!
 * jQuery BBQ: Back Button & Query Library - v1.4pre - 1/15/2013
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010-2013 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(M, Y) {
    var an, ah = Array.prototype.slice, U = decodeURIComponent, av = M.param, al, at, ai, ad, au = M.bbq = M.bbq || {}, W, af, ak, aq = M.event.special, ar = "hashchange", X = "querystring", Q = "fragment", ab = "elemUrlAttr", aj = "href", ag = "src", ac = /^.*\?|#.*$/g, S, N, ao, am, V, R = {};
    function O(a) {
        return typeof a === "string"
    }
    function T(a) {
        var b = ah.call(arguments, 1);
        return function() {
            return a.apply(this, b.concat(ah.call(arguments)))
        }
    }
    function ae(a) {
        return a.replace(N, "$2")
    }
    function aa(a) {
        return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/, "$1")
    }
    function ap(h, c, l, g, k) {
        var a, d, e, b, f;
        if (g !== an) {
            e = l.match(h ? N : /^([^#?]*)\??([^#]*)(#?.*)/);
            f = e[3] || "";
            if (k === 2 && O(g)) {
                d = g.replace(h ? S : ac, "")
            } else {
                b = ai(e[2]);
                g = O(g) ? ai[h ? Q : X](g) : g;
                d = k === 2 ? g : k === 1 ? M.extend({}, g, b) : M.extend({}, b, g);
                d = al(d);
                if (h) {
                    d = d.replace(ao, U)
                }
            }
            a = e[1] + (h ? V : d || !e[1] ? "?" : "") + d + f
        } else {
            a = c(l !== an ? l : location.href)
        }
        return a
    }
    av[X] = T(ap, 0, aa);
    av[Q] = at = T(ap, 1, ae);
    av.sorted = al = function(c, b) {
        var d = [], a = {};
        M.each(av(c, b).split("&"), function(e, h) {
            var f = h.replace(/(?:%5B|=).*$/, ""), g = a[f];
            if (!g) {
                g = a[f] = [];
                d.push(f)
            }
            g.push(h)
        });
        return M.map(d.sort(), function(e) {
            return a[e]
        }).join("&")
    };
    at.noEscape = function(a) {
        a = a || "";
        var b = M.map(a.split(""), encodeURIComponent);
        ao = new RegExp(b.join("|"), "g")
    };
    at.noEscape(",/");
    at.ajaxCrawlable = function(a) {
        if (a !== an) {
            if (a) {
                S = /^.*(?:#!|#)/;
                N = /^([^#]*)(?:#!|#)?(.*)$/;
                V = "#!"
            } else {
                S = /^.*#/;
                N = /^([^#]*)#?(.*)$/;
                V = "#"
            }
            am = !!a
        }
        return am
    };
    at.ajaxCrawlable(0);
    M.deparam = ai = function(a, d) {
        var b = {}, c = {"true": !0, "false": !1, "null": null};
        M.each(a.replace(/\+/g, " ").split("&"), function(m, f) {
            var n = f.split("="), g = U(n[0]), o, h = b, l = 0, e = g.split("]["), k = e.length - 1;
            if (/\[/.test(e[0]) && /\]$/.test(e[k])) {
                e[k] = e[k].replace(/\]$/, "");
                e = e.shift().split("[").concat(e);
                k = e.length - 1
            } else {
                k = 0
            }
            if (n.length === 2) {
                o = U(n[1]);
                if (d) {
                    o = o && !isNaN(o) ? +o : o === "undefined" ? an : c[o] !== an ? c[o] : o
                }
                if (k) {
                    for (; l <= k; l++) {
                        g = e[l] === "" ? h.length : e[l];
                        h = h[g] = l < k ? h[g] || (e[l + 1] && isNaN(e[l + 1]) ? {} : []) : o
                    }
                } else {
                    if (M.isArray(b[g])) {
                        b[g].push(o)
                    } else {
                        if (b[g] !== an) {
                            b[g] = [b[g], o]
                        } else {
                            b[g] = o
                        }
                    }
                }
            } else {
                if (g) {
                    b[g] = d ? an : ""
                }
            }
        });
        return b
    };
    function Z(a, c, b) {
        if (c === an || typeof c === "boolean") {
            b = c;
            c = av[a ? Q : X]()
        } else {
            c = O(c) ? c.replace(a ? S : ac, "") : c
        }
        return ai(c, b)
    }
    ai[X] = T(Z, 0);
    ai[Q] = ad = T(Z, 1);
    M[ab] || (M[ab] = function(a) {
        return M.extend(R, a)
    })({a: aj, base: aj, iframe: ag, img: ag, input: ag, form: "action", link: aj, script: ag});
    ak = M[ab];
    function P(a, c, b, d) {
        if (!O(b) && typeof b !== "object") {
            d = b;
            b = c;
            c = an
        }
        return this.each(function() {
            var e = M(this), g = c || ak()[(this.nodeName || "").toLowerCase()] || "", f = g && e.attr(g) || "";
            e.attr(g, av[a](f, b, d))
        })
    }
    M.fn[X] = T(P, X);
    M.fn[Q] = T(P, Q);
    au.pushState = W = function(a, d) {
        if (O(a) && /^#/.test(a) && d === an) {
            d = 2
        }
        var b = a !== an, c = at(location.href, b ? a : {}, b ? d : 2);
        location.href = c
    };
    au.getState = af = function(b, a) {
        return b === an || typeof b === "boolean" ? ad(b) : ad(a)[b]
    };
    au.removeState = function(b) {
        var a = {};
        if (b !== an) {
            a = af();
            M.each(M.isArray(b) ? b : arguments, function(c, d) {
                delete a[d]
            })
        }
        W(a, 2)
    };
    aq[ar] = M.extend(aq[ar], {add: function(c) {
            var a;
            function b(d) {
                var e = d[Q] = at();
                d.getState = function(g, f) {
                    return g === an || typeof g === "boolean" ? ai(e, g) : ai(e, f)[g]
                };
                a.apply(this, arguments)
            }
            if (M.isFunction(c)) {
                a = c;
                return b
            } else {
                a = c.handler;
                c.handler = b
            }
        }})
})(jQuery, this);
/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(m, q, u) {
    var s = "hashchange", n = document, p, o = m.event.special, l = n.documentMode, r = "on" + s in q && (l === u || l > 7);
    function v(a) {
        a = a || location.href;
        return"#" + a.replace(/^[^#]*#?(.*)$/, "$1")
    }
    m.fn[s] = function(a) {
        return a ? this.bind(s, a) : this.trigger(s)
    };
    m.fn[s].delay = 50;
    o[s] = m.extend(o[s], {setup: function() {
            if (r) {
                return false
            }
            m(p.start)
        }, teardown: function() {
            if (r) {
                return false
            }
            m(p.stop)
        }});
    p = (function() {
        var b = {}, c, f = v(), a = function(h) {
            return h
        }, g = a, d = a;
        b.start = function() {
            c || e()
        };
        b.stop = function() {
            c && clearTimeout(c);
            c = u
        };
        function e() {
            var h = v(), k = d(f);
            if (h !== f) {
                g(f = h, k);
                m(q).trigger(s)
            } else {
                if (k !== f) {
                    location.href = location.href.replace(/#.*/, "") + k
                }
            }
            c = setTimeout(e, m.fn[s].delay)
        }
        (navigator.userAgent.match(/MSIE/i) !== null) && !r && (function() {
            var k, h;
            b.start = function() {
                if (!k) {
                    h = m.fn[s].src;
                    h = h && h + v();
                    k = m('<iframe tabindex="-1" title="empty"/>').hide().one("load", function() {
                        h || g(v());
                        e()
                    }).attr("src", h || "javascript:0").insertAfter("body")[0].contentWindow;
                    n.onpropertychange = function() {
                        try {
                            if (event.propertyName === "title") {
                                k.document.title = n.title
                            }
                        } catch (w) {
                        }
                    }
                }
            };
            b.stop = a;
            d = function() {
                return v(k.location.href)
            };
            g = function(D, C) {
                var A = k.document, B = m.fn[s].domain;
                if (D !== C) {
                    A.title = n.title;
                    A.open();
                    B && A.write('<script>document.domain="' + B + '"<\/script>');
                    A.close();
                    k.location.hash = D
                }
            }
        })();
        return b
    })()
})(jQuery, this);
(function(k) {
    var l = "bgPos";
    var m = !!k.Tween;
    if (m) {
        k.Tween.propHooks.backgroundPosition = {get: function(a) {
                return g(k(a.elem).css(a.prop))
            }, set: function(a) {
                n(a)
            }}
    } else {
        k.fx.step.backgroundPosition = n
    }
    function g(b) {
        var a = (b || "").split(/ /);
        var d = {center: "50%", left: "0%", right: "100%", top: "0%", bottom: "100%"};
        var c = function(e) {
            var f = (d[a[e]] || a[e] || "50%").match(/^([+-]=)?([+-]?\d+(\.\d*)?)(.*)$/);
            a[e] = [f[1], parseFloat(f[2]), f[4] || "px"]
        };
        if (a.length == 1 && k.inArray(a[0], ["top", "bottom"]) > -1) {
            a[1] = a[0];
            a[0] = "50%"
        }
        c(0);
        c(1);
        return a
    }
    function n(a) {
        if (!a.set) {
            h(a)
        }
        k(a.elem).css("background-position", ((a.pos * (a.end[0][1] - a.start[0][1]) + a.start[0][1]) + a.end[0][2]) + " " + ((a.pos * (a.end[1][1] - a.start[1][1]) + a.start[1][1]) + a.end[1][2]))
    }
    function h(b) {
        var c = k(b.elem);
        var a = c.data(l);
        c.css("backgroundPosition", a);
        b.start = g(a);
        b.end = g(k.fn.jquery >= "1.6" ? b.end : b.options.curAnim.backgroundPosition || b.options.curAnim["background-position"]);
        for (var d = 0; d < b.end.length; d++) {
            if (b.end[d][0]) {
                b.end[d][1] = b.start[d][1] + (b.end[d][0] == "-=" ? -1 : +1) * b.end[d][1]
            }
        }
        b.set = true
    }
    k.fn.animate = function(a) {
        return function(b, e, c, d) {
            if (b.backgroundPosition || b["background-position"]) {
                this.data(l, this.css("backgroundPosition") || "left top")
            }
            return a.apply(this, [b, e, c, d])
        }
    }(k.fn.animate)
})(jQuery);
(function(v) {
    v.colorpicker = new function() {
        this.regional = [];
        this.regional[""] = {ok: "OK", cancel: "Cancel", none: "None", button: "Color", title: "Pick a color", transparent: "Transparent", hsvH: "H", hsvS: "S", hsvV: "V", rgbR: "R", rgbG: "G", rgbB: "B", labL: "L", labA: "a", labB: "b", hslH: "H", hslS: "S", hslL: "L", cmykC: "C", cmykM: "M", cmykY: "Y", cmykK: "K", alphaA: "A"};
        this.swatches = [];
        this.swatches.html = {black: {r: 0, g: 0, b: 0}, dimgray: {r: 0.4117647058823529, g: 0.4117647058823529, b: 0.4117647058823529}, gray: {r: 0.5019607843137255, g: 0.5019607843137255, b: 0.5019607843137255}, darkgray: {r: 0.6627450980392157, g: 0.6627450980392157, b: 0.6627450980392157}, silver: {r: 0.7529411764705882, g: 0.7529411764705882, b: 0.7529411764705882}, lightgrey: {r: 0.8274509803921568, g: 0.8274509803921568, b: 0.8274509803921568}, gainsboro: {r: 0.8627450980392157, g: 0.8627450980392157, b: 0.8627450980392157}, whitesmoke: {r: 0.9607843137254902, g: 0.9607843137254902, b: 0.9607843137254902}, white: {r: 1, g: 1, b: 1}, rosybrown: {r: 0.7372549019607844, g: 0.5607843137254902, b: 0.5607843137254902}, indianred: {r: 0.803921568627451, g: 0.3607843137254902, b: 0.3607843137254902}, brown: {r: 0.6470588235294118, g: 0.16470588235294117, b: 0.16470588235294117}, firebrick: {r: 0.6980392156862745, g: 0.13333333333333333, b: 0.13333333333333333}, lightcoral: {r: 0.9411764705882353, g: 0.5019607843137255, b: 0.5019607843137255}, maroon: {r: 0.5019607843137255, g: 0, b: 0}, darkred: {r: 0.5450980392156862, g: 0, b: 0}, red: {r: 1, g: 0, b: 0}, snow: {r: 1, g: 0.9803921568627451, b: 0.9803921568627451}, salmon: {r: 0.9803921568627451, g: 0.5019607843137255, b: 0.4470588235294118}, mistyrose: {r: 1, g: 0.8941176470588236, b: 0.8823529411764706}, tomato: {r: 1, g: 0.38823529411764707, b: 0.2784313725490196}, darksalmon: {r: 0.9137254901960784, g: 0.5882352941176471, b: 0.47843137254901963}, orangered: {r: 1, g: 0.27058823529411763, b: 0}, coral: {r: 1, g: 0.4980392156862745, b: 0.3137254901960784}, lightsalmon: {r: 1, g: 0.6274509803921569, b: 0.47843137254901963}, sienna: {r: 0.6274509803921569, g: 0.3215686274509804, b: 0.17647058823529413}, seashell: {r: 1, g: 0.9607843137254902, b: 0.9333333333333333}, chocolate: {r: 0.8235294117647058, g: 0.4117647058823529, b: 0.11764705882352941}, saddlebrown: {r: 0.5450980392156862, g: 0.27058823529411763, b: 0.07450980392156863}, sandybrown: {r: 0.9568627450980393, g: 0.6431372549019608, b: 0.3764705882352941}, peachpuff: {r: 1, g: 0.8549019607843137, b: 0.7254901960784313}, peru: {r: 0.803921568627451, g: 0.5215686274509804, b: 0.24705882352941178}, linen: {r: 0.9803921568627451, g: 0.9411764705882353, b: 0.9019607843137255}, darkorange: {r: 1, g: 0.5490196078431373, b: 0}, bisque: {r: 1, g: 0.8941176470588236, b: 0.7686274509803922}, burlywood: {r: 0.8705882352941177, g: 0.7215686274509804, b: 0.5294117647058824}, tan: {r: 0.8235294117647058, g: 0.7058823529411765, b: 0.5490196078431373}, antiquewhite: {r: 0.9803921568627451, g: 0.9215686274509803, b: 0.8431372549019608}, navajowhite: {r: 1, g: 0.8705882352941177, b: 0.6784313725490196}, blanchedalmond: {r: 1, g: 0.9215686274509803, b: 0.803921568627451}, papayawhip: {r: 1, g: 0.9372549019607843, b: 0.8352941176470589}, orange: {r: 1, g: 0.6470588235294118, b: 0}, moccasin: {r: 1, g: 0.8941176470588236, b: 0.7098039215686275}, wheat: {r: 0.9607843137254902, g: 0.8705882352941177, b: 0.7019607843137254}, oldlace: {r: 0.9921568627450981, g: 0.9607843137254902, b: 0.9019607843137255}, floralwhite: {r: 1, g: 0.9803921568627451, b: 0.9411764705882353}, goldenrod: {r: 0.8549019607843137, g: 0.6470588235294118, b: 0.12549019607843137}, darkgoldenrod: {r: 0.7215686274509804, g: 0.5254901960784314, b: 0.043137254901960784}, cornsilk: {r: 1, g: 0.9725490196078431, b: 0.8627450980392157}, gold: {r: 1, g: 0.8431372549019608, b: 0}, palegoldenrod: {r: 0.9333333333333333, g: 0.9098039215686274, b: 0.6666666666666666}, khaki: {r: 0.9411764705882353, g: 0.9019607843137255, b: 0.5490196078431373}, lemonchiffon: {r: 1, g: 0.9803921568627451, b: 0.803921568627451}, darkkhaki: {r: 0.7411764705882353, g: 0.7176470588235294, b: 0.4196078431372549}, beige: {r: 0.9607843137254902, g: 0.9607843137254902, b: 0.8627450980392157}, lightgoldenrodyellow: {r: 0.9803921568627451, g: 0.9803921568627451, b: 0.8235294117647058}, olive: {r: 0.5019607843137255, g: 0.5019607843137255, b: 0}, yellow: {r: 1, g: 1, b: 0}, lightyellow: {r: 1, g: 1, b: 0.8784313725490196}, ivory: {r: 1, g: 1, b: 0.9411764705882353}, olivedrab: {r: 0.4196078431372549, g: 0.5568627450980392, b: 0.13725490196078433}, yellowgreen: {r: 0.6039215686274509, g: 0.803921568627451, b: 0.19607843137254902}, darkolivegreen: {r: 0.3333333333333333, g: 0.4196078431372549, b: 0.1843137254901961}, greenyellow: {r: 0.6784313725490196, g: 1, b: 0.1843137254901961}, lawngreen: {r: 0.48627450980392156, g: 0.9882352941176471, b: 0}, chartreuse: {r: 0.4980392156862745, g: 1, b: 0}, darkseagreen: {r: 0.5607843137254902, g: 0.7372549019607844, b: 0.5607843137254902}, forestgreen: {r: 0.13333333333333333, g: 0.5450980392156862, b: 0.13333333333333333}, limegreen: {r: 0.19607843137254902, g: 0.803921568627451, b: 0.19607843137254902}, lightgreen: {r: 0.5647058823529412, g: 0.9333333333333333, b: 0.5647058823529412}, palegreen: {r: 0.596078431372549, g: 0.984313725490196, b: 0.596078431372549}, darkgreen: {r: 0, g: 0.39215686274509803, b: 0}, green: {r: 0, g: 0.5019607843137255, b: 0}, lime: {r: 0, g: 1, b: 0}, honeydew: {r: 0.9411764705882353, g: 1, b: 0.9411764705882353}, mediumseagreen: {r: 0.23529411764705882, g: 0.7019607843137254, b: 0.44313725490196076}, seagreen: {r: 0.1803921568627451, g: 0.5450980392156862, b: 0.3411764705882353}, springgreen: {r: 0, g: 1, b: 0.4980392156862745}, mintcream: {r: 0.9607843137254902, g: 1, b: 0.9803921568627451}, mediumspringgreen: {r: 0, g: 0.9803921568627451, b: 0.6039215686274509}, mediumaquamarine: {r: 0.4, g: 0.803921568627451, b: 0.6666666666666666}, aquamarine: {r: 0.4980392156862745, g: 1, b: 0.8313725490196079}, turquoise: {r: 0.25098039215686274, g: 0.8784313725490196, b: 0.8156862745098039}, lightseagreen: {r: 0.12549019607843137, g: 0.6980392156862745, b: 0.6666666666666666}, mediumturquoise: {r: 0.2823529411764706, g: 0.8196078431372549, b: 0.8}, darkslategray: {r: 0.1843137254901961, g: 0.30980392156862746, b: 0.30980392156862746}, paleturquoise: {r: 0.6862745098039216, g: 0.9333333333333333, b: 0.9333333333333333}, teal: {r: 0, g: 0.5019607843137255, b: 0.5019607843137255}, darkcyan: {r: 0, g: 0.5450980392156862, b: 0.5450980392156862}, darkturquoise: {r: 0, g: 0.807843137254902, b: 0.8196078431372549}, aqua: {r: 0, g: 1, b: 1}, cyan: {r: 0, g: 1, b: 1}, lightcyan: {r: 0.8784313725490196, g: 1, b: 1}, azure: {r: 0.9411764705882353, g: 1, b: 1}, cadetblue: {r: 0.37254901960784315, g: 0.6196078431372549, b: 0.6274509803921569}, powderblue: {r: 0.6901960784313725, g: 0.8784313725490196, b: 0.9019607843137255}, lightblue: {r: 0.6784313725490196, g: 0.8470588235294118, b: 0.9019607843137255}, deepskyblue: {r: 0, g: 0.7490196078431373, b: 1}, skyblue: {r: 0.5294117647058824, g: 0.807843137254902, b: 0.9215686274509803}, lightskyblue: {r: 0.5294117647058824, g: 0.807843137254902, b: 0.9803921568627451}, steelblue: {r: 0.27450980392156865, g: 0.5098039215686274, b: 0.7058823529411765}, aliceblue: {r: 0.9411764705882353, g: 0.9725490196078431, b: 1}, dodgerblue: {r: 0.11764705882352941, g: 0.5647058823529412, b: 1}, slategray: {r: 0.4392156862745098, g: 0.5019607843137255, b: 0.5647058823529412}, lightslategray: {r: 0.4666666666666667, g: 0.5333333333333333, b: 0.6}, lightsteelblue: {r: 0.6901960784313725, g: 0.7686274509803922, b: 0.8705882352941177}, cornflowerblue: {r: 0.39215686274509803, g: 0.5843137254901961, b: 0.9294117647058824}, royalblue: {r: 0.2549019607843137, g: 0.4117647058823529, b: 0.8823529411764706}, midnightblue: {r: 0.09803921568627451, g: 0.09803921568627451, b: 0.4392156862745098}, lavender: {r: 0.9019607843137255, g: 0.9019607843137255, b: 0.9803921568627451}, navy: {r: 0, g: 0, b: 0.5019607843137255}, darkblue: {r: 0, g: 0, b: 0.5450980392156862}, mediumblue: {r: 0, g: 0, b: 0.803921568627451}, blue: {r: 0, g: 0, b: 1}, ghostwhite: {r: 0.9725490196078431, g: 0.9725490196078431, b: 1}, darkslateblue: {r: 0.2823529411764706, g: 0.23921568627450981, b: 0.5450980392156862}, slateblue: {r: 0.41568627450980394, g: 0.35294117647058826, b: 0.803921568627451}, mediumslateblue: {r: 0.4823529411764706, g: 0.40784313725490196, b: 0.9333333333333333}, mediumpurple: {r: 0.5764705882352941, g: 0.4392156862745098, b: 0.8588235294117647}, blueviolet: {r: 0.5411764705882353, g: 0.16862745098039217, b: 0.8862745098039215}, indigo: {r: 0.29411764705882354, g: 0, b: 0.5098039215686274}, darkorchid: {r: 0.6, g: 0.19607843137254902, b: 0.8}, darkviolet: {r: 0.5803921568627451, g: 0, b: 0.8274509803921568}, mediumorchid: {r: 0.7294117647058823, g: 0.3333333333333333, b: 0.8274509803921568}, thistle: {r: 0.8470588235294118, g: 0.7490196078431373, b: 0.8470588235294118}, plum: {r: 0.8666666666666667, g: 0.6274509803921569, b: 0.8666666666666667}, violet: {r: 0.9333333333333333, g: 0.5098039215686274, b: 0.9333333333333333}, purple: {r: 0.5019607843137255, g: 0, b: 0.5019607843137255}, darkmagenta: {r: 0.5450980392156862, g: 0, b: 0.5450980392156862}, magenta: {r: 1, g: 0, b: 1}, fuchsia: {r: 1, g: 0, b: 1}, orchid: {r: 0.8549019607843137, g: 0.4392156862745098, b: 0.8392156862745098}, mediumvioletred: {r: 0.7803921568627451, g: 0.08235294117647059, b: 0.5215686274509804}, deeppink: {r: 1, g: 0.0784313725490196, b: 0.5764705882352941}, hotpink: {r: 1, g: 0.4117647058823529, b: 0.7058823529411765}, palevioletred: {r: 0.8588235294117647, g: 0.4392156862745098, b: 0.5764705882352941}, lavenderblush: {r: 1, g: 0.9411764705882353, b: 0.9607843137254902}, crimson: {r: 0.8627450980392157, g: 0.0784313725490196, b: 0.23529411764705882}, pink: {r: 1, g: 0.7529411764705882, b: 0.796078431372549}, lightpink: {r: 1, g: 0.7137254901960784, b: 0.7568627450980392}}
    };
    var m = 0, u = '<div class="ui-colorpicker ui-colorpicker-dialog ui-dialog ui-widget ui-widget-content ui-corner-all" style="display: none;"></div>', s = '<div class="ui-colorpicker ui-colorpicker-inline ui-dialog ui-widget ui-widget-content ui-corner-all"></div>', p = {full: ["header", "map", "bar", "hex", "hsv", "rgb", "alpha", "lab", "cmyk", "preview", "swatches", "footer"], popup: ["map", "bar", "hex", "hsv", "rgb", "alpha", "preview", "footer"], draggable: ["header", "map", "bar", "hex", "hsv", "rgb", "alpha", "preview", "footer"], inline: ["map", "bar", "hex", "hsv", "rgb", "alpha", "preview"]}, o = function(b) {
        var a = Math.round(b).toString(16);
        if (a.length === 1) {
            a = ("0" + a)
        }
        return a.toLowerCase()
    }, r = function(b) {
        var a, c;
        c = /^#?([a-fA-F0-9]{1,6})$/.exec(b);
        if (c) {
            a = parseInt(c[1], 16);
            return new w(((a >> 16) & 255) / 255, ((a >> 8) & 255) / 255, (a & 255) / 255)
        }
        return new w()
    }, n = function(b, K) {
        var h, f, x, l, I, g, H, J, a, d, c, e, k, y;
        b.sort(function(A, B) {
            if (A.pos[1] == B.pos[1]) {
                return A.pos[0] - B.pos[0]
            }
            return A.pos[1] - B.pos[1]
        });
        l = 0;
        I = 0;
        v.each(b, function(A, B) {
            l = Math.max(l, B.pos[0] + B.pos[2]);
            I = Math.max(I, B.pos[1] + B.pos[3])
        });
        h = [];
        for (f = 0; f < l; ++f) {
            h.push([])
        }
        H = [];
        g = [];
        v.each(b, function(A, B) {
            for (f = 0; f < B.pos[2]; f += 1) {
                g[B.pos[0] + f] = true
            }
            for (x = 0; x < B.pos[3]; x += 1) {
                H[B.pos[1] + x] = true
            }
        });
        d = "";
        a = b[J = 0];
        for (x = 0; x < I; ++x) {
            d += "<tr>";
            for (f = 0; f < l; f) {
                if (typeof a !== "undefined" && f == a.pos[0] && x == a.pos[1]) {
                    d += K(a, f, x);
                    for (e = 0; e < a.pos[3]; e += 1) {
                        for (c = 0; c < a.pos[2]; c += 1) {
                            h[f + c][x + e] = true
                        }
                    }
                    f += a.pos[2];
                    a = b[++J]
                } else {
                    k = 0;
                    y = false;
                    while (f < l && h[f][x] === undefined && (a === undefined || x < a.pos[1] || (x == a.pos[1] && f < a.pos[0]))) {
                        if (g[f] === true) {
                            k += 1
                        }
                        y = true;
                        f += 1
                    }
                    if (k > 0) {
                        d += '<td colspan="' + k + '"></td>'
                    } else {
                        if (!y) {
                            f += 1
                        }
                    }
                }
            }
            d += "</tr>"
        }
        return'<table cellspacing="0" cellpadding="0" border="0"><tbody>' + d + "</tbody></table>"
    }, q = {header: function(c) {
            var d = this, b = null, a = function() {
                var e = c.options.title || c._getRegional("title"), f = '<span class="ui-dialog-title">' + e + "</span>";
                if (!c.inline && c.options.showCloseButton) {
                    f += '<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button"><span class="ui-icon ui-icon-closethick">close</span></a>'
                }
                return'<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">' + f + "</div>"
            };
            this.init = function() {
                b = v(a()).prependTo(c.dialog);
                var e = v(".ui-dialog-titlebar-close", b);
                c._hoverable(e);
                c._focusable(e);
                e.click(function(f) {
                    f.preventDefault();
                    c.close()
                });
                if (!c.inline && c.options.draggable) {
                    c.dialog.draggable({handle: b})
                }
            }
        }, map: function(c) {
            var e = this, b = null, d = null, h, f, g, a;
            h = function(H) {
                if (!c.opened) {
                    return
                }
                var y = v(".ui-colorpicker-map-layer-pointer", b), G = y.offset(), k = y.width(), l = y.height(), x = H.pageX - G.left, F = H.pageY - G.top;
                if (x >= 0 && x < k && F >= 0 && F < l) {
                    H.stopImmediatePropagation();
                    H.preventDefault();
                    b.unbind("mousedown", h);
                    v(document).bind("mouseup", f);
                    v(document).bind("mousemove", g);
                    g(H)
                }
            };
            f = function(k) {
                k.stopImmediatePropagation();
                k.preventDefault();
                v(document).unbind("mouseup", f);
                v(document).unbind("mousemove", g);
                b.bind("mousedown", h)
            };
            g = function(H) {
                H.stopImmediatePropagation();
                H.preventDefault();
                if (H.pageX === e.x && H.pageY === e.y) {
                    return
                }
                e.x = H.pageX;
                e.y = H.pageY;
                var y = v(".ui-colorpicker-map-layer-pointer", b), G = y.offset(), k = y.width(), l = y.height(), x = H.pageX - G.left, F = H.pageY - G.top;
                x = Math.max(0, Math.min(x / k, 1));
                F = Math.max(0, Math.min(F / l, 1));
                switch (c.mode) {
                    case"h":
                        c.color.setHSV(null, x, 1 - F);
                        break;
                    case"s":
                    case"a":
                        c.color.setHSV(x, null, 1 - F);
                        break;
                    case"v":
                        c.color.setHSV(x, 1 - F, null);
                        break;
                    case"r":
                        c.color.setRGB(null, 1 - F, x);
                        break;
                    case"g":
                        c.color.setRGB(1 - F, null, x);
                        break;
                    case"b":
                        c.color.setRGB(x, 1 - F, null);
                        break
                }
                c._change()
            };
            a = function() {
                var k = '<div class="ui-colorpicker-map ui-colorpicker-border"><span class="ui-colorpicker-map-layer-1">&nbsp;</span><span class="ui-colorpicker-map-layer-2">&nbsp;</span>' + (c.options.alpha ? '<span class="ui-colorpicker-map-layer-alpha">&nbsp;</span>' : "") + '<span class="ui-colorpicker-map-layer-pointer"><span class="ui-colorpicker-map-pointer"></span></span></div>';
                return k
            };
            this.update = function() {
                switch (c.mode) {
                    case"h":
                        v(".ui-colorpicker-map-layer-1", b).css({"background-position": "0 0", opacity: ""}).show();
                        v(".ui-colorpicker-map-layer-2", b).hide();
                        break;
                    case"s":
                    case"a":
                        v(".ui-colorpicker-map-layer-1", b).css({"background-position": "0 -260px", opacity: ""}).show();
                        v(".ui-colorpicker-map-layer-2", b).css({"background-position": "0 -520px", opacity: ""}).show();
                        break;
                    case"v":
                        v(b).css("background-color", "black");
                        v(".ui-colorpicker-map-layer-1", b).css({"background-position": "0 -780px", opacity: ""}).show();
                        v(".ui-colorpicker-map-layer-2", b).hide();
                        break;
                    case"r":
                        v(".ui-colorpicker-map-layer-1", b).css({"background-position": "0 -1040px", opacity: ""}).show();
                        v(".ui-colorpicker-map-layer-2", b).css({"background-position": "0 -1300px", opacity: ""}).show();
                        break;
                    case"g":
                        v(".ui-colorpicker-map-layer-1", b).css({"background-position": "0 -1560px", opacity: ""}).show();
                        v(".ui-colorpicker-map-layer-2", b).css({"background-position": "0 -1820px", opacity: ""}).show();
                        break;
                    case"b":
                        v(".ui-colorpicker-map-layer-1", b).css({"background-position": "0 -2080px", opacity: ""}).show();
                        v(".ui-colorpicker-map-layer-2", b).css({"background-position": "0 -2340px", opacity: ""}).show();
                        break
                }
                e.repaint()
            };
            this.repaint = function() {
                var k = v(".ui-colorpicker-map-layer-pointer", b), x = 0, l = 0;
                switch (c.mode) {
                    case"h":
                        x = c.color.getHSV().s * k.width();
                        l = (1 - c.color.getHSV().v) * k.width();
                        v(b).css("background-color", c.color.copy().normalize().toCSS());
                        break;
                    case"s":
                    case"a":
                        x = c.color.getHSV().h * k.width();
                        l = (1 - c.color.getHSV().v) * k.width();
                        v(".ui-colorpicker-map-layer-2", b).css("opacity", 1 - c.color.getHSV().s);
                        break;
                    case"v":
                        x = c.color.getHSV().h * k.width();
                        l = (1 - c.color.getHSV().s) * k.width();
                        v(".ui-colorpicker-map-layer-1", b).css("opacity", c.color.getHSV().v);
                        break;
                    case"r":
                        x = c.color.getRGB().b * k.width();
                        l = (1 - c.color.getRGB().g) * k.width();
                        v(".ui-colorpicker-map-layer-2", b).css("opacity", c.color.getRGB().r);
                        break;
                    case"g":
                        x = c.color.getRGB().b * k.width();
                        l = (1 - c.color.getRGB().r) * k.width();
                        v(".ui-colorpicker-map-layer-2", b).css("opacity", c.color.getRGB().g);
                        break;
                    case"b":
                        x = c.color.getRGB().r * k.width();
                        l = (1 - c.color.getRGB().g) * k.width();
                        v(".ui-colorpicker-map-layer-2", b).css("opacity", c.color.getRGB().b);
                        break
                }
                if (c.options.alpha) {
                    v(".ui-colorpicker-map-layer-alpha", b).css("opacity", 1 - c.color.getAlpha())
                }
                v(".ui-colorpicker-map-pointer", b).css({left: x - 7, top: l - 7})
            };
            this.init = function() {
                b = v(a()).appendTo(v(".ui-colorpicker-map-container", c.dialog));
                b.bind("mousedown", h)
            }
        }, bar: function(c) {
            var d = this, b = null, g, e, f, a;
            g = function(h) {
                if (!c.opened) {
                    return
                }
                var y = v(".ui-colorpicker-bar-layer-pointer", b), F = y.offset(), k = y.width(), l = y.height(), x = h.pageX - F.left, E = h.pageY - F.top;
                if (x >= 0 && x < k && E >= 0 && E < l) {
                    h.stopImmediatePropagation();
                    h.preventDefault();
                    b.unbind("mousedown", g);
                    v(document).bind("mouseup", e);
                    v(document).bind("mousemove", f);
                    f(h)
                }
            };
            e = function(h) {
                h.stopImmediatePropagation();
                h.preventDefault();
                v(document).unbind("mouseup", e);
                v(document).unbind("mousemove", f);
                b.bind("mousedown", g)
            };
            f = function(y) {
                y.stopImmediatePropagation();
                y.preventDefault();
                if (y.pageY === d.y) {
                    return
                }
                d.y = y.pageY;
                var k = v(".ui-colorpicker-bar-layer-pointer", b), l = k.offset(), B = k.height(), h = y.pageY - l.top;
                h = Math.max(0, Math.min(h / B, 1));
                switch (c.mode) {
                    case"h":
                        c.color.setHSV(1 - h, null, null);
                        break;
                    case"s":
                        c.color.setHSV(null, 1 - h, null);
                        break;
                    case"v":
                        c.color.setHSV(null, null, 1 - h);
                        break;
                    case"r":
                        c.color.setRGB(1 - h, null, null);
                        break;
                    case"g":
                        c.color.setRGB(null, 1 - h, null);
                        break;
                    case"b":
                        c.color.setRGB(null, null, 1 - h);
                        break;
                    case"a":
                        c.color.setAlpha(1 - h);
                        break
                }
                c._change()
            };
            a = function() {
                var h = '<div class="ui-colorpicker-bar ui-colorpicker-border"><span class="ui-colorpicker-bar-layer-1">&nbsp;</span><span class="ui-colorpicker-bar-layer-2">&nbsp;</span><span class="ui-colorpicker-bar-layer-3">&nbsp;</span><span class="ui-colorpicker-bar-layer-4">&nbsp;</span>';
                if (c.options.alpha) {
                    h += '<span class="ui-colorpicker-bar-layer-alpha">&nbsp;</span><span class="ui-colorpicker-bar-layer-alphabar">&nbsp;</span>'
                }
                h += '<span class="ui-colorpicker-bar-layer-pointer"><span class="ui-colorpicker-bar-pointer"></span></span></div>';
                return h
            };
            this.update = function() {
                switch (c.mode) {
                    case"h":
                    case"s":
                    case"v":
                    case"r":
                    case"g":
                    case"b":
                        v(".ui-colorpicker-bar-layer-alpha", b).show();
                        v(".ui-colorpicker-bar-layer-alphabar", b).hide();
                        break;
                    case"a":
                        v(".ui-colorpicker-bar-layer-alpha", b).hide();
                        v(".ui-colorpicker-bar-layer-alphabar", b).show();
                        break
                }
                switch (c.mode) {
                    case"h":
                        v(".ui-colorpicker-bar-layer-1", b).css({"background-position": "0 0", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-2", b).hide();
                        v(".ui-colorpicker-bar-layer-3", b).hide();
                        v(".ui-colorpicker-bar-layer-4", b).hide();
                        break;
                    case"s":
                        v(".ui-colorpicker-bar-layer-1", b).css({"background-position": "0 -260px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-2", b).css({"background-position": "0 -520px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-3", b).hide();
                        v(".ui-colorpicker-bar-layer-4", b).hide();
                        break;
                    case"v":
                        v(".ui-colorpicker-bar-layer-1", b).css({"background-position": "0 -520px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-2", b).hide();
                        v(".ui-colorpicker-bar-layer-3", b).hide();
                        v(".ui-colorpicker-bar-layer-4", b).hide();
                        break;
                    case"r":
                        v(".ui-colorpicker-bar-layer-1", b).css({"background-position": "0 -1560px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-2", b).css({"background-position": "0 -1300px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-3", b).css({"background-position": "0 -780px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-4", b).css({"background-position": "0 -1040px", opacity: ""}).show();
                        break;
                    case"g":
                        v(".ui-colorpicker-bar-layer-1", b).css({"background-position": "0 -2600px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-2", b).css({"background-position": "0 -2340px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-3", b).css({"background-position": "0 -1820px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-4", b).css({"background-position": "0 -2080px", opacity: ""}).show();
                        break;
                    case"b":
                        v(".ui-colorpicker-bar-layer-1", b).css({"background-position": "0 -3640px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-2", b).css({"background-position": "0 -3380px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-3", b).css({"background-position": "0 -2860px", opacity: ""}).show();
                        v(".ui-colorpicker-bar-layer-4", b).css({"background-position": "0 -3120px", opacity: ""}).show();
                        break;
                    case"a":
                        v(".ui-colorpicker-bar-layer-1", b).hide();
                        v(".ui-colorpicker-bar-layer-2", b).hide();
                        v(".ui-colorpicker-bar-layer-3", b).hide();
                        v(".ui-colorpicker-bar-layer-4", b).hide();
                        break
                }
                d.repaint()
            };
            this.repaint = function() {
                var h = v(".ui-colorpicker-bar-layer-pointer", b), k = 0;
                switch (c.mode) {
                    case"h":
                        k = (1 - c.color.getHSV().h) * h.height();
                        break;
                    case"s":
                        k = (1 - c.color.getHSV().s) * h.height();
                        v(".ui-colorpicker-bar-layer-2", b).css("opacity", 1 - c.color.getHSV().v);
                        v(b).css("background-color", c.color.copy().normalize().toCSS());
                        break;
                    case"v":
                        k = (1 - c.color.getHSV().v) * h.height();
                        v(b).css("background-color", c.color.copy().normalize().toCSS());
                        break;
                    case"r":
                        k = (1 - c.color.getRGB().r) * h.height();
                        v(".ui-colorpicker-bar-layer-2", b).css("opacity", Math.max(0, (c.color.getRGB().b - c.color.getRGB().g)));
                        v(".ui-colorpicker-bar-layer-3", b).css("opacity", Math.max(0, (c.color.getRGB().g - c.color.getRGB().b)));
                        v(".ui-colorpicker-bar-layer-4", b).css("opacity", Math.min(c.color.getRGB().b, c.color.getRGB().g));
                        break;
                    case"g":
                        k = (1 - c.color.getRGB().g) * h.height();
                        v(".ui-colorpicker-bar-layer-2", b).css("opacity", Math.max(0, (c.color.getRGB().b - c.color.getRGB().r)));
                        v(".ui-colorpicker-bar-layer-3", b).css("opacity", Math.max(0, (c.color.getRGB().r - c.color.getRGB().b)));
                        v(".ui-colorpicker-bar-layer-4", b).css("opacity", Math.min(c.color.getRGB().r, c.color.getRGB().b));
                        break;
                    case"b":
                        k = (1 - c.color.getRGB().b) * h.height();
                        v(".ui-colorpicker-bar-layer-2", b).css("opacity", Math.max(0, (c.color.getRGB().r - c.color.getRGB().g)));
                        v(".ui-colorpicker-bar-layer-3", b).css("opacity", Math.max(0, (c.color.getRGB().g - c.color.getRGB().r)));
                        v(".ui-colorpicker-bar-layer-4", b).css("opacity", Math.min(c.color.getRGB().r, c.color.getRGB().g));
                        break;
                    case"a":
                        k = (1 - c.color.getAlpha()) * h.height();
                        v(b).css("background-color", c.color.copy().normalize().toCSS());
                        break
                }
                if (c.mode !== "a") {
                    v(".ui-colorpicker-bar-layer-alpha", b).css("opacity", 1 - c.color.getAlpha())
                }
                v(".ui-colorpicker-bar-pointer", b).css("top", k - 3)
            };
            this.init = function() {
                b = v(a()).appendTo(v(".ui-colorpicker-bar-container", c.dialog));
                b.bind("mousedown", g)
            }
        }, preview: function(c) {
            var d = this, b = null, a;
            a = function() {
                return'<div class="ui-colorpicker-preview ui-colorpicker-border"><div class="ui-colorpicker-preview-initial"><div class="ui-colorpicker-preview-initial-alpha"></div></div><div class="ui-colorpicker-preview-current"><div class="ui-colorpicker-preview-current-alpha"></div></div></div>'
            };
            this.init = function() {
                b = v(a()).appendTo(v(".ui-colorpicker-preview-container", c.dialog));
                v(".ui-colorpicker-preview-initial", b).click(function() {
                    c.color = c.currentColor.copy();
                    c._change()
                })
            };
            this.update = function() {
                if (c.options.alpha) {
                    v(".ui-colorpicker-preview-initial-alpha, .ui-colorpicker-preview-current-alpha", b).show()
                } else {
                    v(".ui-colorpicker-preview-initial-alpha, .ui-colorpicker-preview-current-alpha", b).hide()
                }
                this.repaint()
            };
            this.repaint = function() {
                v(".ui-colorpicker-preview-initial", b).css("background-color", c.currentColor.toCSS()).attr("title", c.currentColor.toHex());
                v(".ui-colorpicker-preview-initial-alpha", b).css("opacity", 1 - c.currentColor.getAlpha());
                v(".ui-colorpicker-preview-current", b).css("background-color", c.color.toCSS()).attr("title", c.color.toHex());
                v(".ui-colorpicker-preview-current-alpha", b).css("opacity", 1 - c.color.getAlpha())
            }
        }, hsv: function(c) {
            var d = this, b = null, a;
            a = function() {
                var e = "";
                if (c.options.hsv) {
                    e += '<div class="ui-colorpicker-hsv-h"><input class="ui-colorpicker-mode" type="radio" value="h"/><label>' + c._getRegional("hsvH") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="360" size="10"/><span class="ui-colorpicker-unit">&deg;</span></div><div class="ui-colorpicker-hsv-s"><input class="ui-colorpicker-mode" type="radio" value="s"/><label>' + c._getRegional("hsvS") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%</span></div><div class="ui-colorpicker-hsv-v"><input class="ui-colorpicker-mode" type="radio" value="v"/><label>' + c._getRegional("hsvV") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="100" size="10"/><span class="ui-colorpicker-unit">%</span></div>'
                }
                return'<div class="ui-colorpicker-hsv">' + e + "</div>"
            };
            this.init = function() {
                b = v(a()).appendTo(v(".ui-colorpicker-hsv-container", c.dialog));
                v(".ui-colorpicker-mode", b).click(function() {
                    c.mode = v(this).val();
                    c._updateAllParts()
                });
                v(".ui-colorpicker-number", b).bind("change keyup", function() {
                    c.color.setHSV(v(".ui-colorpicker-hsv-h .ui-colorpicker-number", b).val() / 360, v(".ui-colorpicker-hsv-s .ui-colorpicker-number", b).val() / 100, v(".ui-colorpicker-hsv-v .ui-colorpicker-number", b).val() / 100);
                    c._change()
                })
            };
            this.repaint = function() {
                var e = c.color.getHSV();
                e.h *= 360;
                e.s *= 100;
                e.v *= 100;
                v.each(e, function(g, f) {
                    var h = v(".ui-colorpicker-hsv-" + g + " .ui-colorpicker-number", b);
                    f = Math.round(f);
                    if (h.val() !== f) {
                        h.val(f)
                    }
                })
            };
            this.update = function() {
                v(".ui-colorpicker-mode", b).each(function() {
                    v(this).attr("checked", v(this).val() === c.mode)
                });
                this.repaint()
            }
        }, rgb: function(c) {
            var d = this, b = null, a;
            a = function() {
                var e = "";
                if (c.options.rgb) {
                    e += '<div class="ui-colorpicker-rgb-r"><input class="ui-colorpicker-mode" type="radio" value="r"/><label>' + c._getRegional("rgbR") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="255"/></div><div class="ui-colorpicker-rgb-g"><input class="ui-colorpicker-mode" type="radio" value="g"/><label>' + c._getRegional("rgbG") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="255"/></div><div class="ui-colorpicker-rgb-b"><input class="ui-colorpicker-mode" type="radio" value="b"/><label>' + c._getRegional("rgbB") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="255"/></div>'
                }
                return'<div class="ui-colorpicker-rgb">' + e + "</div>"
            };
            this.init = function() {
                b = v(a()).appendTo(v(".ui-colorpicker-rgb-container", c.dialog));
                v(".ui-colorpicker-mode", b).click(function() {
                    c.mode = v(this).val();
                    c._updateAllParts()
                });
                v(".ui-colorpicker-number", b).bind("change keyup", function() {
                    c.color.setRGB(v(".ui-colorpicker-rgb-r .ui-colorpicker-number", b).val() / 255, v(".ui-colorpicker-rgb-g .ui-colorpicker-number", b).val() / 255, v(".ui-colorpicker-rgb-b .ui-colorpicker-number", b).val() / 255);
                    c._change()
                })
            };
            this.repaint = function() {
                v.each(c.color.getRGB(), function(f, e) {
                    var g = v(".ui-colorpicker-rgb-" + f + " .ui-colorpicker-number", b);
                    e = Math.round(e * 255);
                    if (g.val() !== e) {
                        g.val(e)
                    }
                })
            };
            this.update = function() {
                v(".ui-colorpicker-mode", b).each(function() {
                    v(this).attr("checked", v(this).val() === c.mode)
                });
                this.repaint()
            }
        }, lab: function(b) {
            var c = this, a = null, d = function() {
                var e = "";
                if (b.options.hsv) {
                    e += '<div class="ui-colorpicker-lab-l"><label>' + b._getRegional("labL") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/></div><div class="ui-colorpicker-lab-a"><label>' + b._getRegional("labA") + '</label><input class="ui-colorpicker-number" type="number" min="-128" max="127"/></div><div class="ui-colorpicker-lab-b"><label>' + b._getRegional("labB") + '</label><input class="ui-colorpicker-number" type="number" min="-128" max="127"/></div>'
                }
                return'<div class="ui-colorpicker-lab">' + e + "</div>"
            };
            this.init = function() {
                var e = 0;
                a = v(d()).appendTo(v(".ui-colorpicker-lab-container", b.dialog));
                v(".ui-colorpicker-number", a).on("change keyup", function(f) {
                    b.color.setLAB(parseInt(v(".ui-colorpicker-lab-l .ui-colorpicker-number", a).val(), 10) / 100, (parseInt(v(".ui-colorpicker-lab-a .ui-colorpicker-number", a).val(), 10) + 128) / 255, (parseInt(v(".ui-colorpicker-lab-b .ui-colorpicker-number", a).val(), 10) + 128) / 255);
                    b._change()
                })
            };
            this.repaint = function() {
                var e = b.color.getLAB();
                e.l *= 100;
                e.a = (e.a * 255) - 128;
                e.b = (e.b * 255) - 128;
                v.each(e, function(g, f) {
                    var h = v(".ui-colorpicker-lab-" + g + " .ui-colorpicker-number", a);
                    f = Math.round(f);
                    if (h.val() !== f) {
                        h.val(f)
                    }
                })
            };
            this.update = function() {
                this.repaint()
            }
        }, cmyk: function(b) {
            var c = this, a = null, d = function() {
                var e = "";
                if (b.options.hsv) {
                    e += '<div class="ui-colorpicker-cmyk-c"><label>' + b._getRegional("cmykC") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div><div class="ui-colorpicker-cmyk-m"><label>' + b._getRegional("cmykM") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div><div class="ui-colorpicker-cmyk-y"><label>' + b._getRegional("cmykY") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div><div class="ui-colorpicker-cmyk-k"><label>' + b._getRegional("cmykK") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div>'
                }
                return'<div class="ui-colorpicker-cmyk">' + e + "</div>"
            };
            this.init = function() {
                a = v(d()).appendTo(v(".ui-colorpicker-cmyk-container", b.dialog));
                v(".ui-colorpicker-number", a).on("change keyup", function(e) {
                    b.color.setCMYK(parseInt(v(".ui-colorpicker-cmyk-c .ui-colorpicker-number", a).val(), 10) / 100, parseInt(v(".ui-colorpicker-cmyk-m .ui-colorpicker-number", a).val(), 10) / 100, parseInt(v(".ui-colorpicker-cmyk-y .ui-colorpicker-number", a).val(), 10) / 100, parseInt(v(".ui-colorpicker-cmyk-k .ui-colorpicker-number", a).val(), 10) / 100);
                    b._change()
                })
            };
            this.repaint = function() {
                v.each(b.color.getCMYK(), function(f, e) {
                    var g = v(".ui-colorpicker-cmyk-" + f + " .ui-colorpicker-number", a);
                    e = Math.round(e * 100);
                    if (g.val() !== e) {
                        g.val(e)
                    }
                })
            };
            this.update = function() {
                this.repaint()
            }
        }, alpha: function(c) {
            var d = this, b = null, a;
            a = function() {
                var e = "";
                if (c.options.alpha) {
                    e += '<div class="ui-colorpicker-a"><input class="ui-colorpicker-mode" name="mode" type="radio" value="a"/><label>' + c._getRegional("alphaA") + '</label><input class="ui-colorpicker-number" type="number" min="0" max="100"/><span class="ui-colorpicker-unit">%</span></div>'
                }
                return'<div class="ui-colorpicker-alpha">' + e + "</div>"
            };
            this.init = function() {
                b = v(a()).appendTo(v(".ui-colorpicker-alpha-container", c.dialog));
                v(".ui-colorpicker-mode", b).click(function() {
                    c.mode = v(this).val();
                    c._updateAllParts()
                });
                v(".ui-colorpicker-number", b).bind("change keyup", function() {
                    c.color.setAlpha(v(".ui-colorpicker-a .ui-colorpicker-number", b).val() / 100);
                    c._change()
                })
            };
            this.update = function() {
                v(".ui-colorpicker-mode", b).each(function() {
                    v(this).attr("checked", v(this).val() === c.mode)
                });
                this.repaint()
            };
            this.repaint = function() {
                var f = v(".ui-colorpicker-a .ui-colorpicker-number", b), e = Math.round(c.color.getAlpha() * 100);
                if (!f.is(":focus") && f.val() !== e) {
                    f.val(e)
                }
            }
        }, hex: function(c) {
            var d = this, b = null, a;
            a = function() {
                var e = "";
                if (c.options.alpha) {
                    e += '<input class="ui-colorpicker-hex-alpha" type="text" maxlength="2" size="2"/>'
                }
                e += '<input class="ui-colorpicker-hex-input" type="text" maxlength="6" size="6"/>';
                return'<div class="ui-colorpicker-hex"><label>#</label>' + e + "</div>"
            };
            this.init = function() {
                b = v(a()).appendTo(v(".ui-colorpicker-hex-container", c.dialog));
                v(".ui-colorpicker-hex-input", b).bind("change keydown keyup", function(f, g, e) {
                    if (/[^a-fA-F0-9]/.test(v(this).val())) {
                        v(this).val(v(this).val().replace(/[^a-fA-F0-9]/, ""))
                    }
                });
                v(".ui-colorpicker-hex-input", b).bind("change keyup", function() {
                    c.color = r(v(this).val()).setAlpha(c.color.getAlpha());
                    c._change()
                });
                v(".ui-colorpicker-hex-alpha", b).bind("change keydown keyup", function() {
                    if (/[^a-fA-F0-9]/.test(v(this).val())) {
                        v(this).val(v(this).val().replace(/[^a-fA-F0-9]/, ""))
                    }
                });
                v(".ui-colorpicker-hex-alpha", b).bind("change keyup", function() {
                    c.color.setAlpha(parseInt(v(".ui-colorpicker-hex-alpha", b).val(), 16) / 255);
                    c._change()
                })
            };
            this.update = function() {
                this.repaint()
            };
            this.repaint = function() {
                if (!v(".ui-colorpicker-hex-input", b).is(":focus")) {
                    v(".ui-colorpicker-hex-input", b).val(c.color.toHex(true))
                }
                if (!v(".ui-colorpicker-hex-alpha", b).is(":focus")) {
                    v(".ui-colorpicker-hex-alpha", b).val(o(c.color.getAlpha() * 255))
                }
            }
        }, swatches: function(b) {
            var c = this, a = null, d = function() {
                var e = "";
                v.each(b._getSwatches(), function(h, k) {
                    var f = new w(k.r, k.g, k.b), g = f.toCSS();
                    e += '<div class="ui-colorpicker-swatch" style="background-color:' + g + '" title="' + h + '"></div>'
                });
                return'<div class="ui-colorpicker-swatches ui-colorpicker-border" style="width:' + b.options.swatchesWidth + 'px">' + e + "</div>"
            };
            this.init = function() {
                a = v(d()).appendTo(v(".ui-colorpicker-swatches-container", b.dialog));
                v(".ui-colorpicker-swatch", a).click(function() {
                    b.color = b._parseColor(v(this).css("background-color"));
                    b._change()
                })
            }
        }, footer: function(b) {
            var c = this, e = null, a = "ui-colorpicker-special-transparent-" + m, f = "ui-colorpicker-special-none-" + m, d = function() {
                var g = "";
                if (b.options.alpha || (!b.inline && b.options.showNoneButton)) {
                    g += '<div class="ui-colorpicker-buttonset">';
                    if (b.options.alpha) {
                        g += '<input type="radio" name="ui-colorpicker-special" id="' + a + '" class="ui-colorpicker-special-transparent"/><label for="' + a + '">' + b._getRegional("transparent") + "</label>"
                    }
                    if (!b.inline && b.options.showNoneButton) {
                        g += '<input type="radio" name="ui-colorpicker-special" id="' + f + '" class="ui-colorpicker-special-none"><label for="' + f + '">' + b._getRegional("none") + "</label>"
                    }
                    g += "</div>"
                }
                if (!b.inline) {
                    g += '<div class="ui-dialog-buttonset">';
                    if (b.options.showCancelButton) {
                        g += '<button class="ui-colorpicker-cancel">' + b._getRegional("cancel") + "</button>"
                    }
                    g += '<button class="ui-colorpicker-ok">' + b._getRegional("ok") + "</button>";
                    g += "</div>"
                }
                return'<div class="ui-dialog-buttonpane ui-widget-content">' + g + "</div>"
            };
            this.init = function() {
                e = v(d()).appendTo(b.dialog);
                v(".ui-colorpicker-ok", e).button().click(function() {
                    b.close()
                });
                v(".ui-colorpicker-cancel", e).button().click(function() {
                    b.color = b.currentColor.copy();
                    b._change(b.color.set);
                    b.close()
                });
                v(".ui-colorpicker-buttonset", e).buttonset();
                v(".ui-colorpicker-special-color", e).click(function() {
                    b._change()
                });
                v("#" + f, e).click(function() {
                    b._change(false)
                });
                v("#" + a, e).click(function() {
                    b.color.setAlpha(0);
                    b._change()
                })
            };
            this.repaint = function() {
                if (!b.color.set) {
                    v(".ui-colorpicker-special-none", e).attr("checked", true).button("refresh")
                } else {
                    if (b.color.getAlpha() == 0) {
                        v(".ui-colorpicker-special-transparent", e).attr("checked", true).button("refresh")
                    } else {
                        v("input", e).attr("checked", false).button("refresh")
                    }
                }
                v(".ui-colorpicker-cancel", e).button(b.changed ? "enable" : "disable")
            };
            this.update = function() {
            }
        }}, w = function() {
        var F = {rgb: {r: 0, g: 0, b: 0}, hsv: {h: 0, s: 0, v: 0}, hsl: {h: 0, s: 0, l: 0}, lab: {l: 0, a: 0, b: 0}, cmyk: {c: 0, m: 0, y: 0, k: 1}}, c = 1, h = arguments, L = function(x) {
            if (isNaN(x) || x === null) {
                return 0
            }
            if (typeof x == "string") {
                x = parseInt(x, 10)
            }
            return Math.max(0, Math.min(x, 1))
        }, J = function(y) {
            var x = "0123456789abcdef", A = y % 16, B = (y - A) / 16, C = x.charAt(B) + x.charAt(A);
            return C
        }, b = function(A) {
            var x = (A.r > 0.04045) ? Math.pow((A.r + 0.055) / 1.055, 2.4) : A.r / 12.92, y = (A.g > 0.04045) ? Math.pow((A.g + 0.055) / 1.055, 2.4) : A.g / 12.92, B = (A.b > 0.04045) ? Math.pow((A.b + 0.055) / 1.055, 2.4) : A.b / 12.92;
            return{x: x * 0.4124 + y * 0.3576 + B * 0.1805, y: x * 0.2126 + y * 0.7152 + B * 0.0722, z: x * 0.0193 + y * 0.1192 + B * 0.9505}
        }, d = function(y) {
            var x = {r: y.x * 3.2406 + y.y * -1.5372 + y.z * -0.4986, g: y.x * -0.9689 + y.y * 1.8758 + y.z * 0.0415, b: y.x * 0.0557 + y.y * -0.204 + y.z * 1.057};
            x.r = (x.r > 0.0031308) ? 1.055 * Math.pow(x.r, (1 / 2.4)) - 0.055 : 12.92 * x.r;
            x.g = (x.g > 0.0031308) ? 1.055 * Math.pow(x.g, (1 / 2.4)) - 0.055 : 12.92 * x.g;
            x.b = (x.b > 0.0031308) ? 1.055 * Math.pow(x.b, (1 / 2.4)) - 0.055 : 12.92 * x.b;
            return x
        }, k = function(C) {
            var E = Math.min(C.r, C.g, C.b), N = Math.max(C.r, C.g, C.b), x = N - E, A, B, y, D = {h: 0, s: 0, v: N};
            if (x === 0) {
                D.h = 0;
                D.s = 0
            } else {
                D.s = x / N;
                A = (((N - C.r) / 6) + (x / 2)) / x;
                B = (((N - C.g) / 6) + (x / 2)) / x;
                y = (((N - C.b) / 6) + (x / 2)) / x;
                if (C.r === N) {
                    D.h = y - B
                } else {
                    if (C.g === N) {
                        D.h = (1 / 3) + A - y
                    } else {
                        if (C.b === N) {
                            D.h = (2 / 3) + B - A
                        }
                    }
                }
                if (D.h < 0) {
                    D.h += 1
                } else {
                    if (D.h > 1) {
                        D.h -= 1
                    }
                }
            }
            return D
        }, f = function(x) {
            var y = {r: 0, g: 0, b: 0}, A, C, B, D, E;
            if (x.s === 0) {
                y.r = y.g = y.b = x.v
            } else {
                A = x.h === 1 ? 0 : x.h * 6;
                C = Math.floor(A);
                B = x.v * (1 - x.s);
                D = x.v * (1 - x.s * (A - C));
                E = x.v * (1 - x.s * (1 - (A - C)));
                if (C === 0) {
                    y.r = x.v;
                    y.g = E;
                    y.b = B
                } else {
                    if (C === 1) {
                        y.r = D;
                        y.g = x.v;
                        y.b = B
                    } else {
                        if (C === 2) {
                            y.r = B;
                            y.g = x.v;
                            y.b = E
                        } else {
                            if (C === 3) {
                                y.r = B;
                                y.g = D;
                                y.b = x.v
                            } else {
                                if (C === 4) {
                                    y.r = E;
                                    y.g = B;
                                    y.b = x.v
                                } else {
                                    y.r = x.v;
                                    y.g = B;
                                    y.b = D
                                }
                            }
                        }
                    }
                }
            }
            return y
        }, I = function(C) {
            var E = Math.min(C.r, C.g, C.b), N = Math.max(C.r, C.g, C.b), x = N - E, A, B, y, D = {h: 0, s: 0, l: (N + E) / 2};
            if (x === 0) {
                D.h = 0;
                D.s = 0
            } else {
                D.s = D.l < 0.5 ? x / (N + E) : x / (2 - N - E);
                A = (((N - C.r) / 6) + (x / 2)) / x;
                B = (((N - C.g) / 6) + (x / 2)) / x;
                y = (((N - C.b) / 6) + (x / 2)) / x;
                if (C.r === N) {
                    D.h = y - B
                } else {
                    if (C.g === N) {
                        D.h = (1 / 3) + A - y
                    } else {
                        if (C.b === N) {
                            D.h = (2 / 3) + B - A
                        }
                    }
                }
                if (D.h < 0) {
                    D.h += 1
                } else {
                    if (D.h > 1) {
                        D.h -= 1
                    }
                }
            }
            return D
        }, G = function(y) {
            var A, B, x = function(C, D, E) {
                if (E < 0) {
                    E += 1
                }
                if (E > 1) {
                    E -= 1
                }
                if ((6 * E) < 1) {
                    return C + (D - C) * 6 * E
                }
                if ((2 * E) < 1) {
                    return D
                }
                if ((3 * E) < 2) {
                    return C + (D - C) * ((2 / 3) - E) * 6
                }
                return C
            };
            if (y.s === 0) {
                return{r: y.l, g: y.l, b: y.l}
            }
            B = (y.l < 0.5) ? y.l * (1 + y.s) : (y.l + y.s) - (y.s * y.l);
            A = 2 * y.l - B;
            return{r: x(A, B, y.h + (1 / 3)), g: x(A, B, y.h), b: x(A, B, y.h - (1 / 3))}
        }, l = function(A) {
            var B = A.x / 0.95047, x = A.y, y = A.z / 1.08883;
            B = (B > 0.008856) ? Math.pow(B, (1 / 3)) : (7.787 * B) + (16 / 116);
            x = (x > 0.008856) ? Math.pow(x, (1 / 3)) : (7.787 * x) + (16 / 116);
            y = (y > 0.008856) ? Math.pow(y, (1 / 3)) : (7.787 * y) + (16 / 116);
            return{l: ((116 * x) - 16) / 100, a: ((500 * (B - x)) + 128) / 255, b: ((200 * (x - y)) + 128) / 255}
        }, K = function(y) {
            var x = {l: y.l * 100, a: (y.a * 255) - 128, b: (y.b * 255) - 128}, A = {x: 0, y: (x.l + 16) / 116, z: 0};
            A.x = x.a / 500 + A.y;
            A.z = A.y - x.b / 200;
            A.x = (Math.pow(A.x, 3) > 0.008856) ? Math.pow(A.x, 3) : (A.x - 16 / 116) / 7.787;
            A.y = (Math.pow(A.y, 3) > 0.008856) ? Math.pow(A.y, 3) : (A.y - 16 / 116) / 7.787;
            A.z = (Math.pow(A.z, 3) > 0.008856) ? Math.pow(A.z, 3) : (A.z - 16 / 116) / 7.787;
            A.x *= 0.95047;
            A.y *= 1;
            A.z *= 1.08883;
            return A
        }, a = function(x) {
            return{c: 1 - (x.r), m: 1 - (x.g), y: 1 - (x.b)}
        }, H = function(x) {
            return{r: 1 - (x.c), g: 1 - (x.m), b: 1 - (x.y)}
        }, e = function(x) {
            var y = 1;
            if (x.c < y) {
                y = x.c
            }
            if (x.m < y) {
                y = x.m
            }
            if (x.y < y) {
                y = x.y
            }
            if (y == 1) {
                return{c: 0, m: 0, y: 0, k: 1}
            }
            return{c: (x.c - y) / (1 - y), m: (x.m - y) / (1 - y), y: (x.y - y) / (1 - y), k: y}
        }, g = function(x) {
            return{c: x.c * (1 - x.k) + x.k, m: x.m * (1 - x.k) + x.k, y: x.y * (1 - x.k) + x.k}
        };
        this.set = true;
        this.setAlpha = function(x) {
            if (x !== null) {
                c = L(x)
            }
            return this
        };
        this.getAlpha = function() {
            return c
        };
        this.setRGB = function(x, y, A) {
            F = {rgb: this.getRGB()};
            if (x !== null) {
                F.rgb.r = L(x)
            }
            if (y !== null) {
                F.rgb.g = L(y)
            }
            if (A !== null) {
                F.rgb.b = L(A)
            }
            return this
        };
        this.setHSV = function(x, y, A) {
            F = {hsv: this.getHSV()};
            if (x !== null) {
                F.hsv.h = L(x)
            }
            if (y !== null) {
                F.hsv.s = L(y)
            }
            if (A !== null) {
                F.hsv.v = L(A)
            }
            return this
        };
        this.setHSL = function(x, y, A) {
            F = {hsl: this.getHSL()};
            if (x !== null) {
                F.hsl.h = L(x)
            }
            if (y !== null) {
                F.hsl.s = L(y)
            }
            if (A !== null) {
                F.hsl.l = L(A)
            }
            return this
        };
        this.setLAB = function(x, y, A) {
            F = {lab: this.getLAB()};
            if (x !== null) {
                F.lab.l = L(x)
            }
            if (y !== null) {
                F.lab.a = L(y)
            }
            if (A !== null) {
                F.lab.b = L(A)
            }
            return this
        };
        this.setCMYK = function(x, B, y, A) {
            F = {cmyk: this.getCMYK()};
            if (x !== null) {
                F.cmyk.c = L(x)
            }
            if (B !== null) {
                F.cmyk.m = L(B)
            }
            if (y !== null) {
                F.cmyk.y = L(y)
            }
            if (A !== null) {
                F.cmyk.k = L(A)
            }
            return this
        };
        this.getRGB = function() {
            if (!F.rgb) {
                F.rgb = F.lab ? d(K(F.lab)) : F.hsv ? f(F.hsv) : F.hsl ? G(F.hsl) : F.cmyk ? H(g(F.cmyk)) : {r: 0, g: 0, b: 0};
                F.rgb.r = L(F.rgb.r);
                F.rgb.g = L(F.rgb.g);
                F.rgb.b = L(F.rgb.b)
            }
            return v.extend({}, F.rgb)
        };
        this.getHSV = function() {
            if (!F.hsv) {
                F.hsv = F.lab ? k(this.getRGB()) : F.rgb ? k(F.rgb) : F.hsl ? k(this.getRGB()) : F.cmyk ? k(this.getRGB()) : {h: 0, s: 0, v: 0};
                F.hsv.h = L(F.hsv.h);
                F.hsv.s = L(F.hsv.s);
                F.hsv.v = L(F.hsv.v)
            }
            return v.extend({}, F.hsv)
        };
        this.getHSL = function() {
            if (!F.hsl) {
                F.hsl = F.rgb ? I(F.rgb) : F.hsv ? I(this.getRGB()) : F.cmyk ? I(this.getRGB()) : F.hsv ? I(this.getRGB()) : {h: 0, s: 0, l: 0};
                F.hsl.h = L(F.hsl.h);
                F.hsl.s = L(F.hsl.s);
                F.hsl.l = L(F.hsl.l)
            }
            return v.extend({}, F.hsl)
        };
        this.getCMYK = function() {
            if (!F.cmyk) {
                F.cmyk = F.rgb ? e(a(F.rgb)) : F.hsv ? e(a(this.getRGB())) : F.hsl ? e(a(this.getRGB())) : F.lab ? e(a(this.getRGB())) : {c: 0, m: 0, y: 0, k: 1};
                F.cmyk.c = L(F.cmyk.c);
                F.cmyk.m = L(F.cmyk.m);
                F.cmyk.y = L(F.cmyk.y);
                F.cmyk.k = L(F.cmyk.k)
            }
            return v.extend({}, F.cmyk)
        };
        this.getLAB = function() {
            if (!F.lab) {
                F.lab = F.rgb ? l(b(F.rgb)) : F.hsv ? l(b(this.getRGB())) : F.hsl ? l(b(this.getRGB())) : F.cmyk ? l(b(this.getRGB())) : {l: 0, a: 0, b: 0};
                F.lab.l = L(F.lab.l);
                F.lab.a = L(F.lab.a);
                F.lab.b = L(F.lab.b)
            }
            return v.extend({}, F.lab)
        };
        this.getChannels = function() {
            return{r: this.getRGB().r, g: this.getRGB().g, b: this.getRGB().b, a: this.getAlpha(), h: this.getHSV().h, s: this.getHSV().s, v: this.getHSV().v, c: this.getCMYK().c, m: this.getCMYK().m, y: this.getCMYK().y, k: this.getCMYK().k, L: this.getLAB().l, A: this.getLAB().a, B: this.getLAB().b}
        };
        this.getSpaces = function() {
            return v.extend(true, {}, F)
        };
        this.setSpaces = function(x) {
            F = x;
            return this
        };
        this.distance = function(B) {
            var y = "lab", D = "get" + y.toUpperCase(), C = this[D](), E = B[D](), x = 0, A;
            for (A in C) {
                x += Math.pow(C[A] - E[A], 2)
            }
            return x
        };
        this.equals = function(x) {
            var y = this.getRGB(), A = x.getRGB();
            return this.getAlpha() == x.getAlpha() && y.r == A.r && y.g == A.g && y.b == A.b
        };
        this.limit = function(y) {
            y -= 1;
            var x = this.getRGB();
            this.setRGB(Math.round(x.r * y) / y, Math.round(x.g * y) / y, Math.round(x.b * y) / y)
        };
        this.toHex = function() {
            var x = this.getRGB();
            return J(x.r * 255) + J(x.g * 255) + J(x.b * 255)
        };
        this.toCSS = function() {
            return"#" + this.toHex()
        };
        this.normalize = function() {
            this.setHSV(null, 1, 1);
            return this
        };
        this.copy = function() {
            var x = this.getSpaces(), y = this.getAlpha();
            return new w(x, y)
        };
        if (h.length == 2) {
            this.setSpaces(h[0]);
            this.setAlpha(h[1] === 0 ? 0 : h[1] || 1)
        }
        if (h.length > 2) {
            this.setRGB(h[0], h[1], h[2]);
            this.setAlpha(h[3] === 0 ? 0 : h[3] || 1)
        }
    };
    v.widget("vanderlee.colorpicker", {options: {alpha: false, altAlpha: true, altField: "", altOnChange: true, altProperties: "background-color", autoOpen: false, buttonColorize: false, buttonImage: "images/ui-colorpicker.png", buttonImageOnly: false, buttonText: null, closeOnEscape: true, closeOnOutside: true, color: "#00FF00", colorFormat: "HEX", draggable: true, duration: "fast", hsv: true, inline: true, layout: {map: [0, 0, 1, 5], bar: [1, 0, 1, 5], preview: [2, 0, 1, 1], hsv: [2, 1, 1, 1], rgb: [2, 2, 1, 1], alpha: [2, 3, 1, 1], hex: [2, 4, 1, 1], lab: [3, 1, 1, 1], cmyk: [3, 2, 1, 2], swatches: [4, 0, 1, 5]}, limit: "", modal: false, mode: "h", parts: "", regional: "", rgb: true, showAnim: "fadeIn", showCancelButton: true, showNoneButton: false, showCloseButton: true, showOn: "focus", showOptions: {}, swatches: null, swatchesWidth: 84, title: null, close: null, init: null, select: null, open: null}, _create: function() {
            var a = this, b;
            ++m;
            a.widgetEventPrefix = "color";
            a.opened = false;
            a.generated = false;
            a.inline = false;
            a.changed = false;
            a.dialog = null;
            a.button = null;
            a.image = null;
            a.overlay = null;
            a.mode = a.options.mode;
            if (this.element[0].nodeName.toLowerCase() === "input" || !a.options.inline) {
                a._setColor(a.element.val());
                this._callback("init");
                v("body").append(u);
                a.dialog = v(".ui-colorpicker:last");
                v(document).delegate("html", "touchstart click", function(d) {
                    if (!a.opened || d.target === a.element[0] || a.overlay) {
                        return
                    }
                    if (a.dialog.is(d.target) || a.dialog.has(d.target).length > 0) {
                        a.element.blur();
                        return
                    }
                    var c, e = v(d.target).parents();
                    for (c = 0; c <= e.length; ++c) {
                        if (a.button !== null && e[c] === a.button[0]) {
                            return
                        }
                    }
                    if (!a.options.closeOnOutside) {
                        return
                    }
                    a.close()
                });
                v(document).keydown(function(c) {
                    if (c.keyCode == 27 && a.opened && a.options.closeOnEscape) {
                        a.close()
                    }
                });
                if (a.options.showOn === "focus" || a.options.showOn === "both") {
                    a.element.on("focus click", function() {
                        a.open()
                    })
                }
                if (a.options.showOn === "button" || a.options.showOn === "both") {
                    if (a.options.buttonImage !== "") {
                        b = a.options.buttonText || a._getRegional("button");
                        a.image = v("<img/>").attr({src: a.options.buttonImage, alt: b, title: b});
                        a._setImageBackground()
                    }
                    if (a.options.buttonImageOnly && a.image) {
                        a.button = a.image
                    } else {
                        a.button = v('<button type="button"></button>').html(a.image || a.options.buttonText).button();
                        a.image = a.image ? v("img", a.button).first() : null
                    }
                    a.button.insertAfter(a.element).click(function() {
                        a[a.opened ? "close" : "open"]()
                    })
                }
                if (a.options.autoOpen) {
                    a.open()
                }
                a.element.keydown(function(c) {
                    if (c.keyCode === 9) {
                        a.close()
                    }
                }).keyup(function(c) {
                    var d = a._parseColor(a.element.val());
                    if (!a.color.equals(d)) {
                        a.color = d;
                        a._change()
                    }
                })
            } else {
                a.inline = true;
                v(this.element).html(s);
                a.dialog = v(".ui-colorpicker", this.element);
                a._generate();
                a.opened = true
            }
            return this
        }, _setOption: function(a, b) {
            var c = this;
            switch (a) {
                case"disabled":
                    if (b) {
                        c.dialog.addClass("ui-colorpicker-disabled")
                    } else {
                        c.dialog.removeClass("ui-colorpicker-disabled")
                    }
                    break
            }
            v.Widget.prototype._setOption.apply(c, arguments)
        }, _setImageBackground: function() {
            if (this.image && this.options.buttonColorize) {
                this.image.css("background-color", this.color.set ? this._formatColor("RGBA", this.color) : "")
            }
        }, _setAltField: function() {
            if (this.options.altOnChange && this.options.altField && this.options.altProperties) {
                var a, b, c = this.options.altProperties.split(",");
                for (a = 0; a <= c.length; ++a) {
                    b = v.trim(c[a]);
                    switch (b) {
                        case"color":
                        case"background-color":
                        case"outline-color":
                        case"border-color":
                            v(this.options.altField).css(b, this.color.set ? this.color.toCSS() : "");
                            break
                        }
                }
                if (this.options.altAlpha) {
                    v(this.options.altField).css("opacity", this.color.set ? this.color.getAlpha() : "")
                }
            }
        }, _setColor: function(a) {
            this.color = this._parseColor(a);
            this.currentColor = this.color.copy();
            this._setImageBackground();
            this._setAltField()
        }, setColor: function(a) {
            this._setColor(a);
            this._change(this.color.set)
        }, _generate: function() {
            var b = this, d, e, c, a;
            b._setColor(b.inline ? b.options.color : b.element.val());
            if (typeof b.options.parts === "string") {
                if (p[b.options.parts]) {
                    c = p[b.options.parts]
                } else {
                    c = p[b.inline ? "inline" : "popup"]
                }
            } else {
                c = b.options.parts
            }
            b.parts = {};
            v.each(c, function(f, g) {
                if (q[g]) {
                    b.parts[g] = new q[g](b)
                }
            });
            if (!b.generated) {
                a = [];
                v.each(b.options.layout, function(g, f) {
                    if (b.parts[g]) {
                        a.push({part: g, pos: f})
                    }
                });
                v(n(a, function(h, k, f) {
                    var g = ["ui-colorpicker-" + h.part + "-container"];
                    if (k > 0) {
                        g.push("ui-colorpicker-padding-left")
                    }
                    if (f > 0) {
                        g.push("ui-colorpicker-padding-top")
                    }
                    return'<td  class="' + g.join(" ") + '"' + (h.pos[2] > 1 ? ' colspan="' + h.pos[2] + '"' : "") + (h.pos[3] > 1 ? ' rowspan="' + h.pos[3] + '"' : "") + ' valign="top"></td>'
                })).appendTo(b.dialog).addClass("ui-dialog-content ui-widget-content");
                b._initAllParts();
                b._updateAllParts();
                b.generated = true
            }
        }, _effectGeneric: function(e, f, a, c, b) {
            var d = this;
            if (v.effects && v.effects[d.options.showAnim]) {
                e[f](d.options.showAnim, d.options.showOptions, d.options.duration, b)
            } else {
                e[(d.options.showAnim === "slideDown" ? a : (d.options.showAnim === "fadeIn" ? c : f))]((d.options.showAnim ? d.options.duration : null), b);
                if (!d.options.showAnim || !d.options.duration) {
                    b()
                }
            }
        }, _effectShow: function(a, b) {
            this._effectGeneric(a, "show", "slideDown", "fadeIn", b)
        }, _effectHide: function(a, b) {
            this._effectGeneric(a, "hide", "slideUp", "fadeOut", b)
        }, open: function() {
            var c = this, d, f, h, g, e, k, a, b;
            if (!c.opened) {
                c._generate();
                d = c.element.offset();
                f = v(window).height() + v(window).scrollTop();
                h = v(window).width() + v(window).scrollLeft();
                g = c.dialog.outerHeight();
                e = c.dialog.outerWidth();
                k = d.left;
                a = d.top + c.element.outerHeight();
                if (k + e > h) {
                    k = Math.max(0, h - e)
                }
                if (a + g > f) {
                    if (d.top - g >= v(window).scrollTop()) {
                        a = d.top - g
                    } else {
                        a = Math.max(0, f - g)
                    }
                }
                c.dialog.css({left: k, top: a});
                b = 0;
                v(c.element[0]).parents().each(function() {
                    var l = v(this).css("z-index");
                    if ((typeof (l) === "number" || typeof (l) === "string") && l !== "" && !isNaN(l)) {
                        b = parseInt(l);
                        return false
                    }
                });
                c.dialog.css("z-index", b += 2);
                c.overlay = c.options.modal ? new v.ui.dialog.overlay(c) : null;
                c._effectShow(this.dialog);
                c.opened = true;
                c._callback("open", true);
                v(function() {
                    c._repaintAllParts()
                })
            }
        }, close: function() {
            var a = this;
            a.currentColor = a.color.copy();
            a.changed = false;
            a._effectHide(a.dialog, function() {
                a.dialog.empty();
                a.generated = false;
                a.opened = false;
                a._callback("close", true)
            });
            if (a.overlay) {
                a.overlay.destroy()
            }
        }, destroy: function() {
            this.element.unbind();
            if (this.image !== null) {
                this.image.remove()
            }
            if (this.button !== null) {
                this.button.remove()
            }
            if (this.dialog !== null) {
                this.dialog.remove()
            }
            if (this.overlay) {
                this.overlay.destroy()
            }
        }, _callback: function(b, a) {
            var d = this, c, e;
            if (d.color.set) {
                c = {formatted: d._formatColor(d.options.colorFormat, d.color)};
                e = d.color.getLAB();
                e.a = (e.a * 2) - 1;
                e.b = (e.b * 2) - 1;
                if (a === true) {
                    c.a = d.color.getAlpha();
                    c.rgb = d.color.getRGB();
                    c.hsv = d.color.getHSV();
                    c.cmyk = d.color.getCMYK();
                    c.hsl = d.color.getHSL();
                    c.lab = e
                }
                return d._trigger(b, null, c)
            } else {
                return d._trigger(b, null, {formatted: ""})
            }
        }, _initAllParts: function() {
            v.each(this.parts, function(b, a) {
                if (a.init) {
                    a.init()
                }
            })
        }, _updateAllParts: function() {
            v.each(this.parts, function(b, a) {
                if (a.update) {
                    a.update()
                }
            })
        }, _repaintAllParts: function() {
            v.each(this.parts, function(b, a) {
                if (a.repaint) {
                    a.repaint()
                }
            })
        }, _change: function(b) {
            this.color.set = (b !== false);
            this.changed = true;
            switch (this.options.limit) {
                case"websafe":
                    this.color.limit(6);
                    break;
                case"nibble":
                    this.color.limit(16);
                    break;
                case"binary":
                    this.color.limit(2);
                    break;
                case"name":
                    var a = this._getSwatch(this._closestName(this.color));
                    this.color.setRGB(a.r, a.g, a.b);
                    break
            }
            if (!this.inline) {
                if (!this.color.set) {
                    this.element.val("")
                } else {
                    if (!this.color.equals(this._parseColor(this.element.val()))) {
                        this.element.val(this._formatColor(this.options.colorFormat, this.color))
                    }
                }
                this._setImageBackground();
                this._setAltField()
            }
            if (this.opened) {
                this._repaintAllParts()
            }
            this._callback("select")
        }, _hoverable: function(a) {
            a.hover(function() {
                a.addClass("ui-state-hover")
            }, function() {
                a.removeClass("ui-state-hover")
            })
        }, _focusable: function(a) {
            a.focus(function() {
                a.addClass("ui-state-focus")
            }).blur(function() {
                a.removeClass("ui-state-focus")
            })
        }, _getRegional: function(a) {
            return v.colorpicker.regional[this.options.regional][a] !== undefined ? v.colorpicker.regional[this.options.regional][a] : v.colorpicker.regional[""][a]
        }, _getSwatches: function() {
            if (typeof (this.options.swatches) === "string") {
                return v.colorpicker.swatches[this.options.swatches]
            }
            if (v.isPlainObject(this.options.swatches)) {
                return v.colorpicker.swatches
            }
            return v.colorpicker.swatches.html
        }, _getSwatch: function(c) {
            var a = this._getSwatches(), b = false;
            if (a[c] !== undefined) {
                return a[c]
            }
            v.each(a, function(e, d) {
                if (e.toLowerCase() == c.toLowerCase()) {
                    b = d;
                    return false
                }
                return true
            });
            return b
        }, _parseColor: function(b) {
            var a, c;
            if (b == "") {
                return new w()
            }
            a = this._getSwatch(v.trim(b));
            if (a) {
                return new w(a.r, a.g, a.b)
            }
            c = /^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(b);
            if (c) {
                return new w(c[1] / 255, c[2] / 255, c[3] / 255, parseFloat(c[4]))
            }
            c = /^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(b);
            if (c) {
                return(new w()).setHSL(c[1] / 255, c[2] / 255, c[3] / 255).setAlpha(parseFloat(c[4]))
            }
            c = /^rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(b);
            if (c) {
                return new w(c[1] / 100, c[2] / 100, c[3] / 100, c[4] / 100)
            }
            c = /^hsla?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)$/.exec(b);
            if (c) {
                return(new w()).setHSL(c[1] / 100, c[2] / 100, c[3] / 100).setAlpha(c[4] / 100)
            }
            c = /^#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/.exec(b);
            if (c) {
                return new w(parseInt(c[1], 16) / 255, parseInt(c[2], 16) / 255, parseInt(c[3], 16) / 255)
            }
            c = /^#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/.exec(b);
            if (c) {
                return new w(parseInt(c[1] + c[1], 16) / 255, parseInt(c[2] + c[2], 16) / 255, parseInt(c[3] + c[3], 16) / 255)
            }
            return r(b)
        }, _exactName: function(a) {
            var b = false;
            v.each(this._getSwatches(), function(c, d) {
                if (a.equals(new w(d.r, d.g, d.b))) {
                    b = c;
                    return false
                }
                return true
            });
            return b
        }, _closestName: function(a) {
            var d = a.getRGB(), b = null, e = false, c;
            v.each(this._getSwatches(), function(f, g) {
                c = a.distance(new w(g.r, g.g, g.b));
                if (c < b || b === null) {
                    e = f;
                    if (c == 0) {
                        return false
                    }
                    b = c
                }
                return true
            });
            return e
        }, _formatColor: function(f, e) {
            var c = this, b = null, d = {x: function(g) {
                    return o(g * 255)
                }, d: function(g) {
                    return Math.round(g * 255)
                }, f: function(g) {
                    return g
                }, p: function(g) {
                    return g * 100
                }}, a = e.getChannels();
            if (!v.isArray(f)) {
                f = [f]
            }
            v.each(f, function(h, g) {
                if (c._formats[g]) {
                    b = c._formats[g](e, c);
                    return(b === false)
                } else {
                    b = g.replace(/\\?[argbhsvcmykLAB][xdfp]/g, function(k) {
                        if (k.match(/^\\/)) {
                            return k.slice(1)
                        }
                        return d[k.charAt(1)](a[k.charAt(0)])
                    });
                    return false
                }
            });
            return b
        }, _formats: {"#HEX": function(a, b) {
                return b._formatColor("#rxgxbx", a)
            }, "#HEX3": function(c, b) {
                var a = b._formats.HEX3(c);
                return a === false ? false : "#" + a
            }, HEX: function(a, b) {
                return b._formatColor("rxgxbx", a)
            }, HEX3: function(f, b) {
                var e = f.getRGB(), c = Math.round(e.r * 255), d = Math.round(e.g * 255), a = Math.round(e.b * 255);
                if (((c >>> 4) == (c &= 15)) && ((d >>> 4) == (d &= 15)) && ((a >>> 4) == (a &= 15))) {
                    return c.toString(16) + d.toString(16) + a.toString(16)
                }
                return false
            }, RGB: function(a, b) {
                return a.getAlpha() >= 1 ? b._formatColor("rgb(rd,gd,bd)", a) : false
            }, RGBA: function(a, b) {
                return b._formatColor("rgba(rd,gd,bd,af)", a)
            }, "RGB%": function(a, b) {
                return a.getAlpha() >= 1 ? b._formatColor("rgb(rp%,gp%,bp%)", a) : false
            }, "RGBA%": function(a, b) {
                return b._formatColor("rgba(rp%,gp%,bp%,af)", a)
            }, HSL: function(a, b) {
                return a.getAlpha() >= 1 ? b._formatColor("hsl(hd,sd,vd)", a) : false
            }, HSLA: function(a, b) {
                return b._formatColor("hsla(hd,sd,vd,af)", a)
            }, "HSL%": function(a, b) {
                return a.getAlpha() >= 1 ? b._formatColor("hsl(hp%,sp%,vp%)", a) : false
            }, "HSLA%": function(a, b) {
                return b._formatColor("hsla(hp%,sp%,vp%,af)", a)
            }, NAME: function(a, b) {
                return b._closestName(a)
            }, EXACT: function(a, b) {
                return b._exactName(a)
            }}})
}(jQuery));
/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(b) {
    if (typeof define === "function" && define.amd) {
        define(["jquery"], b)
    } else {
        b(jQuery)
    }
}(function(l) {
    var h = /\+/g;
    function m(a) {
        return a
    }
    function g(a) {
        return decodeURIComponent(a.replace(h, " "))
    }
    function k(b) {
        if (b.indexOf('"') === 0) {
            b = b.slice(1, -1).replace(/\\"/g, '"').replace(/\\\\/g, "\\")
        }
        try {
            return n.json ? JSON.parse(b) : b
        } catch (a) {
        }
    }
    var n = l.cookie = function(b, c, C) {
        if (c !== undefined) {
            C = l.extend({}, n.defaults, C);
            if (typeof C.expires === "number") {
                var a = C.expires, D = C.expires = new Date();
                D.setDate(D.getDate() + a)
            }
            c = n.json ? JSON.stringify(c) : String(c);
            return(document.cookie = [n.raw ? b : encodeURIComponent(b), "=", n.raw ? c : encodeURIComponent(c), C.expires ? "; expires=" + C.expires.toUTCString() : "", C.path ? "; path=" + C.path : "", C.domain ? "; domain=" + C.domain : "", C.secure ? "; secure" : ""].join(""))
        }
        var A = n.raw ? m : g;
        var E = document.cookie.split("; ");
        var B = b ? undefined : {};
        for (var d = 0, f = E.length; d < f; d++) {
            var e = E[d].split("=");
            var y = A(e.shift());
            var x = A(e.join("="));
            if (b && b === y) {
                B = k(x);
                break
            }
            if (!b) {
                B[y] = k(x)
            }
        }
        return B
    };
    n.defaults = {};
    l.removeCookie = function(a, b) {
        if (l.cookie(a) !== undefined) {
            l.cookie(a, "", l.extend({}, b, {expires: -1}));
            return true
        }
        return false
    }
}));
(function(h) {
    h.fn.dump = function() {
        return h.dump(this)
    };
    h.dump = function(b) {
        var c = function(d, r) {
            if (!r) {
                r = 0
            }
            var o = "", p = "";
            for (i = 0; i < r; i++) {
                p += "\t"
            }
            t = a(d);
            switch (t) {
                case"string":
                    return'"' + d + '"';
                    break;
                case"number":
                    return d.toString();
                    break;
                case"boolean":
                    return d ? "true" : "false";
                case"date":
                    return"Date: " + d.toLocaleString();
                case"array":
                    o += "Array ( \n";
                    h.each(d, function(k, l) {
                        o += p + "\t" + k + " => " + c(l, r + 1) + "\n"
                    });
                    o += p + ")";
                    break;
                case"object":
                    o += "Object { \n";
                    h.each(d, function(k, l) {
                        o += p + "\t" + k + ": " + c(l, r + 1) + "\n"
                    });
                    o += p + "}";
                    break;
                case"jquery":
                    o += "jQuery Object { \n";
                    h.each(d, function(k, l) {
                        o += p + "\t" + k + " = " + c(l, r + 1) + "\n"
                    });
                    o += p + "}";
                    break;
                case"regexp":
                    return"RegExp: " + d.toString();
                case"error":
                    return d.toString();
                case"document":
                case"domelement":
                    o += "DOMElement [ \n" + p + "\tnodeName: " + d.nodeName + "\n" + p + "\tnodeValue: " + d.nodeValue + "\n" + p + "\tinnerHTML: [ \n";
                    h.each(d.childNodes, function(l, m) {
                        if (l < 1) {
                            var k = 0
                        }
                        if (a(m) == "string") {
                            if (m.textContent.match(/[^\s]/)) {
                                o += p + "\t\t" + (l - (k || 0)) + " = String: " + f(m.textContent) + "\n"
                            } else {
                                k--
                            }
                        } else {
                            o += p + "\t\t" + (l - (k || 0)) + " = " + c(m, r + 2) + "\n"
                        }
                    });
                    o += p + "\t]\n" + p + "]";
                    break;
                case"function":
                    var q = d.toString().match(/^(.*)\(([^\)]*)\)/im);
                    q[1] = f(q[1].replace(new RegExp("[\\s]+", "g"), " "));
                    q[2] = f(q[2].replace(new RegExp("[\\s]+", "g"), " "));
                    return q[1] + "(" + q[2] + ")";
                case"window":
                default:
                    o += "N/A: " + t;
                    break
            }
            return o
        };
        var a = function(d) {
            var l = typeof (d);
            if (l != "object") {
                return l
            }
            switch (d) {
                case null:
                    return"null";
                case window:
                    return"window";
                case document:
                    return"document";
                case window.event:
                    return"event";
                default:
                    break
            }
            if (d.jquery) {
                return"jquery"
            }
            switch (d.constructor) {
                case Array:
                    return"array";
                case Boolean:
                    return"boolean";
                case Date:
                    return"date";
                case Object:
                    return"object";
                case RegExp:
                    return"regexp";
                case ReferenceError:
                case Error:
                    return"error";
                case null:
                default:
                    break
            }
            switch (d.nodeType) {
                case 1:
                    return"domelement";
                case 3:
                    return"string";
                case null:
                default:
                    break
            }
            return"Unknown"
        };
        return c(b)
    };
    function f(a) {
        return g(e(a))
    }
    function g(a) {
        return a.replace(new RegExp("^[\\s]+", "g"), "")
    }
    function e(a) {
        return a.replace(new RegExp("[\\s]+$", "g"), "")
    }}
)(jQuery);
(function() {
    var b = {getSelection: function() {
            var a = (this.jquery) ? this[0] : this;
            return(("selectionStart" in a && function() {
                var d = a.selectionEnd - a.selectionStart;
                return{start: a.selectionStart, end: a.selectionEnd, length: d, text: a.value.substr(a.selectionStart, d)}
            }) || (document.selection && function() {
                a.focus();
                var g = document.selection.createRange();
                if (g === null) {
                    return{start: 0, end: a.value.length, length: 0}
                }
                var h = a.createTextRange();
                var f = h.duplicate();
                h.moveToBookmark(g.getBookmark());
                f.setEndPoint("EndToStart", h);
                return{start: f.text.length, end: f.text.length + g.text.length, length: g.text.length, text: g.text}
            }) || function() {
                return null
            })()
        }, setSelection: function() {
            var d = (this.jquery) ? this[0] : this;
            var a = arguments[0] || {};
            return(("selectionStart" in d && function() {
                var c = typeof a == "object" ? a.start : a;
                if (c != undefined) {
                    d.selectionStart = c
                }
                if (a.end != undefined) {
                    d.selectionEnd = a.end
                }
                d.focus();
                return this
            }) || (document.selection && function() {
                d.focus();
                var f = document.selection.createRange();
                if (f === null) {
                    return this
                }
                var c = typeof a == "object" ? a.start : a;
                if (c != undefined) {
                    f.moveStart("character", -d.value.length);
                    f.moveStart("character", c);
                    f.collapse()
                }
                if (a.end != undefined) {
                    f.moveEnd("character", a.end - c)
                }
                f.select();
                return this
            }) || function() {
                d.focus();
                return jQuery(d)
            })()
        }, replaceSelection: function() {
            var a = (this.jquery) ? this[0] : this;
            var d = arguments[0] || "";
            return(("selectionStart" in a && function() {
                a.value = a.value.substr(0, a.selectionStart) + d + a.value.substr(a.selectionEnd, a.value.length);
                return this
            }) || (document.selection && function() {
                a.focus();
                document.selection.createRange().text = d;
                return this
            }) || function() {
                a.value += d;
                return jQuery(a)
            })()
        }};
    jQuery.each(b, function(a) {
        jQuery.fn[a] = this
    })
})();
(function(b) {
    b.fn.hoverIntent = function(q, r) {
        var g = {sensitivity: 7, interval: 100, timeout: 0};
        g = b.extend(g, r ? {over: q, out: r} : q);
        var a, f, u, w;
        var v = function(c) {
            a = c.pageX;
            f = c.pageY
        };
        var x = function(c, d) {
            d.hoverIntent_t = clearTimeout(d.hoverIntent_t);
            if ((Math.abs(u - a) + Math.abs(w - f)) < g.sensitivity) {
                b(d).unbind("mousemove", v);
                d.hoverIntent_s = 1;
                return g.over.apply(d, [c])
            } else {
                u = a;
                w = f;
                d.hoverIntent_t = setTimeout(function() {
                    x(c, d)
                }, g.interval)
            }
        };
        var s = function(c, d) {
            d.hoverIntent_t = clearTimeout(d.hoverIntent_t);
            d.hoverIntent_s = 0;
            return g.out.apply(d, [c])
        };
        var y = function(e) {
            var c = jQuery.extend({}, e);
            var d = this;
            if (d.hoverIntent_t) {
                d.hoverIntent_t = clearTimeout(d.hoverIntent_t)
            }
            if (e.type == "mouseenter") {
                u = c.pageX;
                w = c.pageY;
                b(d).bind("mousemove", v);
                if (d.hoverIntent_s != 1) {
                    d.hoverIntent_t = setTimeout(function() {
                        x(c, d)
                    }, g.interval)
                }
            } else {
                b(d).unbind("mousemove", v);
                if (d.hoverIntent_s == 1) {
                    d.hoverIntent_t = setTimeout(function() {
                        s(c, d)
                    }, g.timeout)
                }
            }
        };
        return this.bind("mouseenter", y).bind("mouseleave", y)
    }
})(jQuery);
(function(ai) {
    function ak() {
    }
    function J(a) {
        al = [a]
    }
    function Y(a, c, b) {
        return a && a.apply(c.context || c, b)
    }
    function aa(a) {
        return/\?/.test(a) ? "&" : "?"
    }
    var W = "async", N = "charset", R = "", M = "error", L = "insertBefore", P = "_jqjsp", S = "on", ah = S + "click", ad = S + M, U = S + "load", V = S + "readystatechange", am = "readyState", O = "removeChild", ae = "<script>", T = "success", Q = "timeout", aj = window, an = ai.Deferred, ag = ai("head")[0] || document.documentElement, X = {}, ab = 0, al, ac = {callback: P, url: location.href}, Z = aj.opera, af = !!ai("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;
    function K(n) {
        n = ai.extend({}, ac, n);
        var p = n.success, g = n.error, q = n.complete, y = n.dataFilter, w = n.callbackParameter, f = n.callback, x = n.cache, r = n.pageCache, o = n.charset, m = n.url, u = n.data, d = n.timeout, h, B = 0, b = ak, e, k, s, v, l, a;
        an && an(function(C) {
            C.done(p).fail(g);
            p = C.resolve;
            g = C.reject
        }).promise(n);
        n.abort = function() {
            !(B++) && b()
        };
        if (Y(n.beforeSend, n, [n]) === !1 || B) {
            return n
        }
        m = m || R;
        u = u ? ((typeof u) == "string" ? u : ai.param(u, n.traditional)) : R;
        m += u ? (aa(m) + u) : R;
        w && (m += aa(m) + encodeURIComponent(w) + "=?");
        !x && !r && (m += aa(m) + "_" + (new Date()).getTime() + "=");
        m = m.replace(/=\?(&|$)/, "=" + f + "$1");
        function A(C) {
            if (!(B++)) {
                b();
                r && (X[m] = {s: [C]});
                y && (C = y.apply(n, [C]));
                Y(p, n, [C, T, n]);
                Y(q, n, [n, T])
            }
        }
        function c(C) {
            if (!(B++)) {
                b();
                r && C != Q && (X[m] = C);
                Y(g, n, [n, C]);
                Y(q, n, [n, C])
            }
        }
        if (r && (h = X[m])) {
            h.s ? A(h.s[0]) : c(h)
        } else {
            aj[f] = J;
            v = ai(ae)[0];
            v.id = P + ab++;
            if (o) {
                v[N] = o
            }
            Z && Z.version() < 11.6 ? ((l = ai(ae)[0]).text = "document.getElementById('" + v.id + "')." + ad + "()") : (v[W] = W);
            if (af) {
                v.htmlFor = v.id;
                v.event = ah
            }
            v[U] = v[ad] = v[V] = function(D) {
                if (!v[am] || !/i/.test(v[am])) {
                    try {
                        v[ah] && v[ah]()
                    } catch (C) {
                    }
                    D = al;
                    al = 0;
                    D ? A(D[0]) : c(M)
                }
            };
            v.src = m;
            b = function(C) {
                a && clearTimeout(a);
                v[V] = v[U] = v[ad] = null;
                ag[O](v);
                l && ag[O](l)
            };
            ag[L](v, (s = ag.firstChild));
            l && ag[L](l, s);
            a = d > 0 && setTimeout(function() {
                c(Q)
            }, d)
        }
        return n
    }
    K.setup = function(a) {
        ai.extend(ac, a)
    };
    ai.jsonp = K
})(jQuery);
(function() {
    var b = function(e, f, a) {
        e = jsPlumbUtil.isArray(e) ? e : [e.x, e.y];
        f = jsPlumbUtil.isArray(f) ? f : [f.x, f.y];
        return a(e, f)
    };
    jsPlumbUtil = {isArray: function(a) {
            return Object.prototype.toString.call(a) === "[object Array]"
        }, isNumber: function(a) {
            return Object.prototype.toString.call(a) === "[object Number]"
        }, isString: function(a) {
            return typeof a === "string"
        }, isBoolean: function(a) {
            return typeof a === "boolean"
        }, isNull: function(a) {
            return a == null
        }, isObject: function(a) {
            return a == null ? false : Object.prototype.toString.call(a) === "[object Object]"
        }, isDate: function(a) {
            return Object.prototype.toString.call(a) === "[object Date]"
        }, isFunction: function(a) {
            return Object.prototype.toString.call(a) === "[object Function]"
        }, clone: function(f) {
            if (this.isString(f)) {
                return"" + f
            } else {
                if (this.isBoolean(f)) {
                    return !!f
                } else {
                    if (this.isDate(f)) {
                        return new Date(f.getTime())
                    } else {
                        if (this.isFunction(f)) {
                            return f
                        } else {
                            if (this.isArray(f)) {
                                var g = [];
                                for (var a = 0; a < f.length; a++) {
                                    g.push(this.clone(f[a]))
                                }
                                return g
                            } else {
                                if (this.isObject(f)) {
                                    var g = {};
                                    for (var a in f) {
                                        g[a] = this.clone(f[a])
                                    }
                                    return g
                                } else {
                                    return f
                                }
                            }
                        }
                    }
                }
            }
        }, merge: function(n, o) {
            var a = this.clone(n);
            for (var c in o) {
                if (a[c] == null || this.isString(o[c]) || this.isBoolean(o[c])) {
                    a[c] = o[c]
                } else {
                    if (this.isArray(o[c])) {
                        var m = [];
                        if (this.isArray(a[c])) {
                            m.push.apply(m, a[c])
                        }
                        m.push.apply(m, o[c]);
                        a[c] = m
                    } else {
                        if (this.isObject(o[c])) {
                            if (!this.isObject(a[c])) {
                                a[c] = {}
                            }
                            for (var l in o[c]) {
                                a[c][l] = o[c][l]
                            }
                        }
                    }
                }
            }
            return a
        }, copyValues: function(h, f, g) {
            for (var a = 0; a < h.length; a++) {
                g[h[a]] = f[h[a]]
            }
        }, functionChain: function(k, g, l) {
            for (var a = 0; a < l.length; a++) {
                var h = l[a][0][l[a][1]].apply(l[a][0], l[a][2]);
                if (h === g) {
                    return h
                }
            }
            return k
        }, populate: function(g, h) {
            var a = function(c) {
                var e = c.match(/(\${.*?})/g);
                if (e != null) {
                    for (var l = 0; l < e.length; l++) {
                        var d = h[e[l].substring(2, e[l].length - 1)];
                        if (d != null) {
                            c = c.replace(e[l], d)
                        }
                    }
                }
                return c
            }, f = function(c) {
                if (c != null) {
                    if (jsPlumbUtil.isString(c)) {
                        return a(c)
                    } else {
                        if (jsPlumbUtil.isArray(c)) {
                            var d = [];
                            for (var e = 0; e < c.length; e++) {
                                d.push(f(c[e]))
                            }
                            return d
                        } else {
                            if (jsPlumbUtil.isObject(c)) {
                                var d = {};
                                for (var e in c) {
                                    d[e] = f(c[e])
                                }
                                return d
                            } else {
                                return c
                            }
                        }
                    }
                }
            };
            return f(g)
        }, convertStyle: function(p, a) {
            if ("transparent" === p) {
                return p
            }
            var k = p, l = function(c) {
                return c.length == 1 ? "0" + c : c
            }, o = function(c) {
                return l(Number(c).toString(16))
            }, n = /(rgb[a]?\()(.*)(\))/;
            if (p.match(n)) {
                var m = p.match(n)[2].split(",");
                k = "#" + o(m[0]) + o(m[1]) + o(m[2]);
                if (!a && m.length == 4) {
                    k = k + o(m[3])
                }
            }
            return k
        }, gradient: function(d, a) {
            return b(d, a, function(c, f) {
                if (f[0] == c[0]) {
                    return f[1] > c[1] ? Infinity : -Infinity
                } else {
                    if (f[1] == c[1]) {
                        return f[0] > c[0] ? 0 : -0
                    } else {
                        return(f[1] - c[1]) / (f[0] - c[0])
                    }
                }
            })
        }, normal: function(d, a) {
            return -1 / this.gradient(d, a)
        }, lineLength: function(d, a) {
            return b(d, a, function(c, f) {
                return Math.sqrt(Math.pow(f[1] - c[1], 2) + Math.pow(f[0] - c[0], 2))
            })
        }, segment: function(d, a) {
            return b(d, a, function(c, f) {
                if (f[0] > c[0]) {
                    return(f[1] > c[1]) ? 2 : 1
                } else {
                    if (f[0] == c[0]) {
                        return f[1] > c[1] ? 2 : 1
                    } else {
                        return(f[1] > c[1]) ? 3 : 4
                    }
                }
            })
        }, theta: function(d, a) {
            return b(d, a, function(l, m) {
                var n = jsPlumbUtil.gradient(l, m), k = Math.atan(n), c = jsPlumbUtil.segment(l, m);
                if ((c == 4 || c == 3)) {
                    k += Math.PI
                }
                if (k < 0) {
                    k += (2 * Math.PI)
                }
                return k
            })
        }, intersects: function(q, r) {
            var u = q.x, w = q.x + q.w, a = q.y, o = q.y + q.h, s = r.x, v = r.x + r.w, n = r.y, p = r.y + r.h;
            return((u <= s && s <= w) && (a <= n && n <= o)) || ((u <= v && v <= w) && (a <= n && n <= o)) || ((u <= s && s <= w) && (a <= p && p <= o)) || ((u <= v && s <= w) && (a <= p && p <= o)) || ((s <= u && u <= v) && (n <= a && a <= p)) || ((s <= w && w <= v) && (n <= a && a <= p)) || ((s <= u && u <= v) && (n <= o && o <= p)) || ((s <= w && u <= v) && (n <= o && o <= p))
        }, segmentMultipliers: [null, [1, -1], [1, 1], [-1, 1], [-1, -1]], inverseSegmentMultipliers: [null, [-1, -1], [-1, 1], [1, 1], [1, -1]], pointOnLine: function(u, p, s) {
            var q = jsPlumbUtil.gradient(u, p), a = jsPlumbUtil.segment(u, p), m = s > 0 ? jsPlumbUtil.segmentMultipliers[a] : jsPlumbUtil.inverseSegmentMultipliers[a], r = Math.atan(q), o = Math.abs(s * Math.sin(r)) * m[1], n = Math.abs(s * Math.cos(r)) * m[0];
            return{x: u.x + n, y: u.y + o}
        }, perpendicularLineTo: function(o, n, m) {
            var p = jsPlumbUtil.gradient(o, n), l = Math.atan(-1 / p), k = m / 2 * Math.sin(l), a = m / 2 * Math.cos(l);
            return[{x: n.x + a, y: n.y + k}, {x: n.x - a, y: n.y - k}]
        }, findWithFunction: function(a, e) {
            if (a) {
                for (var f = 0; f < a.length; f++) {
                    if (e(a[f])) {
                        return f
                    }
                }
            }
            return -1
        }, clampToGrid: function(a, h, m, k, l) {
            var n = function(g, f) {
                var c = g % f, e = Math.floor(g / f), d = c >= (f / 2) ? 1 : 0;
                return(e + d) * f
            };
            return[k || m == null ? a : n(a, m[0]), l || m == null ? h : n(h, m[1])]
        }, indexOf: function(a, d) {
            return jsPlumbUtil.findWithFunction(a, function(c) {
                return c == d
            })
        }, removeWithFunction: function(f, e) {
            var a = jsPlumbUtil.findWithFunction(f, e);
            if (a > -1) {
                f.splice(a, 1)
            }
            return a != -1
        }, remove: function(f, e) {
            var a = jsPlumbUtil.indexOf(f, e);
            if (a > -1) {
                f.splice(a, 1)
            }
            return a != -1
        }, addWithFunction: function(e, f, a) {
            if (jsPlumbUtil.findWithFunction(e, a) == -1) {
                e.push(f)
            }
        }, addToList: function(f, h, g) {
            var a = f[h];
            if (a == null) {
                a = [], f[h] = a
            }
            a.push(g);
            return a
        }, EventGenerator: function() {
            var g = {}, h = this, f = false;
            var a = ["ready"];
            this.bind = function(d, c) {
                jsPlumbUtil.addToList(g, d, c);
                return h
            };
            this.fire = function(e, d, n) {
                if (!f && g[e]) {
                    for (var m = 0; m < g[e].length; m++) {
                        if (jsPlumbUtil.findWithFunction(a, function(k) {
                            return k === e
                        }) != -1) {
                            g[e][m](d, n)
                        } else {
                            try {
                                g[e][m](d, n)
                            } catch (c) {
                                jsPlumbUtil.log("jsPlumb: fire failed for event " + e + " : " + c)
                            }
                        }
                    }
                }
                return h
            };
            this.unbind = function(c) {
                if (c) {
                    delete g[c]
                } else {
                    g = {}
                }
                return h
            };
            this.getListener = function(c) {
                return g[c]
            };
            this.setSuspendEvents = function(c) {
                f = c
            };
            this.isSuspendEvents = function() {
                return f
            }
        }, logEnabled: true, log: function() {
            if (jsPlumbUtil.logEnabled && typeof console != "undefined") {
                try {
                    var d = arguments[arguments.length - 1];
                    console.log(d)
                } catch (a) {
                }
            }
        }, group: function(a) {
            if (jsPlumbUtil.logEnabled && typeof console != "undefined") {
                console.group(a)
            }
        }, groupEnd: function(a) {
            if (jsPlumbUtil.logEnabled && typeof console != "undefined") {
                console.groupEnd(a)
            }
        }, time: function(a) {
            if (jsPlumbUtil.logEnabled && typeof console != "undefined") {
                console.time(a)
            }
        }, timeEnd: function(a) {
            if (jsPlumbUtil.logEnabled && typeof console != "undefined") {
                console.timeEnd(a)
            }
        }, removeElement: function(a) {
            if (a != null && a.parentNode != null) {
                a.parentNode.removeChild(a)
            }
        }, removeElements: function(d) {
            for (var a = 0; a < d.length; a++) {
                jsPlumbUtil.removeElement(d[a])
            }
        }}
})();
(function() {
    var e = !!document.createElement("canvas").getContext, f = !!window.SVGAngle || document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1"), g = function() {
        if (g.vml == undefined) {
            var a = document.body.appendChild(document.createElement("div"));
            a.innerHTML = '<v:shape id="vml_flag1" adj="1" />';
            var b = a.firstChild;
            b.style.behavior = "url(#default#VML)";
            g.vml = b ? typeof b.adj == "object" : true;
            a.parentNode.removeChild(a)
        }
        return g.vml
    };
    var h = function(a) {
        var b = {}, c = [], m = {}, n = {}, d = {};
        this.register = function(u) {
            var v = jsPlumb.CurrentLibrary;
            u = v.getElementObject(u);
            var l = a.getId(u), w = v.getDOMElement(u), k = v.getOffset(u);
            if (!b[l]) {
                b[l] = u;
                c.push(u);
                m[l] = {}
            }
            var s = function(o, A) {
                if (o) {
                    for (var r = 0; r < o.childNodes.length; r++) {
                        if (o.childNodes[r].nodeType != 3 && o.childNodes[r].nodeType != 8) {
                            var p = v.getElementObject(o.childNodes[r]), B = a.getId(p, null, true);
                            if (B && n[B] && n[B] > 0) {
                                var q = v.getOffset(p);
                                m[l][B] = {id: B, offset: {left: q.left - k.left, top: q.top - k.top}};
                                d[B] = l
                            }
                            s(o.childNodes[r])
                        }
                    }
                }
            };
            s(w)
        };
        this.updateOffsets = function(l) {
            var C = jsPlumb.CurrentLibrary, x = C.getElementObject(l), y = a.getId(x), w = m[y], A = C.getOffset(x);
            if (w) {
                for (var D in w) {
                    var B = C.getElementObject(D), k = C.getOffset(B);
                    m[y][D] = {id: D, offset: {left: k.left - A.left, top: k.top - A.top}};
                    d[D] = y
                }
            }
        };
        this.endpointAdded = function(B) {
            var I = jsPlumb.CurrentLibrary, F = document.body, D = a.getId(B), G = I.getDOMElement(B), C = G.parentNode, k = C == F;
            n[D] = n[D] ? n[D] + 1 : 1;
            while (C != null && C != F) {
                var J = a.getId(C, null, true);
                if (J && b[J]) {
                    var p = -1, H = I.getElementObject(C), l = I.getOffset(H);
                    if (m[J][D] == null) {
                        var E = jsPlumb.CurrentLibrary.getOffset(B);
                        m[J][D] = {id: D, offset: {left: E.left - l.left, top: E.top - l.top}};
                        d[D] = J
                    }
                    break
                }
                C = C.parentNode
            }
        };
        this.endpointDeleted = function(l) {
            if (n[l.elementId]) {
                n[l.elementId]--;
                if (n[l.elementId] <= 0) {
                    for (var k in m) {
                        if (m[k]) {
                            delete m[k][l.elementId];
                            delete d[l.elementId]
                        }
                    }
                }
            }
        };
        this.changeId = function(l, k) {
            m[k] = m[l];
            m[l] = {};
            d[k] = d[l];
            d[l] = null
        };
        this.getElementsForDraggable = function(k) {
            return m[k]
        };
        this.elementRemoved = function(k) {
            var l = d[k];
            if (l) {
                delete m[l][k];
                delete d[k]
            }
        };
        this.reset = function() {
            b = {};
            c = [];
            m = {};
            n = {}
        }
    };
    if (!window.console) {
        window.console = {time: function() {
            }, timeEnd: function() {
            }, group: function() {
            }, groupEnd: function() {
            }, log: function() {
            }}
    }
    window.jsPlumbAdapter = {headless: false, appendToRoot: function(a) {
            document.body.appendChild(a)
        }, getRenderModes: function() {
            return["canvas", "svg", "vml"]
        }, isRenderModeAvailable: function(a) {
            return{canvas: e, svg: f, vml: g()}[a]
        }, getDragManager: function(a) {
            return new h(a)
        }, setRenderMode: function(a) {
            var b;
            if (a) {
                a = a.toLowerCase();
                var d = this.isRenderModeAvailable("canvas"), l = this.isRenderModeAvailable("svg"), c = this.isRenderModeAvailable("vml");
                if (a === "svg") {
                    if (l) {
                        b = "svg"
                    } else {
                        if (d) {
                            b = "canvas"
                        } else {
                            if (c) {
                                b = "vml"
                            }
                        }
                    }
                } else {
                    if (a === "canvas" && d) {
                        b = "canvas"
                    } else {
                        if (c) {
                            b = "vml"
                        }
                    }
                }
            }
            return b
        }}
})();
(function() {
    var ad = jsPlumbUtil.findWithFunction, K = jsPlumbUtil.indexOf, U = jsPlumbUtil.removeWithFunction, aa = jsPlumbUtil.remove, S = jsPlumbUtil.addWithFunction, ab = jsPlumbUtil.addToList, Z = jsPlumbUtil.isArray, W = jsPlumbUtil.isString, L = jsPlumbUtil.isObject;
    var Q = function(b, a) {
        return X.CurrentLibrary.getAttribute(af(b), a)
    }, ah = function(b, a, c) {
        X.CurrentLibrary.setAttribute(af(b), a, c)
    }, H = function(a, b) {
        X.CurrentLibrary.addClass(af(a), b)
    }, ac = function(a, b) {
        return X.CurrentLibrary.hasClass(af(a), b)
    }, Y = function(a, b) {
        X.CurrentLibrary.removeClass(af(a), b)
    }, af = function(a) {
        return X.CurrentLibrary.getElementObject(a)
    }, P = function(c, d) {
        var a = X.CurrentLibrary.getOffset(af(c));
        if (d != null) {
            var b = d.getZoom();
            return{left: a.left / b, top: a.top / b}
        } else {
            return a
        }
    }, aj = function(a) {
        return X.CurrentLibrary.getSize(af(a))
    }, V = jsPlumbUtil.log, N = jsPlumbUtil.group, ae = jsPlumbUtil.groupEnd, O = jsPlumbUtil.time, M = jsPlumbUtil.timeEnd, T = function() {
        return"" + (new Date()).getTime()
    }, R = window.jsPlumbUIComponent = function(y) {
        var f = this, x = arguments, h = false, p = y.parameters || {}, r = f.idPrefix, d = r + (new Date()).getTime(), e = null, w = null;
        f._jsPlumb = y._jsPlumb;
        f.getId = function() {
            return d
        };
        f.hoverClass = y.hoverClass || f._jsPlumb.Defaults.HoverClass || X.Defaults.HoverClass;
        jsPlumbUtil.EventGenerator.apply(this);
        if (y.events) {
            for (var c in y.events) {
                f.bind(c, y.events[c])
            }
        }
        this.clone = function() {
            var A = new Object();
            f.constructor.apply(A, x);
            return A
        };
        this.getParameter = function(A) {
            return p[A]
        }, this.getParameters = function() {
            return p
        }, this.setParameter = function(B, A) {
            p[B] = A
        }, this.setParameters = function(A) {
            p = A
        }, this.overlayPlacements = [];
        var q = y.beforeDetach;
        this.isDetachAllowed = function(C) {
            var B = true;
            if (q) {
                try {
                    B = q(C)
                } catch (A) {
                    V("jsPlumb: beforeDetach callback failed", A)
                }
            }
            return B
        };
        var n = y.beforeDrop;
        this.isDropAllowed = function(A, D, C, F, E) {
            var B = f._jsPlumb.checkCondition("beforeDrop", {sourceId: A, targetId: D, scope: C, connection: F, dropEndpoint: E});
            if (n) {
                try {
                    B = n({sourceId: A, targetId: D, scope: C, connection: F, dropEndpoint: E})
                } catch (G) {
                    V("jsPlumb: beforeDrop callback failed", G)
                }
            }
            return B
        };
        var b = function() {
            if (e && w) {
                var A = {};
                X.extend(A, e);
                X.extend(A, w);
                delete f.hoverPaintStyle;
                if (A.gradient && e.fillStyle) {
                    delete A.gradient
                }
                w = A
            }
        };
        this.setPaintStyle = function(B, A) {
            e = B;
            f.paintStyleInUse = e;
            b();
            if (!A) {
                f.repaint()
            }
        };
        this.getPaintStyle = function() {
            return e
        };
        this.setHoverPaintStyle = function(B, A) {
            w = B;
            b();
            if (!A) {
                f.repaint()
            }
        };
        this.getHoverPaintStyle = function() {
            return w
        };
        this.setHover = function(C, A, B) {
            if (!f._jsPlumb.currentlyDragging && !f._jsPlumb.isHoverSuspended()) {
                h = C;
                if (f.canvas != null) {
                    if (f.hoverClass != null) {
                        if (C) {
                            s.addClass(f.canvas, f.hoverClass)
                        } else {
                            s.removeClass(f.canvas, f.hoverClass)
                        }
                    }
                    if (C) {
                        s.addClass(f.canvas, f._jsPlumb.hoverClass)
                    } else {
                        s.removeClass(f.canvas, f._jsPlumb.hoverClass)
                    }
                }
                if (w != null) {
                    f.paintStyleInUse = C ? w : e;
                    if (!f._jsPlumb.isSuspendDrawing()) {
                        B = B || T();
                        f.repaint({timestamp: B, recalc: false})
                    }
                }
                if (f.getAttachedElements && !A) {
                    a(C, T(), f)
                }
            }
        };
        this.isHover = function() {
            return h
        };
        this.bindListeners = function(A, C, B) {
            A.bind("click", function(E, D) {
                C.fire("click", C, D)
            });
            A.bind("dblclick", function(E, D) {
                C.fire("dblclick", C, D)
            });
            A.bind("contextmenu", function(E, D) {
                C.fire("contextmenu", C, D)
            });
            A.bind("mouseenter", function(E, D) {
                if (!C.isHover()) {
                    B(true);
                    C.fire("mouseenter", C, D)
                }
            });
            A.bind("mouseexit", function(E, D) {
                if (C.isHover()) {
                    B(false);
                    C.fire("mouseexit", C, D)
                }
            });
            A.bind("mousedown", function(E, D) {
                C.fire("mousedown", C, D)
            });
            A.bind("mouseup", function(E, D) {
                C.fire("mouseup", C, D)
            })
        };
        var s = X.CurrentLibrary, u = ["click", "dblclick", "mouseenter", "mouseout", "mousemove", "mousedown", "mouseup", "contextmenu"], g = {mouseout: "mouseexit"}, o = function(B, A, C) {
            var D = g[C] || C;
            s.bind(B, C, function(E) {
                A.fire(D, A, E)
            })
        }, k = function(A, B) {
            var C = g[B] || B;
            s.unbind(A, B)
        };
        this.attachListeners = function(B, A) {
            for (var C = 0, D = u.length; C < D; C++) {
                o(B, A, u[C])
            }
        };
        var a = function(A, B, E) {
            var C = f.getAttachedElements();
            if (C) {
                for (var D = 0, F = C.length; D < F; D++) {
                    if (!E || E != C[D]) {
                        C[D].setHover(A, true, B)
                    }
                }
            }
        };
        this.reattachListenersForElement = function(A) {
            if (arguments.length > 1) {
                for (var B = 0, C = u.length; B < C; B++) {
                    k(A, u[B])
                }
                for (var B = 1, C = arguments.length; B < C; B++) {
                    f.attachListeners(A, arguments[B])
                }
            }
        };
        var v = [], m = function(A) {
            return A == null ? null : A.split(" ")
        }, l = function(B, D) {
            if (f.getDefaultType) {
                var A = f.getTypeDescriptor();
                var C = jsPlumbUtil.merge({}, f.getDefaultType());
                for (var E = 0, F = v.length; E < F; E++) {
                    C = jsPlumbUtil.merge(C, f._jsPlumb.getType(v[E], A))
                }
                if (B) {
                    C = jsPlumbUtil.populate(C, B)
                }
                f.applyType(C, D);
                if (!D) {
                    f.repaint()
                }
            }
        };
        f.setType = function(C, A, B) {
            v = m(C) || [];
            l(A, B)
        };
        f.getType = function() {
            return v
        };
        f.reapplyTypes = function(A, B) {
            l(A, B)
        };
        f.hasType = function(A) {
            return jsPlumbUtil.indexOf(v, A) != -1
        };
        f.addType = function(C, G, B) {
            var D = m(C), A = false;
            if (D != null) {
                for (var E = 0, F = D.length; E < F; E++) {
                    if (!f.hasType(D[E])) {
                        v.push(D[E]);
                        A = true
                    }
                }
                if (A) {
                    l(G, B)
                }
            }
        };
        f.removeType = function(B, A) {
            var D = m(B), G = false, C = function(am) {
                var an = jsPlumbUtil.indexOf(v, am);
                if (an != -1) {
                    v.splice(an, 1);
                    return true
                }
                return false
            };
            if (D != null) {
                for (var E = 0, F = D.length; E < F; E++) {
                    G = C(D[E]) || G
                }
                if (G) {
                    l(null, A)
                }
            }
        };
        f.toggleType = function(B, G, A) {
            var C = m(B);
            if (C != null) {
                for (var D = 0, E = C.length; D < E; D++) {
                    var F = jsPlumbUtil.indexOf(v, C[D]);
                    if (F != -1) {
                        v.splice(F, 1)
                    } else {
                        v.push(C[D])
                    }
                }
                l(G, A)
            }
        };
        this.applyType = function(B, A) {
            f.setPaintStyle(B.paintStyle, A);
            f.setHoverPaintStyle(B.hoverPaintStyle, A);
            if (B.parameters) {
                for (var C in B.parameters) {
                    f.setParameter(C, B.parameters[C])
                }
            }
        };
        this.addClass = function(A) {
            if (f.canvas != null) {
                H(f.canvas, A)
            }
        };
        this.removeClass = function(A) {
            if (f.canvas != null) {
                Y(f.canvas, A)
            }
        }
    }, I = window.overlayCapableJsPlumbUIComponent = function(k) {
        R.apply(this, arguments);
        var a = this;
        this.overlays = [];
        var m = function(s) {
            var q = null;
            if (Z(s)) {
                var r = s[0], u = X.extend({component: a, _jsPlumb: a._jsPlumb}, s[1]);
                if (s.length == 3) {
                    X.extend(u, s[2])
                }
                q = new X.Overlays[a._jsPlumb.getRenderMode()][r](u)
            } else {
                if (s.constructor == String) {
                    q = new X.Overlays[a._jsPlumb.getRenderMode()][s]({component: a, _jsPlumb: a._jsPlumb})
                } else {
                    q = s
                }
            }
            a.overlays.push(q)
        }, l = function(u) {
            var r = a.defaultOverlayKeys || [], s = u.overlays, q = function(x) {
                return a._jsPlumb.Defaults[x] || X.Defaults[x] || []
            };
            if (!s) {
                s = []
            }
            for (var v = 0, w = r.length; v < w; v++) {
                s.unshift.apply(s, q(r[v]))
            }
            return s
        };
        var o = l(k);
        if (o) {
            for (var f = 0, h = o.length; f < h; f++) {
                m(o[f])
            }
        }
        var p = function(s) {
            var r = -1;
            for (var u = 0, q = a.overlays.length; u < q; u++) {
                if (s === a.overlays[u].id) {
                    r = u;
                    break
                }
            }
            return r
        };
        this.addOverlay = function(r, q) {
            m(r);
            if (!q) {
                a.repaint()
            }
        };
        this.getOverlay = function(q) {
            var r = p(q);
            return r >= 0 ? a.overlays[r] : null
        };
        this.getOverlays = function() {
            return a.overlays
        };
        this.hideOverlay = function(q) {
            var r = a.getOverlay(q);
            if (r) {
                r.hide()
            }
        };
        this.hideOverlays = function() {
            for (var q = 0, r = a.overlays.length; q < r; q++) {
                a.overlays[q].hide()
            }
        };
        this.showOverlay = function(q) {
            var r = a.getOverlay(q);
            if (r) {
                r.show()
            }
        };
        this.showOverlays = function() {
            for (var q = 0, r = a.overlays.length; q < r; q++) {
                a.overlays[q].show()
            }
        };
        this.removeAllOverlays = function() {
            for (var q = 0, r = a.overlays.length; q < r; q++) {
                if (a.overlays[q].cleanup) {
                    a.overlays[q].cleanup()
                }
            }
            a.overlays.splice(0, a.overlays.length);
            a.repaint()
        };
        this.removeOverlay = function(q) {
            var r = p(q);
            if (r != -1) {
                var s = a.overlays[r];
                if (s.cleanup) {
                    s.cleanup()
                }
                a.overlays.splice(r, 1)
            }
        };
        this.removeOverlays = function() {
            for (var q = 0, r = arguments.length; q < r; q++) {
                a.removeOverlay(arguments[q])
            }
        };
        var n = "__label", b = function(s) {
            var r = {cssClass: s.cssClass, labelStyle: this.labelStyle, id: n, component: a, _jsPlumb: a._jsPlumb}, q = X.extend(r, s);
            return new X.Overlays[a._jsPlumb.getRenderMode()].Label(q)
        };
        if (k.label) {
            var e = k.labelLocation || a.defaultLabelLocation || 0.5, d = k.labelStyle || a._jsPlumb.Defaults.LabelStyle || X.Defaults.LabelStyle;
            this.overlays.push(b({label: k.label, location: e, labelStyle: d}))
        }
        this.setLabel = function(r) {
            var q = a.getOverlay(n);
            if (!q) {
                var s = r.constructor == String || r.constructor == Function ? {label: r} : r;
                q = b(s);
                this.overlays.push(q)
            } else {
                if (r.constructor == String || r.constructor == Function) {
                    q.setLabel(r)
                } else {
                    if (r.label) {
                        q.setLabel(r.label)
                    }
                    if (r.location) {
                        q.setLocation(r.location)
                    }
                }
            }
            if (!a._jsPlumb.isSuspendDrawing()) {
                a.repaint()
            }
        };
        this.getLabel = function() {
            var q = a.getOverlay(n);
            return q != null ? q.getLabel() : null
        };
        this.getLabelOverlay = function() {
            return a.getOverlay(n)
        };
        var g = this.applyType;
        this.applyType = function(u, s) {
            g(u, s);
            a.removeAllOverlays();
            if (u.overlays) {
                for (var q = 0, r = u.overlays.length; q < r; q++) {
                    a.addOverlay(u.overlays[q], true)
                }
            }
        };
        var c = this.setHover;
        this.setHover = function(v, s, u) {
            c.apply(a, arguments);
            for (var q = 0, r = a.overlays.length; q < r; q++) {
                a.overlays[q][v ? "addClass" : "removeClass"](a._jsPlumb.hoverClass)
            }
        }
    };
    var ag = 0, ai = function() {
        var a = ag + 1;
        ag++;
        return a
    };
    var J = function(v) {
        this.Defaults = {Anchor: "BottomCenter", Anchors: [null, null], ConnectionsDetachable: true, ConnectionOverlays: [], Connector: "Bezier", Container: null, DoNotThrowErrors: false, DragOptions: {}, DropOptions: {}, Endpoint: "Dot", EndpointOverlays: [], Endpoints: [null, null], EndpointStyle: {fillStyle: "#456"}, EndpointStyles: [null, null], EndpointHoverStyle: null, EndpointHoverStyles: [null, null], HoverPaintStyle: null, LabelStyle: {color: "black"}, LogEnabled: false, Overlays: [], MaxConnections: 1, PaintStyle: {lineWidth: 8, strokeStyle: "#456"}, ReattachConnections: false, RenderMode: "svg", Scope: "jsPlumb_DefaultScope"};
        if (v) {
            X.extend(this.Defaults, v)
        }
        this.logEnabled = this.Defaults.LogEnabled;
        var bt = {}, bb = {};
        this.registerConnectionType = function(ak, al) {
            bt[ak] = X.extend({}, al)
        };
        this.registerConnectionTypes = function(ak) {
            for (var al in ak) {
                bt[al] = X.extend({}, ak[al])
            }
        };
        this.registerEndpointType = function(ak, al) {
            bb[ak] = X.extend({}, al)
        };
        this.registerEndpointTypes = function(ak) {
            for (var al in ak) {
                bb[al] = X.extend({}, ak[al])
            }
        };
        this.getType = function(ak, al) {
            return al === "connection" ? bt[ak] : bb[ak]
        };
        jsPlumbUtil.EventGenerator.apply(this);
        var bM = this, w = ai(), bD = bM.bind, G = {}, d = 1;
        this.getInstanceIndex = function() {
            return w
        };
        this.setZoom = function(ak, al) {
            d = ak;
            if (al) {
                bM.repaintEverything()
            }
        };
        this.getZoom = function() {
            return d
        };
        for (var aq in this.Defaults) {
            G[aq] = this.Defaults[aq]
        }
        this.bind = function(ak, al) {
            if ("ready" === ak && s) {
                al()
            } else {
                bD.apply(bM, [ak, al])
            }
        };
        bM.importDefaults = function(ak) {
            for (var al in ak) {
                bM.Defaults[al] = ak[al]
            }
        };
        bM.restoreDefaults = function() {
            bM.Defaults = X.extend({}, G)
        };
        var p = null, bi = null, s = false, bd = null, bv = {}, bA = {}, by = {}, bc = {}, bK = {}, bh = {}, bN = {}, bG = [], bf = [], m = this.Defaults.Scope, g = null, bx = function(ak, al) {
            if (bM.Defaults.Container) {
                X.CurrentLibrary.appendElement(ak, bM.Defaults.Container)
            } else {
                if (!al) {
                    jsPlumbAdapter.appendToRoot(ak)
                } else {
                    X.CurrentLibrary.appendElement(ak, al)
                }
            }
        }, F = 1, a0 = function() {
            return"" + F++
        }, A = function(ak) {
            return ak._nodes ? ak._nodes : ak
        }, bm = function(ao, al, am, an) {
            if (!jsPlumbAdapter.headless && !bq) {
                var ak = Q(ao, "id"), aA = bM.dragManager.getElementsForDraggable(ak);
                if (am == null) {
                    am = T()
                }
                bM.anchorManager.redraw(ak, al, am, null, an);
                if (aA) {
                    for (var ap in aA) {
                        bM.anchorManager.redraw(aA[ap].id, al, am, aA[ap].offset, an)
                    }
                }
            }
        }, C = function(ao, am) {
            var al = null;
            if (Z(ao)) {
                al = [];
                for (var ap = 0, aA = ao.length; ap < aA; ap++) {
                    var an = af(ao[ap]), ak = Q(an, "id");
                    al.push(am(an, ak))
                }
            } else {
                var an = af(ao), ak = Q(an, "id");
                al = am(an, ak)
            }
            return al
        }, aw = function(ak) {
            return by[ak]
        }, bk = function(ap, aD, am) {
            if (!jsPlumbAdapter.headless) {
                var ak = aD == null ? false : aD, ao = X.CurrentLibrary;
                if (ak) {
                    if (ao.isDragSupported(ap) && !ao.isAlreadyDraggable(ap)) {
                        var al = am || bM.Defaults.DragOptions || X.Defaults.DragOptions;
                        al = X.extend({}, al);
                        var an = ao.dragEvents.drag, aC = ao.dragEvents.stop, aA = ao.dragEvents.start;
                        al[aA] = az(al[aA], function() {
                            bM.setHoverSuspended(true);
                            bM.select({source: ap}).addClass(bM.elementDraggingClass + " " + bM.sourceElementDraggingClass, true);
                            bM.select({target: ap}).addClass(bM.elementDraggingClass + " " + bM.targetElementDraggingClass, true)
                        });
                        al[an] = az(al[an], function() {
                            var aE = ao.getUIPosition(arguments, bM.getZoom());
                            bm(ap, aE, null, true);
                            H(ap, "jsPlumb_dragged")
                        });
                        al[aC] = az(al[aC], function() {
                            var aE = ao.getUIPosition(arguments, bM.getZoom());
                            bm(ap, aE);
                            Y(ap, "jsPlumb_dragged");
                            bM.setHoverSuspended(false);
                            bM.select({source: ap}).removeClass(bM.elementDraggingClass + " " + bM.sourceElementDraggingClass, true);
                            bM.select({target: ap}).removeClass(bM.elementDraggingClass + " " + bM.targetElementDraggingClass, true)
                        });
                        var aB = x(ap);
                        bN[aB] = true;
                        var ak = bN[aB];
                        al.disabled = ak == null ? false : !ak;
                        ao.initDraggable(ap, al, false, bM);
                        bM.dragManager.register(ap)
                    }
                }
            }
        }, ar = function(ap, al) {
            var aC = X.extend({sourceIsNew: true, targetIsNew: true}, ap);
            if (al) {
                X.extend(aC, al)
            }
            if (aC.source && aC.source.endpoint) {
                aC.sourceEndpoint = aC.source
            }
            if (aC.target && aC.target.endpoint) {
                aC.targetEndpoint = aC.target
            }
            if (ap.uuids) {
                aC.sourceEndpoint = aw(ap.uuids[0]);
                aC.targetEndpoint = aw(ap.uuids[1])
            }
            if (aC.sourceEndpoint && aC.sourceEndpoint.isFull()) {
                V(bM, "could not add connection; source endpoint is full");
                return
            }
            if (aC.targetEndpoint && aC.targetEndpoint.isFull()) {
                V(bM, "could not add connection; target endpoint is full");
                return
            }
            if (aC.sourceEndpoint && !aC.sourceEndpoint.addedViaMouse) {
                aC.sourceIsNew = false
            }
            if (aC.targetEndpoint && !aC.targetEndpoint.addedViaMouse) {
                aC.targetIsNew = false
            }
            if (!aC.type && aC.sourceEndpoint) {
                aC.type = aC.sourceEndpoint.connectionType
            }
            if (aC.sourceEndpoint && aC.sourceEndpoint.connectorOverlays) {
                aC.overlays = aC.overlays || [];
                for (var am = 0, an = aC.sourceEndpoint.connectorOverlays.length; am < an; am++) {
                    aC.overlays.push(aC.sourceEndpoint.connectorOverlays[am])
                }
            }
            if (!aC["pointer-events"] && aC.sourceEndpoint && aC.sourceEndpoint.connectorPointerEvents) {
                aC["pointer-events"] = aC.sourceEndpoint.connectorPointerEvents
            }
            if (aC.target && !aC.target.endpoint && !aC.targetEndpoint && !aC.newConnection) {
                var ao = x(aC.target), aB = bu[ao], aA = B[ao];
                if (aB) {
                    if (!ba[ao]) {
                        return
                    }
                    var ak = aA != null ? aA : bM.addEndpoint(aC.target, aB);
                    if (bg[ao]) {
                        B[ao] = ak
                    }
                    aC.targetEndpoint = ak;
                    ak._makeTargetCreator = true;
                    aC.targetIsNew = true
                }
            }
            if (aC.source && !aC.source.endpoint && !aC.sourceEndpoint && !aC.newConnection) {
                var ao = x(aC.source), aB = at[ao], aA = br[ao];
                if (aB) {
                    if (!c[ao]) {
                        return
                    }
                    var ak = aA != null ? aA : bM.addEndpoint(aC.source, aB);
                    if (bo[ao]) {
                        br[ao] = ak
                    }
                    aC.sourceEndpoint = ak;
                    aC.sourceIsNew = true
                }
            }
            return aC
        }, b = function(ak) {
            var al = bM.Defaults.ConnectionType || bM.getDefaultConnectionType(), am = bM.Defaults.EndpointType || X.Endpoint, an = X.CurrentLibrary.getParent;
            if (ak.container) {
                ak.parent = ak.container
            } else {
                if (ak.sourceEndpoint) {
                    ak.parent = ak.sourceEndpoint.parent
                } else {
                    if (ak.source.constructor == am) {
                        ak.parent = ak.source.parent
                    } else {
                        ak.parent = an(ak.source)
                    }
                }
            }
            ak._jsPlumb = bM;
            ak.newConnection = b;
            ak.newEndpoint = E;
            ak.endpointsByUUID = by;
            ak.endpointsByElement = bA;
            ak.finaliseConnection = bH;
            var ao = new al(ak);
            ao.id = "con_" + a0();
            bI("click", "click", ao);
            bI("dblclick", "dblclick", ao);
            bI("contextmenu", "contextmenu", ao);
            return ao
        }, bH = function(al, ak, an) {
            ak = ak || {};
            if (!al.suspendedEndpoint) {
                ab(bv, al.scope, al)
            }
            bM.anchorManager.newConnection(al);
            bm(al.source);
            if (!ak.doNotFireConnectionEvent && ak.fireEvent !== false) {
                var am = {connection: al, source: al.source, target: al.target, sourceId: al.sourceId, targetId: al.targetId, sourceEndpoint: al.endpoints[0], targetEndpoint: al.endpoints[1]};
                bM.fire("jsPlumbConnection", am, an);
                bM.fire("connection", am, an)
            }
        }, bI = function(am, al, ak) {
            ak.bind(am, function(an, ao) {
                bM.fire(al, ak, ao)
            })
        }, av = function(ak) {
            if (ak.container) {
                return ak.container
            } else {
                var am = X.CurrentLibrary.getTagName(ak.source), al = X.CurrentLibrary.getParent(ak.source);
                if (am && am.toLowerCase() === "td") {
                    return X.CurrentLibrary.getParent(al)
                } else {
                    return al
                }
            }
        }, E = function(ak) {
            var al = bM.Defaults.EndpointType || X.Endpoint;
            var an = X.extend({}, ak);
            an.parent = av(an);
            an._jsPlumb = bM;
            an.newConnection = b;
            an.newEndpoint = E;
            an.endpointsByUUID = by;
            an.endpointsByElement = bA;
            an.finaliseConnection = bH;
            an.fireDetachEvent = bp;
            an.floatingConnections = bh;
            an.getParentFromParams = av;
            an.connectionsByScope = bv;
            var am = new al(an);
            am.id = "ep_" + a0();
            bI("click", "endpointClick", am);
            bI("dblclick", "endpointDblClick", am);
            bI("contextmenu", "contextmenu", am);
            if (!jsPlumbAdapter.headless) {
                bM.dragManager.endpointAdded(ak.source)
            }
            return am
        }, k = function(ap, aA, an) {
            var aB = bA[ap];
            if (aB && aB.length) {
                for (var am = 0, ak = aB.length; am < ak; am++) {
                    for (var ao = 0, al = aB[am].connections.length; ao < al; ao++) {
                        var aC = aA(aB[am].connections[ao]);
                        if (aC) {
                            return
                        }
                    }
                    if (an) {
                        an(aB[am])
                    }
                }
            }
        }, f = function(ak) {
            for (var al in bA) {
                k(al, ak)
            }
        }, bO = function(ak, al) {
            return C(ak, function(an, am) {
                bN[am] = al;
                if (X.CurrentLibrary.isDragSupported(an)) {
                    X.CurrentLibrary.setDraggable(an, al)
                }
            })
        }, bs = function(am, al, ao) {
            al = al === "block";
            var an = null;
            if (ao) {
                if (al) {
                    an = function(ap) {
                        ap.setVisible(true, true, true)
                    }
                } else {
                    an = function(ap) {
                        ap.setVisible(false, true, true)
                    }
                }
            }
            var ak = Q(am, "id");
            k(ak, function(ap) {
                if (al && ao) {
                    var aA = ap.sourceId === ak ? 1 : 0;
                    if (ap.endpoints[aA].isVisible()) {
                        ap.setVisible(true)
                    }
                } else {
                    ap.setVisible(al)
                }
            }, an)
        }, a = function(ak) {
            return C(ak, function(am, an) {
                var al = bN[an] == null ? false : bN[an];
                al = !al;
                bN[an] = al;
                X.CurrentLibrary.setDraggable(am, al);
                return al
            })
        }, bC = function(am, ak) {
            var al = null;
            if (ak) {
                al = function(ao) {
                    var an = ao.isVisible();
                    ao.setVisible(!an)
                }
            }
            k(am, function(an) {
                var ao = an.isVisible();
                an.setVisible(!ao)
            }, al)
        }, h = function(ak) {
            var am = ak.timestamp, ap = ak.recalc, al = ak.offset, ao = ak.elId;
            if (bq && !am) {
                am = bn
            }
            if (!ap) {
                if (am && am === bK[ao]) {
                    return{o: bc[ao], s: bf[ao]}
                }
            }
            if (ap || !al) {
                var an = af(ao);
                if (an != null) {
                    bf[ao] = aj(an);
                    bc[ao] = P(an, bM);
                    bK[ao] = am
                }
            } else {
                bc[ao] = al;
                if (bf[ao] == null) {
                    var an = af(ao);
                    if (an != null) {
                        bf[ao] = aj(an)
                    }
                }
            }
            if (bc[ao] && !bc[ao].right) {
                bc[ao].right = bc[ao].left + bf[ao][0];
                bc[ao].bottom = bc[ao].top + bf[ao][1];
                bc[ao].width = bf[ao][0];
                bc[ao].height = bf[ao][1];
                bc[ao].centerx = bc[ao].left + (bc[ao].width / 2);
                bc[ao].centery = bc[ao].top + (bc[ao].height / 2)
            }
            return{o: bc[ao], s: bf[ao]}
        }, bE = function(al) {
            var ak = bc[al];
            if (!ak) {
                return h({elId: al})
            } else {
                return{o: ak, s: bf[al]}
            }
        }, x = function(ao, an, al) {
            var am = af(ao);
            var ak = Q(am, "id");
            if (!ak || ak == "undefined") {
                if (arguments.length == 2 && arguments[1] != undefined) {
                    ak = an
                } else {
                    if (arguments.length == 1 || (arguments.length == 3 && !arguments[2])) {
                        ak = "jsPlumb_" + w + "_" + a0()
                    }
                }
                if (!al) {
                    ah(am, "id", ak)
                }
            }
            return ak
        }, az = function(ak, am, al) {
            ak = ak || function() {
            };
            am = am || function() {
            };
            return function() {
                var ao = null;
                try {
                    ao = am.apply(this, arguments)
                } catch (an) {
                    V(bM, "jsPlumb function failed : " + an)
                }
                if (al == null || (ao !== al)) {
                    try {
                        ak.apply(this, arguments)
                    } catch (an) {
                        V(bM, "wrapped function failed : " + an)
                    }
                }
                return ao
            }
        };
        this.isConnectionBeingDragged = function() {
            return bd != null
        };
        this.setConnectionBeingDragged = function(ak) {
            bd = ak
        };
        this.connectorClass = "_jsPlumb_connector";
        this.hoverClass = "_jsPlumb_hover";
        this.endpointClass = "_jsPlumb_endpoint";
        this.endpointConnectedClass = "_jsPlumb_endpoint_connected";
        this.endpointFullClass = "_jsPlumb_endpoint_full";
        this.endpointDropAllowedClass = "_jsPlumb_endpoint_drop_allowed";
        this.endpointDropForbiddenClass = "_jsPlumb_endpoint_drop_forbidden";
        this.overlayClass = "_jsPlumb_overlay";
        this.draggingClass = "_jsPlumb_dragging";
        this.elementDraggingClass = "_jsPlumb_element_dragging";
        this.sourceElementDraggingClass = "_jsPlumb_source_element_dragging";
        this.targetElementDraggingClass = "_jsPlumb_target_element_dragging";
        this.endpointAnchorClassPrefix = "_jsPlumb_endpoint_anchor";
        this.Anchors = {};
        this.Connectors = {canvas: {}, svg: {}, vml: {}};
        this.Endpoints = {canvas: {}, svg: {}, vml: {}};
        this.Overlays = {canvas: {}, svg: {}, vml: {}};
        this.ConnectorRenderers = {};
        this.addClass = function(ak, al) {
            return X.CurrentLibrary.addClass(ak, al)
        };
        this.removeClass = function(ak, al) {
            return X.CurrentLibrary.removeClass(ak, al)
        };
        this.hasClass = function(ak, al) {
            return X.CurrentLibrary.hasClass(ak, al)
        };
        this.addEndpoint = function(aF, aE, ak) {
            ak = ak || {};
            var aG = X.extend({}, ak);
            X.extend(aG, aE);
            aG.endpoint = aG.endpoint || bM.Defaults.Endpoint || X.Defaults.Endpoint;
            aG.paintStyle = aG.paintStyle || bM.Defaults.EndpointStyle || X.Defaults.EndpointStyle;
            aF = A(aF);
            var aC = [], ap = (Z(aF) || (aF.length != null && !W(aF))) ? aF : [aF];
            for (var aB = 0, aD = ap.length; aB < aD; aB++) {
                var am = af(ap[aB]), aH = x(am);
                aG.source = am;
                h({elId: aH, timestamp: bn});
                var an = E(aG);
                if (aG.parentAnchor) {
                    an.parentAnchor = aG.parentAnchor
                }
                ab(bA, aH, an);
                var ao = bc[aH], aA = bf[aH];
                var al = an.anchor.compute({xy: [ao.left, ao.top], wh: aA, element: an, timestamp: bn});
                var aI = {anchorLoc: al, timestamp: bn};
                if (bq) {
                    aI.recalc = false
                }
                if (!bq) {
                    an.paint(aI)
                }
                aC.push(an)
            }
            return aC.length == 1 ? aC[0] : aC
        };
        this.addEndpoints = function(al, ap, aA) {
            var am = [];
            for (var an = 0, ao = ap.length; an < ao; an++) {
                var ak = bM.addEndpoint(al, ap[an], aA);
                if (Z(ak)) {
                    Array.prototype.push.apply(am, ak)
                } else {
                    am.push(ak)
                }
            }
            return am
        };
        this.animate = function(ao, ap, aA) {
            var an = af(ao), ak = Q(ao, "id");
            aA = aA || {};
            var al = X.CurrentLibrary.dragEvents.step;
            var am = X.CurrentLibrary.dragEvents.complete;
            aA[al] = az(aA[al], function() {
                bM.repaint(ak)
            });
            aA[am] = az(aA[am], function() {
                bM.repaint(ak)
            });
            X.CurrentLibrary.animate(an, ap, aA)
        };
        this.checkCondition = function(an, al) {
            var aA = bM.getListener(an), am = true;
            if (aA && aA.length > 0) {
                try {
                    for (var ao = 0, ap = aA.length; ao < ap; ao++) {
                        am = am && aA[ao](al)
                    }
                } catch (ak) {
                    V(bM, "cannot check condition [" + an + "]" + ak)
                }
            }
            return am
        };
        this.checkASyncCondition = function(an, al, am, ao) {
            var ap = bM.getListener(an);
            if (ap && ap.length > 0) {
                try {
                    ap[0](al, am, ao)
                } catch (ak) {
                    V(bM, "cannot asynchronously check condition [" + an + "]" + ak)
                }
            }
        };
        this.connect = function(ak, am) {
            var an = ar(ak, am), al;
            if (an) {
                if (an.deleteEndpointsOnDetach == null) {
                    an.deleteEndpointsOnDetach = true
                }
                al = b(an);
                bH(al, an)
            }
            return al
        };
        this.deleteEndpoint = function(ak, al) {
            bM.doWhileSuspended(function() {
                var am = (typeof ak == "string") ? by[ak] : ak;
                if (am) {
                    var ap = am.getUuid();
                    if (ap) {
                        by[ap] = null
                    }
                    am.detachAll().cleanup();
                    if (am.endpoint.cleanup) {
                        am.endpoint.cleanup()
                    }
                    jsPlumbUtil.removeElements(am.endpoint.getDisplayElements());
                    bM.anchorManager.deleteEndpoint(am);
                    for (var an in bA) {
                        var aC = bA[an];
                        if (aC) {
                            var ao = [];
                            for (var aA = 0, aB = aC.length; aA < aB; aA++) {
                                if (aC[aA] != am) {
                                    ao.push(aC[aA])
                                }
                            }
                            bA[an] = ao
                        }
                        if (bA[an].length < 1) {
                            delete bA[an]
                        }
                    }
                    if (!jsPlumbAdapter.headless) {
                        bM.dragManager.endpointDeleted(am)
                    }
                }
                return bM
            }, al)
        };
        this.deleteEveryEndpoint = function() {
            bM.doWhileSuspended(function() {
                for (var ak in bA) {
                    var an = bA[ak];
                    if (an && an.length) {
                        for (var al = 0, am = an.length; al < am; al++) {
                            bM.deleteEndpoint(an[al], true)
                        }
                    }
                }
                bA = {};
                by = {};
                bM.anchorManager.reset();
                bM.dragManager.reset()
            });
            return bM
        };
        var bp = function(am, ak, ap) {
            var an = bM.Defaults.ConnectionType || bM.getDefaultConnectionType(), ao = am.constructor == an, al = ao ? {connection: am, source: am.source, target: am.target, sourceId: am.sourceId, targetId: am.targetId, sourceEndpoint: am.endpoints[0], targetEndpoint: am.endpoints[1]} : am;
            if (ak) {
                bM.fire("jsPlumbConnectionDetached", al, ap);
                bM.fire("connectionDetached", al, ap)
            }
            bM.anchorManager.connectionDetached(al)
        };
        this.detach = function() {
            if (arguments.length == 0) {
                return
            }
            var ao = bM.Defaults.ConnectionType || bM.getDefaultConnectionType(), an = arguments[0].constructor == ao, ap = arguments.length == 2 ? an ? (arguments[1] || {}) : arguments[0] : arguments[0], ak = (ap.fireEvent !== false), aB = ap.forceDetach, aA = an ? arguments[0] : ap.connection;
            if (aA) {
                if (aB || jsPlumbUtil.functionChain(true, false, [[aA.endpoints[0], "isDetachAllowed", [aA]], [aA.endpoints[1], "isDetachAllowed", [aA]], [aA, "isDetachAllowed", [aA]], [bM, "checkCondition", ["beforeDetach", aA]]])) {
                    aA.endpoints[0].detach(aA, false, true, ak)
                }
            } else {
                var aC = X.extend({}, ap);
                if (aC.uuids) {
                    aw(aC.uuids[0]).detachFrom(aw(aC.uuids[1]), ak)
                } else {
                    if (aC.sourceEndpoint && aC.targetEndpoint) {
                        aC.sourceEndpoint.detachFrom(aC.targetEndpoint)
                    } else {
                        var al = x(aC.source), am = x(aC.target);
                        k(al, function(aD) {
                            if ((aD.sourceId == al && aD.targetId == am) || (aD.targetId == al && aD.sourceId == am)) {
                                if (bM.checkCondition("beforeDetach", aD)) {
                                    aD.endpoints[0].detach(aD, false, true, ak)
                                }
                            }
                        })
                    }
                }
            }
        };
        this.detachAllConnections = function(am, al) {
            al = al || {};
            am = af(am);
            var ak = Q(am, "id"), ap = bA[ak];
            if (ap && ap.length) {
                for (var an = 0, ao = ap.length; an < ao; an++) {
                    ap[an].detachAll(al.fireEvent)
                }
            }
            return bM
        };
        this.detachEveryConnection = function(al) {
            al = al || {};
            for (var ak in bA) {
                var ao = bA[ak];
                if (ao && ao.length) {
                    for (var am = 0, an = ao.length; am < an; am++) {
                        ao[am].detachAll(al.fireEvent)
                    }
                }
            }
            bv = {};
            return bM
        };
        this.draggable = function(al, an) {
            if (typeof al == "object" && al.length) {
                for (var am = 0, ao = al.length; am < ao; am++) {
                    var ak = af(al[am]);
                    if (ak) {
                        bk(ak, true, an)
                    }
                }
            } else {
                if (al._nodes) {
                    for (var am = 0, ao = al._nodes.length; am < ao; am++) {
                        var ak = af(al._nodes[am]);
                        if (ak) {
                            bk(ak, true, an)
                        }
                    }
                } else {
                    var ak = af(al);
                    if (ak) {
                        bk(ak, true, an)
                    }
                }
            }
            return bM
        };
        this.extend = function(ak, al) {
            return X.CurrentLibrary.extend(ak, al)
        };
        this.getDefaultEndpointType = function() {
            return X.Endpoint
        };
        this.getDefaultConnectionType = function() {
            return X.Connection
        };
        var bL = function(ak, al, an, ap) {
            for (var am = 0, ao = ak.length; am < ao; am++) {
                ak[am][al].apply(ak[am], an)
            }
            return ap(ak)
        }, l = function(ak, al, an) {
            var ao = [];
            for (var am = 0, ap = ak.length; am < ap; am++) {
                ao.push([ak[am][al].apply(ak[am], an), ak[am]])
            }
            return ao
        }, ay = function(ak, al, am) {
            return function() {
                return bL(ak, al, arguments, am)
            }
        }, au = function(ak, al) {
            return function() {
                return l(ak, al, arguments)
            }
        }, bJ = function(ao, ak) {
            var al = [];
            if (ao) {
                if (typeof ao == "string") {
                    if (ao === "*") {
                        return ao
                    }
                    al.push(ao)
                } else {
                    if (ak) {
                        al = ao
                    } else {
                        for (var am = 0, an = ao.length; am < an; am++) {
                            al.push(x(af(ao[am])))
                        }
                    }
                }
            }
            return al
        }, D = function(ak, al, am) {
            if (ak === "*") {
                return true
            }
            return ak.length > 0 ? K(ak, al) != -1 : !am
        };
        this.getConnections = function(al, aE) {
            if (!al) {
                al = {}
            } else {
                if (al.constructor == String) {
                    al = {scope: al}
                }
            }
            var am = al.scope || bM.getDefaultScope(), an = bJ(am, true), aF = bJ(al.source), ap = bJ(al.target), aB = (!aE && an.length > 1) ? {} : [], ak = function(aH, aG) {
                if (!aE && an.length > 1) {
                    var aI = aB[aH];
                    if (aI == null) {
                        aI = [];
                        aB[aH] = aI
                    }
                    aI.push(aG)
                } else {
                    aB.push(aG)
                }
            };
            for (var aC in bv) {
                if (D(an, aC)) {
                    for (var aD = 0, aA = bv[aC].length; aD < aA; aD++) {
                        var ao = bv[aC][aD];
                        if (D(aF, ao.sourceId) && D(ap, ao.targetId)) {
                            ak(aC, ao)
                        }
                    }
                }
            }
            return aB
        };
        var r = function(al, ak) {
            return function(am) {
                for (var ao = 0, an = al.length; ao < an; ao++) {
                    am(al[ao])
                }
                return ak(al)
            }
        }, o = function(ak) {
            return function(al) {
                return ak[al]
            }
        };
        var n = function(al, ak) {
            var aA = {length: al.length, each: r(al, ak), get: o(al)}, am = ["setHover", "removeAllOverlays", "setLabel", "addClass", "addOverlay", "removeOverlay", "removeOverlays", "showOverlay", "hideOverlay", "showOverlays", "hideOverlays", "setPaintStyle", "setHoverPaintStyle", "setSuspendEvents", "setParameter", "setParameters", "setVisible", "repaint", "addType", "toggleType", "removeType", "removeClass", "setType", "bind", "unbind"], an = ["getLabel", "getOverlay", "isHover", "getParameter", "getParameters", "getPaintStyle", "getHoverPaintStyle", "isVisible", "hasType", "getType", "isSuspendEvents"];
            for (var ap = 0, ao = am.length; ap < ao; ap++) {
                aA[am[ap]] = ay(al, am[ap], ak)
            }
            for (var ap = 0, ao = an.length; ap < ao; ap++) {
                aA[an[ap]] = au(al, an[ap])
            }
            return aA
        };
        var y = function(ak) {
            var al = n(ak, y);
            return X.CurrentLibrary.extend(al, {setDetachable: ay(ak, "setDetachable", y), setReattach: ay(ak, "setReattach", y), setConnector: ay(ak, "setConnector", y), detach: function() {
                    for (var an = 0, am = ak.length; an < am; an++) {
                        bM.detach(ak[an])
                    }
                }, isDetachable: au(ak, "isDetachable"), isReattach: au(ak, "isReattach")})
        };
        var bl = function(ak) {
            var al = n(ak, bl);
            return X.CurrentLibrary.extend(al, {setEnabled: ay(ak, "setEnabled", bl), setAnchor: ay(ak, "setAnchor", bl), isEnabled: au(ak, "isEnabled"), detachAll: function() {
                    for (var an = 0, am = ak.length; an < am; an++) {
                        ak[an].detachAll()
                    }
                }, remove: function() {
                    for (var an = 0, am = ak.length; an < am; an++) {
                        bM.deleteEndpoint(ak[an])
                    }
                }})
        };
        this.select = function(al) {
            al = al || {};
            al.scope = al.scope || "*";
            var ak = al.connections || bM.getConnections(al, true);
            return y(ak)
        };
        this.selectEndpoints = function(am) {
            am = am || {};
            am.scope = am.scope || "*";
            var aE = !am.element && !am.source && !am.target, aB = aE ? "*" : bJ(am.element), aH = aE ? "*" : bJ(am.source), aK = aE ? "*" : bJ(am.target), ap = bJ(am.scope, true);
            var aI = [];
            for (var aG in bA) {
                var al = D(aB, aG, true), ao = D(aH, aG, true), aL = aH != "*", aJ = D(aK, aG, true), aC = aK != "*";
                if (al || ao || aJ) {
                    inner:for (var an = 0, aD = bA[aG].length; an < aD; an++) {
                        var aA = bA[aG][an];
                        if (D(ap, aA.scope, true)) {
                            var ak = (aL && aH.length > 0 && !aA.isSource), aF = (aC && aK.length > 0 && !aA.isTarget);
                            if (ak || aF) {
                                continue inner
                            }
                            aI.push(aA)
                        }
                    }
                }
            }
            return bl(aI)
        };
        this.getAllConnections = function() {
            return bv
        };
        this.getDefaultScope = function() {
            return m
        };
        this.getEndpoint = aw;
        this.getEndpoints = function(ak) {
            return bA[x(ak)]
        };
        this.getId = x;
        this.getOffset = function(ak) {
            var al = bc[ak];
            return h({elId: ak})
        };
        this.getSelector = function() {
            return X.CurrentLibrary.getSelector.apply(null, arguments)
        };
        this.getSize = function(ak) {
            var al = bf[ak];
            if (!al) {
                h({elId: ak})
            }
            return bf[ak]
        };
        this.appendElement = bx;
        var bB = false;
        this.isHoverSuspended = function() {
            return bB
        };
        this.setHoverSuspended = function(ak) {
            bB = ak
        };
        var bw = function(ak) {
            return function() {
                return jsPlumbAdapter.isRenderModeAvailable(ak)
            }
        };
        this.isCanvasAvailable = bw("canvas");
        this.isSVGAvailable = bw("svg");
        this.isVMLAvailable = bw("vml");
        this.hide = function(al, ak) {
            bs(al, "none", ak);
            return bM
        };
        this.idstamp = a0;
        this.init = function() {
            if (!s) {
                bM.anchorManager = new X.AnchorManager({jsPlumbInstance: bM});
                bM.setRenderMode(bM.Defaults.RenderMode);
                s = true;
                bM.fire("ready", bM)
            }
        };
        this.log = p;
        this.jsPlumbUIComponent = R;
        this.makeAnchor = function() {
            var am = function(aC, aB) {
                if (X.Anchors[aC]) {
                    return new X.Anchors[aC](aB)
                }
                if (!bM.Defaults.DoNotThrowErrors) {
                    throw {msg: "jsPlumb: unknown anchor type '" + aC + "'"}
                }
            };
            if (arguments.length == 0) {
                return null
            }
            var ak = arguments[0], ao = arguments[1], ap = arguments[2], an = null;
            if (ak.compute && ak.getOrientation) {
                return ak
            } else {
                if (typeof ak == "string") {
                    an = am(arguments[0], {elementId: ao, jsPlumbInstance: bM})
                } else {
                    if (Z(ak)) {
                        if (Z(ak[0]) || W(ak[0])) {
                            if (ak.length == 2 && W(ak[0]) && L(ak[1])) {
                                var aA = X.extend({elementId: ao, jsPlumbInstance: bM}, ak[1]);
                                an = am(ak[0], aA)
                            } else {
                                an = new X.DynamicAnchor({anchors: ak, selector: null, elementId: ao, jsPlumbInstance: ap})
                            }
                        } else {
                            var al = {x: ak[0], y: ak[1], orientation: (ak.length >= 4) ? [ak[2], ak[3]] : [0, 0], offsets: (ak.length >= 6) ? [ak[4], ak[5]] : [0, 0], elementId: ao, jsPlumbInstance: ap, cssClass: ak.length == 7 ? ak[6] : null};
                            an = new X.Anchor(al);
                            an.clone = function() {
                                return new X.Anchor(al)
                            }
                        }
                    }
                }
            }
            if (!an.id) {
                an.id = "anchor_" + a0()
            }
            return an
        };
        this.makeAnchors = function(am, ao, ap) {
            var ak = [];
            for (var an = 0, al = am.length; an < al; an++) {
                if (typeof am[an] == "string") {
                    ak.push(X.Anchors[am[an]]({elementId: ao, jsPlumbInstance: ap}))
                } else {
                    if (Z(am[an])) {
                        ak.push(bM.makeAnchor(am[an], ao, ap))
                    }
                }
            }
            return ak
        };
        this.makeDynamicAnchor = function(al, ak) {
            return new X.DynamicAnchor({anchors: al, selector: ak, elementId: null, jsPlumbInstance: bM})
        };
        var bu = {}, B = {}, bg = {}, ax = {}, e = function(al, ak) {
            al.paintStyle = al.paintStyle || bM.Defaults.EndpointStyles[ak] || bM.Defaults.EndpointStyle || X.Defaults.EndpointStyles[ak] || X.Defaults.EndpointStyle;
            al.hoverPaintStyle = al.hoverPaintStyle || bM.Defaults.EndpointHoverStyles[ak] || bM.Defaults.EndpointHoverStyle || X.Defaults.EndpointHoverStyles[ak] || X.Defaults.EndpointHoverStyle;
            al.anchor = al.anchor || bM.Defaults.Anchors[ak] || bM.Defaults.Anchor || X.Defaults.Anchors[ak] || X.Defaults.Anchor;
            al.endpoint = al.endpoint || bM.Defaults.Endpoints[ak] || bM.Defaults.Endpoint || X.Defaults.Endpoints[ak] || X.Defaults.Endpoint
        };
        this.makeTarget = function(aC, aB, ak) {
            var aE = X.extend({_jsPlumb: bM}, ak);
            X.extend(aE, aB);
            e(aE, 1);
            var an = X.CurrentLibrary, am = aE.scope || bM.Defaults.Scope, aA = !(aE.deleteEndpointsOnDetach === false), aD = aE.maxConnections || -1, aF = aE.onMaxConnections;
            _doOne = function(aG) {
                var aI = x(aG);
                bu[aI] = aE;
                bg[aI] = aE.uniqueEndpoint, ax[aI] = aD, ba[aI] = true, proxyComponent = new R(aE);
                var aJ = X.extend({}, aE.dropOptions || {}), aK = function() {
                    var aU = X.CurrentLibrary.getDropEvent(arguments), aR = bM.select({target: aI}).length;
                    bM.currentlyDragging = false;
                    var aT = af(an.getDragObject(arguments)), aS = Q(aT, "dragId"), aX = Q(aT, "originalScope"), aM = bh[aS], aW = aM.endpoints[0], aY = aE.endpoint ? X.extend({}, aE.endpoint) : {};
                    if (!ba[aI] || ax[aI] > 0 && aR >= ax[aI]) {
                        if (aF) {
                            aF({element: aG, connection: aM}, aU)
                        }
                        return false
                    }
                    aW.anchor.locked = false;
                    if (aX) {
                        an.setDragScope(aT, aX)
                    }
                    var aO = proxyComponent.isDropAllowed(aM.sourceId, x(aG), aM.scope, aM, null);
                    if (aM.endpointsToDeleteOnDetach) {
                        if (aW === aM.endpointsToDeleteOnDetach[0]) {
                            aM.endpointsToDeleteOnDetach[0] = null
                        } else {
                            if (aW === aM.endpointsToDeleteOnDetach[1]) {
                                aM.endpointsToDeleteOnDetach[1] = null
                            }
                        }
                    }
                    if (aM.suspendedEndpoint) {
                        aM.targetId = aM.suspendedEndpoint.elementId;
                        aM.target = an.getElementObject(aM.suspendedEndpoint.elementId);
                        aM.endpoints[1] = aM.suspendedEndpoint
                    }
                    if (aO) {
                        aW.detach(aM, false, true, false);
                        var aV = B[aI] || bM.addEndpoint(aG, aE);
                        if (aE.uniqueEndpoint) {
                            B[aI] = aV
                        }
                        aV._makeTargetCreator = true;
                        if (aV.anchor.positionFinder != null) {
                            var aL = an.getUIPosition(arguments, bM.getZoom()), aP = P(aG, bM), aZ = aj(aG), aQ = aV.anchor.positionFinder(aL, aP, aZ, aV.anchor.constructorParams);
                            aV.anchor.x = aQ[0];
                            aV.anchor.y = aQ[1]
                        }
                        var aN = bM.connect({source: aW, target: aV, scope: aX, previousConnection: aM, container: aM.parent, deleteEndpointsOnDetach: aA, endpointsToDeleteOnDetach: aA ? [aW, aV] : null, doNotFireConnectionEvent: aW.endpointWillMoveAfterConnection});
                        if (aM.endpoints[1]._makeTargetCreator && aM.endpoints[1].connections.length < 2) {
                            bM.deleteEndpoint(aM.endpoints[1])
                        }
                        aN.repaint()
                    } else {
                        if (aM.suspendedEndpoint) {
                            if (aM.isReattach()) {
                                aM.setHover(false);
                                aM.floatingAnchorIndex = null;
                                aM.suspendedEndpoint.addConnection(aM);
                                bM.repaint(aW.elementId)
                            } else {
                                aW.detach(aM, false, true, true, aU)
                            }
                        }
                    }
                };
                var aH = an.dragEvents.drop;
                aJ.scope = aJ.scope || am;
                aJ[aH] = az(aJ[aH], aK);
                an.initDroppable(aG, aJ, true)
            };
            aC = A(aC);
            var ao = aC.length && aC.constructor != String ? aC : [aC];
            for (var ap = 0, al = ao.length; ap < al; ap++) {
                _doOne(af(ao[ap]))
            }
            return bM
        };
        this.unmakeTarget = function(al, ak) {
            al = X.CurrentLibrary.getElementObject(al);
            var am = x(al);
            if (!ak) {
                delete bu[am];
                delete bg[am];
                delete ax[am];
                delete ba[am]
            }
            return bM
        };
        this.makeTargets = function(am, ak, ao) {
            for (var an = 0, al = am.length; an < al; an++) {
                bM.makeTarget(am[an], ak, ao)
            }
        };
        var at = {}, br = {}, bo = {}, c = {}, u = {}, q = {}, ba = {}, bz = function(ap, ak, aA) {
            var am = ap.target || ap.srcElement, an = false, al = bM.getSelector(ak, aA);
            for (var ao = 0; ao < al.length; ao++) {
                if (al[ao] == am) {
                    an = true;
                    break
                }
            }
            return an
        };
        this.makeSource = function(aA, ap, ak) {
            var aC = X.extend({}, ak);
            X.extend(aC, ap);
            e(aC, 0);
            var am = X.CurrentLibrary, aB = aC.maxConnections || -1, aD = aC.onMaxConnections, aE = function(aO) {
                var aI = x(aO), aM = function() {
                    return aC.parent == null ? aC.parent : aC.parent === "parent" ? am.getElementObject(am.getDOMElement(aO).parentNode) : am.getElementObject(aC.parent)
                }, aJ = aC.parent != null ? bM.getId(aM()) : aI;
                at[aJ] = aC;
                bo[aJ] = aC.uniqueEndpoint;
                c[aJ] = true;
                var aH = am.dragEvents.stop, aP = am.dragEvents.drag, aN = X.extend({}, aC.dragOptions || {}), aF = aN.drag, aL = aN.stop, aK = null, aQ = false;
                q[aJ] = aB;
                aN.scope = aN.scope || aC.scope;
                aN[aP] = az(aN[aP], function() {
                    if (aF) {
                        aF.apply(this, arguments)
                    }
                    aQ = false
                });
                aN[aH] = az(aN[aH], function() {
                    if (aL) {
                        aL.apply(this, arguments)
                    }
                    bM.currentlyDragging = false;
                    if (aK.connections.length == 0) {
                        bM.deleteEndpoint(aK)
                    } else {
                        am.unbind(aK.canvas, "mousedown");
                        var aU = aC.anchor || bM.Defaults.Anchor, aS = aK.anchor, aT = aK.connections[0];
                        aK.setAnchor(bM.makeAnchor(aU, aI, bM));
                        if (aC.parent) {
                            var aW = aM();
                            if (aW) {
                                var aV = aK.elementId, aR = aC.container || bM.Defaults.Container || X.Defaults.Container;
                                aK.setElement(aW, aR);
                                aK.endpointWillMoveAfterConnection = false;
                                bM.anchorManager.rehomeEndpoint(aV, aW);
                                aT.previousConnection = null;
                                U(bv[aT.scope], function(aX) {
                                    return aX.id === aT.id
                                });
                                bM.anchorManager.connectionDetached({sourceId: aT.sourceId, targetId: aT.targetId, connection: aT});
                                bH(aT)
                            }
                        }
                        aK.repaint();
                        bM.repaint(aK.elementId);
                        bM.repaint(aT.targetId)
                    }
                });
                var aG = function(aR) {
                    if (!c[aJ]) {
                        return
                    }
                    if (aC.filter) {
                        var aZ = am.getOriginalEvent(aR), aY = jsPlumbUtil.isString(aC.filter) ? bz(aZ, aO, aC.filter) : aC.filter(aZ, aO);
                        if (aY === false) {
                            return
                        }
                    }
                    var aU = bM.select({source: aJ}).length;
                    if (q[aJ] >= 0 && aU >= q[aJ]) {
                        if (aD) {
                            aD({element: aO, maxConnections: aB}, aR)
                        }
                        return false
                    }
                    var a2 = h({elId: aI}).o, a5 = bM.getZoom(), a3 = (((aR.pageX || aR.page.x) / a5) - a2.left) / a2.width, a4 = (((aR.pageY || aR.page.y) / a5) - a2.top) / a2.height, aT = a3, aW = a4;
                    if (aC.parent) {
                        var a6 = aM(), aS = x(a6);
                        a2 = h({elId: aS}).o;
                        aT = ((aR.pageX || aR.page.x) - a2.left) / a2.width, aW = ((aR.pageY || aR.page.y) - a2.top) / a2.height
                    }
                    var aX = {};
                    X.extend(aX, aC);
                    aX.isSource = true;
                    aX.anchor = [a3, a4, 0, 0];
                    aX.parentAnchor = [aT, aW, 0, 0];
                    aX.dragOptions = aN;
                    if (aC.parent) {
                        var aV = aX.container || bM.Defaults.Container || X.Defaults.Container;
                        if (aV) {
                            aX.container = aV
                        } else {
                            aX.container = X.CurrentLibrary.getParent(aM())
                        }
                    }
                    aK = bM.addEndpoint(aI, aX);
                    aQ = true;
                    aK.endpointWillMoveAfterConnection = aC.parent != null;
                    aK.endpointWillMoveTo = aC.parent ? aM() : null;
                    aK.addedViaMouse = true;
                    var a1 = function() {
                        if (aQ) {
                            bM.deleteEndpoint(aK)
                        }
                    };
                    bM.registerListener(aK.canvas, "mouseup", a1);
                    bM.registerListener(aO, "mouseup", a1);
                    am.trigger(aK.canvas, "mousedown", aR)
                };
                bM.registerListener(aO, "mousedown", aG);
                u[aI] = aG;
                if (aC.filter && jsPlumbUtil.isString(aC.filter)) {
                    am.setDragFilter(aO, aC.filter)
                }
            };
            aA = A(aA);
            var an = aA.length && aA.constructor != String ? aA : [aA];
            for (var ao = 0, al = an.length; ao < al; ao++) {
                aE(af(an[ao]))
            }
            return bM
        };
        this.unmakeSource = function(am, al) {
            am = X.CurrentLibrary.getElementObject(am);
            var ak = x(am), an = u[ak];
            if (an) {
                bM.unregisterListener(am, "mousedown", an)
            }
            if (!al) {
                delete at[ak];
                delete bo[ak];
                delete c[ak];
                delete u[ak];
                delete q[ak]
            }
            return bM
        };
        this.unmakeEverySource = function() {
            for (var ak in c) {
                bM.unmakeSource(ak, true)
            }
            at = {};
            bo = {};
            c = {};
            u = {}
        };
        this.unmakeEveryTarget = function() {
            for (var ak in ba) {
                bM.unmakeTarget(ak, true)
            }
            bu = {};
            bg = {};
            ax = {};
            ba = {};
            return bM
        };
        this.makeSources = function(am, ak, ao) {
            for (var an = 0, al = am.length; an < al; an++) {
                bM.makeSource(am[an], ak, ao)
            }
            return bM
        };
        var bF = function(am, an, al, aB) {
            var aA = am == "source" ? c : ba;
            if (W(an)) {
                aA[an] = aB ? !aA[an] : al
            } else {
                if (an.length) {
                    an = A(an);
                    for (var ap = 0, ao = an.length; ap < ao; ap++) {
                        var ak = _el = X.CurrentLibrary.getElementObject(an[ap]), ak = x(_el);
                        aA[ak] = aB ? !aA[ak] : al
                    }
                }
            }
            return bM
        };
        this.setSourceEnabled = function(al, ak) {
            return bF("source", al, ak)
        };
        this.toggleSourceEnabled = function(ak) {
            bF("source", ak, null, true);
            return bM.isSourceEnabled(ak)
        };
        this.isSource = function(ak) {
            ak = X.CurrentLibrary.getElementObject(ak);
            return c[x(ak)] != null
        };
        this.isSourceEnabled = function(ak) {
            ak = X.CurrentLibrary.getElementObject(ak);
            return c[x(ak)] === true
        };
        this.setTargetEnabled = function(al, ak) {
            return bF("target", al, ak)
        };
        this.toggleTargetEnabled = function(ak) {
            bF("target", ak, null, true);
            return bM.isTargetEnabled(ak)
        };
        this.isTarget = function(ak) {
            ak = X.CurrentLibrary.getElementObject(ak);
            return ba[x(ak)] != null
        };
        this.isTargetEnabled = function(ak) {
            ak = X.CurrentLibrary.getElementObject(ak);
            return ba[x(ak)] === true
        };
        this.ready = function(ak) {
            bM.bind("ready", ak)
        };
        this.repaint = function(am, ak, al) {
            if (typeof am == "object" && am.length) {
                for (var ao = 0, an = am.length; ao < an; ao++) {
                    bm(af(am[ao]), ak, al)
                }
            } else {
                bm(af(am), ak, al)
            }
            return bM
        };
        this.repaintEverything = function() {
            var ak = null;
            for (var al in bA) {
                bm(af(al), null, ak)
            }
            return bM
        };
        this.removeAllEndpoints = function(al, ak) {
            var am = function(an) {
                var aB = jsPlumbUtil.isString(an) ? an : x(af(an)), ao = bA[aB];
                if (ao) {
                    for (var aA = 0, ap = ao.length; aA < ap; aA++) {
                        bM.deleteEndpoint(ao[aA])
                    }
                }
                delete bA[aB];
                if (ak) {
                    var aC = X.CurrentLibrary.getDOMElement(af(an));
                    if (aC && aC.nodeType != 3 && aC.nodeType != 8) {
                        for (var aA = 0, ap = aC.childNodes.length; aA < ap; aA++) {
                            am(aC.childNodes[aA])
                        }
                    }
                }
            };
            am(al);
            return bM
        };
        this.remove = function(am) {
            var ak = af(am);
            var al = jsPlumbUtil.isString(am) ? am : x(ak);
            bM.doWhileSuspended(function() {
                bM.removeAllEndpoints(al, true);
                bM.dragManager.elementRemoved(al)
            });
            X.CurrentLibrary.removeElement(ak)
        };
        var be = {}, bj = function() {
            for (var am in be) {
                for (var an = 0, al = be[am].length; an < al; an++) {
                    var ak = be[am][an];
                    X.CurrentLibrary.unbind(ak.el, ak.event, ak.listener)
                }
            }
            be = {}
        };
        this.registerListener = function(al, am, ak) {
            X.CurrentLibrary.bind(al, am, ak);
            ab(be, am, {el: al, event: am, listener: ak})
        };
        this.unregisterListener = function(al, am, ak) {
            X.CurrentLibrary.unbind(al, am, ak);
            U(be, function(an) {
                return an.type == am && an.listener == ak
            })
        };
        this.reset = function() {
            bM.deleteEveryEndpoint();
            bM.unbind();
            bu = {};
            B = {};
            bg = {};
            ax = {};
            at = {};
            br = {};
            bo = {};
            q = {};
            bj();
            bM.anchorManager.reset();
            if (!jsPlumbAdapter.headless) {
                bM.dragManager.reset()
            }
        };
        this.setDefaultScope = function(ak) {
            m = ak;
            return bM
        };
        this.setDraggable = bO;
        this.setId = function(aA, ap, al) {
            var aC = aA.constructor == String ? aA : bM.getId(aA), aB = bM.getConnections({source: aC, scope: "*"}, true), an = bM.getConnections({target: aC, scope: "*"}, true);
            ap = "" + ap;
            if (!al) {
                aA = X.CurrentLibrary.getElementObject(aC);
                X.CurrentLibrary.setAttribute(aA, "id", ap)
            }
            aA = X.CurrentLibrary.getElementObject(ap);
            bA[ap] = bA[aC] || [];
            for (var am = 0, ak = bA[ap].length; am < ak; am++) {
                bA[ap][am].setElementId(ap);
                bA[ap][am].setReferenceElement(aA)
            }
            delete bA[aC];
            bM.anchorManager.changeId(aC, ap);
            if (!jsPlumbAdapter.headless) {
                bM.dragManager.changeId(aC, ap)
            }
            var ao = function(aF, aE, aG) {
                for (var aD = 0, aH = aF.length; aD < aH; aD++) {
                    aF[aD].endpoints[aE].setElementId(ap);
                    aF[aD].endpoints[aE].setReferenceElement(aA);
                    aF[aD][aG + "Id"] = ap;
                    aF[aD][aG] = aA
                }
            };
            ao(aB, 0, "source");
            ao(an, 1, "target");
            bM.repaint(ap)
        };
        this.setIdChanged = function(ak, al) {
            bM.setId(ak, al, true)
        };
        this.setDebugLog = function(ak) {
            p = ak
        };
        var bq = false, bn = null;
        this.setSuspendDrawing = function(ak, al) {
            bq = ak;
            if (ak) {
                bn = new Date().getTime()
            } else {
                bn = null
            }
            if (al) {
                bM.repaintEverything()
            }
        };
        this.isSuspendDrawing = function() {
            return bq
        };
        this.getSuspendedAt = function() {
            return bn
        };
        this.doWhileSuspended = function(al, am) {
            bM.setSuspendDrawing(true);
            try {
                al()
            } catch (ak) {
                V("Function run while suspended failed", ak)
            }
            bM.setSuspendDrawing(false, !am)
        };
        this.updateOffset = h;
        this.getOffset = function(ak) {
            return bc[ak]
        };
        this.getSize = function(ak) {
            return bf[ak]
        };
        this.getCachedData = bE;
        this.timestamp = T;
        this.SVG = "svg";
        this.CANVAS = "canvas";
        this.VML = "vml";
        this.setRenderMode = function(ak) {
            g = jsPlumbAdapter.setRenderMode(ak);
            return g
        };
        this.getRenderMode = function() {
            return g
        };
        this.show = function(al, ak) {
            bs(al, "block", ak);
            return bM
        };
        this.sizeCanvas = function(am, ao, ak, an, al) {
            if (am) {
                am.style.height = al + "px";
                am.height = al;
                am.style.width = an + "px";
                am.width = an;
                am.style.left = ao + "px";
                am.style.top = ak + "px"
            }
            return bM
        };
        this.getTestHarness = function() {
            return{endpointsByElement: bA, endpointCount: function(al) {
                    var ak = bA[al];
                    return ak ? ak.length : 0
                }, connectionCount: function(al) {
                    al = al || m;
                    var ak = bv[al];
                    return ak ? ak.length : 0
                }, getId: x, makeAnchor: self.makeAnchor, makeDynamicAnchor: self.makeDynamicAnchor}
        };
        this.toggleVisible = bC;
        this.toggleDraggable = a;
        this.wrap = az;
        this.addListener = this.bind;
        this.adjustForParentOffsetAndScroll = function(ak, an) {
            var am = null, ap = ak;
            if (an.tagName.toLowerCase() === "svg" && an.parentNode) {
                am = an.parentNode
            } else {
                if (an.offsetParent) {
                    am = an.offsetParent
                }
            }
            if (am != null) {
                var ao = am.tagName.toLowerCase() === "body" ? {left: 0, top: 0} : P(am, bM), al = am.tagName.toLowerCase() === "body" ? {left: 0, top: 0} : {left: am.scrollLeft, top: am.scrollTop};
                ap[0] = ak[0] - ao.left + al.left;
                ap[1] = ak[1] - ao.top + al.top
            }
            return ap
        };
        if (!jsPlumbAdapter.headless) {
            bM.dragManager = jsPlumbAdapter.getDragManager(bM);
            bM.recalculateOffsets = bM.dragManager.updateOffsets
        }
    };
    var X = new J();
    if (typeof window != "undefined") {
        window.jsPlumb = X
    }
    X.getInstance = function(a) {
        var b = new J(a);
        b.init();
        return b
    };
    if (typeof define === "function") {
        define("jsplumb", [], function() {
            return X
        });
        define("jsplumbinstance", [], function() {
            return X.getInstance()
        })
    }
    if (typeof exports !== "undefined") {
        exports.jsPlumb = X
    }
})();
(function() {
    jsPlumb.AnchorManager = function(a) {
        var V = {}, G = {}, D = {}, O = {}, J = {}, b = {HORIZONTAL: "horizontal", VERTICAL: "vertical", DIAGONAL: "diagonal", IDENTITY: "identity"}, T = {}, M = this, S = {}, K = a.jsPlumbInstance, U = jsPlumb.CurrentLibrary, N = {}, Q = function(g, f, m, q, l, e) {
            if (g === f) {
                return{orientation: b.IDENTITY, a: ["top", "top"]}
            }
            var r = Math.atan2((q.centery - m.centery), (q.centerx - m.centerx)), n = Math.atan2((m.centery - q.centery), (m.centerx - q.centerx)), o = ((m.left <= q.left && m.right >= q.left) || (m.left <= q.right && m.right >= q.right) || (m.left <= q.left && m.right >= q.right) || (q.left <= m.left && q.right >= m.right)), h = ((m.top <= q.top && m.bottom >= q.top) || (m.top <= q.bottom && m.bottom >= q.bottom) || (m.top <= q.top && m.bottom >= q.bottom) || (q.top <= m.top && q.bottom >= m.bottom)), k = function(s) {
                return[l.isContinuous ? l.verifyEdge(s[0]) : s[0], e.isContinuous ? e.verifyEdge(s[1]) : s[1]]
            }, p = {orientation: b.DIAGONAL, theta: r, theta2: n};
            if (!(o || h)) {
                if (q.left > m.left && q.top > m.top) {
                    p.a = ["right", "top"]
                } else {
                    if (q.left > m.left && m.top > q.top) {
                        p.a = ["top", "left"]
                    } else {
                        if (q.left < m.left && q.top < m.top) {
                            p.a = ["top", "right"]
                        } else {
                            if (q.left < m.left && q.top > m.top) {
                                p.a = ["left", "top"]
                            }
                        }
                    }
                }
            } else {
                if (o) {
                    p.orientation = b.HORIZONTAL;
                    p.a = m.top < q.top ? ["bottom", "top"] : ["top", "bottom"]
                } else {
                    p.orientation = b.VERTICAL;
                    p.a = m.left < q.left ? ["right", "left"] : ["left", "right"]
                }
            }
            p.a = k(p.a);
            return p
        }, I = function(h, n, p, o, g, m, w) {
            var f = [], x = n[g ? 0 : 1] / (o.length + 1);
            for (var l = 0; l < o.length; l++) {
                var e = (l + 1) * x, y = m * n[g ? 1 : 0];
                if (w) {
                    e = n[g ? 0 : 1] - e
                }
                var q = (g ? e : y), u = p[0] + q, r = q / n[0], s = (g ? y : e), v = p[1] + s, k = s / n[1];
                f.push([u, v, r, k, o[l][1], o[l][2]])
            }
            return f
        }, L = function(e) {
            return function(g, h) {
                var f = true;
                if (e) {
                    f = g[0][0] < h[0][0]
                } else {
                    f = g[0][0] > h[0][0]
                }
                return f === false ? -1 : 1
            }
        }, X = function(g, h) {
            var e = g[0][0] < 0 ? -Math.PI - g[0][0] : Math.PI - g[0][0], f = h[0][0] < 0 ? -Math.PI - h[0][0] : Math.PI - h[0][0];
            if (e > f) {
                return 1
            } else {
                return g[0][1] > h[0][1] ? 1 : -1
            }
        }, F = {top: function(e, f) {
                return e[0] > f[0] ? 1 : -1
            }, right: L(true), bottom: L(true), left: X}, H = function(f, e) {
            return f.sort(e)
        }, R = function(k, l) {
            var e = K.getCachedData(k), g = e.s, f = e.o, h = function(v, n, A, w, p, q, B) {
                if (w.length > 0) {
                    var r = H(w, F[v]), u = v === "right" || v === "top", C = I(v, n, A, r, p, q, u);
                    var m = function(ac, ab) {
                        var ad = K.adjustForParentOffsetAndScroll([ab[0], ab[1]], ac.canvas);
                        D[ac.id] = [ad[0], ad[1], ab[2], ab[3]];
                        J[ac.id] = B
                    };
                    for (var y = 0; y < C.length; y++) {
                        var s = C[y][4], o = s.endpoints[0].elementId === k, x = s.endpoints[1].elementId === k;
                        if (o) {
                            m(s.endpoints[0], C[y])
                        } else {
                            if (x) {
                                m(s.endpoints[1], C[y])
                            }
                        }
                    }
                }
            };
            h("bottom", g, [f.left, f.top], l.bottom, true, 1, [0, 1]);
            h("top", g, [f.left, f.top], l.top, true, 0, [0, -1]);
            h("left", g, [f.left, f.top], l.left, false, 0, [-1, 0]);
            h("right", g, [f.left, f.top], l.right, false, 1, [1, 0])
        };
        this.reset = function() {
            V = {};
            T = {};
            S = {}
        };
        this.addFloatingConnection = function(f, e) {
            N[f] = e
        };
        this.removeFloatingConnection = function(e) {
            delete N[e]
        };
        this.newConnection = function(g) {
            var e = g.sourceId, h = g.targetId, l = g.endpoints, f = true, k = function(o, n, q, m, p) {
                if ((e == h) && q.isContinuous) {
                    U.removeElement(l[1].canvas);
                    f = false
                }
                jsPlumbUtil.addToList(T, m, [p, n, q.constructor == jsPlumb.DynamicAnchor])
            };
            k(0, l[0], l[0].anchor, h, g);
            if (f) {
                k(1, l[1], l[1].anchor, e, g)
            }
        };
        var W = function(e) {
            (function(f, h) {
                if (f) {
                    var g = function(k) {
                        return k[4] == h
                    };
                    jsPlumbUtil.removeWithFunction(f.top, g);
                    jsPlumbUtil.removeWithFunction(f.left, g);
                    jsPlumbUtil.removeWithFunction(f.bottom, g);
                    jsPlumbUtil.removeWithFunction(f.right, g)
                }
            })(S[e.elementId], e.id)
        };
        this.connectionDetached = function(e) {
            var k = e.connection || e, f = e.sourceId, h = e.targetId, l = k.endpoints, g = function(o, n, q, m, p) {
                if (q.constructor == jsPlumb.FloatingAnchor) {
                } else {
                    jsPlumbUtil.removeWithFunction(T[m], function(r) {
                        return r[0].id == p.id
                    })
                }
            };
            g(1, l[1], l[1].anchor, f, k);
            g(0, l[0], l[0].anchor, h, k);
            W(k.endpoints[0]);
            W(k.endpoints[1]);
            M.redraw(k.sourceId);
            M.redraw(k.targetId)
        };
        this.add = function(e, f) {
            jsPlumbUtil.addToList(V, f, e)
        };
        this.changeId = function(e, f) {
            T[f] = T[e];
            V[f] = V[e];
            delete T[e];
            delete V[e]
        };
        this.getConnectionsFor = function(e) {
            return T[e] || []
        };
        this.getEndpointsFor = function(e) {
            return V[e] || []
        };
        this.deleteEndpoint = function(e) {
            jsPlumbUtil.removeWithFunction(V[e.elementId], function(f) {
                return f.id == e.id
            });
            W(e)
        };
        this.clearFor = function(e) {
            delete V[e];
            V[e] = []
        };
        var P = function(g, w, n, A, s, r, p, u, e, q, B, h) {
            var l = -1, C = -1, y = A.endpoints[p], o = y.id, v = [1, 0][p], ab = [[w, n], A, s, r, o], aa = g[e], f = y._continuousAnchorEdge ? g[y._continuousAnchorEdge] : null;
            if (f) {
                var k = jsPlumbUtil.findWithFunction(f, function(Y) {
                    return Y[4] == o
                });
                if (k != -1) {
                    f.splice(k, 1);
                    for (var m = 0; m < f.length; m++) {
                        jsPlumbUtil.addWithFunction(B, f[m][1], function(Y) {
                            return Y.id == f[m][1].id
                        });
                        jsPlumbUtil.addWithFunction(h, f[m][1].endpoints[p], function(Y) {
                            return Y.id == f[m][1].endpoints[p].id
                        });
                        jsPlumbUtil.addWithFunction(h, f[m][1].endpoints[v], function(Y) {
                            return Y.id == f[m][1].endpoints[v].id
                        })
                    }
                }
            }
            for (var m = 0; m < aa.length; m++) {
                if (a.idx == 1 && aa[m][3] === r && C == -1) {
                    C = m
                }
                jsPlumbUtil.addWithFunction(B, aa[m][1], function(Y) {
                    return Y.id == aa[m][1].id
                });
                jsPlumbUtil.addWithFunction(h, aa[m][1].endpoints[p], function(Y) {
                    return Y.id == aa[m][1].endpoints[p].id
                });
                jsPlumbUtil.addWithFunction(h, aa[m][1].endpoints[v], function(Y) {
                    return Y.id == aa[m][1].endpoints[v].id
                })
            }
            if (l != -1) {
                aa[l] = ab
            } else {
                var x = u ? C != -1 ? C : 0 : aa.length;
                aa.splice(x, 0, ab)
            }
            y._continuousAnchorEdge = e
        };
        this.redraw = function(o, l, C, y, e) {
            if (!K.isSuspendDrawing()) {
                var ah = V[o] || [], ai = T[o] || [], af = [], aj = [], B = [];
                C = C || K.timestamp();
                y = y || {left: 0, top: 0};
                if (l) {
                    l = {left: l.left + y.left, top: l.top + y.top}
                }
                var u = K.updateOffset({elId: o, offset: l, recalc: false, timestamp: C}), r = {};
                for (var al = 0; al < ai.length; al++) {
                    var x = ai[al][0], v = x.sourceId, A = x.targetId, w = x.endpoints[0].anchor.isContinuous, p = x.endpoints[1].anchor.isContinuous;
                    if (w || p) {
                        var ak = v + "_" + A, g = A + "_" + v, h = r[ak], q = x.sourceId == o ? 1 : 0;
                        if (w && !S[v]) {
                            S[v] = {top: [], right: [], bottom: [], left: []}
                        }
                        if (p && !S[A]) {
                            S[A] = {top: [], right: [], bottom: [], left: []}
                        }
                        if (o != A) {
                            K.updateOffset({elId: A, timestamp: C})
                        }
                        if (o != v) {
                            K.updateOffset({elId: v, timestamp: C})
                        }
                        var s = K.getCachedData(A), ag = K.getCachedData(v);
                        if (A == v && (w || p)) {
                            P(S[v], -Math.PI / 2, 0, x, false, A, 0, false, "top", v, af, aj)
                        } else {
                            if (!h) {
                                h = Q(v, A, ag.o, s.o, x.endpoints[0].anchor, x.endpoints[1].anchor);
                                r[ak] = h
                            }
                            if (w) {
                                P(S[v], h.theta, 0, x, false, A, 0, false, h.a[0], v, af, aj)
                            }
                            if (p) {
                                P(S[A], h.theta2, -1, x, true, v, 1, true, h.a[1], A, af, aj)
                            }
                        }
                        if (w) {
                            jsPlumbUtil.addWithFunction(B, v, function(Y) {
                                return Y === v
                            })
                        }
                        if (p) {
                            jsPlumbUtil.addWithFunction(B, A, function(Y) {
                                return Y === A
                            })
                        }
                        jsPlumbUtil.addWithFunction(af, x, function(Y) {
                            return Y.id == x.id
                        });
                        if ((w && q == 0) || (p && q == 1)) {
                            jsPlumbUtil.addWithFunction(aj, x.endpoints[q], function(Y) {
                                return Y.id == x.endpoints[q].id
                            })
                        }
                    }
                }
                for (var al = 0; al < ah.length; al++) {
                    if (ah[al].connections.length == 0 && ah[al].anchor.isContinuous) {
                        if (!S[o]) {
                            S[o] = {top: [], right: [], bottom: [], left: []}
                        }
                        P(S[o], -Math.PI / 2, 0, {endpoints: [ah[al], ah[al]], paint: function() {
                            }}, false, o, 0, false, "top", o, af, aj);
                        jsPlumbUtil.addWithFunction(B, o, function(Y) {
                            return Y === o
                        })
                    }
                }
                for (var al = 0; al < B.length; al++) {
                    R(B[al], S[B[al]])
                }
                for (var al = 0; al < ah.length; al++) {
                    ah[al].paint({timestamp: C, offset: u, dimensions: u.s})
                }
                for (var al = 0; al < aj.length; al++) {
                    var m = K.getCachedData(aj[al].elementId);
                    aj[al].paint({timestamp: C, offset: m, dimensions: m.s})
                }
                for (var al = 0; al < ai.length; al++) {
                    var n = ai[al][1];
                    if (n.anchor.constructor == jsPlumb.DynamicAnchor) {
                        n.paint({elementWithPrecedence: o});
                        jsPlumbUtil.addWithFunction(af, ai[al][0], function(Y) {
                            return Y.id == ai[al][0].id
                        });
                        for (var f = 0; f < n.connections.length; f++) {
                            if (n.connections[f] !== ai[al][0]) {
                                jsPlumbUtil.addWithFunction(af, n.connections[f], function(Y) {
                                    return Y.id == n.connections[f].id
                                })
                            }
                        }
                    } else {
                        if (n.anchor.constructor == jsPlumb.Anchor) {
                            jsPlumbUtil.addWithFunction(af, ai[al][0], function(Y) {
                                return Y.id == ai[al][0].id
                            })
                        }
                    }
                }
                var k = N[o];
                if (k) {
                    k.paint({timestamp: C, recalc: false, elId: o})
                }
                for (var al = 0; al < af.length; al++) {
                    af[al].paint({elId: o, timestamp: C, recalc: false, clearEdits: e})
                }
            }
        };
        this.rehomeEndpoint = function(k, e) {
            var h = V[k] || [], g = K.getId(e);
            if (g !== k) {
                for (var f = 0; f < h.length; f++) {
                    M.add(h[f], g)
                }
                h.splice(0, h.length)
            }
        };
        var E = function(p) {
            jsPlumbUtil.EventGenerator.apply(this);
            this.type = "Continuous";
            this.isDynamic = true;
            this.isContinuous = true;
            var m = p.faces || ["top", "right", "bottom", "left"], q = !(p.clockwise === false), f = {}, h = {top: "bottom", right: "left", left: "right", bottom: "top"}, n = {top: "right", right: "bottom", left: "top", bottom: "left"}, l = {top: "left", right: "top", left: "bottom", bottom: "right"}, o = q ? n : l, e = q ? l : n, g = p.cssClass || "";
            for (var k = 0; k < m.length; k++) {
                f[m[k]] = true
            }
            this.verifyEdge = function(r) {
                if (f[r]) {
                    return r
                } else {
                    if (f[h[r]]) {
                        return h[r]
                    } else {
                        if (f[o[r]]) {
                            return o[r]
                        } else {
                            if (f[e[r]]) {
                                return e[r]
                            }
                        }
                    }
                }
                return r
            };
            this.compute = function(r) {
                return O[r.element.id] || D[r.element.id] || [0, 0]
            };
            this.getCurrentLocation = function(r) {
                return O[r.id] || D[r.id] || [0, 0]
            };
            this.getOrientation = function(r) {
                return J[r.id] || [0, 0]
            };
            this.clearUserDefinedLocation = function() {
                delete O[p.elementId]
            };
            this.setUserDefinedLocation = function(r) {
                O[p.elementId] = r
            };
            this.getCssClass = function() {
                return g
            };
            this.setCssClass = function(r) {
                g = r
            }
        };
        K.continuousAnchorFactory = {get: function(e) {
                var f = G[e.elementId];
                if (!f) {
                    f = new E(e);
                    G[e.elementId] = f
                }
                return f
            }}
    };
    jsPlumb.Anchor = function(a) {
        var m = this;
        this.x = a.x || 0;
        this.y = a.y || 0;
        this.elementId = a.elementId;
        jsPlumbUtil.EventGenerator.apply(this);
        var n = a.orientation || [0, 0], o = a.jsPlumbInstance, b = null, p = null, q = null, r = a.cssClass || "";
        this.getCssClass = function() {
            return r
        };
        this.offsets = a.offsets || [0, 0];
        m.timestamp = null;
        this.compute = function(f) {
            var g = f.xy, e = f.wh, k = f.element, h = f.timestamp;
            if (f.clearUserDefinedLocation) {
                q = null
            }
            if (h && h === m.timestamp) {
                return p
            }
            if (q != null) {
                p = q
            } else {
                p = [g[0] + (m.x * e[0]) + m.offsets[0], g[1] + (m.y * e[1]) + m.offsets[1]];
                p = o.adjustForParentOffsetAndScroll(p, k.canvas)
            }
            m.timestamp = h;
            return p
        };
        this.getOrientation = function(e) {
            return n
        };
        this.equals = function(e) {
            if (!e) {
                return false
            }
            var g = e.getOrientation();
            var f = this.getOrientation();
            return this.x == e.x && this.y == e.y && this.offsets[0] == e.offsets[0] && this.offsets[1] == e.offsets[1] && f[0] == g[0] && f[1] == g[1]
        };
        this.getCurrentLocation = function() {
            return p
        };
        this.getUserDefinedLocation = function() {
            return q
        };
        this.setUserDefinedLocation = function(e) {
            q = e
        };
        this.clearUserDefinedLocation = function() {
            q = null
        }
    };
    jsPlumb.FloatingAnchor = function(u) {
        jsPlumb.Anchor.apply(this, arguments);
        var v = u.reference, s = jsPlumb.CurrentLibrary, q = u.jsPlumbInstance, p = u.referenceCanvas, b = s.getSize(s.getElementObject(p)), a = 0, r = 0, w = null, o = null;
        this.x = 0;
        this.y = 0;
        this.isFloating = true;
        this.compute = function(e) {
            var f = e.xy, g = e.element, h = [f[0] + (b[0] / 2), f[1] + (b[1] / 2)];
            h = q.adjustForParentOffsetAndScroll(h, g.canvas);
            o = h;
            return h
        };
        this.getOrientation = function(e) {
            if (w) {
                return w
            } else {
                var f = v.getOrientation(e);
                return[Math.abs(f[0]) * a * -1, Math.abs(f[1]) * r * -1]
            }
        };
        this.over = function(e) {
            w = e.getOrientation()
        };
        this.out = function() {
            w = null
        };
        this.getCurrentLocation = function() {
            return o
        }
    };
    jsPlumb.DynamicAnchor = function(r) {
        jsPlumb.Anchor.apply(this, arguments);
        this.isSelective = true;
        this.isDynamic = true;
        var a = [], b = this, o = function(e) {
            return e.constructor == jsPlumb.Anchor ? e : r.jsPlumbInstance.makeAnchor(e, r.elementId, r.jsPlumbInstance)
        };
        for (var p = 0; p < r.anchors.length; p++) {
            a[p] = o(r.anchors[p])
        }
        this.addAnchor = function(e) {
            a.push(o(e))
        };
        this.getAnchors = function() {
            return a
        };
        this.locked = false;
        var v = a.length > 0 ? a[0] : null, s = a.length > 0 ? 0 : -1, q = v, b = this, u = function(m, e, f, l, g) {
            var h = l[0] + (m.x * g[0]), k = l[1] + (m.y * g[1]), n = l[0] + (g[0] / 2), y = l[1] + (g[1] / 2);
            return(Math.sqrt(Math.pow(e - h, 2) + Math.pow(f - k, 2)) + Math.sqrt(Math.pow(n - h, 2) + Math.pow(y - k, 2)))
        }, w = r.selector || function(k, g, f, e, h) {
            var C = f[0] + (e[0] / 2), D = f[1] + (e[1] / 2);
            var n = -1, l = Infinity;
            for (var B = 0; B < h.length; B++) {
                var m = u(h[B], C, D, k, g);
                if (m < l) {
                    n = B + 0;
                    l = m
                }
            }
            return h[n]
        };
        this.compute = function(f) {
            var g = f.xy, m = f.wh, k = f.timestamp, l = f.txy, e = f.twh;
            if (f.clearUserDefinedLocation) {
                userDefinedLocation = null
            }
            var h = b.getUserDefinedLocation();
            if (h != null) {
                return h
            }
            if (b.locked || l == null || e == null) {
                return v.compute(f)
            } else {
                f.timestamp = null
            }
            v = w(g, m, l, e, a);
            b.x = v.x;
            b.y = v.y;
            if (v != q) {
                b.fire("anchorChanged", v)
            }
            q = v;
            return v.compute(f)
        };
        this.getCurrentLocation = function() {
            return b.getUserDefinedLocation() || (v != null ? v.getCurrentLocation() : null)
        };
        this.getOrientation = function(e) {
            return v != null ? v.getOrientation(e) : [0, 0]
        };
        this.over = function(e) {
            if (v != null) {
                v.over(e)
            }
        };
        this.out = function() {
            if (v != null) {
                v.out()
            }
        };
        this.getCssClass = function() {
            return(v && v.getCssClass()) || ""
        }
    };
    var c = function(n, a, l, m, b, k) {
        jsPlumb.Anchors[b] = function(e) {
            var f = e.jsPlumbInstance.makeAnchor([n, a, l, m, 0, 0], e.elementId, e.jsPlumbInstance);
            f.type = b;
            if (k) {
                k(f, e)
            }
            return f
        }
    };
    c(0.5, 0, 0, -1, "TopCenter");
    c(0.5, 1, 0, 1, "BottomCenter");
    c(0, 0.5, -1, 0, "LeftMiddle");
    c(1, 0.5, 1, 0, "RightMiddle");
    c(0.5, 0, 0, -1, "Top");
    c(0.5, 1, 0, 1, "Bottom");
    c(0, 0.5, -1, 0, "Left");
    c(1, 0.5, 1, 0, "Right");
    c(0.5, 0.5, 0, 0, "Center");
    c(1, 0, 0, -1, "TopRight");
    c(1, 1, 0, 1, "BottomRight");
    c(0, 0, 0, -1, "TopLeft");
    c(0, 1, 0, 1, "BottomLeft");
    jsPlumb.Defaults.DynamicAnchors = function(a) {
        return a.jsPlumbInstance.makeAnchors(["TopCenter", "RightMiddle", "BottomCenter", "LeftMiddle"], a.elementId, a.jsPlumbInstance)
    };
    jsPlumb.Anchors.AutoDefault = function(a) {
        var b = a.jsPlumbInstance.makeDynamicAnchor(jsPlumb.Defaults.DynamicAnchors(a));
        b.type = "AutoDefault";
        return b
    };
    var d = function(a, b) {
        jsPlumb.Anchors[a] = function(g) {
            var h = g.jsPlumbInstance.makeAnchor(["Continuous", {faces: b}], g.elementId, g.jsPlumbInstance);
            h.type = a;
            return h
        }
    };
    jsPlumb.Anchors.Continuous = function(a) {
        return a.jsPlumbInstance.continuousAnchorFactory.get(a)
    };
    d("ContinuousLeft", ["left"]);
    d("ContinuousTop", ["top"]);
    d("ContinuousBottom", ["bottom"]);
    d("ContinuousRight", ["right"]);
    jsPlumb.Anchors.Assign = c(0, 0, 0, 0, "Assign", function(b, a) {
        var f = a.position || "Fixed";
        b.positionFinder = f.constructor == String ? a.jsPlumbInstance.AnchorPositionFinders[f] : f;
        b.constructorParams = a
    });
    jsPlumb.AnchorPositionFinders = {Fixed: function(a, h, b, g) {
            return[(a.left - h.left) / b[0], (a.top - h.top) / b[1]]
        }, Grid: function(w, a, r, v) {
            var b = w.left - a.left, o = w.top - a.top, p = r[0] / (v.grid[0]), q = r[1] / (v.grid[1]), s = Math.floor(b / p), u = Math.floor(o / q);
            return[((s * p) + (p / 2)) / r[0], ((u * q) + (q / 2)) / r[1]]
        }};
    jsPlumb.Anchors.Perimeter = function(y) {
        y = y || {};
        var x = y.anchorCount || 60, u = y.shape;
        if (!u) {
            throw new Error("no shape supplied to Perimeter Anchor type")
        }
        var w = function() {
            var g = 0.5, h = Math.PI * 2 / x, f = 0, l = [];
            for (var k = 0; k < x; k++) {
                var m = g + (g * Math.sin(f)), e = g + (g * Math.cos(f));
                l.push([m, e, 0, 0]);
                f += h
            }
            return l
        }, s = function(g) {
            var e = x / g.length, k = [], h = function(H, F, m, G, E) {
                e = x * E;
                var n = (m - H) / e, o = (G - F) / e;
                for (var l = 0; l < e; l++) {
                    k.push([H + (n * l), F + (o * l), 0, 0])
                }
            };
            for (var f = 0; f < g.length; f++) {
                h.apply(null, g[f])
            }
            return k
        }, p = function(g) {
            var e = [];
            for (var f = 0; f < g.length; f++) {
                e.push([g[f][0], g[f][1], g[f][2], g[f][3], 1 / g.length])
            }
            return s(e)
        }, r = function() {
            return p([[0, 0, 1, 0], [1, 0, 1, 1], [1, 1, 0, 1], [0, 1, 0, 0]])
        };
        var v = {Circle: w, Ellipse: w, Diamond: function() {
                return p([[0.5, 0, 1, 0.5], [1, 0.5, 0.5, 1], [0.5, 1, 0, 0.5], [0, 0.5, 0.5, 0]])
            }, Rectangle: r, Square: r, Triangle: function() {
                return p([[0.5, 0, 1, 1], [1, 1, 0, 1], [0, 1, 0.5, 0]])
            }, Path: function(e) {
                var g = e.points, f = [], k = 0;
                for (var h = 0; h < g.length - 1; h++) {
                    var l = Math.sqrt(Math.pow(g[h][2] - g[h][0]) + Math.pow(g[h][3] - g[h][1]));
                    k += l;
                    f.push([g[h][0], g[h][1], g[h + 1][0], g[h + 1][1], l])
                }
                for (var h = 0; h < f.length; h++) {
                    f[h][4] = f[h][4] / k
                }
                return s(f)
            }}, b = function(f, g) {
            var e = [], h = g / 180 * Math.PI;
            for (var k = 0; k < f.length; k++) {
                var l = f[k][0] - 0.5, m = f[k][1] - 0.5;
                e.push([0.5 + ((l * Math.cos(h)) - (m * Math.sin(h))), 0.5 + ((l * Math.sin(h)) + (m * Math.cos(h))), f[k][2], f[k][3]])
            }
            return e
        };
        if (!v[u]) {
            throw new Error("Shape [" + u + "] is unknown by Perimeter Anchor type")
        }
        var a = v[u](y);
        if (y.rotation) {
            a = b(a, y.rotation)
        }
        var q = y.jsPlumbInstance.makeDynamicAnchor(a);
        q.type = "Perimeter";
        return q
    }
})();
(function() {
    var h = function(a, c) {
        var b = false;
        return{drag: function() {
                if (b) {
                    b = false;
                    return true
                }
                var d = jsPlumb.CurrentLibrary.getUIPosition(arguments, c.getZoom());
                if (a.element) {
                    jsPlumb.CurrentLibrary.setOffset(a.element, d);
                    c.repaint(a.element, d)
                }
            }, stopDrag: function() {
                b = true
            }}
    };
    var f = function(c, m, n) {
        var a = document.createElement("div");
        a.style.position = "absolute";
        var d = jsPlumb.CurrentLibrary.getElementObject(a);
        jsPlumb.CurrentLibrary.appendElement(a, m);
        var b = n.getId(d);
        n.updateOffset({elId: b});
        c.id = b;
        c.element = d
    };
    var g = function(a, b, r, c, o, p, q) {
        var d = new jsPlumb.FloatingAnchor({reference: b, referenceCanvas: c, jsPlumbInstance: p});
        return q({paintStyle: a, endpoint: r, anchor: d, source: o, scope: "__floating"})
    };
    var e = ["connectorStyle", "connectorHoverStyle", "connectorOverlays", "connector", "connectionType", "connectorClass", "connectorHoverClass"];
    jsPlumb.Endpoint = function(aR) {
        var aJ = this, aH = aR._jsPlumb, aQ = jsPlumb.CurrentLibrary, ap = aQ.getAttribute, aB = aQ.getElementObject, aK = jsPlumbUtil, aS = aQ.getOffset, aC = aR.newConnection, ah = aR.newEndpoint, b = aR.finaliseConnection, a = aR.fireDetachEvent, aw = aR.floatingConnections;
        aJ.idPrefix = "_jsplumb_e_";
        aJ.defaultLabelLocation = [0.5, 0.5];
        aJ.defaultOverlayKeys = ["Overlays", "EndpointOverlays"];
        this.parent = aR.parent;
        overlayCapableJsPlumbUIComponent.apply(this, arguments);
        aR = aR || {};
        this.getTypeDescriptor = function() {
            return"endpoint"
        };
        this.getDefaultType = function() {
            return{parameters: {}, scope: null, maxConnections: aJ._jsPlumb.Defaults.MaxConnections, paintStyle: aJ._jsPlumb.Defaults.EndpointStyle || jsPlumb.Defaults.EndpointStyle, endpoint: aJ._jsPlumb.Defaults.Endpoint || jsPlumb.Defaults.Endpoint, hoverPaintStyle: aJ._jsPlumb.Defaults.EndpointHoverStyle || jsPlumb.Defaults.EndpointHoverStyle, overlays: aJ._jsPlumb.Defaults.EndpointOverlays || jsPlumb.Defaults.EndpointOverlays, connectorStyle: aR.connectorStyle, connectorHoverStyle: aR.connectorHoverStyle, connectorClass: aR.connectorClass, connectorHoverClass: aR.connectorHoverClass, connectorOverlays: aR.connectorOverlays, connector: aR.connector, connectorTooltip: aR.connectorTooltip}
        };
        var ag = this.applyType;
        this.applyType = function(l, k) {
            ag(l, k);
            if (l.maxConnections != null) {
                al = l.maxConnections
            }
            if (l.scope) {
                aJ.scope = l.scope
            }
            aK.copyValues(e, l, aJ)
        };
        var az = true, aP = !(aR.enabled === false);
        this.isVisible = function() {
            return az
        };
        this.setVisible = function(n, k, o) {
            az = n;
            if (aJ.canvas) {
                aJ.canvas.style.display = n ? "block" : "none"
            }
            aJ[n ? "showOverlays" : "hideOverlays"]();
            if (!k) {
                for (var l = 0; l < aJ.connections.length; l++) {
                    aJ.connections[l].setVisible(n);
                    if (!o) {
                        var m = aJ === aJ.connections[l].endpoints[0] ? 1 : 0;
                        if (aJ.connections[l].endpoints[m].connections.length == 1) {
                            aJ.connections[l].endpoints[m].setVisible(n, true, true)
                        }
                    }
                }
            }
        };
        this.isEnabled = function() {
            return aP
        };
        this.setEnabled = function(k) {
            aP = k
        };
        var ao = aR.source, aM = aR.uuid, aT = null, an = null;
        if (aM) {
            aR.endpointsByUUID[aM] = aJ
        }
        var c = ap(ao, "id");
        this.elementId = c;
        this.element = ao;
        aJ.setElementId = function(k) {
            c = k;
            aJ.elementId = k;
            aJ.anchor.elementId = k
        };
        aJ.setReferenceElement = function(k) {
            ao = k;
            aJ.element = k
        };
        var aU = aR.connectionCost;
        this.getConnectionCost = function() {
            return aU
        };
        this.setConnectionCost = function(k) {
            aU = k
        };
        var am = aR.connectionsDirected;
        this.areConnectionsDirected = function() {
            return am
        };
        this.setConnectionsDirected = function(k) {
            am = k
        };
        var at = "", ak = function() {
            aQ.removeClass(ao, aH.endpointAnchorClassPrefix + "_" + at);
            aJ.removeClass(aH.endpointAnchorClassPrefix + "_" + at);
            at = aJ.anchor.getCssClass();
            aJ.addClass(aH.endpointAnchorClassPrefix + "_" + at);
            aQ.addClass(ao, aH.endpointAnchorClassPrefix + "_" + at)
        };
        this.setAnchor = function(l, k) {
            aJ.anchor = aH.makeAnchor(l, c, aH);
            ak();
            aJ.anchor.bind("anchorChanged", function(m) {
                aJ.fire("anchorChanged", {endpoint: aJ, anchor: m});
                ak()
            });
            if (!k) {
                aH.repaint(c)
            }
        };
        this.cleanup = function() {
            aQ.removeClass(ao, aH.endpointAnchorClassPrefix + "_" + at)
        };
        var ai = aR.anchor ? aR.anchor : aR.anchors ? aR.anchors : (aH.Defaults.Anchor || "Top");
        aJ.setAnchor(ai, true);
        if (!aR._transient) {
            aH.anchorManager.add(aJ, c)
        }
        var d = null, af = null;
        this.setEndpoint = function(m) {
            var n = function(p, q) {
                var o = aH.getRenderMode();
                if (jsPlumb.Endpoints[o][p]) {
                    return new jsPlumb.Endpoints[o][p](q)
                }
                if (!aH.Defaults.DoNotThrowErrors) {
                    throw {msg: "jsPlumb: unknown endpoint type '" + p + "'"}
                }
            };
            var l = {_jsPlumb: aJ._jsPlumb, cssClass: aR.cssClass, parent: aR.parent, container: aR.container, tooltip: aR.tooltip, connectorTooltip: aR.connectorTooltip, endpoint: aJ};
            if (aK.isString(m)) {
                d = n(m, l)
            } else {
                if (aK.isArray(m)) {
                    l = aK.merge(m[1], l);
                    d = n(m[0], l)
                } else {
                    d = m.clone()
                }
            }
            var k = jsPlumb.extend({}, l);
            d.clone = function() {
                var o = new Object();
                d.constructor.apply(o, [k]);
                return o
            };
            aJ.endpoint = d;
            aJ.type = aJ.endpoint.type
        };
        this.setEndpoint(aR.endpoint || aH.Defaults.Endpoint || jsPlumb.Defaults.Endpoint || "Dot");
        af = d;
        var aF = aJ.setHover;
        aJ.setHover = function() {
            aJ.endpoint.setHover.apply(aJ.endpoint, arguments);
            aF.apply(aJ, arguments)
        };
        var aq = function(k) {
            if (aJ.connections.length > 0) {
                aJ.connections[0].setHover(k, false)
            } else {
                aJ.setHover(k)
            }
        };
        aJ.bindListeners(aJ.endpoint, aJ, aq);
        this.setPaintStyle(aR.paintStyle || aR.style || aH.Defaults.EndpointStyle || jsPlumb.Defaults.EndpointStyle, true);
        this.setHoverPaintStyle(aR.hoverPaintStyle || aH.Defaults.EndpointHoverStyle || jsPlumb.Defaults.EndpointHoverStyle, true);
        this.paintStyleInUse = this.getPaintStyle();
        var aE = this.getPaintStyle();
        aK.copyValues(e, aR, this);
        this.isSource = aR.isSource || false;
        this.isTarget = aR.isTarget || false;
        var al = aR.maxConnections || aH.Defaults.MaxConnections;
        this.getAttachedElements = function() {
            return aJ.connections
        };
        this.canvas = this.endpoint.canvas;
        aJ.addClass(aH.endpointAnchorClassPrefix + "_" + at);
        aQ.addClass(ao, aH.endpointAnchorClassPrefix + "_" + at);
        this.connections = aR.connections || [];
        this.connectorPointerEvents = aR["connector-pointer-events"];
        this.scope = aR.scope || aH.getDefaultScope();
        this.timestamp = null;
        aJ.reattachConnections = aR.reattach || aH.Defaults.ReattachConnections;
        aJ.connectionsDetachable = aH.Defaults.ConnectionsDetachable;
        if (aR.connectionsDetachable === false || aR.detachable === false) {
            aJ.connectionsDetachable = false
        }
        var au = aR.dragAllowedWhenFull || true;
        if (aR.onMaxConnections) {
            aJ.bind("maxConnections", aR.onMaxConnections)
        }
        this.computeAnchor = function(k) {
            return aJ.anchor.compute(k)
        };
        this.addConnection = function(k) {
            aJ.connections.push(k);
            aJ[(aJ.connections.length > 0 ? "add" : "remove") + "Class"](aH.endpointConnectedClass);
            aJ[(aJ.isFull() ? "add" : "remove") + "Class"](aH.endpointFullClass)
        };
        this.detach = function(s, o, r, l, u) {
            var m = aK.findWithFunction(aJ.connections, function(v) {
                return v.id == s.id
            }), n = false;
            l = (l !== false);
            if (m >= 0) {
                if (r || s._forceDetach || s.isDetachable() || s.isDetachAllowed(s)) {
                    var k = s.endpoints[0] == aJ ? s.endpoints[1] : s.endpoints[0];
                    if (r || s._forceDetach || (aJ.isDetachAllowed(s))) {
                        aJ.connections.splice(m, 1);
                        if (!o) {
                            k.detach(s, true, r);
                            if (s.endpointsToDeleteOnDetach) {
                                for (var p = 0; p < s.endpointsToDeleteOnDetach.length; p++) {
                                    var q = s.endpointsToDeleteOnDetach[p];
                                    if (q && q.connections.length == 0) {
                                        aH.deleteEndpoint(q)
                                    }
                                }
                            }
                        }
                        if (s.getConnector() != null) {
                            aK.removeElements(s.getConnector().getDisplayElements(), s.parent)
                        }
                        aK.removeWithFunction(aR.connectionsByScope[s.scope], function(v) {
                            return v.id == s.id
                        });
                        aJ[(aJ.connections.length > 0 ? "add" : "remove") + "Class"](aH.endpointConnectedClass);
                        aJ[(aJ.isFull() ? "add" : "remove") + "Class"](aH.endpointFullClass);
                        n = true;
                        a(s, (!o && l), u)
                    }
                }
            }
            return n
        };
        this.detachAll = function(k, l) {
            while (aJ.connections.length > 0) {
                aJ.detach(aJ.connections[0], false, true, k, l)
            }
            return aJ
        };
        this.detachFrom = function(l, m, o) {
            var k = [];
            for (var n = 0; n < aJ.connections.length; n++) {
                if (aJ.connections[n].endpoints[1] == l || aJ.connections[n].endpoints[0] == l) {
                    k.push(aJ.connections[n])
                }
            }
            for (var n = 0; n < k.length; n++) {
                if (aJ.detach(k[n], false, true, m, o)) {
                    k[n].setHover(false, false)
                }
            }
            return aJ
        };
        this.detachFromConnection = function(k) {
            var l = aK.findWithFunction(aJ.connections, function(m) {
                return m.id == k.id
            });
            if (l >= 0) {
                aJ.connections.splice(l, 1);
                aJ[(aJ.connections.length > 0 ? "add" : "remove") + "Class"](aH.endpointConnectedClass);
                aJ[(aJ.isFull() ? "add" : "remove") + "Class"](aH.endpointFullClass)
            }
        };
        this.getElement = function() {
            return ao
        };
        this.setElement = function(m, p) {
            var k = aH.getId(m);
            aK.removeWithFunction(aR.endpointsByElement[aJ.elementId], function(q) {
                return q.id == aJ.id
            });
            ao = aB(m);
            c = aH.getId(ao);
            aJ.elementId = c;
            var l = aR.getParentFromParams({source: k, container: p}), n = aQ.getParent(aJ.canvas);
            aQ.removeElement(aJ.canvas, n);
            aQ.appendElement(aJ.canvas, l);
            for (var o = 0; o < aJ.connections.length; o++) {
                aJ.connections[o].moveParent(l);
                aJ.connections[o].sourceId = c;
                aJ.connections[o].source = ao
            }
            aK.addToList(aR.endpointsByElement, k, aJ)
        };
        this.getUuid = function() {
            return aM
        };
        aJ.makeInPlaceCopy = function() {
            var k = aJ.anchor.getCurrentLocation(aJ), l = aJ.anchor.getOrientation(aJ), m = aJ.anchor.getCssClass(), n = {bind: function() {
                }, compute: function() {
                    return[k[0], k[1]]
                }, getCurrentLocation: function() {
                    return[k[0], k[1]]
                }, getOrientation: function() {
                    return l
                }, getCssClass: function() {
                    return m
                }};
            return ah({anchor: n, source: ao, paintStyle: this.getPaintStyle(), endpoint: aR.hideOnDrag ? "Blank" : d, _transient: true, scope: aJ.scope})
        };
        this.isConnectedTo = function(k) {
            var l = false;
            if (k) {
                for (var m = 0; m < aJ.connections.length; m++) {
                    if (aJ.connections[m].endpoints[1] == k) {
                        l = true;
                        break
                    }
                }
            }
            return l
        };
        this.isFloating = function() {
            return aT != null
        };
        this.connectorSelector = function() {
            var k = aJ.connections[0];
            if (aJ.isTarget && k) {
                return k
            } else {
                return(aJ.connections.length < al) || al == -1 ? null : k
            }
        };
        this.isFull = function() {
            return !(aJ.isFloating() || al < 1 || aJ.connections.length < al)
        };
        this.setDragAllowedWhenFull = function(k) {
            au = k
        };
        this.setStyle = aJ.setPaintStyle;
        this.equals = function(k) {
            return this.anchor.equals(k.anchor)
        };
        var av = function(l) {
            var m = 0;
            if (l != null) {
                for (var k = 0; k < aJ.connections.length; k++) {
                    if (aJ.connections[k].sourceId == l || aJ.connections[k].targetId == l) {
                        m = k;
                        break
                    }
                }
            }
            return aJ.connections[m]
        };
        this.paint = function(x) {
            x = x || {};
            var q = x.timestamp, r = !(x.recalc === false);
            if (!q || aJ.timestamp !== q) {
                var y = aH.updateOffset({elId: c, timestamp: q, recalc: r});
                var k = x.offset ? x.offset.o : y.o;
                if (k) {
                    var u = x.anchorPoint, w = x.connectorPaintStyle;
                    if (u == null) {
                        var C = x.dimensions || y.s;
                        if (k == null || C == null) {
                            y = aH.updateOffset({elId: c, timestamp: q});
                            k = y.o;
                            C = y.s
                        }
                        var A = {xy: [k.left, k.top], wh: C, element: aJ, timestamp: q};
                        if (r && aJ.anchor.isDynamic && aJ.connections.length > 0) {
                            var o = av(x.elementWithPrecedence), l = o.endpoints[0] == aJ ? 1 : 0, v = l == 0 ? o.sourceId : o.targetId, m = aH.getCachedData(v), p = m.o, n = m.s;
                            A.txy = [p.left, p.top];
                            A.twh = n;
                            A.tElement = o.endpoints[l]
                        }
                        u = aJ.anchor.compute(A)
                    }
                    d.compute(u, aJ.anchor.getOrientation(aJ), aJ.paintStyleInUse, w || aJ.paintStyleInUse);
                    d.paint(aJ.paintStyleInUse, aJ.anchor);
                    aJ.timestamp = q;
                    for (var s = 0; s < aJ.overlays.length; s++) {
                        var B = aJ.overlays[s];
                        if (B.isVisible()) {
                            aJ.overlayPlacements[s] = B.draw(aJ.endpoint, aJ.paintStyleInUse);
                            B.paint(aJ.overlayPlacements[s])
                        }
                    }
                }
            }
        };
        this.repaint = this.paint;
        if (aQ.isDragSupported(ao)) {
            var ay = {id: null, element: null}, aO = null, aI = false, aD = null, aA = h(ay, aH);
            var ax = function() {
                aO = aJ.connectorSelector();
                var p = true;
                if (!aJ.isEnabled()) {
                    p = false
                }
                if (aO == null && !aR.isSource) {
                    p = false
                }
                if (aR.isSource && aJ.isFull() && !au) {
                    p = false
                }
                if (aO != null && !aO.isDetachable()) {
                    p = false
                }
                if (p === false) {
                    if (aQ.stopDrag) {
                        aQ.stopDrag()
                    }
                    aA.stopDrag();
                    return false
                }
                aJ.addClass("endpointDrag");
                if (aO && !aJ.isFull() && aR.isSource) {
                    aO = null
                }
                aH.updateOffset({elId: c});
                an = aJ.makeInPlaceCopy();
                an.referenceEndpoint = aJ;
                an.paint();
                f(ay, aJ.parent, aH);
                var q = aB(an.canvas), k = aS(q, aH), n = aH.adjustForParentOffsetAndScroll([k.left, k.top], an.canvas), o = aB(aJ.canvas);
                aQ.setOffset(ay.element, {left: n[0], top: n[1]});
                if (aJ.parentAnchor) {
                    aJ.anchor = aH.makeAnchor(aJ.parentAnchor, aJ.elementId, aH)
                }
                aQ.setAttribute(o, "dragId", ay.id);
                aQ.setAttribute(o, "elId", c);
                aT = g(aJ.getPaintStyle(), aJ.anchor, d, aJ.canvas, ay.element, aH, ah);
                aJ.canvas.style.visibility = "hidden";
                if (aO == null) {
                    aJ.anchor.locked = true;
                    aJ.setHover(false, false);
                    aO = aC({sourceEndpoint: aJ, targetEndpoint: aT, source: aJ.endpointWillMoveTo || ao, target: ay.element, anchors: [aJ.anchor, aT.anchor], paintStyle: aR.connectorStyle, hoverPaintStyle: aR.connectorHoverStyle, connector: aR.connector, overlays: aR.connectorOverlays, type: aJ.connectionType, cssClass: aJ.connectorClass, hoverClass: aJ.connectorHoverClass});
                    aO.addClass(aH.draggingClass);
                    aT.addClass(aH.draggingClass);
                    aH.fire("connectionDrag", aO)
                } else {
                    aI = true;
                    aO.setHover(false);
                    aL(q, false, true);
                    var l = aO.endpoints[0].id == aJ.id ? 0 : 1;
                    aO.floatingAnchorIndex = l;
                    aJ.detachFromConnection(aO);
                    var r = jsPlumb.CurrentLibrary.getDragScope(o);
                    aQ.setAttribute(o, "originalScope", r);
                    var m = aQ.getDropScope(o);
                    aQ.setDragScope(o, m);
                    if (l == 0) {
                        aD = [aO.source, aO.sourceId, ae, r];
                        aO.source = ay.element;
                        aO.sourceId = ay.id
                    } else {
                        aD = [aO.target, aO.targetId, ae, r];
                        aO.target = ay.element;
                        aO.targetId = ay.id
                    }
                    aO.endpoints[l == 0 ? 1 : 0].anchor.locked = true;
                    aO.suspendedEndpoint = aO.endpoints[l];
                    aO.suspendedElement = aO.endpoints[l].getElement();
                    aO.suspendedElementId = aO.endpoints[l].elementId;
                    aO.suspendedElementType = l == 0 ? "source" : "target";
                    aO.suspendedEndpoint.setHover(false);
                    aT.referenceEndpoint = aO.suspendedEndpoint;
                    aO.endpoints[l] = aT;
                    aO.addClass(aH.draggingClass);
                    aT.addClass(aH.draggingClass);
                    aH.fire("connectionDrag", aO)
                }
                aw[ay.id] = aO;
                aH.anchorManager.addFloatingConnection(ay.id, aO);
                aT.addConnection(aO);
                aK.addToList(aR.endpointsByElement, ay.id, aT);
                aH.currentlyDragging = true
            };
            var aN = aR.dragOptions || {}, aG = jsPlumb.extend({}, aQ.defaultDragOptions), aj = aQ.dragEvents.start, ad = aQ.dragEvents.stop, ar = aQ.dragEvents.drag;
            aN = jsPlumb.extend(aG, aN);
            aN.scope = aN.scope || aJ.scope;
            aN[aj] = aH.wrap(aN[aj], ax);
            aN[ar] = aH.wrap(aN[ar], aA.drag);
            aN[ad] = aH.wrap(aN[ad], function() {
                var k = aQ.getDropEvent(arguments);
                aK.removeWithFunction(aR.endpointsByElement[ay.id], function(m) {
                    return m.id == aT.id
                });
                aK.removeElement(an.canvas, ao);
                aH.anchorManager.clearFor(ay.id);
                var l = aO.floatingAnchorIndex == null ? 1 : aO.floatingAnchorIndex;
                aO.endpoints[l == 0 ? 1 : 0].anchor.locked = false;
                if (aO.endpoints[l] == aT) {
                    if (aI && aO.suspendedEndpoint) {
                        if (l == 0) {
                            aO.source = aD[0];
                            aO.sourceId = aD[1]
                        } else {
                            aO.target = aD[0];
                            aO.targetId = aD[1]
                        }
                        aQ.setDragScope(aD[2], aD[3]);
                        aO.endpoints[l] = aO.suspendedEndpoint;
                        if (aO.isReattach() || aO._forceReattach || aO._forceDetach || !aO.endpoints[l == 0 ? 1 : 0].detach(aO, false, false, true, k)) {
                            aO.setHover(false);
                            aO.floatingAnchorIndex = null;
                            aO.suspendedEndpoint.addConnection(aO);
                            aH.repaint(aD[1])
                        }
                        aO._forceDetach = null;
                        aO._forceReattach = null
                    } else {
                        aK.removeElements(aO.getConnector().getDisplayElements(), aJ.parent);
                        aJ.detachFromConnection(aO)
                    }
                }
                aK.removeElements([ay.element[0], aT.canvas], ao);
                aH.dragManager.elementRemoved(aT.elementId);
                aJ.canvas.style.visibility = "visible";
                aJ.anchor.locked = false;
                aJ.paint({recalc: false});
                aO.removeClass(aH.draggingClass);
                aT.removeClass(aH.draggingClass);
                aH.fire("connectionDragStop", aO);
                aO = null;
                an = null;
                delete aR.endpointsByElement[aT.elementId];
                aT.anchor = null;
                aT = null;
                aH.currentlyDragging = false
            });
            var ae = aB(aJ.canvas);
            aQ.initDraggable(ae, aN, true, aH)
        }
        var aL = function(q, l, n, k) {
            if ((aR.isTarget || l) && aQ.isDropSupported(ao)) {
                var p = aR.dropOptions || aH.Defaults.DropOptions || jsPlumb.Defaults.DropOptions;
                p = jsPlumb.extend({}, p);
                p.scope = p.scope || aJ.scope;
                var r = aQ.dragEvents.drop, m = aQ.dragEvents.over, s = aQ.dragEvents.out, o = function() {
                    aJ.removeClass(aH.endpointDropAllowedClass);
                    aJ.removeClass(aH.endpointDropForbiddenClass);
                    var G = aQ.getDropEvent(arguments), D = aB(aQ.getDragObject(arguments)), E = ap(D, "dragId"), B = ap(D, "elId"), H = ap(D, "originalScope"), x = aw[E];
                    var A = x.suspendedEndpoint && (x.suspendedEndpoint.id == aJ.id || aJ.referenceEndpoint && x.suspendedEndpoint.id == aJ.referenceEndpoint.id);
                    if (A) {
                        x._forceReattach = true;
                        return
                    }
                    if (x != null) {
                        var v = x.floatingAnchorIndex == null ? 1 : x.floatingAnchorIndex, u = v == 0 ? 1 : 0;
                        if (H) {
                            jsPlumb.CurrentLibrary.setDragScope(D, H)
                        }
                        var I = k != null ? k.isEnabled() : true;
                        if (aJ.isFull()) {
                            aJ.fire("maxConnections", {endpoint: aJ, connection: x, maxConnections: al}, G)
                        }
                        if (!aJ.isFull() && !(v == 0 && !aJ.isSource) && !(v == 1 && !aJ.isTarget) && I) {
                            var y = true;
                            if (x.suspendedEndpoint && x.suspendedEndpoint.id != aJ.id) {
                                if (v == 0) {
                                    x.source = x.suspendedEndpoint.element;
                                    x.sourceId = x.suspendedEndpoint.elementId
                                } else {
                                    x.target = x.suspendedEndpoint.element;
                                    x.targetId = x.suspendedEndpoint.elementId
                                }
                                if (!x.isDetachAllowed(x) || !x.endpoints[v].isDetachAllowed(x) || !x.suspendedEndpoint.isDetachAllowed(x) || !aH.checkCondition("beforeDetach", x)) {
                                    y = false
                                }
                            }
                            if (v == 0) {
                                x.source = aJ.element;
                                x.sourceId = aJ.elementId
                            } else {
                                x.target = aJ.element;
                                x.targetId = aJ.elementId
                            }
                            var w = function() {
                                x.floatingAnchorIndex = null
                            };
                            var F = function() {
                                x.endpoints[v].detachFromConnection(x);
                                if (x.suspendedEndpoint) {
                                    x.suspendedEndpoint.detachFromConnection(x)
                                }
                                x.endpoints[v] = aJ;
                                aJ.addConnection(x);
                                var J = aJ.getParameters();
                                for (var L in J) {
                                    x.setParameter(L, J[L])
                                }
                                if (!x.suspendedEndpoint) {
                                    if (J.draggable) {
                                        jsPlumb.CurrentLibrary.initDraggable(aJ.element, aN, true, aH)
                                    }
                                } else {
                                    var K = x.suspendedEndpoint.getElement(), M = x.suspendedEndpoint.elementId;
                                    a({source: v == 0 ? K : x.source, target: v == 1 ? K : x.target, sourceId: v == 0 ? M : x.sourceId, targetId: v == 1 ? M : x.targetId, sourceEndpoint: v == 0 ? x.suspendedEndpoint : x.endpoints[0], targetEndpoint: v == 1 ? x.suspendedEndpoint : x.endpoints[1], connection: x}, true, G)
                                }
                                if (x.endpoints[0].addedViaMouse) {
                                    x.endpointsToDeleteOnDetach[0] = x.endpoints[0]
                                }
                                if (x.endpoints[1].addedViaMouse) {
                                    x.endpointsToDeleteOnDetach[1] = x.endpoints[1]
                                }
                                b(x, null, G);
                                w()
                            };
                            var C = function() {
                                if (x.suspendedEndpoint) {
                                    x.endpoints[v] = x.suspendedEndpoint;
                                    x.setHover(false);
                                    x._forceDetach = true;
                                    if (v == 0) {
                                        x.source = x.suspendedEndpoint.element;
                                        x.sourceId = x.suspendedEndpoint.elementId
                                    } else {
                                        x.target = x.suspendedEndpoint.element;
                                        x.targetId = x.suspendedEndpoint.elementId
                                    }
                                    x.suspendedEndpoint.addConnection(x);
                                    x.endpoints[0].repaint();
                                    x.repaint();
                                    aH.repaint(x.sourceId);
                                    x._forceDetach = false
                                }
                                w()
                            };
                            y = y && aJ.isDropAllowed(x.sourceId, x.targetId, x.scope, x, aJ);
                            if (y) {
                                F()
                            } else {
                                C()
                            }
                        }
                        aH.currentlyDragging = false;
                        delete aw[E];
                        aH.anchorManager.removeFloatingConnection(E)
                    }
                };
                p[r] = aH.wrap(p[r], o);
                p[m] = aH.wrap(p[m], function() {
                    var y = aQ.getDragObject(arguments), u = ap(aB(y), "dragId"), v = aw[u];
                    if (v != null) {
                        var A = v.floatingAnchorIndex == null ? 1 : v.floatingAnchorIndex;
                        var w = (aJ.isTarget && v.floatingAnchorIndex != 0) || (v.suspendedEndpoint && aJ.referenceEndpoint && aJ.referenceEndpoint.id == v.suspendedEndpoint.id);
                        if (w) {
                            var x = aH.checkCondition("checkDropAllowed", {sourceEndpoint: v.endpoints[A], targetEndpoint: aJ, connection: v});
                            aJ[(x ? "add" : "remove") + "Class"](aH.endpointDropAllowedClass);
                            aJ[(x ? "remove" : "add") + "Class"](aH.endpointDropForbiddenClass);
                            v.endpoints[A].anchor.over(aJ.anchor)
                        }
                    }
                });
                p[s] = aH.wrap(p[s], function() {
                    var x = aQ.getDragObject(arguments), u = ap(aB(x), "dragId"), v = aw[u];
                    if (v != null) {
                        var y = v.floatingAnchorIndex == null ? 1 : v.floatingAnchorIndex;
                        var w = (aJ.isTarget && v.floatingAnchorIndex != 0) || (v.suspendedEndpoint && aJ.referenceEndpoint && aJ.referenceEndpoint.id == v.suspendedEndpoint.id);
                        if (w) {
                            aJ.removeClass(aH.endpointDropAllowedClass);
                            aJ.removeClass(aH.endpointDropForbiddenClass);
                            v.endpoints[y].anchor.out()
                        }
                    }
                });
                aQ.initDroppable(q, p, true, n)
            }
        };
        aL(aB(aJ.canvas), true, !(aR._transient || aJ.anchor.isFloating), aJ);
        if (aR.type) {
            aJ.addType(aR.type, aR.data, aH.isSuspendDrawing())
        }
        return aJ
    }
})();
(function() {
    jsPlumb.Connection = function(aD) {
        var au = this, an = true, T, Y, aq = aD._jsPlumb, az = jsPlumb.CurrentLibrary, ai = az.getAttribute, U = az.getElementObject, aw = jsPlumbUtil, aE = az.getOffset, V = aD.newConnection, aa = aD.newEndpoint, aB = null;
        au.idPrefix = "_jsplumb_c_";
        au.defaultLabelLocation = 0.5;
        au.defaultOverlayKeys = ["Overlays", "ConnectionOverlays"];
        this.parent = aD.parent;
        overlayCapableJsPlumbUIComponent.apply(this, arguments);
        this.isVisible = function() {
            return an
        };
        this.setVisible = function(a) {
            an = a;
            au[a ? "showOverlays" : "hideOverlays"]();
            if (aB && aB.canvas) {
                aB.canvas.style.display = a ? "block" : "none"
            }
            au.repaint()
        };
        var ag = aD.editable === true;
        this.setEditable = function(a) {
            if (aB && aB.isEditable()) {
                ag = a
            }
            return ag
        };
        this.isEditable = function() {
            return ag
        };
        this.editStarted = function() {
            au.fire("editStarted", {path: aB.getPath()});
            aq.setHoverSuspended(true)
        };
        this.editCompleted = function() {
            au.fire("editCompleted", {path: aB.getPath()});
            au.setHover(false);
            aq.setHoverSuspended(false)
        };
        this.editCanceled = function() {
            au.fire("editCanceled", {path: aB.getPath()});
            au.setHover(false);
            aq.setHoverSuspended(false)
        };
        var at = this.addClass, af = this.removeClass;
        this.addClass = function(a, b) {
            at(a);
            if (b) {
                au.endpoints[0].addClass(a);
                au.endpoints[1].addClass(a)
            }
        };
        this.removeClass = function(a, b) {
            af(a);
            if (b) {
                au.endpoints[0].removeClass(a);
                au.endpoints[1].removeClass(a)
            }
        };
        this.getTypeDescriptor = function() {
            return"connection"
        };
        this.getDefaultType = function() {
            return{parameters: {}, scope: null, detachable: au._jsPlumb.Defaults.ConnectionsDetachable, rettach: au._jsPlumb.Defaults.ReattachConnections, paintStyle: au._jsPlumb.Defaults.PaintStyle || jsPlumb.Defaults.PaintStyle, connector: au._jsPlumb.Defaults.Connector || jsPlumb.Defaults.Connector, hoverPaintStyle: au._jsPlumb.Defaults.HoverPaintStyle || jsPlumb.Defaults.HoverPaintStyle, overlays: au._jsPlumb.Defaults.ConnectorOverlays || jsPlumb.Defaults.ConnectorOverlays}
        };
        var Z = this.applyType;
        this.applyType = function(b, a) {
            Z(b, a);
            if (b.detachable != null) {
                au.setDetachable(b.detachable)
            }
            if (b.reattach != null) {
                au.setReattach(b.reattach)
            }
            if (b.scope) {
                au.scope = b.scope
            }
            ag = b.editable;
            au.setConnector(b.connector, a)
        };
        Y = au.setHover;
        au.setHover = function(a) {
            aB.setHover.apply(aB, arguments);
            Y.apply(au, arguments)
        };
        T = function(a) {
            if (!aq.isConnectionBeingDragged()) {
                au.setHover(a, false)
            }
        };
        var ad = function(d, a, b) {
            var c = new Object();
            if (!aq.Defaults.DoNotThrowErrors && jsPlumb.Connectors[a] == null) {
                throw {msg: "jsPlumb: unknown connector type '" + a + "'"}
            }
            jsPlumb.Connectors[a].apply(c, [b]);
            jsPlumb.ConnectorRenderers[d].apply(c, [b]);
            return c
        };
        this.setConnector = function(b, d) {
            if (aB != null) {
                aw.removeElements(aB.getDisplayElements())
            }
            var a = {_jsPlumb: au._jsPlumb, parent: aD.parent, cssClass: aD.cssClass, container: aD.container, tooltip: au.tooltip, "pointer-events": aD["pointer-events"]}, c = aq.getRenderMode();
            if (aw.isString(b)) {
                aB = ad(c, b, a)
            } else {
                if (aw.isArray(b)) {
                    if (b.length == 1) {
                        aB = ad(c, b[0], a)
                    } else {
                        aB = ad(c, b[0], aw.merge(b[1], a))
                    }
                }
            }
            au.bindListeners(aB, au, T);
            au.canvas = aB.canvas;
            if (ag && jsPlumb.ConnectorEditors != null && jsPlumb.ConnectorEditors[aB.type] && aB.isEditable()) {
                new jsPlumb.ConnectorEditors[aB.type]({connector: aB, connection: au, params: aD.editorParams || {}})
            } else {
                ag = false
            }
            if (!d) {
                au.repaint()
            }
        };
        this.getConnector = function() {
            return aB
        };
        this.source = U(aD.source);
        this.target = U(aD.target);
        if (aD.sourceEndpoint) {
            this.source = aD.sourceEndpoint.endpointWillMoveTo || aD.sourceEndpoint.getElement()
        }
        if (aD.targetEndpoint) {
            this.target = aD.targetEndpoint.getElement()
        }
        au.previousConnection = aD.previousConnection;
        this.sourceId = ai(this.source, "id");
        this.targetId = ai(this.target, "id");
        this.scope = aD.scope;
        this.endpoints = [];
        this.endpointStyles = [];
        var ah = function(a, b) {
            return(a) ? aq.makeAnchor(a, b, aq) : null
        }, ae = function(l, d, k, g, f, h, e) {
            var c;
            if (l) {
                au.endpoints[d] = l;
                l.addConnection(au)
            } else {
                if (!k.endpoints) {
                    k.endpoints = [null, null]
                }
                var m = k.endpoints[d] || k.endpoint || aq.Defaults.Endpoints[d] || jsPlumb.Defaults.Endpoints[d] || aq.Defaults.Endpoint || jsPlumb.Defaults.Endpoint;
                if (!k.endpointStyles) {
                    k.endpointStyles = [null, null]
                }
                if (!k.endpointHoverStyles) {
                    k.endpointHoverStyles = [null, null]
                }
                var o = k.endpointStyles[d] || k.endpointStyle || aq.Defaults.EndpointStyles[d] || jsPlumb.Defaults.EndpointStyles[d] || aq.Defaults.EndpointStyle || jsPlumb.Defaults.EndpointStyle;
                if (o.fillStyle == null && h != null) {
                    o.fillStyle = h.strokeStyle
                }
                if (o.outlineColor == null && h != null) {
                    o.outlineColor = h.outlineColor
                }
                if (o.outlineWidth == null && h != null) {
                    o.outlineWidth = h.outlineWidth
                }
                var a = k.endpointHoverStyles[d] || k.endpointHoverStyle || aq.Defaults.EndpointHoverStyles[d] || jsPlumb.Defaults.EndpointHoverStyles[d] || aq.Defaults.EndpointHoverStyle || jsPlumb.Defaults.EndpointHoverStyle;
                if (e != null) {
                    if (a == null) {
                        a = {}
                    }
                    if (a.fillStyle == null) {
                        a.fillStyle = e.strokeStyle
                    }
                }
                var b = k.anchors ? k.anchors[d] : k.anchor ? k.anchor : ah(aq.Defaults.Anchors[d], f) || ah(jsPlumb.Defaults.Anchors[d], f) || ah(aq.Defaults.Anchor, f) || ah(jsPlumb.Defaults.Anchor, f), n = k.uuids ? k.uuids[d] : null;
                c = aa({paintStyle: o, hoverPaintStyle: a, endpoint: m, connections: [au], uuid: n, anchor: b, source: g, scope: k.scope, container: k.container, reattach: k.reattach || aq.Defaults.ReattachConnections, detachable: k.detachable || aq.Defaults.ConnectionsDetachable});
                au.endpoints[d] = c;
                if (k.drawEndpoints === false) {
                    c.setVisible(false, true, true)
                }
            }
            return c
        };
        var ax = ae(aD.sourceEndpoint, 0, aD, au.source, au.sourceId, aD.paintStyle, aD.hoverPaintStyle);
        if (ax) {
            aw.addToList(aD.endpointsByElement, this.sourceId, ax)
        }
        var ay = ae(aD.targetEndpoint, 1, aD, au.target, au.targetId, aD.paintStyle, aD.hoverPaintStyle);
        if (ay) {
            aw.addToList(aD.endpointsByElement, this.targetId, ay)
        }
        if (!this.scope) {
            this.scope = this.endpoints[0].scope
        }
        au.endpointsToDeleteOnDetach = [null, null];
        if (aD.deleteEndpointsOnDetach) {
            if (aD.sourceIsNew) {
                au.endpointsToDeleteOnDetach[0] = au.endpoints[0]
            }
            if (aD.targetIsNew) {
                au.endpointsToDeleteOnDetach[1] = au.endpoints[1]
            }
        }
        if (aD.endpointsToDeleteOnDetach) {
            au.endpointsToDeleteOnDetach = aD.endpointsToDeleteOnDetach
        }
        au.setConnector(this.endpoints[0].connector || this.endpoints[1].connector || aD.connector || aq.Defaults.Connector || jsPlumb.Defaults.Connector, true);
        if (aD.path) {
            aB.setPath(aD.path)
        }
        this.setPaintStyle(this.endpoints[0].connectorStyle || this.endpoints[1].connectorStyle || aD.paintStyle || aq.Defaults.PaintStyle || jsPlumb.Defaults.PaintStyle, true);
        this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle || this.endpoints[1].connectorHoverStyle || aD.hoverPaintStyle || aq.Defaults.HoverPaintStyle || jsPlumb.Defaults.HoverPaintStyle, true);
        this.paintStyleInUse = this.getPaintStyle();
        var al = aq.getSuspendedAt();
        aq.updateOffset({elId: this.sourceId, timestamp: al});
        aq.updateOffset({elId: this.targetId, timestamp: al});
        if (!aq.isSuspendDrawing()) {
            var X = aq.getCachedData(this.sourceId), aA = X.o, ak = X.s, ap = aq.getCachedData(this.targetId), ar = ap.o, ac = ap.s, S = al || aq.timestamp(), av = this.endpoints[0].anchor.compute({xy: [aA.left, aA.top], wh: ak, element: this.endpoints[0], elementId: this.endpoints[0].elementId, txy: [ar.left, ar.top], twh: ac, tElement: this.endpoints[1], timestamp: S});
            this.endpoints[0].paint({anchorLoc: av, timestamp: S});
            av = this.endpoints[1].anchor.compute({xy: [ar.left, ar.top], wh: ac, element: this.endpoints[1], elementId: this.endpoints[1].elementId, txy: [aA.left, aA.top], twh: ak, tElement: this.endpoints[0], timestamp: S});
            this.endpoints[1].paint({anchorLoc: av, timestamp: S})
        }
        var ao = aq.Defaults.ConnectionsDetachable;
        if (aD.detachable === false) {
            ao = false
        }
        if (au.endpoints[0].connectionsDetachable === false) {
            ao = false
        }
        if (au.endpoints[1].connectionsDetachable === false) {
            ao = false
        }
        this.isDetachable = function() {
            return ao === true
        };
        this.setDetachable = function(a) {
            ao = a === true
        };
        var W = aD.reattach || au.endpoints[0].reattachConnections || au.endpoints[1].reattachConnections || aq.Defaults.ReattachConnections;
        this.isReattach = function() {
            return W === true
        };
        this.setReattach = function(a) {
            W = a === true
        };
        var aC = aD.cost || au.endpoints[0].getConnectionCost();
        au.getCost = function() {
            return aC
        };
        au.setCost = function(a) {
            aC = a
        };
        var am = aD.directed;
        if (aD.directed == null) {
            am = au.endpoints[0].areConnectionsDirected()
        }
        au.isDirected = function() {
            return am === true
        };
        var ab = jsPlumb.extend({}, this.endpoints[0].getParameters());
        jsPlumb.extend(ab, this.endpoints[1].getParameters());
        jsPlumb.extend(ab, au.getParameters());
        au.setParameters(ab);
        this.getAttachedElements = function() {
            return au.endpoints
        };
        this.moveParent = function(a) {
            var b = jsPlumb.CurrentLibrary, c = b.getParent(aB.canvas);
            if (aB.bgCanvas) {
                b.removeElement(aB.bgCanvas);
                b.appendElement(aB.bgCanvas, a)
            }
            b.removeElement(aB.canvas);
            b.appendElement(aB.canvas, a);
            for (var d = 0; d < au.overlays.length; d++) {
                if (au.overlays[d].isAppendedAtTopLevel) {
                    b.removeElement(au.overlays[d].canvas);
                    b.appendElement(au.overlays[d].canvas, a);
                    if (au.overlays[d].reattachListeners) {
                        au.overlays[d].reattachListeners(aB)
                    }
                }
            }
            if (aB.reattachListeners) {
                aB.reattachListeners()
            }
        };
        var aj = null;
        this.paint = function(o) {
            if (an) {
                o = o || {};
                var y = o.elId, x = o.ui, c = o.recalc, g = o.timestamp, w = false, p = w ? this.sourceId : this.targetId, d = w ? this.targetId : this.sourceId, f = w ? 0 : 1, m = w ? 1 : 0;
                if (g == null || g != aj) {
                    var l = aq.updateOffset({elId: y, offset: x, recalc: c, timestamp: g}).o, b = aq.updateOffset({elId: p, timestamp: g}).o, u = this.endpoints[m], h = this.endpoints[f];
                    if (o.clearEdits) {
                        u.anchor.clearUserDefinedLocation();
                        h.anchor.clearUserDefinedLocation();
                        aB.setEdited(false)
                    }
                    var e = u.anchor.getCurrentLocation(u), q = h.anchor.getCurrentLocation(h);
                    aB.resetBounds();
                    aB.compute({sourcePos: e, targetPos: q, sourceEndpoint: this.endpoints[m], targetEndpoint: this.endpoints[f], lineWidth: au.paintStyleInUse.lineWidth, sourceInfo: l, targetInfo: b, clearEdits: o.clearEdits === true});
                    var a = {minX: Infinity, minY: Infinity, maxX: -Infinity, maxY: -Infinity};
                    for (var r = 0; r < au.overlays.length; r++) {
                        var v = au.overlays[r];
                        if (v.isVisible()) {
                            au.overlayPlacements[r] = v.draw(aB, au.paintStyleInUse);
                            a.minX = Math.min(a.minX, au.overlayPlacements[r].minX);
                            a.maxX = Math.max(a.maxX, au.overlayPlacements[r].maxX);
                            a.minY = Math.min(a.minY, au.overlayPlacements[r].minY);
                            a.maxY = Math.max(a.maxY, au.overlayPlacements[r].maxY)
                        }
                    }
                    var k = parseFloat(au.paintStyleInUse.lineWidth || 1) / 2, n = parseFloat(au.paintStyleInUse.lineWidth || 0), s = {xmin: Math.min(aB.bounds.minX - (k + n), a.minX), ymin: Math.min(aB.bounds.minY - (k + n), a.minY), xmax: Math.max(aB.bounds.maxX + (k + n), a.maxX), ymax: Math.max(aB.bounds.maxY + (k + n), a.maxY)};
                    aB.paint(au.paintStyleInUse, null, s);
                    for (var r = 0; r < au.overlays.length; r++) {
                        var v = au.overlays[r];
                        if (v.isVisible()) {
                            v.paint(au.overlayPlacements[r], s)
                        }
                    }
                }
                aj = g
            }
        };
        this.repaint = function(a) {
            a = a || {};
            var b = !(a.recalc === false);
            this.paint({elId: this.sourceId, recalc: b, timestamp: a.timestamp, clearEdits: a.clearEdits})
        };
        var R = aD.type || au.endpoints[0].connectionType || au.endpoints[1].connectionType;
        if (R) {
            au.addType(R, aD.data, aq.isSuspendDrawing())
        }
    }
})();
(function() {
    jsPlumb.DOMElementComponent = function(a) {
        jsPlumb.jsPlumbUIComponent.apply(this, arguments);
        this.mousemove = this.dblclick = this.click = this.mousedown = this.mouseup = function(b) {
        }
    };
    jsPlumb.Segments = {AbstractSegment: function(a) {
            this.params = a;
            this.findClosestPointOnPath = function(c, b) {
                return{d: Infinity, x: null, y: null, l: null}
            };
            this.getBounds = function() {
                return{minX: Math.min(a.x1, a.x2), minY: Math.min(a.y1, a.y2), maxX: Math.max(a.x1, a.x2), maxY: Math.max(a.y1, a.y2)}
            }
        }, Straight: function(s) {
            var a = this, c = jsPlumb.Segments.AbstractSegment.apply(this, arguments), v, u, b, w, x, d, m, y = function() {
                v = Math.sqrt(Math.pow(x - w, 2) + Math.pow(m - d, 2));
                u = jsPlumbUtil.gradient({x: w, y: d}, {x: x, y: m});
                b = -1 / u
            };
            this.type = "Straight";
            a.getLength = function() {
                return v
            };
            a.getGradient = function() {
                return u
            };
            this.getCoordinates = function() {
                return{x1: w, y1: d, x2: x, y2: m}
            };
            this.setCoordinates = function(k) {
                w = k.x1;
                d = k.y1;
                x = k.x2;
                m = k.y2;
                y()
            };
            this.setCoordinates({x1: s.x1, y1: s.y1, x2: s.x2, y2: s.y2});
            this.getBounds = function() {
                return{minX: Math.min(w, x), minY: Math.min(d, m), maxX: Math.max(w, x), maxY: Math.max(d, m)}
            };
            this.pointOnPath = function(n, l) {
                if (n == 0 && !l) {
                    return{x: w, y: d}
                } else {
                    if (n == 1 && !l) {
                        return{x: x, y: m}
                    } else {
                        var k = l ? n > 0 ? n : v + n : n * v;
                        return jsPlumbUtil.pointOnLine({x: w, y: d}, {x: x, y: m}, k)
                    }
                }
            };
            this.gradientAtPoint = function(k) {
                return u
            };
            this.pointAlongPathFrom = function(k, l, n) {
                var o = a.pointOnPath(k, n), p = k == 1 ? {x: w + ((x - w) * 10), y: d + ((d - m) * 10)} : l <= 0 ? {x: w, y: d} : {x: x, y: m};
                if (l <= 0 && Math.abs(l) > 1) {
                    l *= -1
                }
                return jsPlumbUtil.pointOnLine(o, p, l)
            };
            this.findClosestPointOnPath = function(q, r) {
                if (u == 0) {
                    return{x: q, y: d, d: Math.abs(r - d)}
                } else {
                    if (u == Infinity || u == -Infinity) {
                        return{x: w, y: r, d: Math.abs(q - 1)}
                    } else {
                        var l = d - (u * w), p = r - (b * q), o = (p - l) / (u - b), D = (u * o) + l, k = jsPlumbUtil.lineLength([q, r], [o, D]), n = jsPlumbUtil.lineLength([o, D], [w, d]);
                        return{d: k, x: o, y: D, l: n / v}
                    }
                }
            }
        }, Arc: function(w) {
            var a = this, b = jsPlumb.Segments.AbstractSegment.apply(this, arguments), u = function(k, l) {
                return jsPlumbUtil.theta([w.cx, w.cy], [k, l])
            }, B = function(m) {
                if (a.anticlockwise) {
                    var n = a.startAngle < a.endAngle ? a.startAngle + x : a.startAngle, k = Math.abs(n - a.endAngle);
                    return n - (k * m)
                } else {
                    var l = a.endAngle < a.startAngle ? a.endAngle + x : a.endAngle, k = Math.abs(l - a.startAngle);
                    return a.startAngle + (k * m)
                }
            }, x = 2 * Math.PI;
            this.radius = w.r;
            this.anticlockwise = w.ac;
            this.type = "Arc";
            if (w.startAngle && w.endAngle) {
                this.startAngle = w.startAngle;
                this.endAngle = w.endAngle;
                this.x1 = w.cx + (a.radius * Math.cos(w.startAngle));
                this.y1 = w.cy + (a.radius * Math.sin(w.startAngle));
                this.x2 = w.cx + (a.radius * Math.cos(w.endAngle));
                this.y2 = w.cy + (a.radius * Math.sin(w.endAngle))
            } else {
                this.startAngle = u(w.x1, w.y1);
                this.endAngle = u(w.x2, w.y2);
                this.x1 = w.x1;
                this.y1 = w.y1;
                this.x2 = w.x2;
                this.y2 = w.y2
            }
            if (this.endAngle < 0) {
                this.endAngle += x
            }
            if (this.startAngle < 0) {
                this.startAngle += x
            }
            this.segment = jsPlumbUtil.segment([this.x1, this.y1], [this.x2, this.y2]);
            var s = a.endAngle < a.startAngle ? a.endAngle + x : a.endAngle;
            a.sweep = Math.abs(s - a.startAngle);
            if (a.anticlockwise) {
                a.sweep = x - a.sweep
            }
            var c = 2 * Math.PI * a.radius, A = a.sweep / x, y = c * A;
            this.getLength = function() {
                return y
            };
            this.getBounds = function() {
                return{minX: w.cx - w.r, maxX: w.cx + w.r, minY: w.cy - w.r, maxY: w.cy + w.r}
            };
            var v = 1e-10, d = function(k) {
                var l = Math.floor(k), m = Math.ceil(k);
                if (k - l < v) {
                    return l
                } else {
                    if (m - k < v) {
                        return m
                    }
                }
                return k
            };
            this.pointOnPath = function(o, k) {
                if (o == 0) {
                    return{x: a.x1, y: a.y1, theta: a.startAngle}
                } else {
                    if (o == 1) {
                        return{x: a.x2, y: a.y2, theta: a.endAngle}
                    }
                }
                if (k) {
                    o = o / y
                }
                var l = B(o), m = w.cx + (w.r * Math.cos(l)), n = w.cy + (w.r * Math.sin(l));
                return{x: d(m), y: d(n), theta: l}
            };
            this.gradientAtPoint = function(m, k) {
                var l = a.pointOnPath(m, k);
                var n = jsPlumbUtil.normal([w.cx, w.cy], [l.x, l.y]);
                if (!a.anticlockwise && (n == Infinity || n == -Infinity)) {
                    n *= -1
                }
                return n
            };
            this.pointAlongPathFrom = function(k, D, l) {
                var q = a.pointOnPath(k, l), r = D / c * 2 * Math.PI, p = a.anticlockwise ? -1 : 1, m = q.theta + (p * r), n = w.cx + (a.radius * Math.cos(m)), o = w.cy + (a.radius * Math.sin(m));
                return{x: n, y: o}
            }
        }, Bezier: function(a) {
            var n = this, d = jsPlumb.Segments.AbstractSegment.apply(this, arguments), b = [{x: a.x1, y: a.y1}, {x: a.cp1x, y: a.cp1y}, {x: a.cp2x, y: a.cp2y}, {x: a.x2, y: a.y2}], m = {minX: Math.min(a.x1, a.x2, a.cp1x, a.cp2x), minY: Math.min(a.y1, a.y2, a.cp1y, a.cp2y), maxX: Math.max(a.x1, a.x2, a.cp1x, a.cp2x), maxY: Math.max(a.y1, a.y2, a.cp1y, a.cp2y)};
            this.type = "Bezier";
            var c = function(p, k, l) {
                if (l) {
                    k = jsBezier.locationAlongCurveFrom(p, k > 0 ? 0 : 1, k)
                }
                return k
            };
            this.pointOnPath = function(k, l) {
                k = c(b, k, l);
                return jsBezier.pointOnCurve(b, k)
            };
            this.gradientAtPoint = function(k, l) {
                k = c(b, k, l);
                return jsBezier.gradientAtPoint(b, k)
            };
            this.pointAlongPathFrom = function(k, l, p) {
                k = c(b, k, p);
                return jsBezier.pointAlongCurveFrom(b, k, l)
            };
            this.getLength = function() {
                return jsBezier.getLength(b)
            };
            this.getBounds = function() {
                return m
            }
        }};
    var g = function() {
        var a = this;
        a.resetBounds = function() {
            a.bounds = {minX: Infinity, minY: Infinity, maxX: -Infinity, maxY: -Infinity}
        };
        a.resetBounds()
    };
    jsPlumb.Connectors.AbstractConnector = function(I) {
        g.apply(this, arguments);
        var c = this, L = [], U = false, K = 0, S = [], E = [], V = I.stub || 0, P = jsPlumbUtil.isArray(V) ? V[0] : V, G = jsPlumbUtil.isArray(V) ? V[1] : V, b = I.gap || 0, O = jsPlumbUtil.isArray(b) ? b[0] : b, M = jsPlumbUtil.isArray(b) ? b[1] : b, N = null, R = false, Q = null;
        this.isEditable = function() {
            return false
        };
        this.setEdited = function(k) {
            R = k
        };
        this.getPath = function() {
        };
        this.setPath = function(k) {
        };
        this.findSegmentForPoint = function(o, k) {
            var n = {d: Infinity, s: null, x: null, y: null, l: null};
            for (var m = 0; m < L.length; m++) {
                var l = L[m].findClosestPointOnPath(o, k);
                if (l.d < n.d) {
                    n.d = l.d;
                    n.l = l.l;
                    n.x = l.x;
                    n.y = l.y;
                    n.s = L[m]
                }
            }
            return n
        };
        var J = function() {
            var k = 0;
            for (var l = 0; l < L.length; l++) {
                var m = L[l].getLength();
                E[l] = m / K;
                S[l] = [k, (k += (m / K))]
            }
        }, T = function(m, k) {
            if (k) {
                m = m > 0 ? m / K : (K + m) / K
            }
            var o = S.length - 1, n = 1;
            for (var l = 0; l < S.length; l++) {
                if (S[l][1] >= m) {
                    o = l;
                    n = m == 1 ? 1 : m == 0 ? 0 : (m - S[l][0]) / E[l];
                    break
                }
            }
            return{segment: L[o], proportion: n, index: o}
        }, a = function(l, k) {
            var m = new jsPlumb.Segments[l](k);
            L.push(m);
            K += m.getLength();
            c.updateBounds(m)
        }, F = function() {
            K = 0;
            L.splice(0, L.length);
            S.splice(0, S.length);
            E.splice(0, E.length)
        };
        this.setSegments = function(k) {
            N = [];
            K = 0;
            for (var l = 0; l < k.length; l++) {
                N.push(k[l]);
                K += k[l].getLength()
            }
        };
        var H = function(m) {
            c.lineWidth = m.lineWidth;
            var X = jsPlumbUtil.segment(m.sourcePos, m.targetPos), q = m.targetPos[0] < m.sourcePos[0], s = m.targetPos[1] < m.sourcePos[1], B = m.lineWidth || 1, n = m.sourceEndpoint.anchor.orientation || m.sourceEndpoint.anchor.getOrientation(m.sourceEndpoint), D = m.targetEndpoint.anchor.orientation || m.targetEndpoint.anchor.getOrientation(m.targetEndpoint), x = q ? m.targetPos[0] : m.sourcePos[0], y = s ? m.targetPos[1] : m.sourcePos[1], v = Math.abs(m.targetPos[0] - m.sourcePos[0]), o = Math.abs(m.targetPos[1] - m.sourcePos[1]);
            if (n[0] == 0 && n[1] == 0 || D[0] == 0 && D[1] == 0) {
                var A = v > o ? 0 : 1, C = [1, 0][A];
                n = [];
                D = [];
                n[A] = m.sourcePos[A] > m.targetPos[A] ? -1 : 1;
                D[A] = m.sourcePos[A] > m.targetPos[A] ? 1 : -1;
                n[C] = 0;
                D[C] = 0
            }
            var r = q ? v + (O * n[0]) : O * n[0], u = s ? o + (O * n[1]) : O * n[1], k = q ? M * D[0] : v + (M * D[0]), l = s ? M * D[1] : o + (M * D[1]), p = ((n[0] * D[0]) + (n[1] * D[1]));
            var w = {sx: r, sy: u, tx: k, ty: l, lw: B, xSpan: Math.abs(k - r), ySpan: Math.abs(l - u), mx: (r + k) / 2, my: (u + l) / 2, so: n, to: D, x: x, y: y, w: v, h: o, segment: X, startStubX: r + (n[0] * P), startStubY: u + (n[1] * P), endStubX: k + (D[0] * G), endStubY: l + (D[1] * G), isXGreaterThanStubTimes2: Math.abs(r - k) > (P + G), isYGreaterThanStubTimes2: Math.abs(u - l) > (P + G), opposite: p == -1, perpendicular: p == 0, orthogonal: p == 1, sourceAxis: n[0] == 0 ? "y" : "x", points: [x, y, v, o, r, u, k, l]};
            w.anchorOrientation = w.opposite ? "opposite" : w.orthogonal ? "orthogonal" : "perpendicular";
            return w
        };
        this.getSegments = function() {
            return L
        };
        c.updateBounds = function(k) {
            var l = k.getBounds();
            c.bounds.minX = Math.min(c.bounds.minX, l.minX);
            c.bounds.maxX = Math.max(c.bounds.maxX, l.maxX);
            c.bounds.minY = Math.min(c.bounds.minY, l.minY);
            c.bounds.maxY = Math.max(c.bounds.maxY, l.maxY)
        };
        var d = function() {
            console.log("SEGMENTS:");
            for (var k = 0; k < L.length; k++) {
                console.log(L[k].type, L[k].getLength(), S[k])
            }
        };
        this.pointOnPath = function(l, k) {
            var m = T(l, k);
            return m.segment.pointOnPath(m.proportion, k)
        };
        this.gradientAtPoint = function(k) {
            var l = T(k, absolute);
            return l.segment.gradientAtPoint(l.proportion, absolute)
        };
        this.pointAlongPathFrom = function(m, k, l) {
            var n = T(m, l);
            return n.segment.pointAlongPathFrom(n.proportion, k, false)
        };
        this.compute = function(k) {
            if (!R) {
                Q = H(k)
            }
            F();
            this._compute(Q, k);
            c.x = Q.points[0];
            c.y = Q.points[1];
            c.w = Q.points[2];
            c.h = Q.points[3];
            c.segment = Q.segment;
            J()
        };
        return{addSegment: a, prepareCompute: H, sourceStub: P, targetStub: G, maxStub: Math.max(P, G), sourceGap: O, targetGap: M, maxGap: Math.max(O, M)}
    };
    jsPlumb.Connectors.Straight = function() {
        this.type = "Straight";
        var a = jsPlumb.Connectors.AbstractConnector.apply(this, arguments);
        this._compute = function(b, c) {
            a.addSegment("Straight", {x1: b.sx, y1: b.sy, x2: b.startStubX, y2: b.startStubY});
            a.addSegment("Straight", {x1: b.startStubX, y1: b.startStubY, x2: b.endStubX, y2: b.endStubY});
            a.addSegment("Straight", {x1: b.endStubX, y1: b.endStubY, x2: b.tx, y2: b.ty})
        }
    };
    jsPlumb.Connectors.Bezier = function(a) {
        a = a || {};
        var m = this, c = jsPlumb.Connectors.AbstractConnector.apply(this, arguments), b = a.stub || 50, n = a.curviness || 150, d = 10;
        this.type = "Bezier";
        this.getCurviness = function() {
            return n
        };
        this._findControlPoint = function(A, y, D, x, l) {
            var C = x.anchor.getOrientation(x), B = l.anchor.getOrientation(l), k = C[0] != B[0] || C[1] == B[1], p = [];
            if (!k) {
                if (C[0] == 0) {
                    p.push(y[0] < D[0] ? A[0] + d : A[0] - d)
                } else {
                    p.push(A[0] - (n * C[0]))
                }
                if (C[1] == 0) {
                    p.push(y[1] < D[1] ? A[1] + d : A[1] - d)
                } else {
                    p.push(A[1] + (n * B[1]))
                }
            } else {
                if (B[0] == 0) {
                    p.push(D[0] < y[0] ? A[0] + d : A[0] - d)
                } else {
                    p.push(A[0] + (n * B[0]))
                }
                if (B[1] == 0) {
                    p.push(D[1] < y[1] ? A[1] + d : A[1] - d)
                } else {
                    p.push(A[1] + (n * C[1]))
                }
            }
            return p
        };
        this._compute = function(k, B) {
            var l = B.sourcePos, F = B.targetPos, E = Math.abs(l[0] - F[0]), I = Math.abs(l[1] - F[1]), H = l[0] < F[0] ? E : 0, J = l[1] < F[1] ? I : 0, C = l[0] < F[0] ? 0 : E, D = l[1] < F[1] ? 0 : I, p = m._findControlPoint([H, J], l, F, B.sourceEndpoint, B.targetEndpoint), G = m._findControlPoint([C, D], F, l, B.targetEndpoint, B.sourceEndpoint);
            c.addSegment("Bezier", {x1: H, y1: J, x2: C, y2: D, cp1x: p[0], cp1y: p[1], cp2x: G[0], cp2y: G[1]})
        }
    };
    jsPlumb.Endpoints.AbstractEndpoint = function(a) {
        g.apply(this, arguments);
        var b = this;
        this.compute = function(d, p, c, n) {
            var o = b._compute.apply(b, arguments);
            b.x = o[0];
            b.y = o[1];
            b.w = o[2];
            b.h = o[3];
            b.bounds.minX = b.x;
            b.bounds.minY = b.y;
            b.bounds.maxX = b.x + b.w;
            b.bounds.maxY = b.y + b.h;
            return o
        };
        return{compute: b.compute, cssClass: a.cssClass}
    };
    jsPlumb.Endpoints.Dot = function(a) {
        this.type = "Dot";
        var c = this, b = jsPlumb.Endpoints.AbstractEndpoint.apply(this, arguments);
        a = a || {};
        this.radius = a.radius || 10;
        this.defaultOffset = 0.5 * this.radius;
        this.defaultInnerRadius = this.radius / 3;
        this._compute = function(d, B, A, x) {
            c.radius = A.radius || c.radius;
            var u = d[0] - c.radius, v = d[1] - c.radius, C = c.radius * 2, w = c.radius * 2;
            if (A.strokeStyle) {
                var y = A.lineWidth || 1;
                u -= y;
                v -= y;
                C += (y * 2);
                w += (y * 2)
            }
            return[u, v, C, w, c.radius]
        }
    };
    jsPlumb.Endpoints.Rectangle = function(a) {
        this.type = "Rectangle";
        var c = this, b = jsPlumb.Endpoints.AbstractEndpoint.apply(this, arguments);
        a = a || {};
        this.width = a.width || 20;
        this.height = a.height || 20;
        this._compute = function(x, r, v, y) {
            var d = v.width || c.width, s = v.height || c.height, u = x[0] - (d / 2), w = x[1] - (s / 2);
            return[u, w, d, s]
        }
    };
    var e = function(a) {
        jsPlumb.DOMElementComponent.apply(this, arguments);
        var c = this;
        var b = [];
        this.getDisplayElements = function() {
            return b
        };
        this.appendDisplayElement = function(d) {
            b.push(d)
        }
    };
    jsPlumb.Endpoints.Image = function(s) {
        this.type = "Image";
        e.apply(this, arguments);
        var a = this, b = jsPlumb.Endpoints.AbstractEndpoint.apply(this, arguments), u = false, v = false, w = s.width, x = s.height, d = null, y = s.endpoint;
        this.img = new Image();
        a.ready = false;
        this.img.onload = function() {
            a.ready = true;
            w = w || a.img.width;
            x = x || a.img.height;
            if (d) {
                d(a)
            }
        };
        y.setImage = function(m, k) {
            var l = m.constructor == String ? m : m.src;
            d = k;
            a.img.src = m;
            if (a.canvas != null) {
                a.canvas.setAttribute("src", m)
            }
        };
        y.setImage(s.src || s.url, s.onload);
        this._compute = function(l, n, k, m) {
            a.anchorPoint = l;
            if (a.ready) {
                return[l[0] - w / 2, l[1] - x / 2, w, x]
            } else {
                return[0, 0, 0, 0]
            }
        };
        a.canvas = document.createElement("img"), u = false;
        a.canvas.style.margin = 0;
        a.canvas.style.padding = 0;
        a.canvas.style.outline = 0;
        a.canvas.style.position = "absolute";
        var r = s.cssClass ? " " + s.cssClass : "";
        a.canvas.className = jsPlumb.endpointClass + r;
        if (w) {
            a.canvas.setAttribute("width", w)
        }
        if (x) {
            a.canvas.setAttribute("height", x)
        }
        jsPlumb.appendElement(a.canvas, s.parent);
        a.attachListeners(a.canvas, a);
        a.cleanup = function() {
            v = true
        };
        var c = function(l, m, n) {
            if (!v) {
                if (!u) {
                    a.canvas.setAttribute("src", a.img.src);
                    a.appendDisplayElement(a.canvas);
                    u = true
                }
                var o = a.anchorPoint[0] - (w / 2), k = a.anchorPoint[1] - (x / 2);
                jsPlumb.sizeCanvas(a.canvas, o, k, w, x)
            }
        };
        this.paint = function(k, l) {
            if (a.ready) {
                c(k, l)
            } else {
                window.setTimeout(function() {
                    a.paint(k, l)
                }, 200)
            }
        }
    };
    jsPlumb.Endpoints.Blank = function(a) {
        var c = this, b = jsPlumb.Endpoints.AbstractEndpoint.apply(this, arguments);
        this.type = "Blank";
        e.apply(this, arguments);
        this._compute = function(n, p, d, o) {
            return[n[0], n[1], 10, 0]
        };
        c.canvas = document.createElement("div");
        c.canvas.style.display = "block";
        c.canvas.style.width = "1px";
        c.canvas.style.height = "1px";
        c.canvas.style.background = "transparent";
        c.canvas.style.position = "absolute";
        c.canvas.className = c._jsPlumb.endpointClass;
        jsPlumb.appendElement(c.canvas, a.parent);
        this.paint = function(d, l) {
            jsPlumb.sizeCanvas(c.canvas, c.x, c.y, c.w, c.h)
        }
    };
    jsPlumb.Endpoints.Triangle = function(a) {
        this.type = "Triangle";
        var c = this, b = jsPlumb.Endpoints.AbstractEndpoint.apply(this, arguments);
        a = a || {};
        a.width = a.width || 55;
        a.height = a.height || 55;
        this.width = a.width;
        this.height = a.height;
        this._compute = function(x, r, v, y) {
            var d = v.width || c.width, s = v.height || c.height, u = x[0] - (d / 2), w = x[1] - (s / 2);
            return[u, w, d, s]
        }
    };
    var h = jsPlumb.Overlays.AbstractOverlay = function(a) {
        var b = true, c = this;
        this.isAppendedAtTopLevel = true;
        this.component = a.component;
        this.loc = a.location == null ? 0.5 : a.location;
        this.endpointLoc = a.endpointLocation == null ? [0.5, 0.5] : a.endpointLocation;
        this.setVisible = function(d) {
            b = d;
            c.component.repaint()
        };
        this.isVisible = function() {
            return b
        };
        this.hide = function() {
            c.setVisible(false)
        };
        this.show = function() {
            c.setVisible(true)
        };
        this.incrementLocation = function(d) {
            c.loc += d;
            c.component.repaint()
        };
        this.setLocation = function(d) {
            c.loc = d;
            c.component.repaint()
        };
        this.getLocation = function() {
            return c.loc
        }
    };
    jsPlumb.Overlays.Arrow = function(a) {
        this.type = "Arrow";
        h.apply(this, arguments);
        this.isAppendedAtTopLevel = false;
        a = a || {};
        var d = this, n = jsPlumbUtil;
        this.length = a.length || 20;
        this.width = a.width || 20;
        this.id = a.id;
        var b = (a.direction || 1) < 0 ? -1 : 1, c = a.paintStyle || {lineWidth: 1}, m = a.foldback || 0.623;
        this.computeMaxSize = function() {
            return d.width * 1.5
        };
        this.cleanup = function() {
        };
        this.draw = function(K, D) {
            var k, J, G, N, l;
            if (K.pointAlongPathFrom) {
                if (n.isString(d.loc) || d.loc > 1 || d.loc < 0) {
                    var F = parseInt(d.loc);
                    k = K.pointAlongPathFrom(F, b * d.length / 2, true), J = K.pointOnPath(F, true), G = n.pointOnLine(k, J, d.length)
                } else {
                    if (d.loc == 1) {
                        k = K.pointOnPath(d.loc);
                        J = K.pointAlongPathFrom(d.loc, -(d.length));
                        G = n.pointOnLine(k, J, d.length);
                        if (b == -1) {
                            var E = G;
                            G = k;
                            k = E
                        }
                    } else {
                        if (d.loc == 0) {
                            G = K.pointOnPath(d.loc);
                            J = K.pointAlongPathFrom(d.loc, d.length);
                            k = n.pointOnLine(G, J, d.length);
                            if (b == -1) {
                                var E = G;
                                G = k;
                                k = E
                            }
                        } else {
                            k = K.pointAlongPathFrom(d.loc, b * d.length / 2), J = K.pointOnPath(d.loc), G = n.pointOnLine(k, J, d.length)
                        }
                    }
                }
                N = n.perpendicularLineTo(k, G, d.width);
                l = n.pointOnLine(k, G, m * d.length);
                var M = {hxy: k, tail: N, cxy: l}, L = c.strokeStyle || D.strokeStyle, I = c.fillStyle || D.strokeStyle, C = c.lineWidth || D.lineWidth, H = {component: K, d: M, lineWidth: C, strokeStyle: L, fillStyle: I, minX: Math.min(k.x, N[0].x, N[1].x), maxX: Math.max(k.x, N[0].x, N[1].x), minY: Math.min(k.y, N[0].y, N[1].y), maxY: Math.max(k.y, N[0].y, N[1].y)};
                return H
            } else {
                return{component: K, minX: 0, maxX: 0, minY: 0, maxY: 0}
            }
        }
    };
    jsPlumb.Overlays.PlainArrow = function(a) {
        a = a || {};
        var b = jsPlumb.extend(a, {foldback: 1});
        jsPlumb.Overlays.Arrow.call(this, b);
        this.type = "PlainArrow"
    };
    jsPlumb.Overlays.Diamond = function(a) {
        a = a || {};
        var c = a.length || 40, b = jsPlumb.extend(a, {length: c / 2, foldback: 2});
        jsPlumb.Overlays.Arrow.call(this, b);
        this.type = "Diamond"
    };
    var f = function(s) {
        jsPlumb.DOMElementComponent.apply(this, arguments);
        h.apply(this, arguments);
        var b = this, p = false, q = jsPlumb.CurrentLibrary;
        s = s || {};
        this.id = s.id;
        var u;
        var r = function() {
            u = s.create(s.component);
            u = q.getDOMElement(u);
            u.style.position = "absolute";
            var k = s._jsPlumb.overlayClass + " " + (b.cssClass ? b.cssClass : s.cssClass ? s.cssClass : "");
            u.className = k;
            s._jsPlumb.appendElement(u, s.component.parent);
            s._jsPlumb.getId(u);
            b.attachListeners(u, b);
            b.canvas = u
        };
        this.getElement = function() {
            if (u == null) {
                r()
            }
            return u
        };
        this.getDimensions = function() {
            return q.getSize(q.getElementObject(b.getElement()))
        };
        var d = null, c = function(k) {
            if (d == null) {
                d = b.getDimensions()
            }
            return d
        };
        this.clearCachedDimensions = function() {
            d = null
        };
        this.computeMaxSize = function() {
            var k = c();
            return Math.max(k[0], k[1])
        };
        var a = b.setVisible;
        b.setVisible = function(k) {
            a(k);
            u.style.display = k ? "block" : "none"
        };
        this.cleanup = function() {
            if (u != null) {
                q.removeElement(u)
            }
        };
        this.paint = function(k, l) {
            if (!p) {
                b.getElement();
                k.component.appendDisplayElement(u);
                b.attachListeners(u, k.component);
                p = true
            }
            u.style.left = (k.component.x + k.d.minx) + "px";
            u.style.top = (k.component.y + k.d.miny) + "px"
        };
        this.draw = function(D, n) {
            var m = c();
            if (m != null && m.length == 2) {
                var l = {x: 0, y: 0};
                if (D.pointOnPath) {
                    var k = b.loc, C = false;
                    if (jsPlumbUtil.isString(b.loc) || b.loc < 0 || b.loc > 1) {
                        k = parseInt(b.loc);
                        C = true
                    }
                    l = D.pointOnPath(k, C)
                } else {
                    var A = b.loc.constructor == Array ? b.loc : b.endpointLoc;
                    l = {x: A[0] * D.w, y: A[1] * D.h}
                }
                var o = l.x - (m[0] / 2), B = l.y - (m[1] / 2);
                return{component: D, d: {minx: o, miny: B, td: m, cxy: l}, minX: o, maxX: o + m[0], minY: B, maxY: B + m[1]}
            } else {
                return{minX: 0, maxX: 0, minY: 0, maxY: 0}
            }
        };
        this.reattachListeners = function(k) {
            if (u) {
                b.reattachListenersForElement(u, b, k)
            }
        }
    };
    jsPlumb.Overlays.Custom = function(a) {
        this.type = "Custom";
        f.apply(this, arguments)
    };
    jsPlumb.Overlays.GuideLines = function() {
        var a = this;
        a.length = 50;
        a.lineWidth = 5;
        this.type = "GuideLines";
        h.apply(this, arguments);
        jsPlumb.jsPlumbUIComponent.apply(this, arguments);
        this.draw = function(p, r) {
            var b = p.pointAlongPathFrom(a.loc, a.length / 2), c = p.pointOnPath(a.loc), d = jsPlumbUtil.pointOnLine(b, c, a.length), o = jsPlumbUtil.perpendicularLineTo(b, d, 40), q = jsPlumbUtil.perpendicularLineTo(d, b, 20);
            return{connector: p, head: b, tail: d, headLine: q, tailLine: o, minX: Math.min(b.x, d.x, q[0].x, q[1].x), minY: Math.min(b.y, d.y, q[0].y, q[1].y), maxX: Math.max(b.x, d.x, q[0].x, q[1].x), maxY: Math.max(b.y, d.y, q[0].y, q[1].y)}
        };
        this.cleanup = function() {
        }
    };
    jsPlumb.Overlays.Label = function(b) {
        var n = this;
        this.labelStyle = b.labelStyle || jsPlumb.Defaults.LabelStyle;
        this.cssClass = this.labelStyle != null ? this.labelStyle.cssClass : null;
        b.create = function() {
            return document.createElement("div")
        };
        jsPlumb.Overlays.Custom.apply(this, arguments);
        this.type = "Label";
        var d = b.label || "", n = this, c = null;
        this.setLabel = function(k) {
            d = k;
            c = null;
            n.clearCachedDimensions();
            m();
            n.component.repaint()
        };
        var m = function() {
            if (typeof d == "function") {
                var k = d(n);
                n.getElement().innerHTML = k.replace(/\r\n/g, "<br/>")
            } else {
                if (c == null) {
                    c = d;
                    n.getElement().innerHTML = c.replace(/\r\n/g, "<br/>")
                }
            }
        };
        this.getLabel = function() {
            return d
        };
        var a = this.getDimensions;
        this.getDimensions = function() {
            m();
            return a()
        }
    }
})();
(function() {
    var f = function(c, a, h, b) {
        this.m = (b - a) / (h - c);
        this.b = -1 * ((this.m * c) - a);
        this.rectIntersect = function(g, w, F, x) {
            var y = [];
            var C = (w - this.b) / this.m;
            if (C >= g && C <= (g + F)) {
                y.push([C, (this.m * C) + this.b])
            }
            var E = (this.m * (g + F)) + this.b;
            if (E >= w && E <= (w + x)) {
                y.push([(E - this.b) / this.m, E])
            }
            var C = ((w + x) - this.b) / this.m;
            if (C >= g && C <= (g + F)) {
                y.push([C, (this.m * C) + this.b])
            }
            var E = (this.m * g) + this.b;
            if (E >= w && E <= (w + x)) {
                y.push([(E - this.b) / this.m, E])
            }
            if (y.length == 2) {
                var A = (y[0][0] + y[1][0]) / 2, B = (y[0][1] + y[1][1]) / 2;
                y.push([A, B]);
                var D = A <= g + (F / 2) ? -1 : 1, G = B <= w + (x / 2) ? -1 : 1;
                y.push([D, G]);
                return y
            }
            return null
        }
    }, e = function(c, a, h, b) {
        if (c <= h && b <= a) {
            return 1
        } else {
            if (c <= h && a <= b) {
                return 2
            } else {
                if (h <= c && b >= a) {
                    return 3
                }
            }
        }
        return 4
    }, d = function(q, r, o, s, p, a, b, u, c) {
        if (u <= c) {
            return[q, r]
        }
        if (o === 1) {
            if (s[3] <= 0 && p[3] >= 1) {
                return[q + (s[2] < 0.5 ? -1 * a : a), r]
            } else {
                if (s[2] >= 1 && p[2] <= 0) {
                    return[q, r + (s[3] < 0.5 ? -1 * b : b)]
                } else {
                    return[q + (-1 * a), r + (-1 * b)]
                }
            }
        } else {
            if (o === 2) {
                if (s[3] >= 1 && p[3] <= 0) {
                    return[q + (s[2] < 0.5 ? -1 * a : a), r]
                } else {
                    if (s[2] >= 1 && p[2] <= 0) {
                        return[q, r + (s[3] < 0.5 ? -1 * b : b)]
                    } else {
                        return[q + (1 * a), r + (-1 * b)]
                    }
                }
            } else {
                if (o === 3) {
                    if (s[3] >= 1 && p[3] <= 0) {
                        return[q + (s[2] < 0.5 ? -1 * a : a), r]
                    } else {
                        if (s[2] <= 0 && p[2] >= 1) {
                            return[q, r + (s[3] < 0.5 ? -1 * b : b)]
                        } else {
                            return[q + (-1 * a), r + (-1 * b)]
                        }
                    }
                } else {
                    if (o === 4) {
                        if (s[3] <= 0 && p[3] >= 1) {
                            return[q + (s[2] < 0.5 ? -1 * a : a), r]
                        } else {
                            if (s[2] <= 0 && p[2] >= 1) {
                                return[q, r + (s[3] < 0.5 ? -1 * b : b)]
                            } else {
                                return[q + (1 * a), r + (-1 * b)]
                            }
                        }
                    }
                }
            }
        }
    };
    jsPlumb.Connectors.StateMachine = function(q) {
        q = q || {};
        this.type = "StateMachine";
        var a = this, c = jsPlumb.Connectors.AbstractConnector.apply(this, arguments), u = q.curviness || 10, p = q.margin || 5, o = q.proximityLimit || 80, s = q.orientation && q.orientation === "clockwise", r = q.loopbackRadius || 25, b = q.showLoopback !== false;
        this._compute = function(ae, g) {
            var y = Math.abs(g.sourcePos[0] - g.targetPos[0]), k = Math.abs(g.sourcePos[1] - g.targetPos[1]), T = Math.min(g.sourcePos[0], g.targetPos[0]), X = Math.min(g.sourcePos[1], g.targetPos[1]);
            if (!b || (g.sourceEndpoint.elementId !== g.targetEndpoint.elementId)) {
                var af = g.sourcePos[0] < g.targetPos[0] ? 0 : y, Z = g.sourcePos[1] < g.targetPos[1] ? 0 : k, n = g.sourcePos[0] < g.targetPos[0] ? y : 0, x = g.sourcePos[1] < g.targetPos[1] ? k : 0;
                if (g.sourcePos[2] === 0) {
                    af -= p
                }
                if (g.sourcePos[2] === 1) {
                    af += p
                }
                if (g.sourcePos[3] === 0) {
                    Z -= p
                }
                if (g.sourcePos[3] === 1) {
                    Z += p
                }
                if (g.targetPos[2] === 0) {
                    n -= p
                }
                if (g.targetPos[2] === 1) {
                    n += p
                }
                if (g.targetPos[3] === 0) {
                    x -= p
                }
                if (g.targetPos[3] === 1) {
                    x += p
                }
                var V = (af + n) / 2, aa = (Z + x) / 2, ah = (-1 * V) / aa, m = Math.atan(ah), S = (ah == Infinity || ah == -Infinity) ? 0 : Math.abs(u / 2 * Math.sin(m)), w = (ah == Infinity || ah == -Infinity) ? 0 : Math.abs(u / 2 * Math.cos(m)), ag = e(af, Z, n, x), ac = Math.sqrt(Math.pow(n - af, 2) + Math.pow(x - Z, 2)), Y = d(V, aa, ag, g.sourcePos, g.targetPos, u, u, ac, o);
                c.addSegment("Bezier", {x1: n, y1: x, x2: af, y2: Z, cp1x: Y[0], cp1y: Y[1], cp2x: Y[0], cp2y: Y[1]})
            } else {
                var h = g.sourcePos[0], l = g.sourcePos[0], U = g.sourcePos[1] - p, ab = g.sourcePos[1] - p, W = h, ad = U - r;
                y = 2 * r, k = 2 * r, T = W - r, X = ad - r;
                ae.points[0] = T;
                ae.points[1] = X;
                ae.points[2] = y;
                ae.points[3] = k;
                c.addSegment("Arc", {x1: (h - T) + 4, y1: U - X, startAngle: 0, endAngle: 2 * Math.PI, r: r, ac: !s, x2: (h - T) - 4, y2: U - X, cx: W - T, cy: ad - X})
            }
        }
    }
})();
(function() {
    jsPlumb.Connectors.Flowchart = function(params) {
        this.type = "Flowchart";
        params = params || {};
        params.stub = params.stub || 30;
        var self = this, _super = jsPlumb.Connectors.AbstractConnector.apply(this, arguments), midpoint = params.midpoint || 0.5, points = [], segments = [], grid = params.grid, alwaysRespectStubs = params.alwaysRespectStubs, userSuppliedSegments = null, lastx = null, lasty = null, lastOrientation, cornerRadius = params.cornerRadius != null ? params.cornerRadius : 0, sgn = function(n) {
            return n < 0 ? -1 : n == 0 ? 0 : 1
        }, addSegment = function(segments, x, y, paintInfo) {
            if (lastx == x && lasty == y) {
                return
            }
            var lx = lastx == null ? paintInfo.sx : lastx, ly = lasty == null ? paintInfo.sy : lasty, o = lx == x ? "v" : "h", sgnx = sgn(x - lx), sgny = sgn(y - ly);
            lastx = x;
            lasty = y;
            segments.push([lx, ly, x, y, o, sgnx, sgny])
        }, segLength = function(s) {
            return Math.sqrt(Math.pow(s[0] - s[2], 2) + Math.pow(s[1] - s[3], 2))
        }, _cloneArray = function(a) {
            var _a = [];
            _a.push.apply(_a, a);
            return _a
        }, updateMinMax = function(a1) {
            self.bounds.minX = Math.min(self.bounds.minX, a1[2]);
            self.bounds.maxX = Math.max(self.bounds.maxX, a1[2]);
            self.bounds.minY = Math.min(self.bounds.minY, a1[3]);
            self.bounds.maxY = Math.max(self.bounds.maxY, a1[3])
        }, writeSegments = function(segments, paintInfo) {
            var current, next;
            for (var i = 0; i < segments.length - 1; i++) {
                current = current || _cloneArray(segments[i]);
                next = _cloneArray(segments[i + 1]);
                if (cornerRadius > 0 && current[4] != next[4]) {
                    var radiusToUse = Math.min(cornerRadius, segLength(current), segLength(next));
                    current[2] -= current[5] * radiusToUse;
                    current[3] -= current[6] * radiusToUse;
                    next[0] += next[5] * radiusToUse;
                    next[1] += next[6] * radiusToUse;
                    var ac = (current[6] == next[5] && next[5] == 1) || ((current[6] == next[5] && next[5] == 0) && current[5] != next[6]) || (current[6] == next[5] && next[5] == -1), sgny = next[1] > current[3] ? 1 : -1, sgnx = next[0] > current[2] ? 1 : -1, sgnEqual = sgny == sgnx, cx = (sgnEqual && ac || (!sgnEqual && !ac)) ? next[0] : current[2], cy = (sgnEqual && ac || (!sgnEqual && !ac)) ? current[3] : next[1];
                    _super.addSegment("Straight", {x1: current[0], y1: current[1], x2: current[2], y2: current[3]});
                    _super.addSegment("Arc", {r: radiusToUse, x1: current[2], y1: current[3], x2: next[0], y2: next[1], cx: cx, cy: cy, ac: ac})
                } else {
                    var dx = (current[2] == current[0]) ? 0 : (current[2] > current[0]) ? (paintInfo.lw / 2) : -(paintInfo.lw / 2), dy = (current[3] == current[1]) ? 0 : (current[3] > current[1]) ? (paintInfo.lw / 2) : -(paintInfo.lw / 2);
                    _super.addSegment("Straight", {x1: current[0] - dx, y1: current[1] - dy, x2: current[2] + dx, y2: current[3] + dy})
                }
                current = next
            }
            _super.addSegment("Straight", {x1: next[0], y1: next[1], x2: next[2], y2: next[3]})
        };
        this.setSegments = function(s) {
            userSuppliedSegments = s
        };
        this.isEditable = function() {
            return true
        };
        this.getOriginalSegments = function() {
            return userSuppliedSegments || segments
        };
        this._compute = function(paintInfo, params) {
            if (params.clearEdits) {
                userSuppliedSegments = null
            }
            if (userSuppliedSegments != null) {
                writeSegments(userSuppliedSegments, paintInfo);
                return
            }
            segments = [];
            lastx = null;
            lasty = null;
            lastOrientation = null;
            var midx = paintInfo.startStubX + ((paintInfo.endStubX - paintInfo.startStubX) * midpoint), midy = paintInfo.startStubY + ((paintInfo.endStubY - paintInfo.startStubY) * midpoint);
            var findClearedLine = function(start, mult, anchorPos, dimension) {
                return start + (mult * ((1 - anchorPos) * dimension) + _super.maxStub)
            }, orientations = {x: [0, 1], y: [1, 0]}, commonStubCalculator = function(axis) {
                return[paintInfo.startStubX, paintInfo.startStubY, paintInfo.endStubX, paintInfo.endStubY]
            }, stubCalculators = {perpendicular: commonStubCalculator, orthogonal: commonStubCalculator, opposite: function(axis) {
                    var pi = paintInfo, idx = axis == "x" ? 0 : 1, areInProximity = {x: function() {
                            return((pi.so[idx] == 1 && (((pi.startStubX > pi.endStubX) && (pi.tx > pi.startStubX)) || ((pi.sx > pi.endStubX) && (pi.tx > pi.sx))))) || ((pi.so[idx] == -1 && (((pi.startStubX < pi.endStubX) && (pi.tx < pi.startStubX)) || ((pi.sx < pi.endStubX) && (pi.tx < pi.sx)))))
                        }, y: function() {
                            return((pi.so[idx] == 1 && (((pi.startStubY > pi.endStubY) && (pi.ty > pi.startStubY)) || ((pi.sy > pi.endStubY) && (pi.ty > pi.sy))))) || ((pi.so[idx] == -1 && (((pi.startStubY < pi.endStubY) && (pi.ty < pi.startStubY)) || ((pi.sy < pi.endStubY) && (pi.ty < pi.sy)))))
                        }};
                    if (!alwaysRespectStubs && areInProximity[axis]()) {
                        return{x: [(paintInfo.sx + paintInfo.tx) / 2, paintInfo.startStubY, (paintInfo.sx + paintInfo.tx) / 2, paintInfo.endStubY], y: [paintInfo.startStubX, (paintInfo.sy + paintInfo.ty) / 2, paintInfo.endStubX, (paintInfo.sy + paintInfo.ty) / 2]}[axis]
                    } else {
                        return[paintInfo.startStubX, paintInfo.startStubY, paintInfo.endStubX, paintInfo.endStubY]
                    }
                }}, lineCalculators = {perpendicular: function(axis, ss, oss, es, oes) {
                    with (paintInfo) {
                        var sis = {x: [[[1, 2, 3, 4], null, [2, 1, 4, 3]], null, [[4, 3, 2, 1], null, [3, 4, 1, 2]]], y: [[[3, 2, 1, 4], null, [2, 3, 4, 1]], null, [[4, 1, 2, 3], null, [1, 4, 3, 2]]]}, stubs = {x: [[startStubX, endStubX], null, [endStubX, startStubX]], y: [[startStubY, endStubY], null, [endStubY, startStubY]]}, midLines = {x: [[midx, startStubY], [midx, endStubY]], y: [[startStubX, midy], [endStubX, midy]]}, linesToEnd = {x: [[endStubX, startStubY]], y: [[startStubX, endStubY]]}, startToEnd = {x: [[startStubX, endStubY], [endStubX, endStubY]], y: [[endStubX, startStubY], [endStubX, endStubY]]}, startToMidToEnd = {x: [[startStubX, midy], [endStubX, midy], [endStubX, endStubY]], y: [[midx, startStubY], [midx, endStubY], [endStubX, endStubY]]}, otherStubs = {x: [startStubY, endStubY], y: [startStubX, endStubX]}, soIdx = orientations[axis][0], toIdx = orientations[axis][1], _so = so[soIdx] + 1, _to = to[toIdx] + 1, otherFlipped = (to[toIdx] == -1 && (otherStubs[axis][1] < otherStubs[axis][0])) || (to[toIdx] == 1 && (otherStubs[axis][1] > otherStubs[axis][0])), stub1 = stubs[axis][_so][0], stub2 = stubs[axis][_so][1], segmentIndexes = sis[axis][_so][_to];
                        if (segment == segmentIndexes[3] || (segment == segmentIndexes[2] && otherFlipped)) {
                            return midLines[axis]
                        } else {
                            if (segment == segmentIndexes[2] && stub2 < stub1) {
                                return linesToEnd[axis]
                            } else {
                                if ((segment == segmentIndexes[2] && stub2 >= stub1) || (segment == segmentIndexes[1] && !otherFlipped)) {
                                    return startToMidToEnd[axis]
                                } else {
                                    if (segment == segmentIndexes[0] || (segment == segmentIndexes[1] && otherFlipped)) {
                                        return startToEnd[axis]
                                    }
                                }
                            }
                        }
                    }
                }, orthogonal: function(axis, startStub, otherStartStub, endStub, otherEndStub) {
                    var pi = paintInfo, extent = {x: pi.so[0] == -1 ? Math.min(startStub, endStub) : Math.max(startStub, endStub), y: pi.so[1] == -1 ? Math.min(startStub, endStub) : Math.max(startStub, endStub)}[axis];
                    return{x: [[extent, otherStartStub], [extent, otherEndStub], [endStub, otherEndStub]], y: [[otherStartStub, extent], [otherEndStub, extent], [otherEndStub, endStub]]}[axis]
                }, opposite: function(axis, ss, oss, es, oes) {
                    var pi = paintInfo, otherAxis = {x: "y", y: "x"}[axis], dim = {x: "height", y: "width"}[axis], comparator = pi["is" + axis.toUpperCase() + "GreaterThanStubTimes2"];
                    if (params.sourceEndpoint.elementId == params.targetEndpoint.elementId) {
                        var _val = oss + ((1 - params.sourceEndpoint.anchor[otherAxis]) * params.sourceInfo[dim]) + _super.maxStub;
                        return{x: [[ss, _val], [es, _val]], y: [[_val, ss], [_val, es]]}[axis]
                    } else {
                        if (!comparator || (pi.so[idx] == 1 && ss > es) || (pi.so[idx] == -1 && ss < es)) {
                            return{x: [[ss, midy], [es, midy]], y: [[midx, ss], [midx, es]]}[axis]
                        } else {
                            if ((pi.so[idx] == 1 && ss < es) || (pi.so[idx] == -1 && ss > es)) {
                                return{x: [[midx, pi.sy], [midx, pi.ty]], y: [[pi.sx, midy], [pi.tx, midy]]}[axis]
                            }
                        }
                    }
                }};
            var stubs = stubCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis), idx = paintInfo.sourceAxis == "x" ? 0 : 1, oidx = paintInfo.sourceAxis == "x" ? 1 : 0, ss = stubs[idx], oss = stubs[oidx], es = stubs[idx + 2], oes = stubs[oidx + 2];
            addSegment(segments, stubs[0], stubs[1], paintInfo);
            var p = lineCalculators[paintInfo.anchorOrientation](paintInfo.sourceAxis, ss, oss, es, oes);
            if (p) {
                for (var i = 0; i < p.length; i++) {
                    addSegment(segments, p[i][0], p[i][1], paintInfo)
                }
            }
            addSegment(segments, stubs[2], stubs[3], paintInfo);
            addSegment(segments, paintInfo.tx, paintInfo.ty, paintInfo);
            writeSegments(segments, paintInfo)
        };
        this.getPath = function() {
            var _last = null, _lastAxis = null, s = [], segs = userSuppliedSegments || segments;
            for (var i = 0; i < segs.length; i++) {
                var seg = segs[i], axis = seg[4], axisIndex = (axis == "v" ? 3 : 2);
                if (_last != null && _lastAxis === axis) {
                    _last[axisIndex] = seg[axisIndex]
                } else {
                    if (seg[0] != seg[2] || seg[1] != seg[3]) {
                        s.push({start: [seg[0], seg[1]], end: [seg[2], seg[3]]});
                        _last = seg;
                        _lastAxis = seg[4]
                    }
                }
            }
            return s
        };
        this.setPath = function(path) {
            userSuppliedSegments = [];
            for (var i = 0; i < path.length; i++) {
                var lx = path[i].start[0], ly = path[i].start[1], x = path[i].end[0], y = path[i].end[1], o = lx == x ? "v" : "h", sgnx = sgn(x - lx), sgny = sgn(y - ly);
                userSuppliedSegments.push([lx, ly, x, y, o, sgnx, sgny])
            }
        }
    }
})();
(function() {
    var G = {"stroke-linejoin": "joinstyle", joinstyle: "joinstyle", endcap: "endcap", miterlimit: "miterlimit"}, L = null;
    if (document.createStyleSheet && document.namespaces) {
        var D = [".jsplumb_vml", "jsplumb\\:textbox", "jsplumb\\:oval", "jsplumb\\:rect", "jsplumb\\:stroke", "jsplumb\\:shape", "jsplumb\\:group"], H = "behavior:url(#default#VML);position:absolute;";
        L = document.createStyleSheet();
        for (var x = 0; x < D.length; x++) {
            L.addRule(D[x], H)
        }
        document.namespaces.add("jsplumb", "urn:schemas-microsoft-com:vml")
    }
    jsPlumb.vml = {};
    var v = 1000, w = {}, N = function(b, c) {
        var d = jsPlumb.getId(b), a = w[d];
        if (!a) {
            a = I("group", [0, 0, v, v], {"class": c});
            a.style.backgroundColor = "red";
            w[d] = a;
            jsPlumb.appendElement(a, b)
        }
        return a
    }, J = function(b, a) {
        for (var c in a) {
            b[c] = a[c]
        }
    }, I = function(c, g, e, f, d, b) {
        e = e || {};
        var a = document.createElement("jsplumb:" + c);
        if (b) {
            d.appendElement(a, f)
        } else {
            jsPlumb.CurrentLibrary.appendElement(a, f)
        }
        a.className = (e["class"] ? e["class"] + " " : "") + "jsplumb_vml";
        F(a, g);
        J(a, e);
        return a
    }, F = function(b, c, a) {
        b.style.left = c[0] + "px";
        b.style.top = c[1] + "px";
        b.style.width = c[2] + "px";
        b.style.height = c[3] + "px";
        b.style.position = "absolute";
        if (a) {
            b.style.zIndex = a
        }
    }, A = jsPlumb.vml.convertValue = function(a) {
        return Math.floor(a * v)
    }, M = function(d, b, a, c) {
        if ("transparent" === b) {
            c.setOpacity(a, "0.0")
        } else {
            c.setOpacity(a, "1.0")
        }
    }, y = function(d, h, a, m) {
        var e = {};
        if (h.strokeStyle) {
            e.stroked = "true";
            var l = jsPlumbUtil.convertStyle(h.strokeStyle, true);
            e.strokecolor = l;
            M(e, l, "stroke", a);
            e.strokeweight = h.lineWidth + "px"
        } else {
            e.stroked = "false"
        }
        if (h.fillStyle) {
            e.filled = "true";
            var g = jsPlumbUtil.convertStyle(h.fillStyle, true);
            e.fillcolor = g;
            M(e, g, "fill", a)
        } else {
            e.filled = "false"
        }
        if (h.dashstyle) {
            if (a.strokeNode == null) {
                a.strokeNode = I("stroke", [0, 0, 0, 0], {dashstyle: h.dashstyle}, d, m)
            } else {
                a.strokeNode.dashstyle = h.dashstyle
            }
        } else {
            if (h["stroke-dasharray"] && h.lineWidth) {
                var k = h["stroke-dasharray"].indexOf(",") == -1 ? " " : ",", c = h["stroke-dasharray"].split(k), f = "";
                for (var b = 0; b < c.length; b++) {
                    f += (Math.floor(c[b] / h.lineWidth) + k)
                }
                if (a.strokeNode == null) {
                    a.strokeNode = I("stroke", [0, 0, 0, 0], {dashstyle: f}, d, m)
                } else {
                    a.strokeNode.dashstyle = f
                }
            }
        }
        J(d, e)
    }, C = function() {
        var c = this, a = {};
        jsPlumb.jsPlumbUIComponent.apply(this, arguments);
        this.opacityNodes = {stroke: null, fill: null};
        this.initOpacityNodes = function(d) {
            c.opacityNodes.stroke = I("stroke", [0, 0, 1, 1], {opacity: "0.0"}, d, c._jsPlumb);
            c.opacityNodes.fill = I("fill", [0, 0, 1, 1], {opacity: "0.0"}, d, c._jsPlumb)
        };
        this.setOpacity = function(f, e) {
            var d = c.opacityNodes[f];
            if (d) {
                d.opacity = "" + e
            }
        };
        var b = [];
        this.getDisplayElements = function() {
            return b
        };
        this.appendDisplayElement = function(d, e) {
            if (!e) {
                c.canvas.parentNode.appendChild(d)
            }
            b.push(d)
        }
    }, K = jsPlumb.ConnectorRenderers.vml = function(d) {
        var c = this;
        c.strokeNode = null;
        c.canvas = null;
        var a = C.apply(this, arguments);
        var b = c._jsPlumb.connectorClass + (d.cssClass ? (" " + d.cssClass) : "");
        this.paint = function(g) {
            if (g !== null) {
                var o = c.getSegments(), f = {path: ""}, n = [c.x, c.y, c.w, c.h];
                for (var e = 0; e < o.length; e++) {
                    f.path += jsPlumb.Segments.vml.SegmentRenderer.getPath(o[e]);
                    f.path += " "
                }
                if (g.outlineColor) {
                    var l = g.outlineWidth || 1, k = g.lineWidth + (2 * l), m = {strokeStyle: jsPlumbUtil.convertStyle(g.outlineColor), lineWidth: k};
                    for (var h in G) {
                        m[h] = g[h]
                    }
                    if (c.bgCanvas == null) {
                        f["class"] = b;
                        f.coordsize = (n[2] * v) + "," + (n[3] * v);
                        c.bgCanvas = I("shape", n, f, d.parent, c._jsPlumb, true);
                        F(c.bgCanvas, n);
                        c.appendDisplayElement(c.bgCanvas, true);
                        c.attachListeners(c.bgCanvas, c);
                        c.initOpacityNodes(c.bgCanvas, ["stroke"])
                    } else {
                        f.coordsize = (n[2] * v) + "," + (n[3] * v);
                        F(c.bgCanvas, n);
                        J(c.bgCanvas, f)
                    }
                    y(c.bgCanvas, m, c)
                }
                if (c.canvas == null) {
                    f["class"] = b;
                    f.coordsize = (n[2] * v) + "," + (n[3] * v);
                    c.canvas = I("shape", n, f, d.parent, c._jsPlumb, true);
                    c.appendDisplayElement(c.canvas, true);
                    c.attachListeners(c.canvas, c);
                    c.initOpacityNodes(c.canvas, ["stroke"])
                } else {
                    f.coordsize = (n[2] * v) + "," + (n[3] * v);
                    F(c.canvas, n);
                    J(c.canvas, f)
                }
                y(c.canvas, g, c, c._jsPlumb)
            }
        };
        this.reattachListeners = function() {
            if (c.canvas) {
                c.reattachListenersForElement(c.canvas, c)
            }
        }
    }, E = window.VmlEndpoint = function(f) {
        C.apply(this, arguments);
        var d = null, b = this, c = null, a = null;
        b.canvas = document.createElement("div");
        b.canvas.style.position = "absolute";
        var e = b._jsPlumb.endpointClass + (f.cssClass ? (" " + f.cssClass) : "");
        f._jsPlumb.appendElement(b.canvas, f.parent);
        this.paint = function(h, k) {
            var g = {};
            jsPlumb.sizeCanvas(b.canvas, b.x, b.y, b.w, b.h);
            if (d == null) {
                g["class"] = e;
                d = b.getVml([0, 0, b.w, b.h], g, k, b.canvas, b._jsPlumb);
                b.attachListeners(d, b);
                b.appendDisplayElement(d, true);
                b.appendDisplayElement(b.canvas, true);
                b.initOpacityNodes(d, ["fill"])
            } else {
                F(d, [0, 0, b.w, b.h]);
                J(d, g)
            }
            y(d, h, b)
        };
        this.reattachListeners = function() {
            if (d) {
                b.reattachListenersForElement(d, b)
            }
        }
    };
    jsPlumb.Segments.vml = {SegmentRenderer: {getPath: function(a) {
                return({Straight: function(c) {
                        var b = c.params;
                        return"m" + A(b.x1) + "," + A(b.y1) + " l" + A(b.x2) + "," + A(b.y2) + " e"
                    }, Bezier: function(c) {
                        var b = c.params;
                        return"m" + A(b.x1) + "," + A(b.y1) + " c" + A(b.cp1x) + "," + A(b.cp1y) + "," + A(b.cp2x) + "," + A(b.cp2y) + "," + A(b.x2) + "," + A(b.y2) + " e"
                    }, Arc: function(c) {
                        var l = c.params, h = Math.min(l.x1, l.x2), d = Math.max(l.x1, l.x2), k = Math.min(l.y1, l.y2), f = Math.max(l.y1, l.y2), b = c.anticlockwise ? 1 : 0, g = (c.anticlockwise ? "at " : "wa "), e = function() {
                            var m = [null, [function() {
                                        return[h, k]
                                    }, function() {
                                        return[h - l.r, k - l.r]
                                    }], [function() {
                                        return[h - l.r, k]
                                    }, function() {
                                        return[h, k - l.r]
                                    }], [function() {
                                        return[h - l.r, k - l.r]
                                    }, function() {
                                        return[h, k]
                                    }], [function() {
                                        return[h, k - l.r]
                                    }, function() {
                                        return[h - l.r, k]
                                    }]][c.segment][b]();
                            return A(m[0]) + "," + A(m[1]) + "," + A(m[0] + (2 * l.r)) + "," + A(m[1] + (2 * l.r))
                        };
                        return g + e() + "," + A(l.x1) + "," + A(l.y1) + "," + A(l.x2) + "," + A(l.y2) + " e"
                    }})[a.type](a)
            }}};
    jsPlumb.Endpoints.vml.Dot = function() {
        jsPlumb.Endpoints.Dot.apply(this, arguments);
        E.apply(this, arguments);
        this.getVml = function(e, b, c, a, d) {
            return I("oval", e, b, a, d)
        }
    };
    jsPlumb.Endpoints.vml.Rectangle = function() {
        jsPlumb.Endpoints.Rectangle.apply(this, arguments);
        E.apply(this, arguments);
        this.getVml = function(e, b, c, a, d) {
            return I("rect", e, b, a, d)
        }
    };
    jsPlumb.Endpoints.vml.Image = jsPlumb.Endpoints.Image;
    jsPlumb.Endpoints.vml.Blank = jsPlumb.Endpoints.Blank;
    jsPlumb.Overlays.vml.Label = jsPlumb.Overlays.Label;
    jsPlumb.Overlays.vml.Custom = jsPlumb.Overlays.Custom;
    var B = function(b, a) {
        b.apply(this, a);
        C.apply(this, a);
        var c = this, e = null;
        c.canvas = null;
        c.isAppendedAtTopLevel = true;
        var d = function(f) {
            return"m " + A(f.hxy.x) + "," + A(f.hxy.y) + " l " + A(f.tail[0].x) + "," + A(f.tail[0].y) + " " + A(f.cxy.x) + "," + A(f.cxy.y) + " " + A(f.tail[1].x) + "," + A(f.tail[1].y) + " x e"
        };
        this.paint = function(u, s) {
            var g = {}, n = u.d, P = u.component;
            if (u.strokeStyle) {
                g.stroked = "true";
                g.strokecolor = jsPlumbUtil.convertStyle(u.strokeStyle, true)
            }
            if (u.lineWidth) {
                g.strokeweight = u.lineWidth + "px"
            }
            if (u.fillStyle) {
                g.filled = "true";
                g.fillcolor = u.fillStyle
            }
            var h = Math.min(n.hxy.x, n.tail[0].x, n.tail[1].x, n.cxy.x), k = Math.min(n.hxy.y, n.tail[0].y, n.tail[1].y, n.cxy.y), r = Math.max(n.hxy.x, n.tail[0].x, n.tail[1].x, n.cxy.x), f = Math.max(n.hxy.y, n.tail[0].y, n.tail[1].y, n.cxy.y), l = Math.abs(r - h), p = Math.abs(f - k), q = [h, k, l, p];
            g.path = d(n);
            g.coordsize = (P.w * v) + "," + (P.h * v);
            q[0] = P.x;
            q[1] = P.y;
            q[2] = P.w;
            q[3] = P.h;
            if (c.canvas == null) {
                var m = P._jsPlumb.overlayClass || "";
                var o = a && (a.length == 1) ? (a[0].cssClass || "") : "";
                g["class"] = o + " " + m;
                c.canvas = I("shape", q, g, P.canvas.parentNode, P._jsPlumb, true);
                P.appendDisplayElement(c.canvas, true);
                c.attachListeners(c.canvas, P);
                c.attachListeners(c.canvas, c)
            } else {
                F(c.canvas, q);
                J(c.canvas, g)
            }
        };
        this.reattachListeners = function() {
            if (c.canvas) {
                c.reattachListenersForElement(c.canvas, c)
            }
        };
        this.cleanup = function() {
            if (c.canvas != null) {
                jsPlumb.CurrentLibrary.removeElement(c.canvas)
            }
        }
    };
    jsPlumb.Overlays.vml.Arrow = function() {
        B.apply(this, [jsPlumb.Overlays.Arrow, arguments])
    };
    jsPlumb.Overlays.vml.PlainArrow = function() {
        B.apply(this, [jsPlumb.Overlays.PlainArrow, arguments])
    };
    jsPlumb.Overlays.vml.Diamond = function() {
        B.apply(this, [jsPlumb.Overlays.Diamond, arguments])
    }
})();
(function() {
    var Z = {joinstyle: "stroke-linejoin", "stroke-linejoin": "stroke-linejoin", "stroke-dashoffset": "stroke-dashoffset", "stroke-linecap": "stroke-linecap"}, H = "stroke-dasharray", O = "dashstyle", af = "linearGradient", ai = "radialGradient", ah = "fill", aj = "stop", Q = "stroke", S = "stroke-width", ac = "style", Y = "none", L = "jsplumb_gradient_", W = "lineWidth", K = {svg: "http://www.w3.org/2000/svg", xhtml: "http://www.w3.org/1999/xhtml"}, ad = function(a, c) {
        for (var b in c) {
            a.setAttribute(b, "" + c[b])
        }
    }, ae = function(b, c) {
        var a = document.createElementNS(K.svg, b);
        c = c || {};
        c.version = "1.1";
        c.xmlns = K.xhtml;
        ad(a, c);
        return a
    }, X = function(a) {
        return"position:absolute;left:" + a[0] + "px;top:" + a[1] + "px"
    }, ab = function(a) {
        for (var b = 0; b < a.childNodes.length; b++) {
            if (a.childNodes[b].tagName == af || a.childNodes[b].tagName == ai) {
                a.removeChild(a.childNodes[b])
            }
        }
    }, I = function(b, g, l, n, f) {
        var k = L + f._jsPlumb.idstamp();
        ab(b);
        var d;
        if (!l.gradient.offset) {
            d = ae(af, {id: k, gradientUnits: "userSpaceOnUse"})
        } else {
            d = ae(ai, {id: k})
        }
        b.appendChild(d);
        for (var e = 0; e < l.gradient.stops.length; e++) {
            var h = f.segment == 1 || f.segment == 2 ? e : l.gradient.stops.length - 1 - e, c = jsPlumbUtil.convertStyle(l.gradient.stops[h][1], true), a = ae(aj, {offset: Math.floor(l.gradient.stops[e][0] * 100) + "%", "stop-color": c});
            d.appendChild(a)
        }
        var m = l.strokeStyle ? Q : ah;
        g.setAttribute(ac, m + ":url(#" + k + ")")
    }, V = function(b, f, h, k, e) {
        if (h.gradient) {
            I(b, f, h, k, e)
        } else {
            ab(b);
            f.setAttribute(ac, "")
        }
        f.setAttribute(ah, h.fillStyle ? jsPlumbUtil.convertStyle(h.fillStyle, true) : Y);
        f.setAttribute(Q, h.strokeStyle ? jsPlumbUtil.convertStyle(h.strokeStyle, true) : Y);
        if (h.lineWidth) {
            f.setAttribute(S, h.lineWidth)
        }
        if (h[O] && h[W] && !h[H]) {
            var a = h[O].indexOf(",") == -1 ? " " : ",", d = h[O].split(a), g = "";
            d.forEach(function(l) {
                g += (Math.floor(l * h.lineWidth) + a)
            });
            f.setAttribute(H, g)
        } else {
            if (h[H]) {
                f.setAttribute(H, h[H])
            }
        }
        for (var c in Z) {
            if (h[c]) {
                f.setAttribute(Z[c], h[c])
            }
        }
    }, N = function(a) {
        var c = /([0-9].)(p[xt])\s(.*)/, b = a.match(c);
        return{size: b[1] + b[2], font: b[3]}
    }, P = function(h, g, d) {
        var f = d.split(" "), a = h.className, b = a.baseVal.split(" ");
        for (var c = 0; c < f.length; c++) {
            if (g) {
                if (b.indexOf(f[c]) == -1) {
                    b.push(f[c])
                }
            } else {
                var e = b.indexOf(f[c]);
                if (e != -1) {
                    b.splice(e, 1)
                }
            }
        }
        h.className.baseVal = b.join(" ")
    }, J = function(a, b) {
        P(a, true, b)
    }, aa = function(a, b) {
        P(a, false, b)
    }, R = function(b, a, c) {
        if (b.childNodes.length > c) {
            b.insertBefore(a, b.childNodes[c])
        } else {
            b.appendChild(a)
        }
    };
    jsPlumbUtil.svg = {addClass: J, removeClass: aa, node: ae, attr: ad, pos: X};
    var M = function(g) {
        var e = this, b = g.pointerEventsSpec || "all", a = {};
        jsPlumb.jsPlumbUIComponent.apply(this, g.originalArgs);
        e.canvas = null, e.path = null, e.svg = null;
        var c = g.cssClass + " " + (g.originalArgs[0].cssClass || ""), f = {style: "", width: 0, height: 0, "pointer-events": b, position: "absolute"};
        e.svg = ae("svg", f);
        if (g.useDivWrapper) {
            e.canvas = document.createElement("div");
            e.canvas.style.position = "absolute";
            jsPlumb.sizeCanvas(e.canvas, 0, 0, 1, 1);
            e.canvas.className = c
        } else {
            ad(e.svg, {"class": c});
            e.canvas = e.svg
        }
        g._jsPlumb.appendElement(e.canvas, g.originalArgs[0]["parent"]);
        if (g.useDivWrapper) {
            e.canvas.appendChild(e.svg)
        }
        var d = [e.canvas];
        this.getDisplayElements = function() {
            return d
        };
        this.appendDisplayElement = function(h) {
            d.push(h)
        };
        this.paint = function(m, n, l) {
            if (m != null) {
                var h = [e.x, e.y], o = [e.w, e.h], k;
                if (l != null) {
                    if (l.xmin < 0) {
                        h[0] += l.xmin
                    }
                    if (l.ymin < 0) {
                        h[1] += l.ymin
                    }
                    o[0] = l.xmax + ((l.xmin < 0) ? -l.xmin : 0);
                    o[1] = l.ymax + ((l.ymin < 0) ? -l.ymin : 0)
                }
                if (g.useDivWrapper) {
                    jsPlumb.sizeCanvas(e.canvas, h[0], h[1], o[0], o[1]);
                    h[0] = 0, h[1] = 0;
                    k = X([0, 0])
                } else {
                    k = X([h[0], h[1]])
                }
                a.paint.apply(this, arguments);
                ad(e.svg, {style: k, width: o[0], height: o[1]})
            }
        };
        return{renderer: a}
    };
    var ag = jsPlumb.ConnectorRenderers.svg = function(a) {
        var c = this, b = M.apply(this, [{cssClass: a._jsPlumb.connectorClass, originalArgs: arguments, pointerEventsSpec: "none", _jsPlumb: a._jsPlumb}]);
        b.renderer.paint = function(q, m, f) {
            var l = c.getSegments(), p = "", o = [0, 0];
            if (f.xmin < 0) {
                o[0] = -f.xmin
            }
            if (f.ymin < 0) {
                o[1] = -f.ymin
            }
            for (var n = 0; n < l.length; n++) {
                p += jsPlumb.Segments.svg.SegmentRenderer.getPath(l[n]);
                p += " "
            }
            var e = {d: p, transform: "translate(" + o[0] + "," + o[1] + ")", "pointer-events": a["pointer-events"] || "visibleStroke"}, h = null, k = [c.x, c.y, c.w, c.h];
            if (q.outlineColor) {
                var g = q.outlineWidth || 1, d = q.lineWidth + (2 * g), h = jsPlumb.CurrentLibrary.extend({}, q);
                h.strokeStyle = jsPlumbUtil.convertStyle(q.outlineColor);
                h.lineWidth = d;
                if (c.bgPath == null) {
                    c.bgPath = ae("path", e);
                    R(c.svg, c.bgPath, 0);
                    c.attachListeners(c.bgPath, c)
                } else {
                    ad(c.bgPath, e)
                }
                V(c.svg, c.bgPath, h, k, c)
            }
            if (c.path == null) {
                c.path = ae("path", e);
                R(c.svg, c.path, q.outlineColor ? 1 : 0);
                c.attachListeners(c.path, c)
            } else {
                ad(c.path, e)
            }
            V(c.svg, c.path, q, k, c)
        };
        this.reattachListeners = function() {
            if (c.bgPath) {
                c.reattachListenersForElement(c.bgPath, c)
            }
            if (c.path) {
                c.reattachListenersForElement(c.path, c)
            }
        }
    };
    jsPlumb.Segments.svg = {SegmentRenderer: {getPath: function(a) {
                return({Straight: function() {
                        var b = a.getCoordinates();
                        return"M " + b.x1 + " " + b.y1 + " L " + b.x2 + " " + b.y2
                    }, Bezier: function() {
                        var b = a.params;
                        return"M " + b.x1 + " " + b.y1 + " C " + b.cp1x + " " + b.cp1y + " " + b.cp2x + " " + b.cp2y + " " + b.x2 + " " + b.y2
                    }, Arc: function() {
                        var b = a.params, d = a.sweep > Math.PI ? 1 : 0, c = a.anticlockwise ? 0 : 1;
                        return"M" + a.x1 + " " + a.y1 + " A " + a.radius + " " + b.r + " 0 " + d + "," + c + " " + a.x2 + " " + a.y2
                    }})[a.type]()
            }}};
    var U = window.SvgEndpoint = function(a) {
        var c = this, b = M.apply(this, [{cssClass: a._jsPlumb.endpointClass, originalArgs: arguments, pointerEventsSpec: "all", useDivWrapper: true, _jsPlumb: a._jsPlumb}]);
        b.renderer.paint = function(d) {
            var e = jsPlumb.extend({}, d);
            if (e.outlineColor) {
                e.strokeWidth = e.outlineWidth;
                e.strokeStyle = jsPlumbUtil.convertStyle(e.outlineColor, true)
            }
            if (c.node == null) {
                c.node = c.makeNode(e);
                c.svg.appendChild(c.node);
                c.attachListeners(c.node, c)
            } else {
                if (c.updateNode != null) {
                    c.updateNode(c.node)
                }
            }
            V(c.svg, c.node, e, [c.x, c.y, c.w, c.h], c);
            X(c.node, [c.x, c.y])
        };
        this.reattachListeners = function() {
            if (c.node) {
                c.reattachListenersForElement(c.node, c)
            }
        }
    };
    jsPlumb.Endpoints.svg.Dot = function() {
        jsPlumb.Endpoints.Dot.apply(this, arguments);
        U.apply(this, arguments);
        this.makeNode = function(a) {
            return ae("circle", {cx: this.w / 2, cy: this.h / 2, r: this.radius})
        };
        this.updateNode = function(a) {
            ad(a, {cx: this.w / 2, cy: this.h / 2, r: this.radius})
        }
    };
    jsPlumb.Endpoints.svg.Rectangle = function() {
        jsPlumb.Endpoints.Rectangle.apply(this, arguments);
        U.apply(this, arguments);
        this.makeNode = function(a) {
            return ae("rect", {width: this.w, height: this.h})
        };
        this.updateNode = function(a) {
            ad(a, {width: this.w, height: this.h})
        }
    };
    jsPlumb.Endpoints.svg.Image = jsPlumb.Endpoints.Image;
    jsPlumb.Endpoints.svg.Blank = jsPlumb.Endpoints.Blank;
    jsPlumb.Overlays.svg.Label = jsPlumb.Overlays.Label;
    jsPlumb.Overlays.svg.Custom = jsPlumb.Overlays.Custom;
    var T = function(a, c) {
        a.apply(this, c);
        jsPlumb.jsPlumbUIComponent.apply(this, c);
        this.isAppendedAtTopLevel = false;
        var e = this, b = null;
        this.paint = function(f, k) {
            if (f.component.svg && k) {
                if (b == null) {
                    b = ae("path", {"pointer-events": "all"});
                    f.component.svg.appendChild(b);
                    e.attachListeners(b, f.component);
                    e.attachListeners(b, e)
                }
                var h = c && (c.length == 1) ? (c[0].cssClass || "") : "", g = [0, 0];
                if (k.xmin < 0) {
                    g[0] = -k.xmin
                }
                if (k.ymin < 0) {
                    g[1] = -k.ymin
                }
                ad(b, {d: d(f.d), "class": h, stroke: f.strokeStyle ? f.strokeStyle : null, fill: f.fillStyle ? f.fillStyle : null, transform: "translate(" + g[0] + "," + g[1] + ")"})
            }
        };
        var d = function(f) {
            return"M" + f.hxy.x + "," + f.hxy.y + " L" + f.tail[0].x + "," + f.tail[0].y + " L" + f.cxy.x + "," + f.cxy.y + " L" + f.tail[1].x + "," + f.tail[1].y + " L" + f.hxy.x + "," + f.hxy.y
        };
        this.reattachListeners = function() {
            if (b) {
                e.reattachListenersForElement(b, e)
            }
        };
        this.cleanup = function() {
            if (b != null) {
                jsPlumb.CurrentLibrary.removeElement(b)
            }
        }
    };
    jsPlumb.Overlays.svg.Arrow = function() {
        T.apply(this, [jsPlumb.Overlays.Arrow, arguments])
    };
    jsPlumb.Overlays.svg.PlainArrow = function() {
        T.apply(this, [jsPlumb.Overlays.PlainArrow, arguments])
    };
    jsPlumb.Overlays.svg.Diamond = function() {
        T.apply(this, [jsPlumb.Overlays.Diamond, arguments])
    };
    jsPlumb.Overlays.svg.GuideLines = function() {
        var a = null, e = this, b, c;
        jsPlumb.Overlays.GuideLines.apply(this, arguments);
        this.paint = function(f, h) {
            if (a == null) {
                a = ae("path");
                f.connector.svg.appendChild(a);
                e.attachListeners(a, f.connector);
                e.attachListeners(a, e);
                b = ae("path");
                f.connector.svg.appendChild(b);
                e.attachListeners(b, f.connector);
                e.attachListeners(b, e);
                c = ae("path");
                f.connector.svg.appendChild(c);
                e.attachListeners(c, f.connector);
                e.attachListeners(c, e)
            }
            var g = [0, 0];
            if (h.xmin < 0) {
                g[0] = -h.xmin
            }
            if (h.ymin < 0) {
                g[1] = -h.ymin
            }
            ad(a, {d: d(f.head, f.tail), stroke: "red", fill: null, transform: "translate(" + g[0] + "," + g[1] + ")"});
            ad(b, {d: d(f.tailLine[0], f.tailLine[1]), stroke: "blue", fill: null, transform: "translate(" + g[0] + "," + g[1] + ")"});
            ad(c, {d: d(f.headLine[0], f.headLine[1]), stroke: "green", fill: null, transform: "translate(" + g[0] + "," + g[1] + ")"})
        };
        var d = function(f, g) {
            return"M " + f.x + "," + f.y + " L" + g.x + "," + g.y
        }
    }
})();
(function(c) {
    var d = function(a) {
        return typeof (a) == "string" ? c("#" + a) : c(a)
    };
    jsPlumb.CurrentLibrary = {addClass: function(b, e) {
            b = d(b);
            try {
                if (b[0].className.constructor == SVGAnimatedString) {
                    jsPlumbUtil.svg.addClass(b[0], e)
                }
            } catch (a) {
            }
            try {
                b.addClass(e)
            } catch (a) {
            }
        }, animate: function(a, b, f) {
            a.animate(b, f)
        }, appendElement: function(a, b) {
            d(b).append(a)
        }, ajax: function(a) {
            a = a || {};
            a.type = a.type || "get";
            c.ajax(a)
        }, bind: function(f, b, a) {
            f = d(f);
            f.bind(b, a)
        }, dragEvents: {start: "start", stop: "stop", drag: "drag", step: "step", over: "over", out: "out", drop: "drop", complete: "complete"}, extend: function(a, b) {
            return c.extend(a, b)
        }, getAttribute: function(b, a) {
            return b.attr(a)
        }, getClientXY: function(a) {
            return[a.clientX, a.clientY]
        }, getDragObject: function(a) {
            return a[1].draggable || a[1].helper
        }, getDragScope: function(a) {
            return a.draggable("option", "scope")
        }, getDropEvent: function(a) {
            return a[0]
        }, getDropScope: function(a) {
            return a.droppable("option", "scope")
        }, getDOMElement: function(a) {
            if (typeof (a) == "string") {
                return document.getElementById(a)
            } else {
                if (a.context || a.length != null) {
                    return a[0]
                } else {
                    return a
                }
            }
        }, getElementObject: d, getOffset: function(a) {
            return a.offset()
        }, getOriginalEvent: function(a) {
            return a.originalEvent
        }, getPageXY: function(a) {
            return[a.pageX, a.pageY]
        }, getParent: function(a) {
            return d(a).parent()
        }, getScrollLeft: function(a) {
            return a.scrollLeft()
        }, getScrollTop: function(a) {
            return a.scrollTop()
        }, getSelector: function(a, b) {
            if (arguments.length == 2) {
                return d(a).find(b)
            } else {
                return c(a)
            }
        }, getSize: function(a) {
            return[a.outerWidth(), a.outerHeight()]
        }, getTagName: function(b) {
            var a = d(b);
            return a.length > 0 ? a[0].tagName : null
        }, getUIPosition: function(g, b) {
            b = b || 1;
            if (g.length == 1) {
                ret = {left: g[0].pageX, top: g[0].pageY}
            } else {
                var a = g[1], h = a.offset;
                ret = h || a.absolutePosition;
                a.position.left /= b;
                a.position.top /= b
            }
            return{left: ret.left / b, top: ret.top / b}
        }, hasClass: function(a, b) {
            return a.hasClass(b)
        }, initDraggable: function(b, g, a, h) {
            g = g || {};
            if (!g.doNotRemoveHelper) {
                g.helper = null
            }
            if (a) {
                g.scope = g.scope || jsPlumb.Defaults.Scope
            }
            b.draggable(g)
        }, initDroppable: function(a, b) {
            b.scope = b.scope || jsPlumb.Defaults.Scope;
            a.droppable(b)
        }, isAlreadyDraggable: function(a) {
            return d(a).hasClass("ui-draggable")
        }, isDragSupported: function(a, b) {
            return a.draggable
        }, isDropSupported: function(a, b) {
            return a.droppable
        }, removeClass: function(b, e) {
            b = d(b);
            try {
                if (b[0].className.constructor == SVGAnimatedString) {
                    jsPlumbUtil.svg.removeClass(b[0], e);
                    return
                }
            } catch (a) {
            }
            b.removeClass(e)
        }, removeElement: function(a) {
            d(a).remove()
        }, setAttribute: function(b, a, f) {
            b.attr(a, f)
        }, setDragFilter: function(a, b) {
            if (jsPlumb.CurrentLibrary.isAlreadyDraggable(a)) {
                a.draggable("option", "cancel", b)
            }
        }, setDraggable: function(a, b) {
            a.draggable("option", "disabled", !b)
        }, setDragScope: function(a, b) {
            a.draggable("option", "scope", b)
        }, setOffset: function(b, a) {
            d(b).offset(a)
        }, trigger: function(b, a, h) {
            var g = jQuery._data(d(b)[0], "handle");
            g(h)
        }, unbind: function(f, b, a) {
            f = d(f);
            f.unbind(b, a)
        }};
    c(document).ready(jsPlumb.init)
})(jQuery);
(function() {
    "undefined" == typeof Math.sgn && (Math.sgn = function(a) {
        return 0 == a ? 0 : 0 < a ? 1 : -1
    });
    var y = {subtract: function(a, b) {
            return{x: a.x - b.x, y: a.y - b.y}
        }, dotProduct: function(a, b) {
            return a.x * b.x + a.y * b.y
        }, square: function(a) {
            return Math.sqrt(a.x * a.x + a.y * a.y)
        }, scale: function(a, b) {
            return{x: a.x * b, y: a.y * b}
        }}, x = Math.pow(2, -65), s = function(c, f) {
        for (var l = [], h = f.length - 1, m = 2 * h - 1, C = [], k = [], d = [], a = [], b = [[1, 0.6, 0.3, 0.1], [0.4, 0.6, 0.6, 0.4], [0.1, 0.3, 0.6, 1]], g = 0; g <= h; g++) {
            C[g] = y.subtract(f[g], c)
        }
        for (g = 0; g <= h - 1; g++) {
            k[g] = y.subtract(f[g + 1], f[g]), k[g] = y.scale(k[g], 3)
        }
        for (g = 0; g <= h - 1; g++) {
            for (var e = 0; e <= h; e++) {
                d[g] || (d[g] = []), d[g][e] = y.dotProduct(k[g], C[e])
            }
        }
        for (g = 0; g <= m; g++) {
            a[g] || (a[g] = []), a[g].y = 0, a[g].x = parseFloat(g) / m
        }
        m = h - 1;
        for (C = 0; C <= h + m; C++) {
            g = Math.max(0, C - m);
            for (k = Math.min(C, h); g <= k; g++) {
                j = C - g, a[g + j].y += d[j][g] * b[j][g]
            }
        }
        h = f.length - 1;
        a = p(a, 2 * h - 1, l, 0);
        m = y.subtract(c, f[0]);
        d = y.square(m);
        for (g = b = 0; g < a; g++) {
            m = y.subtract(c, q(f, h, l[g], null, null)), m = y.square(m), m < d && (d = m, b = l[g])
        }
        m = y.subtract(c, f[h]);
        m = y.square(m);
        m < d && (d = m, b = 1);
        return{location: b, distance: d}
    }, p = function(G, I, f, c) {
        var g = [], h = [], d = [], m = [], k = 0, l, a;
        a = Math.sgn(G[0].y);
        for (var H = 1; H <= I; H++) {
            l = Math.sgn(G[H].y), l != a && k++, a = l
        }
        switch (k) {
            case 0:
                return 0;
            case 1:
                if (64 <= c) {
                    return f[0] = (G[0].x + G[I].x) / 2, 1
                }
                var e, b, k = G[0].y - G[I].y;
                a = G[I].x - G[0].x;
                H = G[0].x * G[I].y - G[I].x * G[0].y;
                l = max_distance_below = 0;
                for (e = 1; e < I; e++) {
                    b = k * G[e].x + a * G[e].y + H, b > l ? l = b : b < max_distance_below && (max_distance_below = b)
                }
                b = a;
                e = 0 * b - 1 * k;
                l = (1 * (H - l) - 0 * b) * (1 / e);
                b = a;
                a = H - max_distance_below;
                e = 0 * b - 1 * k;
                k = (1 * a - 0 * b) * (1 / e);
                a = Math.min(l, k);
                if (Math.max(l, k) - a < x) {
                    return d = G[I].x - G[0].x, m = G[I].y - G[0].y, f[0] = 0 + 1 * (d * (G[0].y - 0) - m * (G[0].x - 0)) * (1 / (0 * d - 1 * m)), 1
                }
        }
        q(G, I, 0.5, g, h);
        G = p(g, I, d, c + 1);
        I = p(h, I, m, c + 1);
        for (c = 0; c < G; c++) {
            f[c] = d[c]
        }
        for (c = 0; c < I; c++) {
            f[c + G] = m[c]
        }
        return G + I
    }, q = function(f, g, c, a, d) {
        for (var e = [[]], b = 0; b <= g; b++) {
            e[0][b] = f[b]
        }
        for (f = 1; f <= g; f++) {
            for (b = 0; b <= g - f; b++) {
                e[f] || (e[f] = []), e[f][b] || (e[f][b] = {}), e[f][b].x = (1 - c) * e[f - 1][b].x + c * e[f - 1][b + 1].x, e[f][b].y = (1 - c) * e[f - 1][b].y + c * e[f - 1][b + 1].y
            }
        }
        if (null != a) {
            for (b = 0; b <= g; b++) {
                a[b] = e[b][0]
            }
        }
        if (null != d) {
            for (b = 0; b <= g; b++) {
                d[b] = e[g - b][b]
            }
        }
        return e[g][0]
    }, u = {}, n = function(f, g) {
        var m, k = f.length - 1;
        m = u[k];
        if (!m) {
            m = [];
            var a = function(B) {
                return function() {
                    return B
                }
            }, b = function() {
                return function(B) {
                    return B
                }
            }, l = function() {
                return function(B) {
                    return 1 - B
                }
            }, e = function(B) {
                return function(F) {
                    for (var A = 1, E = 0; E < B.length; E++) {
                        A *= B[E](F)
                    }
                    return A
                }
            };
            m.push(new function() {
                return function(B) {
                    return Math.pow(B, k)
                }
            });
            for (var c = 1; c < k; c++) {
                for (var d = [new a(k)], h = 0; h < k - c; h++) {
                    d.push(new b)
                }
                for (h = 0; h < c; h++) {
                    d.push(new l)
                }
                m.push(new e(d))
            }
            m.push(new function() {
                return function(B) {
                    return Math.pow(1 - B, k)
                }
            });
            u[k] = m
        }
        for (l = b = a = 0; l < f.length; l++) {
            a += f[l].x * m[l](g), b += f[l].y * m[l](g)
        }
        return{x: a, y: b}
    }, v = function(a, b) {
        return Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2))
    }, w = function(a) {
        return a[0].x == a[1].x && a[0].y == a[1].y
    }, o = function(f, g, c) {
        if (w(f)) {
            return{point: f[0], location: g}
        }
        for (var a = n(f, g), d = 0, e = 0 < c ? 1 : -1, b = null; d < Math.abs(c); ) {
            g += 0.005 * e, b = n(f, g), d += v(b, a), a = b
        }
        return{point: b, location: g}
    }, r = function(d, e) {
        var b = n(d, e), a = n(d.slice(0, d.length - 1), e), c = a.y - b.y, b = a.x - b.x;
        return 0 == c ? Infinity : Math.atan(c / b)
    };
    window.jsBezier = {distanceFromCurve: s, gradientAtPoint: r, gradientAtPointAlongCurveFrom: function(b, c, a) {
            c = o(b, c, a);
            1 < c.location && (c.location = 1);
            0 > c.location && (c.location = 0);
            return r(b, c.location)
        }, nearestPointOnCurve: function(b, c) {
            var a = s(b, c);
            return{point: q(c, c.length - 1, a.location, null, null), location: a.location}
        }, pointOnCurve: n, pointAlongCurveFrom: function(b, c, a) {
            return o(b, c, a).point
        }, perpendicularToCurveAt: function(c, d, b, a) {
            d = o(c, d, null == a ? 0 : a);
            c = r(c, d.location);
            a = Math.atan(-1 / c);
            c = b / 2 * Math.sin(a);
            b = b / 2 * Math.cos(a);
            return[{x: d.point.x + b, y: d.point.y + c}, {x: d.point.x - b, y: d.point.y - c}]
        }, locationAlongCurveFrom: function(b, c, a) {
            return o(b, c, a).location
        }, getLength: function(d) {
            if (w(d)) {
                return 0
            }
            for (var e = n(d, 0), b = 0, a = 0, c = null; 1 > a; ) {
                a += 0.005, c = n(d, a), b += v(c, e), e = c
            }
            return b
        }}
})();
(function($) {
    $.fn.markItUp = function(settings, extraSettings) {
        var method, params, options, ctrlKey, shiftKey, altKey;
        ctrlKey = shiftKey = altKey = false;
        if (typeof settings == "string") {
            method = settings;
            params = extraSettings
        }
        options = {id: "", nameSpace: "", root: "", previewHandler: false, previewInWindow: "", previewInElement: "", previewAutoRefresh: true, previewPosition: "after", previewTemplatePath: "~/templates/preview.html", previewParser: false, previewParserPath: "", previewParserVar: "data", resizeHandle: true, beforeInsert: "", afterInsert: "", onEnter: {}, onShiftEnter: {}, onCtrlEnter: {}, onTab: {}, markupSet: [{}]};
        $.extend(options, settings, extraSettings);
        if (!options.root) {
            $("script").each(function(a, tag) {
                miuScript = $(tag).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/);
                if (miuScript !== null) {
                    options.root = miuScript[1]
                }
            })
        }
        var uaMatch = function(ua) {
            ua = ua.toLowerCase();
            var match = /(chrome)[ \/]([\w.]+)/.exec(ua) || /(webkit)[ \/]([\w.]+)/.exec(ua) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua) || /(msie) ([\w.]+)/.exec(ua) || ua.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua) || [];
            return{browser: match[1] || "", version: match[2] || "0"}
        };
        var matched = uaMatch(navigator.userAgent);
        var browser = {};
        if (matched.browser) {
            browser[matched.browser] = true;
            browser.version = matched.version
        }
        if (browser.chrome) {
            browser.webkit = true
        } else {
            if (browser.webkit) {
                browser.safari = true
            }
        }
        return this.each(function() {
            var $$, textarea, levels, scrollPosition, caretPosition, caretOffset, clicked, hash, header, footer, previewWindow, template, iFrame, abort;
            $$ = $(this);
            textarea = this;
            levels = [];
            abort = false;
            scrollPosition = caretPosition = 0;
            caretOffset = -1;
            options.previewParserPath = localize(options.previewParserPath);
            options.previewTemplatePath = localize(options.previewTemplatePath);
            if (method) {
                switch (method) {
                    case"remove":
                        remove();
                        break;
                    case"insert":
                        markup(params);
                        break;
                    default:
                        $.error("Method " + method + " does not exist on jQuery.markItUp")
                }
                return
            }
            function localize(data, inText) {
                if (inText) {
                    return data.replace(/("|')~\//g, "$1" + options.root)
                }
                return data.replace(/^~\//, options.root)
            }
            function init() {
                id = "";
                nameSpace = "";
                if (options.id) {
                    id = 'id="' + options.id + '"'
                } else {
                    if ($$.attr("id")) {
                        id = 'id="markItUp' + ($$.attr("id").substr(0, 1).toUpperCase()) + ($$.attr("id").substr(1)) + '"'
                    }
                }
                if (options.nameSpace) {
                    nameSpace = 'class="' + options.nameSpace + '"'
                }
                $$.wrap("<div " + nameSpace + "></div>");
                $$.wrap("<div " + id + ' class="markItUp"></div>');
                $$.wrap('<div class="markItUpContainer"></div>');
                $$.addClass("markItUpEditor");
                header = $('<div class="markItUpHeader"></div>').insertBefore($$);
                $(dropMenus(options.markupSet)).appendTo(header);
                footer = $('<div class="markItUpFooter"></div>').insertAfter($$);
                if (options.resizeHandle === true && browser.safari !== true) {
                    resizeHandle = $('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown.markItUp", function(e) {
                        var h = $$.height(), y = e.clientY, mouseMove, mouseUp;
                        mouseMove = function(e) {
                            $$.css("height", Math.max(20, e.clientY + h - y) + "px");
                            return false
                        };
                        mouseUp = function(e) {
                            $("html").unbind("mousemove.markItUp", mouseMove).unbind("mouseup.markItUp", mouseUp);
                            return false
                        };
                        $("html").bind("mousemove.markItUp", mouseMove).bind("mouseup.markItUp", mouseUp)
                    });
                    footer.append(resizeHandle)
                }
                $$.bind("keydown.markItUp", keyPressed).bind("keyup", keyPressed);
                $$.bind("insertion.markItUp", function(e, settings) {
                    if (settings.target !== false) {
                        get()
                    }
                    if (textarea === $.markItUp.focused) {
                        markup(settings)
                    }
                });
                $$.bind("focus.markItUp", function() {
                    $.markItUp.focused = this
                });
                if (options.previewInElement) {
                    refreshPreview()
                }
            }
            function dropMenus(markupSet) {
                var ul = $("<ul></ul>"), i = 0;
                $.each(markupSet, function() {
                    var button = this, t = "", title, li, j;
                    title = (button.key) ? (button.name || "") + " [Ctrl+" + button.key + "]" : (button.name || "");
                    key = (button.key) ? 'accesskey="' + button.key + '"' : "";
                    if (button.separator) {
                        li = $('<li class="markItUpSeparator">' + (button.separator || "") + "</li>").appendTo(ul)
                    } else {
                        i++;
                        for (j = levels.length - 1; j >= 0; j--) {
                            t += levels[j] + "-"
                        }
                        li = $('<li class="markItUpButton markItUpButton' + t + (i) + " " + (button.className || "") + '"><a href="" ' + key + ' title="' + title + '">' + (button.name || "") + "</a></li>").bind("contextmenu.markItUp", function() {
                            return false
                        }).appendTo(ul);
                        if (!isMobile) {
                            li.unbind("click.markItUp").bind("click.markItUp", function() {
                                if (button.call) {
                                    eval(button.call)()
                                } else {
                                    var $innerUL = $(">ul", li);
                                    if ($innerUL.length > 0) {
                                        $innerUL.parents(".ui-dialog").find(".ui-dialog-titlebar-close").on("click", function() {
                                            $innerUL.hide()
                                        });
                                        $innerUL.addClass("markItUpOutpost");
                                        $("body").append($innerUL);
                                        var randomId = Math.ceil(Math.random() * 10000);
                                        li.attr("id", "markitUpDropdown" + randomId);
                                        $innerUL.attr("rel", "markitUpDropdown" + randomId);
                                        $innerUL.find(">li").bind("click.markItUp", function() {
                                            $innerUL.hide();
                                            li.attr("data-opened", 0)
                                        });
                                        $(window).on("resize", function(e) {
                                            repositionDropdowns($innerUL, li)
                                        })
                                    } else {
                                        $innerUL = $('body>ul[rel="' + li.attr("id") + '"]')
                                    }
                                    $("html").one("click.markItUp2", function() {
                                        $innerUL.hide();
                                        li.attr("data-opened", 0)
                                    });
                                    repositionDropdowns($innerUL, li);
                                    if ($innerUL.filter(":visible").length) {
                                        $innerUL.hide();
                                        li.attr("data-opened", 0)
                                    } else {
                                        $innerUL.show();
                                        li.attr("data-opened", 1)
                                    }
                                }
                                setTimeout(function() {
                                    markup(button)
                                }, 1);
                                return false
                            }).bind("focusin.markItUp", function() {
                                $$.focus()
                            })
                        } else {
                            li.bind("click.markItUp", function() {
                                $(header).find("ul ul").hide();
                                if ($(this).find("> ul").length) {
                                    $(this).find("> ul").show()
                                } else {
                                    if (button.call) {
                                        eval(button.call)()
                                    }
                                    setTimeout(function() {
                                        markup(button)
                                    }, 1)
                                }
                                return false
                            })
                        }
                        if (button.dropMenu) {
                            levels.push(i);
                            $(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu));
                            var dropDownArr = $('<span class="dropdown_arr"></span>');
                            $(li).append(dropDownArr)
                        }
                    }
                });
                levels.pop();
                return ul
            }
            function repositionDropdowns($innerUL, li) {
                var ulHeight = $innerUL.outerHeight();
                var top;
                var dropDownTop = Math.ceil(li.offset().top);
                if (dropDownTop + li.height() + ulHeight + $("#siteFooter").outerHeight() >= $(window).innerHeight() + $(window).scrollTop()) {
                    top = dropDownTop - ulHeight - 2
                } else {
                    top = dropDownTop + 29
                }
                $innerUL.css({top: top, left: Math.floor(li.offset()["left"])})
            }
            function magicMarkups(string) {
                if (string) {
                    string = string.toString();
                    string = string.replace(/\(\!\(([\s\S]*?)\)\!\)/g, function(x, a) {
                        var b = a.split("|!|");
                        if (altKey === true) {
                            return(b[1] !== undefined) ? b[1] : b[0]
                        } else {
                            return(b[1] === undefined) ? "" : b[0]
                        }
                    });
                    string = string.replace(/\[\!\[([\s\S]*?)\]\!\]/g, function(x, a) {
                        var b = a.split(":!:");
                        if (abort === true) {
                            return false
                        }
                        value = prompt(b[0], (b[1]) ? b[1] : "");
                        if (value === null) {
                            abort = true
                        }
                        return value
                    });
                    return string
                }
                return""
            }
            function prepare(action) {
                if ($.isFunction(action)) {
                    action = action(hash)
                }
                return magicMarkups(action)
            }
            function build(string) {
                var openWith = prepare(clicked.openWith);
                var placeHolder = prepare(clicked.placeHolder);
                var replaceWith = prepare(clicked.replaceWith);
                var closeWith = prepare(clicked.closeWith);
                var openBlockWith = prepare(clicked.openBlockWith);
                var closeBlockWith = prepare(clicked.closeBlockWith);
                var multiline = clicked.multiline;
                if (replaceWith !== "") {
                    block = openWith + replaceWith + closeWith
                } else {
                    if (selection === "" && placeHolder !== "") {
                        block = openWith + placeHolder + closeWith
                    } else {
                        string = string || selection;
                        var lines = [string], blocks = [];
                        if (multiline === true) {
                            lines = string.split(/\r?\n/)
                        }
                        for (var l = 0; l < lines.length; l++) {
                            line = lines[l];
                            var trailingSpaces;
                            if (trailingSpaces = line.match(/ *$/)) {
                                blocks.push(openWith + line.replace(/ *$/g, "") + closeWith + trailingSpaces)
                            } else {
                                blocks.push(openWith + line + closeWith)
                            }
                        }
                        block = blocks.join("\n")
                    }
                }
                block = openBlockWith + block + closeBlockWith;
                return{block: block, openBlockWith: openBlockWith, openWith: openWith, replaceWith: replaceWith, placeHolder: placeHolder, closeWith: closeWith, closeBlockWith: closeBlockWith}
            }
            function markup(button) {
                var len, j, n, i;
                hash = clicked = button;
                get();
                $.extend(hash, {line: "", root: options.root, textarea: textarea, selection: (selection || ""), caretPosition: caretPosition, ctrlKey: ctrlKey, shiftKey: shiftKey, altKey: altKey});
                prepare(options.beforeInsert);
                prepare(clicked.beforeInsert);
                if ((ctrlKey === true && shiftKey === true) || button.multiline === true) {
                    prepare(clicked.beforeMultiInsert)
                }
                $.extend(hash, {line: 1});
                if ((ctrlKey === true && shiftKey === true)) {
                    lines = selection.split(/\r?\n/);
                    for (j = 0, n = lines.length, i = 0; i < n; i++) {
                        if ($.trim(lines[i]) !== "") {
                            $.extend(hash, {line: ++j, selection: lines[i]});
                            lines[i] = build(lines[i]).block
                        } else {
                            lines[i] = ""
                        }
                    }
                    string = {block: lines.join("\n")};
                    start = caretPosition;
                    len = string.block.length + ((browser.opera) ? n - 1 : 0)
                } else {
                    if (ctrlKey === true) {
                        string = build(selection);
                        start = caretPosition + string.openWith.length;
                        len = string.block.length - string.openWith.length - string.closeWith.length;
                        len = len - (string.block.match(/ $/) ? 1 : 0);
                        len -= fixIeBug(string.block)
                    } else {
                        if (shiftKey === true) {
                            string = build(selection);
                            start = caretPosition;
                            len = string.block.length;
                            len -= fixIeBug(string.block)
                        } else {
                            string = build(selection);
                            start = caretPosition + string.block.length;
                            len = 0;
                            start -= fixIeBug(string.block)
                        }
                    }
                }
                if ((selection === "" && string.replaceWith === "")) {
                    caretOffset += fixOperaBug(string.block);
                    start = caretPosition + string.openBlockWith.length + string.openWith.length;
                    len = string.block.length - string.openBlockWith.length - string.openWith.length - string.closeWith.length - string.closeBlockWith.length;
                    caretOffset = $$.val().substring(caretPosition, $$.val().length).length;
                    caretOffset -= fixOperaBug($$.val().substring(0, caretPosition))
                }
                $.extend(hash, {caretPosition: caretPosition, scrollPosition: scrollPosition});
                if (string.block !== selection && abort === false) {
                    insert(string.block);
                    set(start, len)
                } else {
                    caretOffset = -1
                }
                get();
                $.extend(hash, {line: "", selection: selection});
                if ((ctrlKey === true && shiftKey === true) || button.multiline === true) {
                    prepare(clicked.afterMultiInsert)
                }
                prepare(clicked.afterInsert);
                prepare(options.afterInsert);
                if (previewWindow && options.previewAutoRefresh) {
                    refreshPreview()
                }
                shiftKey = altKey = ctrlKey = abort = false
            }
            function fixOperaBug(string) {
                if (browser.opera) {
                    return string.length - string.replace(/\n*/g, "").length
                }
                return 0
            }
            function fixIeBug(string) {
                if (browser.msie) {
                    return string.length - string.replace(/\r*/g, "").length
                }
                return 0
            }
            function insert(block) {
                if (document.selection) {
                    var newSelection = document.selection.createRange();
                    newSelection.text = block
                } else {
                    textarea.value = textarea.value.substring(0, caretPosition) + block + textarea.value.substring(caretPosition + selection.length, textarea.value.length)
                }
            }
            function set(start, len) {
                if (textarea.createTextRange) {
                    if (browser.opera && browser.version >= 9.5 && len == 0) {
                        return false
                    }
                    range = textarea.createTextRange();
                    range.collapse(true);
                    range.moveStart("character", start);
                    range.moveEnd("character", len);
                    range.select()
                } else {
                    if (textarea.setSelectionRange) {
                        textarea.setSelectionRange(start, start + len)
                    }
                }
                textarea.scrollTop = scrollPosition;
                textarea.focus()
            }
            function get() {
                textarea.focus();
                scrollPosition = textarea.scrollTop;
                if (document.selection) {
                    selection = document.selection.createRange().text;
                    if (browser.msie) {
                        var range = document.selection.createRange(), rangeCopy = range.duplicate();
                        rangeCopy.moveToElementText(textarea);
                        caretPosition = -1;
                        while (rangeCopy.inRange(range)) {
                            rangeCopy.moveStart("character");
                            caretPosition++
                        }
                    } else {
                        caretPosition = textarea.selectionStart
                    }
                } else {
                    caretPosition = textarea.selectionStart;
                    selection = textarea.value.substring(caretPosition, textarea.selectionEnd)
                }
                return selection
            }
            function preview() {
                if (typeof options.previewHandler === "function") {
                    previewWindow = true
                } else {
                    if (options.previewInElement) {
                        previewWindow = $(options.previewInElement)
                    } else {
                        if (!previewWindow || previewWindow.closed) {
                            if (options.previewInWindow) {
                                previewWindow = window.open("", "preview", options.previewInWindow);
                                $(window).unload(function() {
                                    previewWindow.close()
                                })
                            } else {
                                iFrame = $('<iframe class="markItUpPreviewFrame"></iframe>');
                                if (options.previewPosition == "after") {
                                    iFrame.insertAfter(footer)
                                } else {
                                    iFrame.insertBefore(header)
                                }
                                previewWindow = iFrame[iFrame.length - 1].contentWindow || frame[iFrame.length - 1]
                            }
                        } else {
                            if (altKey === true) {
                                if (iFrame) {
                                    iFrame.remove()
                                } else {
                                    previewWindow.close()
                                }
                                previewWindow = iFrame = false
                            }
                        }
                    }
                }
                if (!options.previewAutoRefresh) {
                    refreshPreview()
                }
                if (options.previewInWindow) {
                    previewWindow.focus()
                }
            }
            function refreshPreview() {
                renderPreview()
            }
            function renderPreview() {
                var phtml;
                if (options.previewHandler && typeof options.previewHandler === "function") {
                    options.previewHandler($$.val())
                } else {
                    if (options.previewParser && typeof options.previewParser === "function") {
                        var data = options.previewParser($$.val());
                        writeInPreview(localize(data, 1))
                    } else {
                        if (options.previewParserPath !== "") {
                            $.ajax({type: "POST", dataType: "text", global: false, url: options.previewParserPath, data: options.previewParserVar + "=" + encodeURIComponent($$.val()), success: function(data) {
                                    writeInPreview(localize(data, 1))
                                }})
                        } else {
                            if (!template) {
                                $.ajax({url: options.previewTemplatePath, dataType: "text", global: false, success: function(data) {
                                        writeInPreview(localize(data, 1).replace(/<!-- content -->/g, $$.val()))
                                    }})
                            }
                        }
                    }
                }
                return false
            }
            function writeInPreview(data) {
                if (options.previewInElement) {
                    $(options.previewInElement).html(data)
                } else {
                    if (previewWindow && previewWindow.document) {
                        try {
                            sp = previewWindow.document.documentElement.scrollTop
                        } catch (e) {
                            sp = 0
                        }
                        previewWindow.document.open();
                        previewWindow.document.write(data);
                        previewWindow.document.close();
                        previewWindow.document.documentElement.scrollTop = sp
                    }
                }
            }
            function keyPressed(e) {
                shiftKey = e.shiftKey;
                altKey = e.altKey;
                ctrlKey = (!(e.altKey && e.ctrlKey)) ? (e.ctrlKey || e.metaKey) : false;
                if (e.type === "keydown") {
                    if (ctrlKey === true) {
                        li = $('a[accesskey="' + ((e.keyCode == 13) ? "\\n" : String.fromCharCode(e.keyCode)) + '"]', header).parent("li");
                        if (li.length !== 0) {
                            ctrlKey = false;
                            setTimeout(function() {
                                li.triggerHandler("mouseup")
                            }, 1);
                            return false
                        }
                    }
                    if (e.keyCode === 13 || e.keyCode === 10) {
                        if (ctrlKey === true) {
                            ctrlKey = false;
                            markup(options.onCtrlEnter);
                            return options.onCtrlEnter.keepDefault
                        } else {
                            if (shiftKey === true) {
                                shiftKey = false;
                                markup(options.onShiftEnter);
                                return options.onShiftEnter.keepDefault
                            } else {
                                markup(options.onEnter);
                                return options.onEnter.keepDefault
                            }
                        }
                    }
                    if (e.keyCode === 9) {
                        if (shiftKey == true || ctrlKey == true || altKey == true) {
                            return false
                        }
                        if (caretOffset !== -1) {
                            get();
                            caretOffset = $$.val().length - caretOffset;
                            set(caretOffset, 0);
                            caretOffset = -1;
                            return false
                        } else {
                            markup(options.onTab);
                            return options.onTab.keepDefault
                        }
                    }
                }
            }
            function remove() {
                $$.unbind(".markItUp").removeClass("markItUpEditor");
                $$.parent("div").parent("div.markItUp").parent("div").replaceWith($$);
                $$.data("markItUp", null)
            }
            init()
        })
    };
    $.fn.markItUpRemove = function() {
        return this.each(function() {
            $(this).markItUp("remove")
        })
    };
    $.markItUp = function(settings) {
        var options = {target: false};
        $.extend(options, settings);
        if (options.target) {
            return $(options.target).each(function() {
                $(this).focus();
                $(this).trigger("insertion", [options])
            })
        } else {
            $("textarea").trigger("insertion", [options])
        }
    }
})(jQuery);
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */
(function(g) {
    var e = ["DOMMouseScroll", "mousewheel"];
    if (g.event.fixHooks) {
        for (var f = e.length; f; ) {
            g.event.fixHooks[e[--f]] = g.event.mouseHooks
        }
    }
    g.event.special.mousewheel = {setup: function() {
            if (this.addEventListener) {
                for (var a = e.length; a; ) {
                    this.addEventListener(e[--a], h, false)
                }
            } else {
                this.onmousewheel = h
            }
        }, teardown: function() {
            if (this.removeEventListener) {
                for (var a = e.length; a; ) {
                    this.removeEventListener(e[--a], h, false)
                }
            } else {
                this.onmousewheel = null
            }
        }};
    g.fn.extend({mousewheel: function(a) {
            return a ? this.bind("mousewheel", a) : this.trigger("mousewheel")
        }, unmousewheel: function(a) {
            return this.unbind("mousewheel", a)
        }});
    function h(b) {
        var d = b || window.event, n = [].slice.call(arguments, 1), a = 0, c = true, o = 0, p = 0;
        b = g.event.fix(d);
        b.type = "mousewheel";
        if (d.wheelDelta) {
            a = d.wheelDelta / 120
        }
        if (d.detail) {
            a = -d.detail / 3
        }
        p = a;
        if (d.axis !== undefined && d.axis === d.HORIZONTAL_AXIS) {
            p = 0;
            o = -1 * a
        }
        if (d.wheelDeltaY !== undefined) {
            p = d.wheelDeltaY / 120
        }
        if (d.wheelDeltaX !== undefined) {
            o = -1 * d.wheelDeltaX / 120
        }
        n.unshift(b, a, o, p);
        return(g.event.dispatch || g.event.handle).apply(this, n)
    }}
)(jQuery);
(function($) {
    $.extend({tablesorter: new function() {
            var parsers = [], widgets = [];
            this.defaults = {cssHeader: "header", cssAsc: "headerSortUp", cssDesc: "headerSortDown", cssChildRow: "expand-child", sortInitialOrder: "asc", sortMultiSortKey: "shiftKey", sortForce: null, sortAppend: null, sortLocaleCompare: true, textExtraction: "simple", parsers: {}, widgets: [], widgetZebra: {css: ["even", "odd"]}, headers: {}, widthFixed: false, cancelSelection: true, sortList: [], headerList: [], dateFormat: "us", decimal: "/.|,/g", onRenderHeader: null, selectorHeaders: "thead th", debug: false};
            function benchmark(s, d) {
                log(s + "," + (new Date().getTime() - d.getTime()) + "ms")
            }
            this.benchmark = benchmark;
            function log(s) {
                if (typeof console != "undefined" && typeof console.debug != "undefined") {
                    console.log(s)
                } else {
                    alert(s)
                }
            }
            function buildParserCache(table, $headers) {
                if (table.config.debug) {
                    var parsersDebug = ""
                }
                if (table.tBodies.length == 0) {
                    return
                }
                var rows = table.tBodies[0].rows;
                if (rows[0]) {
                    var list = [], cells = rows[0].cells, l = cells.length;
                    for (var i = 0; i < l; i++) {
                        var p = false;
                        if ($.metadata && ($($headers[i]).metadata() && $($headers[i]).metadata().sorter)) {
                            p = getParserById($($headers[i]).metadata().sorter)
                        } else {
                            if ((table.config.headers[i] && table.config.headers[i].sorter)) {
                                p = getParserById(table.config.headers[i].sorter)
                            }
                        }
                        if (!p) {
                            p = detectParserForColumn(table, rows, -1, i)
                        }
                        if (table.config.debug) {
                            parsersDebug += "column:" + i + " parser:" + p.id + "\n"
                        }
                        list.push(p)
                    }
                }
                if (table.config.debug) {
                    log(parsersDebug)
                }
                return list
            }
            function detectParserForColumn(table, rows, rowIndex, cellIndex) {
                var l = parsers.length, node = false, nodeValue = false, keepLooking = true;
                while (nodeValue == "" && keepLooking) {
                    rowIndex++;
                    if (rows[rowIndex]) {
                        node = getNodeFromRowAndCellIndex(rows, rowIndex, cellIndex);
                        nodeValue = trimAndGetNodeText(table.config, node);
                        if (table.config.debug) {
                            log("Checking if value was empty on row:" + rowIndex)
                        }
                    } else {
                        keepLooking = false
                    }
                }
                for (var i = 1; i < l; i++) {
                    if (parsers[i].is(nodeValue, table, node)) {
                        return parsers[i]
                    }
                }
                return parsers[0]
            }
            function getNodeFromRowAndCellIndex(rows, rowIndex, cellIndex) {
                return rows[rowIndex].cells[cellIndex]
            }
            function trimAndGetNodeText(config, node) {
                return $.trim(getElementText(config, node))
            }
            function getParserById(name) {
                var l = parsers.length;
                for (var i = 0; i < l; i++) {
                    if (parsers[i].id.toLowerCase() == name.toLowerCase()) {
                        return parsers[i]
                    }
                }
                return false
            }
            function buildCache(table) {
                if (table.config.debug) {
                    var cacheTime = new Date()
                }
                var totalRows = (table.tBodies[0] && table.tBodies[0].rows.length) || 0, totalCells = (table.tBodies[0].rows[0] && table.tBodies[0].rows[0].cells.length) || 0, parsers = table.config.parsers, cache = {row: [], normalized: []};
                for (var i = 0; i < totalRows; ++i) {
                    var c = $(table.tBodies[0].rows[i]), cols = [];
                    if (c.hasClass(table.config.cssChildRow)) {
                        cache.row[cache.row.length - 1] = cache.row[cache.row.length - 1].add(c);
                        continue
                    }
                    cache.row.push(c);
                    for (var j = 0; j < totalCells; ++j) {
                        cols.push(parsers[j].format(getElementText(table.config, c[0].cells[j]), table, c[0].cells[j]))
                    }
                    cols.push(cache.normalized.length);
                    cache.normalized.push(cols);
                    cols = null
                }
                if (table.config.debug) {
                    benchmark("Building cache for " + totalRows + " rows:", cacheTime)
                }
                return cache
            }
            function getElementText(config, node) {
                var text = "";
                if (!node) {
                    return""
                }
                if (!config.supportsTextContent) {
                    config.supportsTextContent = node.textContent || false
                }
                if (config.textExtraction == "simple") {
                    if (config.supportsTextContent) {
                        text = node.textContent
                    } else {
                        if (node.childNodes[0] && node.childNodes[0].hasChildNodes()) {
                            text = node.childNodes[0].innerHTML
                        } else {
                            text = node.innerHTML
                        }
                    }
                } else {
                    if (typeof (config.textExtraction) == "function") {
                        text = config.textExtraction(node)
                    } else {
                        text = $(node).text()
                    }
                }
                return text
            }
            function appendToTable(table, cache) {
                if (table.config.debug) {
                    var appendTime = new Date()
                }
                var c = cache, r = c.row, n = c.normalized, totalRows = n.length, checkCell = (n[0].length - 1), tableBody = $(table.tBodies[0]), rows = [];
                for (var i = 0; i < totalRows; i++) {
                    var pos = n[i][checkCell];
                    rows.push(r[pos]);
                    if (!table.config.appender) {
                        var l = r[pos].length;
                        for (var j = 0; j < l; j++) {
                            tableBody[0].appendChild(r[pos][j])
                        }
                    }
                }
                if (table.config.appender) {
                    table.config.appender(table, rows)
                }
                rows = null;
                if (table.config.debug) {
                    benchmark("Rebuilt table:", appendTime)
                }
                applyWidget(table);
                setTimeout(function() {
                    $(table).trigger("sortEnd")
                }, 0)
            }
            function buildHeaders(table) {
                if (table.config.debug) {
                    var time = new Date()
                }
                var meta = ($.metadata) ? true : false;
                var header_index = computeTableHeaderCellIndexes(table);
                $tableHeaders = $(table.config.selectorHeaders, table).each(function(index) {
                    this.column = header_index[this.parentNode.rowIndex + "-" + this.cellIndex];
                    this.order = formatSortingOrder(table.config.sortInitialOrder);
                    this.count = this.order;
                    if (checkHeaderMetadata(this) || checkHeaderOptions(table, index)) {
                        this.sortDisabled = true
                    }
                    if (checkHeaderOptionsSortingLocked(table, index)) {
                        this.order = this.lockedOrder = checkHeaderOptionsSortingLocked(table, index)
                    }
                    if (!this.sortDisabled) {
                        var $th = $(this).addClass(table.config.cssHeader);
                        if (table.config.onRenderHeader) {
                            table.config.onRenderHeader.apply($th)
                        }
                    }
                    table.config.headerList[index] = this
                });
                if (table.config.debug) {
                    benchmark("Built headers:", time);
                    log($tableHeaders)
                }
                return $tableHeaders
            }
            function computeTableHeaderCellIndexes(t) {
                var matrix = [];
                var lookup = {};
                var thead = t.getElementsByTagName("THEAD")[0];
                var trs = thead.getElementsByTagName("TR");
                for (var i = 0; i < trs.length; i++) {
                    var cells = trs[i].cells;
                    for (var j = 0; j < cells.length; j++) {
                        var c = cells[j];
                        var rowIndex = c.parentNode.rowIndex;
                        var cellId = rowIndex + "-" + c.cellIndex;
                        var rowSpan = c.rowSpan || 1;
                        var colSpan = c.colSpan || 1;
                        var firstAvailCol;
                        if (typeof (matrix[rowIndex]) == "undefined") {
                            matrix[rowIndex] = []
                        }
                        for (var k = 0; k < matrix[rowIndex].length + 1; k++) {
                            if (typeof (matrix[rowIndex][k]) == "undefined") {
                                firstAvailCol = k;
                                break
                            }
                        }
                        lookup[cellId] = firstAvailCol;
                        for (var k = rowIndex; k < rowIndex + rowSpan; k++) {
                            if (typeof (matrix[k]) == "undefined") {
                                matrix[k] = []
                            }
                            var matrixrow = matrix[k];
                            for (var l = firstAvailCol; l < firstAvailCol + colSpan; l++) {
                                matrixrow[l] = "x"
                            }
                        }
                    }
                }
                return lookup
            }
            function checkCellColSpan(table, rows, row) {
                var arr = [], r = table.tHead.rows, c = r[row].cells;
                for (var i = 0; i < c.length; i++) {
                    var cell = c[i];
                    if (cell.colSpan > 1) {
                        arr = arr.concat(checkCellColSpan(table, headerArr, row++))
                    } else {
                        if (table.tHead.length == 1 || (cell.rowSpan > 1 || !r[row + 1])) {
                            arr.push(cell)
                        }
                    }
                }
                return arr
            }
            function checkHeaderMetadata(cell) {
                if (($.metadata) && ($(cell).metadata().sorter === false)) {
                    return true
                }
                return false
            }
            function checkHeaderOptions(table, i) {
                if ((table.config.headers[i]) && (table.config.headers[i].sorter === false)) {
                    return true
                }
                return false
            }
            function checkHeaderOptionsSortingLocked(table, i) {
                if ((table.config.headers[i]) && (table.config.headers[i].lockedOrder)) {
                    return table.config.headers[i].lockedOrder
                }
                return false
            }
            function applyWidget(table) {
                var c = table.config.widgets;
                var l = c.length;
                for (var i = 0; i < l; i++) {
                    getWidgetById(c[i]).format(table)
                }
            }
            function getWidgetById(name) {
                var l = widgets.length;
                for (var i = 0; i < l; i++) {
                    if (widgets[i].id.toLowerCase() == name.toLowerCase()) {
                        return widgets[i]
                    }
                }
            }
            function formatSortingOrder(v) {
                if (typeof (v) != "Number") {
                    return(v.toLowerCase() == "desc") ? 1 : 0
                } else {
                    return(v == 1) ? 1 : 0
                }
            }
            function isValueInArray(v, a) {
                var l = a.length;
                for (var i = 0; i < l; i++) {
                    if (a[i][0] == v) {
                        return true
                    }
                }
                return false
            }
            function setHeadersCss(table, $headers, list, css) {
                $headers.removeClass(css[0]).removeClass(css[1]);
                var h = [];
                $headers.each(function(offset) {
                    if (!this.sortDisabled) {
                        h[this.column] = $(this)
                    }
                });
                var l = list.length;
                for (var i = 0; i < l; i++) {
                    h[list[i][0]].addClass(css[list[i][1]])
                }
            }
            function fixColumnWidth(table, $headers) {
                var c = table.config;
                if (c.widthFixed) {
                    var colgroup = $("<colgroup>");
                    $("tr:first td", table.tBodies[0]).each(function() {
                        colgroup.append($("<col>").css("width", $(this).width()))
                    });
                    $(table).prepend(colgroup)
                }
            }
            function updateHeaderSortCount(table, sortList) {
                var c = table.config, l = sortList.length;
                for (var i = 0; i < l; i++) {
                    var s = sortList[i], o = c.headerList[s[0]];
                    o.count = s[1];
                    o.count++
                }
            }
            function multisort(table, sortList, cache) {
                if (table.config.debug) {
                    var sortTime = new Date()
                }
                var dynamicExp = "var sortWrapper = function(a,b) {", l = sortList.length;
                for (var i = 0; i < l; i++) {
                    var c = sortList[i][0];
                    var order = sortList[i][1];
                    var s = (table.config.parsers[c].type == "text") ? ((order == 0) ? makeSortFunction("text", "asc", c) : makeSortFunction("text", "desc", c)) : ((order == 0) ? makeSortFunction("numeric", "asc", c) : makeSortFunction("numeric", "desc", c));
                    var e = "e" + i;
                    dynamicExp += "var " + e + " = " + s;
                    dynamicExp += "if(" + e + ") { return " + e + "; } ";
                    dynamicExp += "else { "
                }
                var orgOrderCol = cache.normalized[0].length - 1;
                dynamicExp += "return a[" + orgOrderCol + "]-b[" + orgOrderCol + "];";
                for (var i = 0; i < l; i++) {
                    dynamicExp += "}; "
                }
                dynamicExp += "return 0; ";
                dynamicExp += "}; ";
                if (table.config.debug) {
                    benchmark("Evaling expression:" + dynamicExp, new Date())
                }
                eval(dynamicExp);
                cache.normalized.sort(sortWrapper);
                if (table.config.debug) {
                    benchmark("Sorting on " + sortList.toString() + " and dir " + order + " time:", sortTime)
                }
                return cache
            }
            function makeSortFunction(type, direction, index) {
                var a = "a[" + index + "]", b = "b[" + index + "]";
                if (type == "text" && direction == "asc") {
                    return"(" + a + " == " + b + " ? 0 : (" + a + " === null ? Number.POSITIVE_INFINITY : (" + b + " === null ? Number.NEGATIVE_INFINITY : (" + a + " < " + b + ") ? -1 : 1 )));"
                } else {
                    if (type == "text" && direction == "desc") {
                        return"(" + a + " == " + b + " ? 0 : (" + a + " === null ? Number.POSITIVE_INFINITY : (" + b + " === null ? Number.NEGATIVE_INFINITY : (" + b + " < " + a + ") ? -1 : 1 )));"
                    } else {
                        if (type == "numeric" && direction == "asc") {
                            return"(" + a + " === null && " + b + " === null) ? 0 :(" + a + " === null ? Number.POSITIVE_INFINITY : (" + b + " === null ? Number.NEGATIVE_INFINITY : " + a + " - " + b + "));"
                        } else {
                            if (type == "numeric" && direction == "desc") {
                                return"(" + a + " === null && " + b + " === null) ? 0 :(" + a + " === null ? Number.POSITIVE_INFINITY : (" + b + " === null ? Number.NEGATIVE_INFINITY : " + b + " - " + a + "));"
                            }
                        }
                    }
                }
            }
            function makeSortText(i) {
                return"((a[" + i + "] < b[" + i + "]) ? -1 : ((a[" + i + "] > b[" + i + "]) ? 1 : 0));"
            }
            function makeSortTextDesc(i) {
                return"((b[" + i + "] < a[" + i + "]) ? -1 : ((b[" + i + "] > a[" + i + "]) ? 1 : 0));"
            }
            function makeSortNumeric(i) {
                return"a[" + i + "]-b[" + i + "];"
            }
            function makeSortNumericDesc(i) {
                return"b[" + i + "]-a[" + i + "];"
            }
            function sortText(a, b) {
                if (table.config.sortLocaleCompare) {
                    return a.localeCompare(b)
                }
                return((a < b) ? -1 : ((a > b) ? 1 : 0))
            }
            function sortTextDesc(a, b) {
                if (table.config.sortLocaleCompare) {
                    return b.localeCompare(a)
                }
                return((b < a) ? -1 : ((b > a) ? 1 : 0))
            }
            function sortNumeric(a, b) {
                return a - b
            }
            function sortNumericDesc(a, b) {
                return b - a
            }
            function getCachedSortType(parsers, i) {
                return parsers[i].type
            }
            this.construct = function(settings) {
                return this.each(function() {
                    if (!this.tHead || !this.tBodies) {
                        return
                    }
                    var $this, $document, $headers, cache, config, shiftDown = 0, sortOrder;
                    this.config = {};
                    config = $.extend(this.config, $.tablesorter.defaults, settings);
                    $this = $(this);
                    $.data(this, "tablesorter", config);
                    $headers = buildHeaders(this);
                    this.config.parsers = buildParserCache(this, $headers);
                    cache = buildCache(this);
                    var sortCSS = [config.cssDesc, config.cssAsc];
                    fixColumnWidth(this);
                    $headers.click(function(e) {
                        var totalRows = ($this[0].tBodies[0] && $this[0].tBodies[0].rows.length) || 0;
                        if (!this.sortDisabled && totalRows > 0) {
                            $this.trigger("sortStart");
                            var $cell = $(this);
                            var i = this.column;
                            this.order = this.count++ % 2;
                            if (this.lockedOrder) {
                                this.order = this.lockedOrder
                            }
                            if (!e[config.sortMultiSortKey]) {
                                config.sortList = [];
                                if (config.sortForce != null) {
                                    var a = config.sortForce;
                                    for (var j = 0; j < a.length; j++) {
                                        if (a[j][0] != i) {
                                            config.sortList.push(a[j])
                                        }
                                    }
                                }
                                config.sortList.push([i, this.order])
                            } else {
                                if (isValueInArray(i, config.sortList)) {
                                    for (var j = 0; j < config.sortList.length; j++) {
                                        var s = config.sortList[j], o = config.headerList[s[0]];
                                        if (s[0] == i) {
                                            o.count = s[1];
                                            o.count++;
                                            s[1] = o.count % 2
                                        }
                                    }
                                } else {
                                    config.sortList.push([i, this.order])
                                }
                            }
                            setTimeout(function() {
                                setHeadersCss($this[0], $headers, config.sortList, sortCSS);
                                appendToTable($this[0], multisort($this[0], config.sortList, cache))
                            }, 1);
                            return false
                        }
                    }).mousedown(function() {
                        if (config.cancelSelection) {
                            this.onselectstart = function() {
                                return false
                            };
                            return false
                        }
                    });
                    $this.bind("update", function() {
                        var me = this;
                        setTimeout(function() {
                            me.config.parsers = buildParserCache(me, $headers);
                            cache = buildCache(me)
                        }, 1)
                    }).bind("updateCell", function(e, cell) {
                        var config = this.config;
                        var pos = [(cell.parentNode.rowIndex - 1), cell.cellIndex];
                        cache.normalized[pos[0]][pos[1]] = config.parsers[pos[1]].format(getElementText(config, cell), cell)
                    }).bind("sorton", function(e, list) {
                        $(this).trigger("sortStart");
                        config.sortList = list;
                        var sortList = config.sortList;
                        updateHeaderSortCount(this, sortList);
                        setHeadersCss(this, $headers, sortList, sortCSS);
                        appendToTable(this, multisort(this, sortList, cache))
                    }).bind("appendCache", function() {
                        appendToTable(this, cache)
                    }).bind("applyWidgetId", function(e, id) {
                        getWidgetById(id).format(this)
                    }).bind("applyWidgets", function() {
                        applyWidget(this)
                    });
                    if ($.metadata && ($(this).metadata() && $(this).metadata().sortlist)) {
                        config.sortList = $(this).metadata().sortlist
                    }
                    if (config.sortList.length > 0) {
                        $this.trigger("sorton", [config.sortList])
                    }
                    applyWidget(this)
                })
            };
            this.addParser = function(parser) {
                var l = parsers.length, a = true;
                for (var i = 0; i < l; i++) {
                    if (parsers[i].id.toLowerCase() == parser.id.toLowerCase()) {
                        a = false
                    }
                }
                if (a) {
                    parsers.push(parser)
                }
            };
            this.addWidget = function(widget) {
                widgets.push(widget)
            };
            this.formatFloat = function(s) {
                var i = parseFloat(s);
                return(isNaN(i)) ? 0 : i
            };
            this.formatInt = function(s) {
                var i = parseInt(s);
                return(isNaN(i)) ? 0 : i
            };
            this.isDigit = function(s, config) {
                return/^[-+]?\d*$/.test($.trim(s.replace(/[,.']/g, "")))
            };
            this.clearTableBody = function(table) {
                if ($.browser.msie) {
                    function empty() {
                        while (this.firstChild) {
                            this.removeChild(this.firstChild)
                        }
                    }
                    empty.apply(table.tBodies[0])
                } else {
                    table.tBodies[0].innerHTML = ""
                }
            }
        }});
    $.fn.extend({tablesorter: $.tablesorter.construct});
    var ts = $.tablesorter;
    ts.addParser({id: "text", is: function(s) {
            return true
        }, format: function(s) {
            return $.trim(s.toLocaleLowerCase())
        }, type: "text"});
    ts.addParser({id: "digit", is: function(s, table) {
            var c = table.config;
            return $.tablesorter.isDigit(s, c)
        }, format: function(s) {
            return $.tablesorter.formatFloat(s)
        }, type: "numeric"});
    ts.addParser({id: "currency", is: function(s) {
            return/^[$?.]/.test(s)
        }, format: function(s) {
            return $.tablesorter.formatFloat(s.replace(new RegExp(/[$]/g), ""))
        }, type: "numeric"});
    ts.addParser({id: "ipAddress", is: function(s) {
            return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s)
        }, format: function(s) {
            var a = s.split("."), r = "", l = a.length;
            for (var i = 0; i < l; i++) {
                var item = a[i];
                if (item.length == 2) {
                    r += "0" + item
                } else {
                    r += item
                }
            }
            return $.tablesorter.formatFloat(r)
        }, type: "numeric"});
    ts.addParser({id: "url", is: function(s) {
            return/^(https?|ftp|file):\/\/$/.test(s)
        }, format: function(s) {
            return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//), ""))
        }, type: "text"});
    ts.addParser({id: "isoDate", is: function(s) {
            return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s)
        }, format: function(s) {
            return $.tablesorter.formatFloat((s != "") ? new Date(s.replace(new RegExp(/-/g), "/")).getTime() : "0")
        }, type: "numeric"});
    ts.addParser({id: "percent", is: function(s) {
            return/\%$/.test($.trim(s))
        }, format: function(s) {
            return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g), ""))
        }, type: "numeric"});
    ts.addParser({id: "usLongDate", is: function(s) {
            return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))
        }, format: function(s) {
            return $.tablesorter.formatFloat(new Date(s).getTime())
        }, type: "numeric"});
    ts.addParser({id: "shortDate", is: function(s) {
            return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s)
        }, format: function(s, table) {
            var c = table.config;
            s = s.replace(/\-/g, "/");
            if (c.dateFormat == "us") {
                s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, "$3/$1/$2")
            } else {
                if (c.dateFormat == "uk") {
                    s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/, "$3/$2/$1")
                } else {
                    if (c.dateFormat == "dd/mm/yy" || c.dateFormat == "dd-mm-yy") {
                        s = s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/, "$1/$2/$3")
                    }
                }
            }
            return $.tablesorter.formatFloat(new Date(s).getTime())
        }, type: "numeric"});
    ts.addParser({id: "time", is: function(s) {
            return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s)
        }, format: function(s) {
            return $.tablesorter.formatFloat(new Date("2000/01/01 " + s).getTime())
        }, type: "numeric"});
    ts.addParser({id: "metadata", is: function(s) {
            return false
        }, format: function(s, table, cell) {
            var c = table.config, p = (!c.parserMetadataName) ? "sortValue" : c.parserMetadataName;
            return $(cell).metadata()[p]
        }, type: "numeric"});
    ts.addWidget({id: "zebra", format: function(table) {
            if (table.config.debug) {
                var time = new Date()
            }
            var $tr, row = -1, odd;
            $("tr:visible", table.tBodies[0]).each(function(i) {
                $tr = $(this);
                if (!$tr.hasClass(table.config.cssChildRow)) {
                    row++
                }
                odd = (row % 2 == 0);
                $tr.removeClass(table.config.widgetZebra.css[odd ? 0 : 1]).addClass(table.config.widgetZebra.css[odd ? 1 : 0])
            });
            if (table.config.debug) {
                $.tablesorter.benchmark("Applying Zebra widget", time)
            }
        }})
})(jQuery);
(function(f) {
    var d = {init: function(b) {
            var a = this;
            if (!a.data("jqv") || a.data("jqv") == null) {
                b = d._saveOptions(a, b);
                f(document).on("click", ".formError", function() {
                    f(this).fadeOut(150, function() {
                        f(this).parent(".formErrorOuter").remove();
                        f(this).remove()
                    })
                })
            }
            return this
        }, attach: function(a) {
            var b = this;
            var c;
            if (a) {
                c = d._saveOptions(b, a)
            } else {
                c = b.data("jqv")
            }
            c.validateAttribute = (b.find("[data-validation-engine*=validate]").length) ? "data-validation-engine" : "class";
            if (c.binded) {
                b.on(c.validationEventTrigger, "[" + c.validateAttribute + "*=validate]:not([type=checkbox]):not([type=radio]):not(.datepicker)", d._onFieldEvent);
                b.on("click", "[" + c.validateAttribute + "*=validate][type=checkbox],[" + c.validateAttribute + "*=validate][type=radio]", d._onFieldEvent);
                b.on(c.validationEventTrigger, "[" + c.validateAttribute + "*=validate][class*=datepicker]", {delay: 300}, d._onFieldEvent)
            }
            if (c.autoPositionUpdate) {
                f(window).bind("resize", {noAnimation: true, formElem: b}, d.updatePromptsPosition)
            }
            b.on("click", "a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']", d._submitButtonClick);
            b.removeData("jqv_submitButton");
            b.on("submit", d._onSubmitEvent);
            return this
        }, detach: function() {
            var a = this;
            var b = a.data("jqv");
            a.find("[" + b.validateAttribute + "*=validate]").not("[type=checkbox]").off(b.validationEventTrigger, d._onFieldEvent);
            a.find("[" + b.validateAttribute + "*=validate][type=checkbox],[class*=validate][type=radio]").off("click", d._onFieldEvent);
            a.off("submit", d._onSubmitEvent);
            a.removeData("jqv");
            a.off("click", "a[data-validation-engine-skip], a[class*='validate-skip'], button[data-validation-engine-skip], button[class*='validate-skip'], input[data-validation-engine-skip], input[class*='validate-skip']", d._submitButtonClick);
            a.removeData("jqv_submitButton");
            if (b.autoPositionUpdate) {
                f(window).off("resize", d.updatePromptsPosition)
            }
            return this
        }, validate: function() {
            var c = f(this);
            var a = null;
            if (c.is("form") || c.hasClass("validationEngineContainer")) {
                if (c.hasClass("validating")) {
                    return false
                } else {
                    c.addClass("validating");
                    var h = c.data("jqv");
                    var a = d._validateFields(this);
                    setTimeout(function() {
                        c.removeClass("validating")
                    }, 100);
                    if (a && h.onSuccess) {
                        h.onSuccess()
                    } else {
                        if (!a && h.onFailure) {
                            h.onFailure()
                        }
                    }
                }
            } else {
                if (c.is("form") || c.hasClass("validationEngineContainer")) {
                    c.removeClass("validating")
                } else {
                    var b = c.closest("form, .validationEngineContainer"), h = (b.data("jqv")) ? b.data("jqv") : f.validationEngine.defaults, a = d._validateField(c, h);
                    if (a && h.onFieldSuccess) {
                        h.onFieldSuccess()
                    } else {
                        if (h.onFieldFailure && h.InvalidFields.length > 0) {
                            h.onFieldFailure()
                        }
                    }
                }
            }
            if (h.onValidationComplete) {
                return !!h.onValidationComplete(b, a)
            }
            return a
        }, updatePromptsPosition: function(a) {
            if (a && this == window) {
                var b = a.data.formElem;
                var h = a.data.noAnimation
            } else {
                var b = f(this.closest("form, .validationEngineContainer"))
            }
            var c = b.data("jqv");
            b.find("[" + c.validateAttribute + "*=validate]").not(":disabled").each(function() {
                var g = f(this);
                if (c.prettySelect && g.is(":hidden")) {
                    g = b.find("#" + c.usePrefix + g.attr("id") + c.useSuffix)
                }
                var n = d._getPrompt(g);
                var m = f(n).find(".formErrorContent").html();
                if (n) {
                    d._updatePrompt(g, f(n), m, undefined, false, c, h)
                }
            });
            return this
        }, showPrompt: function(m, c, a, l) {
            var b = this.closest("form, .validationEngineContainer");
            var n = b.data("jqv");
            if (!n) {
                n = d._saveOptions(this, n)
            }
            if (a) {
                n.promptPosition = a
            }
            n.showArrow = l == true;
            d._showPrompt(this, m, c, false, n);
            return this
        }, hide: function() {
            var a = f(this).closest("form, .validationEngineContainer");
            var c = a.data("jqv");
            var b = (c && c.fadeDuration) ? c.fadeDuration : 0.3;
            var h;
            if (f(this).is("form") || f(this).hasClass("validationEngineContainer")) {
                h = "parentForm" + d._getClassName(f(this).attr("id"))
            } else {
                h = d._getClassName(f(this).attr("id")) + "formError"
            }
            f("." + h).fadeTo(b, 0.3, function() {
                f(this).parent(".formErrorOuter").remove();
                f(this).remove()
            });
            return this
        }, hideAll: function() {
            var b = this;
            var c = b.data("jqv");
            var a = c ? c.fadeDuration : 300;
            f(".formError").fadeTo(a, 300, function() {
                f(this).parent(".formErrorOuter").remove();
                f(this).remove()
            });
            return this
        }, _onFieldEvent: function(b) {
            var a = f(this);
            var c = a.closest("form, .validationEngineContainer");
            var h = c.data("jqv");
            h.eventTrigger = "field";
            window.setTimeout(function() {
                d._validateField(a, h);
                if (h.InvalidFields.length == 0 && h.onFieldSuccess) {
                    h.onFieldSuccess()
                } else {
                    if (h.InvalidFields.length > 0 && h.onFieldFailure) {
                        h.onFieldFailure()
                    }
                }
            }, (b.data) ? b.data.delay : 0)
        }, _onSubmitEvent: function() {
            var a = f(this);
            var h = a.data("jqv");
            if (a.data("jqv_submitButton")) {
                var c = f("#" + a.data("jqv_submitButton"));
                if (c) {
                    if (c.length > 0) {
                        if (c.hasClass("validate-skip") || c.attr("data-validation-engine-skip") == "true") {
                            return true
                        }
                    }
                }
            }
            h.eventTrigger = "submit";
            var b = d._validateFields(a);
            if (b && h.ajaxFormValidation) {
                d._validateFormWithAjax(a, h);
                return false
            }
            if (h.onValidationComplete) {
                return !!h.onValidationComplete(a, b)
            }
            return b
        }, _checkAjaxStatus: function(a) {
            var b = true;
            f.each(a.ajaxValidCache, function(h, c) {
                if (!c) {
                    b = false;
                    return false
                }
            });
            return b
        }, _checkAjaxFieldStatus: function(b, a) {
            return a.ajaxValidCache[b] == true
        }, _validateFields: function(y) {
            var b = y.data("jqv");
            var x = false;
            y.trigger("jqv.form.validating");
            var a = null;
            y.find("[" + b.validateAttribute + "*=validate]").not(":disabled").each(function() {
                var g = f(this);
                var h = [];
                if (f.inArray(g.attr("name"), h) < 0) {
                    x |= d._validateField(g, b);
                    if (x && a == null) {
                        if (g.is(":hidden") && b.prettySelect) {
                            a = g = y.find("#" + b.usePrefix + d._jqSelector(g.attr("id")) + b.useSuffix)
                        } else {
                            if (g.data("jqv-prompt-at") instanceof jQuery) {
                                g = g.data("jqv-prompt-at")
                            } else {
                                if (g.data("jqv-prompt-at")) {
                                    g = f(g.data("jqv-prompt-at"))
                                }
                            }
                            a = g
                        }
                    }
                    if (b.doNotShowAllErrosOnSubmit) {
                        return false
                    }
                    h.push(g.attr("name"));
                    if (b.showOneMessage == true && x) {
                        return false
                    }
                }
            });
            y.trigger("jqv.form.result", [x]);
            if (x) {
                if (b.scroll) {
                    var c = a.offset().top;
                    var v = a.offset().left;
                    var s = b.promptPosition;
                    if (typeof (s) == "string" && s.indexOf(":") != -1) {
                        s = s.substring(0, s.indexOf(":"))
                    }
                    if (s != "bottomRight" && s != "bottomLeft") {
                        var u = d._getPrompt(a);
                        if (u) {
                            c = u.offset().top
                        }
                    }
                    if (b.scrollOffset) {
                        c -= b.scrollOffset
                    }
                    if (b.isOverflown) {
                        var B = f(b.overflownDIV);
                        if (!B.length) {
                            return false
                        }
                        var A = B.scrollTop();
                        var w = -parseInt(B.offset().top);
                        c += A + w - 5;
                        var r = f(b.overflownDIV + ":not(:animated)");
                        r.animate({scrollTop: c}, 1100, function() {
                            if (b.focusFirstField) {
                                a.focus()
                            }
                        })
                    } else {
                        f("html, body").animate({scrollTop: c}, 1100, function() {
                            if (b.focusFirstField) {
                                a.focus()
                            }
                        });
                        f("html, body").animate({scrollLeft: v}, 1100)
                    }
                } else {
                    if (b.focusFirstField) {
                        a.focus()
                    }
                }
                return false
            }
            return true
        }, _validateFormWithAjax: function(b, l) {
            var a = b.serialize();
            var c = (l.ajaxFormValidationMethod) ? l.ajaxFormValidationMethod : "GET";
            var m = (l.ajaxFormValidationURL) ? l.ajaxFormValidationURL : b.attr("action");
            var n = (l.dataType) ? l.dataType : "json";
            f.ajax({type: c, url: m, cache: false, dataType: n, data: a, form: b, methods: d, options: l, beforeSend: function() {
                    return l.onBeforeAjaxFormValidation(b, l)
                }, error: function(h, g) {
                    d._ajaxError(h, g)
                }, success: function(w) {
                    if ((n == "json") && (w !== true)) {
                        var y = false;
                        for (var x = 0; x < w.length; x++) {
                            var v = w[x];
                            var k = v[0];
                            var g = f(f("#" + k)[0]);
                            if (g.length == 1) {
                                var u = v[2];
                                if (v[1] == true) {
                                    if (u == "" || !u) {
                                        d._closePrompt(g)
                                    } else {
                                        if (l.allrules[u]) {
                                            var h = l.allrules[u].alertTextOk;
                                            if (h) {
                                                u = h
                                            }
                                        }
                                        if (l.showPrompts) {
                                            d._showPrompt(g, u, "pass", false, l, true)
                                        }
                                    }
                                } else {
                                    y |= true;
                                    if (l.allrules[u]) {
                                        var h = l.allrules[u].alertText;
                                        if (h) {
                                            u = h
                                        }
                                    }
                                    if (l.showPrompts) {
                                        d._showPrompt(g, u, "", false, l, true)
                                    }
                                }
                            }
                        }
                        l.onAjaxFormComplete(!y, b, w, l)
                    } else {
                        l.onAjaxFormComplete(true, b, w, l)
                    }
                }})
        }, _validateField: function(Y, R, F) {
            if (!Y.attr("id")) {
                Y.attr("id", "form-validation-field-" + f.validationEngine.fieldIdCounter);
                ++f.validationEngine.fieldIdCounter
            }
            if (!R.validateNonVisibleFields && (Y.is(":hidden") && !R.prettySelect || Y.parent().is(":hidden"))) {
                return false
            }
            var b = Y.attr(R.validateAttribute);
            var J = /validate\[(.*)\]/.exec(b);
            if (!J) {
                return false
            }
            var a = J[1];
            var G = a.split(/\[|,|\]/);
            var N = false;
            var T = Y.attr("name");
            var U = "";
            var L = "";
            var c = false;
            var H = false;
            R.isError = false;
            R.showArrow = true;
            if (R.maxErrorsPerField > 0) {
                H = true
            }
            var X = f(Y.closest("form, .validationEngineContainer"));
            for (var M = 0; M < G.length; M++) {
                G[M] = G[M].replace(" ", "");
                if (G[M] === "") {
                    delete G[M]
                }
            }
            for (var M = 0, P = 0; M < G.length; M++) {
                if (H && P >= R.maxErrorsPerField) {
                    if (!c) {
                        var S = f.inArray("required", G);
                        c = (S != -1 && S >= M)
                    }
                    break
                }
                var V = undefined;
                switch (G[M]) {
                    case"required":
                        c = true;
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._required);
                        break;
                    case"custom":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._custom);
                        break;
                    case"groupRequired":
                        var O = "[" + R.validateAttribute + "*=" + G[M + 1] + "]";
                        var W = X.find(O).eq(0);
                        if (W[0] != Y[0]) {
                            d._validateField(W, R, F);
                            R.showArrow = true
                        }
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._groupRequired);
                        if (V) {
                            c = true
                        }
                        R.showArrow = false;
                        break;
                    case"ajax":
                        V = d._ajax(Y, G, M, R);
                        if (V) {
                            L = "load"
                        }
                        break;
                    case"minSize":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._minSize);
                        break;
                    case"maxSize":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._maxSize);
                        break;
                    case"min":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._min);
                        break;
                    case"max":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._max);
                        break;
                    case"past":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._past);
                        break;
                    case"future":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._future);
                        break;
                    case"dateRange":
                        var O = "[" + R.validateAttribute + "*=" + G[M + 1] + "]";
                        R.firstOfGroup = X.find(O).eq(0);
                        R.secondOfGroup = X.find(O).eq(1);
                        if (R.firstOfGroup[0].value || R.secondOfGroup[0].value) {
                            V = d._getErrorMessage(X, Y, G[M], G, M, R, d._dateRange)
                        }
                        if (V) {
                            c = true
                        }
                        R.showArrow = false;
                        break;
                    case"dateTimeRange":
                        var O = "[" + R.validateAttribute + "*=" + G[M + 1] + "]";
                        R.firstOfGroup = X.find(O).eq(0);
                        R.secondOfGroup = X.find(O).eq(1);
                        if (R.firstOfGroup[0].value || R.secondOfGroup[0].value) {
                            V = d._getErrorMessage(X, Y, G[M], G, M, R, d._dateTimeRange)
                        }
                        if (V) {
                            c = true
                        }
                        R.showArrow = false;
                        break;
                    case"maxCheckbox":
                        Y = f(X.find("input[name='" + T + "']"));
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._maxCheckbox);
                        break;
                    case"minCheckbox":
                        Y = f(X.find("input[name='" + T + "']"));
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._minCheckbox);
                        break;
                    case"equals":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._equals);
                        break;
                    case"funcCall":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._funcCall);
                        break;
                    case"creditCard":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._creditCard);
                        break;
                    case"condRequired":
                        V = d._getErrorMessage(X, Y, G[M], G, M, R, d._condRequired);
                        if (V !== undefined) {
                            c = true
                        }
                        break;
                    default:
                }
                var Q = false;
                if (typeof V == "object") {
                    switch (V.status) {
                        case"_break":
                            Q = true;
                            break;
                        case"_error":
                            V = V.message;
                            break;
                        case"_error_no_prompt":
                            return true;
                            break;
                        default:
                            break
                        }
                }
                if (Q) {
                    break
                }
                if (typeof V == "string") {
                    U += V + "<br/>";
                    R.isError = true;
                    P++
                }
            }
            if (!c && !(Y.val()) && Y.val().length < 1) {
                R.isError = false
            }
            var K = Y.prop("type");
            var Z = Y.data("promptPosition") || R.promptPosition;
            if ((K == "radio" || K == "checkbox") && X.find("input[name='" + T + "']").size() > 1) {
                if (Z === "inline") {
                    Y = f(X.find("input[name='" + T + "'][type!=hidden]:last"))
                } else {
                    Y = f(X.find("input[name='" + T + "'][type!=hidden]:first"))
                }
                R.showArrow = false
            }
            if (Y.is(":hidden") && R.prettySelect) {
                Y = X.find("#" + R.usePrefix + d._jqSelector(Y.attr("id")) + R.useSuffix)
            }
            if (R.isError && R.showPrompts) {
                d._showPrompt(Y, U, L, false, R)
            } else {
                if (!N) {
                    d._closePrompt(Y)
                }
            }
            if (!N) {
                Y.trigger("jqv.field.result", [Y, R.isError, U])
            }
            var I = f.inArray(Y[0], R.InvalidFields);
            if (I == -1) {
                if (R.isError) {
                    R.InvalidFields.push(Y[0])
                }
            } else {
                if (!R.isError) {
                    R.InvalidFields.splice(I, 1)
                }
            }
            d._handleStatusCssClasses(Y, R);
            if (R.isError && R.onFieldFailure) {
                R.onFieldFailure(Y)
            }
            if (!R.isError && R.onFieldSuccess) {
                R.onFieldSuccess(Y)
            }
            return R.isError
        }, _handleStatusCssClasses: function(a, b) {
            if (b.addSuccessCssClassToField) {
                a.removeClass(b.addSuccessCssClassToField)
            }
            if (b.addFailureCssClassToField) {
                a.removeClass(b.addFailureCssClassToField)
            }
            if (b.addSuccessCssClassToField && !b.isError) {
                a.addClass(b.addSuccessCssClassToField)
            }
            if (b.addFailureCssClassToField && b.isError) {
                a.addClass(b.addFailureCssClassToField)
            }
        }, _getErrorMessage: function(E, c, v, a, A, F, u) {
            var x = jQuery.inArray(v, a);
            if (v === "custom" || v === "funcCall") {
                var b = a[x + 1];
                v = v + "[" + b + "]";
                delete (a[x])
            }
            var D = v;
            var C = (c.attr("data-validation-engine")) ? c.attr("data-validation-engine") : c.attr("class");
            var y = C.split(" ");
            var w;
            if (v == "future" || v == "past" || v == "maxCheckbox" || v == "minCheckbox") {
                w = u(E, c, a, A, F)
            } else {
                w = u(c, a, A, F)
            }
            if (w != undefined) {
                var B = d._getCustomErrorMessage(f(c), y, D, F);
                if (B) {
                    w = B
                }
            }
            return w
        }, _getCustomErrorMessage: function(c, r, o, a) {
            var q = false;
            var s = /^custom\[.*\]$/.test(o) ? d._validityProp.custom : d._validityProp[o];
            if (s != undefined) {
                q = c.attr("data-errormessage-" + s);
                if (q != undefined) {
                    return q
                }
            }
            q = c.attr("data-errormessage");
            if (q != undefined) {
                return q
            }
            var u = "#" + c.attr("id");
            if (typeof a.custom_error_messages[u] != "undefined" && typeof a.custom_error_messages[u][o] != "undefined") {
                q = a.custom_error_messages[u][o]["message"]
            } else {
                if (r.length > 0) {
                    for (var p = 0; p < r.length && r.length > 0; p++) {
                        var b = "." + r[p];
                        if (typeof a.custom_error_messages[b] != "undefined" && typeof a.custom_error_messages[b][o] != "undefined") {
                            q = a.custom_error_messages[b][o]["message"];
                            break
                        }
                    }
                }
            }
            if (!q && typeof a.custom_error_messages[o] != "undefined" && typeof a.custom_error_messages[o]["message"] != "undefined") {
                q = a.custom_error_messages[o]["message"]
            }
            return q
        }, _validityProp: {required: "value-missing", custom: "custom-error", groupRequired: "value-missing", ajax: "custom-error", minSize: "range-underflow", maxSize: "range-overflow", min: "range-underflow", max: "range-overflow", past: "type-mismatch", future: "type-mismatch", dateRange: "type-mismatch", dateTimeRange: "type-mismatch", maxCheckbox: "range-overflow", minCheckbox: "range-underflow", equals: "pattern-mismatch", funcCall: "custom-error", creditCard: "pattern-mismatch", condRequired: "value-missing"}, _required: function(o, c, q, a, p) {
            switch (o.prop("type")) {
                case"text":
                case"password":
                case"textarea":
                case"file":
                case"select-one":
                case"select-multiple":
                default:
                    var b = f.trim(o.val());
                    var r = f.trim(o.attr("data-validation-placeholder"));
                    if ((!b) || (r && b == r)) {
                        return a.allrules[c[q]].alertText
                    }
                    break;
                case"radio":
                case"checkbox":
                    if (p) {
                        if (!o.attr("checked")) {
                            return a.allrules[c[q]].alertTextCheckboxMultiple
                        }
                        break
                    }
                    var s = o.closest("form, .validationEngineContainer");
                    var u = o.attr("name");
                    if (s.find("input[name='" + u + "']:checked").size() == 0) {
                        if (s.find("input[name='" + u + "']:visible").size() == 1) {
                            return a.allrules[c[q]].alertTextCheckboxe
                        } else {
                            return a.allrules[c[q]].alertTextCheckboxMultiple
                        }
                    }
                    break
                }
        }, _groupRequired: function(c, a, m, n) {
            var b = "[" + n.validateAttribute + "*=" + a[m + 1] + "]";
            var l = false;
            c.closest("form, .validationEngineContainer").find(b).each(function() {
                if (!d._required(f(this), a, m, n)) {
                    l = true;
                    return false
                }
            });
            if (!l) {
                return n.allrules[a[m]].alertText
            }
        }, _custom: function(c, b, s, a) {
            var u = b[s + 1];
            var p = a.allrules[u];
            var o;
            if (!p) {
                alert("jqv:custom rule not found - " + u);
                return
            }
            if (p.regex) {
                var q = p.regex;
                if (!q) {
                    alert("jqv:custom regex not found - " + u);
                    return
                }
                var r = new RegExp(q);
                if (!r.test(c.val())) {
                    return a.allrules[u].alertText
                }
            } else {
                if (p.func) {
                    o = p.func;
                    if (typeof (o) !== "function") {
                        alert("jqv:custom parameter 'function' is no function - " + u);
                        return
                    }
                    if (!o(c, b, s, a)) {
                        return a.allrules[u].alertText
                    }
                } else {
                    alert("jqv:custom type not allowed " + u);
                    return
                }
            }
        }, _funcCall: function(b, a, q, r) {
            var c = a[q + 1];
            var o;
            if (c.indexOf(".") > -1) {
                var n = c.split(".");
                var p = window;
                while (n.length) {
                    p = p[n.shift()]
                }
                o = p
            } else {
                o = window[c] || r.customFunctions[c]
            }
            if (typeof (o) == "function") {
                return o(b, a, q, r)
            }
        }, _equals: function(b, a, c, k) {
            var l = a[c + 1];
            if (b.val() != f("#" + l).val()) {
                return k.allrules.equals.alertText
            }
        }, _maxSize: function(b, a, m, n) {
            var o = a[m + 1];
            var p = b.val().length;
            if (p > o) {
                var c = n.allrules.maxSize;
                if (typeof c.alertText2 == "string") {
                    return c.alertText + min + c.alertText2
                } else {
                    return c.alertText
                }
            }
        }, _minSize: function(b, a, m, o) {
            var n = a[m + 1];
            var p = b.val().length;
            if (p < n) {
                var c = o.allrules.minSize;
                if (typeof c.alertText2 == "string") {
                    return c.alertText + n + c.alertText2
                } else {
                    return c.alertText
                }
            }
        }, _min: function(b, a, m, o) {
            var n = parseFloat(a[m + 1]);
            var p = parseFloat(b.val());
            if (p < n) {
                var c = o.allrules.min;
                if (c.alertText2) {
                    return c.alertText + n + c.alertText2
                }
                return c.alertText + n
            }
        }, _max: function(b, a, m, n) {
            var o = parseFloat(a[m + 1]);
            var p = parseFloat(b.val());
            if (p > o) {
                var c = n.allrules.max;
                if (c.alertText2) {
                    return c.alertText + o + c.alertText2
                }
                return c.alertText + o
            }
        }, _past: function(v, p, c, u, a) {
            var w = c[u + 1];
            var r = f(v.find("input[name='" + w.replace(/^#+/, "") + "']"));
            var s;
            if (w.toLowerCase() == "now") {
                s = new Date()
            } else {
                if (undefined != r.val()) {
                    if (r.is(":disabled")) {
                        return
                    }
                    s = d._parseDate(r.val())
                } else {
                    s = d._parseDate(w)
                }
            }
            var b = d._parseDate(p.val());
            if (b > s) {
                var q = a.allrules.past;
                if (q.alertText2) {
                    return q.alertText + d._dateToString(s) + q.alertText2
                }
                return q.alertText + d._dateToString(s)
            }
        }, _future: function(v, p, c, u, a) {
            var w = c[u + 1];
            var r = f(v.find("input[name='" + w.replace(/^#+/, "") + "']"));
            var s;
            if (w.toLowerCase() == "now") {
                s = new Date()
            } else {
                if (undefined != r.val()) {
                    if (r.is(":disabled")) {
                        return
                    }
                    s = d._parseDate(r.val())
                } else {
                    s = d._parseDate(w)
                }
            }
            var b = d._parseDate(p.val());
            if (b < s) {
                var q = a.allrules.future;
                if (q.alertText2) {
                    return q.alertText + d._dateToString(s) + q.alertText2
                }
                return q.alertText + d._dateToString(s)
            }
        }, _isDate: function(a) {
            var b = new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(?:(?:0?[1-9]|1[0-2])(\/|-)(?:0?[1-9]|1\d|2[0-8]))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^(0?2(\/|-)29)(\/|-)(?:(?:0[48]00|[13579][26]00|[2468][048]00)|(?:\d\d)?(?:0[48]|[2468][048]|[13579][26]))$/);
            return b.test(a)
        }, _isDateTime: function(a) {
            var b = new RegExp(/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1}$|^(?:(?:(?:0?[13578]|1[02])(\/|-)31)|(?:(?:0?[1,3-9]|1[0-2])(\/|-)(?:29|30)))(\/|-)(?:[1-9]\d\d\d|\d[1-9]\d\d|\d\d[1-9]\d|\d\d\d[1-9])$|^((1[012]|0?[1-9]){1}\/(0?[1-9]|[12][0-9]|3[01]){1}\/\d{2,4}\s+(1[012]|0?[1-9]){1}:(0?[1-5]|[0-6][0-9]){1}:(0?[0-6]|[0-6][0-9]){1}\s+(am|pm|AM|PM){1})$/);
            return b.test(a)
        }, _dateCompare: function(a, b) {
            return(new Date(a.toString()) < new Date(b.toString()))
        }, _dateRange: function(b, a, c, h) {
            if ((!h.firstOfGroup[0].value && h.secondOfGroup[0].value) || (h.firstOfGroup[0].value && !h.secondOfGroup[0].value)) {
                return h.allrules[a[c]].alertText + h.allrules[a[c]].alertText2
            }
            if (!d._isDate(h.firstOfGroup[0].value) || !d._isDate(h.secondOfGroup[0].value)) {
                return h.allrules[a[c]].alertText + h.allrules[a[c]].alertText2
            }
            if (!d._dateCompare(h.firstOfGroup[0].value, h.secondOfGroup[0].value)) {
                return h.allrules[a[c]].alertText + h.allrules[a[c]].alertText2
            }
        }, _dateTimeRange: function(b, a, c, h) {
            if ((!h.firstOfGroup[0].value && h.secondOfGroup[0].value) || (h.firstOfGroup[0].value && !h.secondOfGroup[0].value)) {
                return h.allrules[a[c]].alertText + h.allrules[a[c]].alertText2
            }
            if (!d._isDateTime(h.firstOfGroup[0].value) || !d._isDateTime(h.secondOfGroup[0].value)) {
                return h.allrules[a[c]].alertText + h.allrules[a[c]].alertText2
            }
            if (!d._dateCompare(h.firstOfGroup[0].value, h.secondOfGroup[0].value)) {
                return h.allrules[a[c]].alertText + h.allrules[a[c]].alertText2
            }
        }, _maxCheckbox: function(c, b, a, n, o) {
            var q = a[n + 1];
            var p = b.attr("name");
            var r = c.find("input[name='" + p + "']:checked").size();
            if (r > q) {
                o.showArrow = false;
                if (o.allrules.maxCheckbox.alertText2) {
                    return o.allrules.maxCheckbox.alertText + " " + q + " " + o.allrules.maxCheckbox.alertText2
                }
                return o.allrules.maxCheckbox.alertText
            }
        }, _minCheckbox: function(c, b, a, n, o) {
            var q = a[n + 1];
            var p = b.attr("name");
            var r = c.find("input[name='" + p + "']:checked").size();
            if (r < q) {
                o.showArrow = false;
                return o.allrules.minCheckbox.alertText + " " + q + " " + o.allrules.minCheckbox.alertText2
            }
        }, _creditCard: function(q, c, v, a) {
            var x = false, b = q.val().replace(/ +/g, "").replace(/-+/g, "");
            var y = b.length;
            if (y >= 14 && y <= 16 && parseInt(b) > 0) {
                var u = 0, v = y - 1, r = 1, s, w = new String();
                do {
                    s = parseInt(b.charAt(v));
                    w += (r++ % 2 == 0) ? s * 2 : s
                } while (--v >= 0);
                for (v = 0; v < w.length; v++) {
                    u += parseInt(w.charAt(v))
                }
                x = u % 10 == 0
            }
            if (!x) {
                return a.allrules.creditCard.alertText
            }
        }, _ajax: function(b, I, A, H) {
            var J = I[A + 1];
            var c = H.allrules[J];
            var E = c.extraData;
            var x = c.extraDataDynamic;
            var B = {fieldId: b.attr("id"), fieldValue: b.val()};
            if (typeof E === "object") {
                f.extend(B, E)
            } else {
                if (typeof E === "string") {
                    var y = E.split("&");
                    for (var A = 0; A < y.length; A++) {
                        var a = y[A].split("=");
                        if (a[0] && a[0]) {
                            B[a[0]] = a[1]
                        }
                    }
                }
            }
            if (x) {
                var C = [];
                var w = String(x).split(",");
                for (var A = 0; A < w.length; A++) {
                    var G = w[A];
                    if (f(G).length) {
                        var F = b.closest("form, .validationEngineContainer").find(G).val();
                        var D = G.replace("#", "") + "=" + escape(F);
                        B[G.replace("#", "")] = F
                    }
                }
            }
            if (H.eventTrigger == "field") {
                delete (H.ajaxValidCache[b.attr("id")])
            }
            if (!H.isError && !d._checkAjaxFieldStatus(b.attr("id"), H)) {
                f.ajax({type: H.ajaxFormValidationMethod, url: c.url, cache: false, dataType: "json", data: B, field: b, rule: c, methods: d, options: H, beforeSend: function() {
                    }, error: function(h, g) {
                        d._ajaxError(h, g)
                    }, success: function(h) {
                        var l = h[0];
                        var n = f("#" + l).eq(0);
                        if (n.length == 1) {
                            var g = h[1];
                            var m = h[2];
                            if (!g) {
                                H.ajaxValidCache[l] = false;
                                H.isError = true;
                                if (m) {
                                    if (H.allrules[m]) {
                                        var k = H.allrules[m].alertText;
                                        if (k) {
                                            m = k
                                        }
                                    }
                                } else {
                                    m = c.alertText
                                }
                                if (H.showPrompts) {
                                    d._showPrompt(n, m, "", true, H)
                                }
                            } else {
                                H.ajaxValidCache[l] = true;
                                if (m) {
                                    if (H.allrules[m]) {
                                        var k = H.allrules[m].alertTextOk;
                                        if (k) {
                                            m = k
                                        }
                                    }
                                } else {
                                    m = c.alertTextOk
                                }
                                if (H.showPrompts) {
                                    if (m) {
                                        d._showPrompt(n, m, "pass", true, H)
                                    } else {
                                        d._closePrompt(n)
                                    }
                                }
                                if (H.eventTrigger == "submit") {
                                    b.closest("form").submit()
                                }
                            }
                        }
                        n.trigger("jqv.field.result", [n, H.isError, m])
                    }});
                return c.alertTextLoad
            }
        }, _ajaxError: function(b, a) {
            if (b.status == 0 && a == null) {
                alert("The page is not served from a server! ajax call failed")
            } else {
                if (typeof console != "undefined") {
                    console.log("Ajax error: " + b.status + " " + a)
                }
            }
        }, _dateToString: function(a) {
            return a.getFullYear() + "-" + (a.getMonth() + 1) + "-" + a.getDate()
        }, _parseDate: function(a) {
            var b = a.split("-");
            if (b == a) {
                b = a.split("/")
            }
            if (b == a) {
                b = a.split(".");
                return new Date(b[2], (b[1] - 1), b[0])
            }
            return new Date(b[0], (b[1] - 1), b[2])
        }, _showPrompt: function(a, c, b, m, n, o) {
            if (a.data("jqv-prompt-at") instanceof jQuery) {
                a = a.data("jqv-prompt-at")
            } else {
                if (a.data("jqv-prompt-at")) {
                    a = f(a.data("jqv-prompt-at"))
                }
            }
            var p = d._getPrompt(a);
            if (o) {
                p = false
            }
            if (f.trim(c)) {
                if (p) {
                    d._updatePrompt(a, p, c, b, m, n)
                } else {
                    d._buildPrompt(a, c, b, m, n)
                }
            }
        }, _buildPrompt: function(u, B, w, r, b) {
            var A = f("<div>");
            A.addClass(d._getClassName(u.attr("id")) + "formError");
            A.addClass("parentForm" + d._getClassName(u.closest("form, .validationEngineContainer").attr("id")));
            A.addClass("formError");
            switch (w) {
                case"pass":
                    A.addClass("greenPopup");
                    break;
                case"load":
                    A.addClass("blackPopup");
                    break;
                default:
            }
            if (r) {
                A.addClass("ajaxed")
            }
            var a = f("<div>").addClass("formErrorContent").html(B).appendTo(A);
            var x = u.data("promptPosition") || b.promptPosition;
            if (b.showArrow) {
                var s = f("<div>").addClass("formErrorArrow");
                if (typeof (x) == "string") {
                    var v = x.indexOf(":");
                    if (v != -1) {
                        x = x.substring(0, v)
                    }
                }
                switch (x) {
                    case"bottomLeft":
                    case"bottomRight":
                        A.find(".formErrorContent").before(s);
                        s.addClass("formErrorArrowBottom").html('<div class="line1"><!-- --></div><div class="line2"><!-- --></div><div class="line3"><!-- --></div><div class="line4"><!-- --></div><div class="line5"><!-- --></div><div class="line6"><!-- --></div><div class="line7"><!-- --></div><div class="line8"><!-- --></div><div class="line9"><!-- --></div><div class="line10"><!-- --></div>');
                        break;
                    case"topLeft":
                    case"topRight":
                        s.html('<div class="line10"><!-- --></div><div class="line9"><!-- --></div><div class="line8"><!-- --></div><div class="line7"><!-- --></div><div class="line6"><!-- --></div><div class="line5"><!-- --></div><div class="line4"><!-- --></div><div class="line3"><!-- --></div><div class="line2"><!-- --></div><div class="line1"><!-- --></div>');
                        A.append(s);
                        break
                    }
            }
            if (b.addPromptClass) {
                A.addClass(b.addPromptClass)
            }
            var c = u.attr("data-required-class");
            if (c !== undefined) {
                A.addClass(c)
            } else {
                if (b.prettySelect) {
                    if (f("#" + u.attr("id")).next().is("select")) {
                        var y = f("#" + u.attr("id").substr(b.usePrefix.length).substring(b.useSuffix.length)).attr("data-required-class");
                        if (y !== undefined) {
                            A.addClass(y)
                        }
                    }
                }
            }
            A.css({opacity: 0});
            if (x === "inline") {
                A.addClass("inline");
                if (typeof u.attr("data-prompt-target") !== "undefined" && f("#" + u.attr("data-prompt-target")).length > 0) {
                    A.appendTo(f("#" + u.attr("data-prompt-target")))
                } else {
                    u.after(A)
                }
            } else {
                u.before(A)
            }
            var v = d._calculatePosition(u, A, b);
            A.css({position: x === "inline" ? "relative" : "absolute", top: v.callerTopPosition, left: v.callerleftPosition, marginTop: v.marginTopSize, opacity: 0}).data("callerField", u);
            if (b.autoHidePrompt) {
                setTimeout(function() {
                    A.animate({opacity: 0}, function() {
                        A.closest(".formErrorOuter").remove();
                        A.remove()
                    })
                }, b.autoHideDelay)
            }
            return A.animate({opacity: 0.87})
        }, _updatePrompt: function(c, s, u, p, b, a, r) {
            if (s) {
                if (typeof p !== "undefined") {
                    if (p == "pass") {
                        s.addClass("greenPopup")
                    } else {
                        s.removeClass("greenPopup")
                    }
                    if (p == "load") {
                        s.addClass("blackPopup")
                    } else {
                        s.removeClass("blackPopup")
                    }
                }
                if (b) {
                    s.addClass("ajaxed")
                } else {
                    s.removeClass("ajaxed")
                }
                s.find(".formErrorContent").html(u);
                var o = d._calculatePosition(c, s, a);
                var q = {top: o.callerTopPosition, left: o.callerleftPosition, marginTop: o.marginTopSize};
                if (r) {
                    s.css(q)
                } else {
                    s.animate(q)
                }
            }
        }, _closePrompt: function(a) {
            var b = d._getPrompt(a);
            if (b) {
                b.fadeTo("fast", 0, function() {
                    b.parent(".formErrorOuter").remove();
                    b.remove()
                })
            }
        }, closePrompt: function(a) {
            return d._closePrompt(a)
        }, _getPrompt: function(b) {
            var a = f(b).closest("form, .validationEngineContainer").attr("id");
            var c = d._getClassName(b.attr("id")) + "formError";
            var h = f("." + d._escapeExpression(c) + ".parentForm" + d._getClassName(a))[0];
            if (h) {
                return f(h)
            }
        }, _escapeExpression: function(a) {
            return a.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g, "\\$1")
        }, isRTL: function(b) {
            var a = f(document);
            var h = f("body");
            var c = (b && b.hasClass("rtl")) || (b && (b.attr("dir") || "").toLowerCase() === "rtl") || a.hasClass("rtl") || (a.attr("dir") || "").toLowerCase() === "rtl" || h.hasClass("rtl") || (h.attr("dir") || "").toLowerCase() === "rtl";
            return Boolean(c)
        }, _calculatePosition: function(c, D, H) {
            var E, b, x;
            var C = c.width();
            var G = c.position().left;
            var J = c.position().top;
            var F = c.height();
            var I = D.height();
            E = b = 0;
            x = -I;
            var y = c.data("promptPosition") || H.promptPosition;
            var A = "";
            var B = "";
            var a = 0;
            var w = 0;
            if (typeof (y) == "string") {
                if (y.indexOf(":") != -1) {
                    A = y.substring(y.indexOf(":") + 1);
                    y = y.substring(0, y.indexOf(":"));
                    if (A.indexOf(",") != -1) {
                        B = A.substring(A.indexOf(",") + 1);
                        A = A.substring(0, A.indexOf(","));
                        w = parseInt(B);
                        if (isNaN(w)) {
                            w = 0
                        }
                    }
                    a = parseInt(A);
                    if (isNaN(A)) {
                        A = 0
                    }
                }
            }
            switch (y) {
                default:
                case"topRight":
                    b += G + C - 30;
                    E += J;
                    break;
                case"topLeft":
                    E += J;
                    b += G;
                    break;
                case"centerRight":
                    E = J + 4;
                    x = 0;
                    b = G + c.outerWidth(true) + 5;
                    break;
                case"centerLeft":
                    b = G - (D.width() + 2);
                    E = J + 4;
                    x = 0;
                    break;
                case"bottomLeft":
                    E = J + c.height() + 5;
                    x = 0;
                    b = G;
                    break;
                case"bottomRight":
                    b = G + C - 30;
                    E = J + c.height() + 5;
                    x = 0;
                    break;
                case"inline":
                    b = 0;
                    E = 0;
                    x = 0
            }
            b += a;
            E += w;
            return{callerTopPosition: E + "px", callerleftPosition: b + "px", marginTopSize: x + "px"}
        }, _saveOptions: function(b, c) {
            if (f.validationEngineLanguage) {
                var h = f.validationEngineLanguage.allRules
            } else {
                f.error("jQuery.validationEngine rules are not loaded, plz add localization files to the page")
            }
            f.validationEngine.defaults.allrules = h;
            var a = f.extend(true, {}, f.validationEngine.defaults, c);
            b.data("jqv", a);
            return a
        }, _getClassName: function(a) {
            if (a) {
                return a.replace(/:/g, "_").replace(/\./g, "_")
            }
        }, _jqSelector: function(a) {
            return a.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g, "\\$1")
        }, _condRequired: function(b, a, l, m) {
            var n, c;
            for (n = (l + 1); n < a.length; n++) {
                c = jQuery("#" + a[n]).first();
                if (c.length && d._required(c, ["required"], 0, m, true) == undefined) {
                    return d._required(b, ["required"], 0, m)
                }
            }
        }, _submitButtonClick: function(a) {
            var c = f(this);
            var b = c.closest("form, .validationEngineContainer");
            b.data("jqv_submitButton", c.attr("id"))
        }};
    f.fn.validationEngine = function(a) {
        var b = f(this);
        if (!b[0]) {
            return b
        }
        if (typeof (a) == "string" && a.charAt(0) != "_" && d[a]) {
            if (a != "showPrompt" && a != "hide" && a != "hideAll") {
                d.init.apply(b)
            }
            return d[a].apply(b, Array.prototype.slice.call(arguments, 1))
        } else {
            if (typeof a == "object" || !a) {
                d.init.apply(b, arguments);
                return d.attach.apply(b)
            } else {
                f.error("Method " + a + " does not exist in jQuery.validationEngine")
            }
        }
    };
    f.validationEngine = {fieldIdCounter: 0, defaults: {validationEventTrigger: "blur", scroll: true, focusFirstField: true, showPrompts: true, validateNonVisibleFields: false, promptPosition: "topRight", bindMethod: "bind", inlineAjax: false, ajaxFormValidation: false, ajaxFormValidationURL: false, ajaxFormValidationMethod: "get", onAjaxFormComplete: f.noop, onBeforeAjaxFormValidation: f.noop, onValidationComplete: false, doNotShowAllErrosOnSubmit: false, custom_error_messages: {}, binded: true, showArrow: true, isError: false, maxErrorsPerField: false, ajaxValidCache: {}, autoPositionUpdate: false, InvalidFields: [], onFieldSuccess: false, onFieldFailure: false, onSuccess: false, onFailure: false, validateAttribute: "class", addSuccessCssClassToField: "", addFailureCssClassToField: "", autoHidePrompt: false, autoHideDelay: 10000, fadeDuration: 0.3, prettySelect: false, addPromptClass: "", usePrefix: "", useSuffix: "", showOneMessage: false}};
    var e = {hook: "rightmiddle", hideOn: false, skin: "cloud", hideOthers: false};
    d._buildPrompt = function(a, c, b, k, l) {
        a.data("promptText", c);
        Tipped.create(a[0], c, e);
        Tipped.show(a[0])
    };
    d._closePrompt = function(a) {
        a.data("promptText", "");
        Tipped.remove(a[0])
    };
    d._updatePrompt = function(a, p, c, b, m, n, o) {
        if (a.data("promptText") != c) {
            d._closePrompt(a);
            d._buildPrompt(a, c)
        }
    };
    d._getPrompt = function(a) {
        return Tipped.get(a[0])
    };
    f(function() {
        f.validationEngine.defaults.promptPosition = d.isRTL() ? "topLeft" : "topRight"
    })
})(jQuery);
(function(b) {
    b.fn.wipetouch = function(d) {
        var a = {moveX: 40, moveY: 40, tapToClick: false, preventDefault: true, allowDiagonal: false, preventDefaultWhenTriggering: true, wipeLeft: false, wipeRight: false, wipeUp: false, wipeDown: false, wipeUpLeft: false, wipeDownLeft: false, wipeUpRight: false, wipeDownRight: false, wipeMove: false, wipeTopLeft: false, wipeBottomLeft: false, wipeTopRight: false, wipeBottomRight: false};
        if (d) {
            b.extend(a, d)
        }
        this.each(function() {
            var B;
            var C;
            var E = false;
            var F;
            var G;
            var x = false;
            var I = false;
            var J = false;
            var c = false;
            function D(f) {
                A();
                var e = J || (f.originalEvent.touches && f.originalEvent.touches.length > 0);
                if (!x && e) {
                    if (a.preventDefault) {
                        f.preventDefault()
                    }
                    if (a.allowDiagonal) {
                        if (!a.wipeDownLeft) {
                            a.wipeDownLeft = a.wipeBottomLeft
                        }
                        if (!a.wipeDownRight) {
                            a.wipeDownRight = a.wipeBottomRight
                        }
                        if (!a.wipeUpLeft) {
                            a.wipeUpLeft = a.wipeTopLeft
                        }
                        if (!a.wipeUpRight) {
                            a.wipeUpRight = a.wipeTopRight
                        }
                    }
                    if (J) {
                        B = f.pageX;
                        C = f.pageY;
                        b(this).bind("mousemove", H);
                        b(this).one("mouseup", v)
                    } else {
                        B = f.originalEvent.touches[0].pageX;
                        C = f.originalEvent.touches[0].pageY;
                        b(this).bind("touchmove", H)
                    }
                    E = new Date().getTime();
                    F = B;
                    G = C;
                    x = true;
                    I = b(f.target)
                }
            }
            function v(e) {
                if (a.preventDefault) {
                    e.preventDefault()
                }
                if (J) {
                    b(this).unbind("mousemove", H)
                } else {
                    b(this).unbind("touchmove", H)
                }
                if (x) {
                    y(e)
                } else {
                    A()
                }
            }
            function H(e) {
                if (a.preventDefault) {
                    e.preventDefault()
                }
                if (J && !x) {
                    D(e)
                }
                if (x) {
                    if (J) {
                        F = e.pageX;
                        G = e.pageY
                    } else {
                        F = e.originalEvent.touches[0].pageX;
                        G = e.originalEvent.touches[0].pageY
                    }
                    if (a.wipeMove) {
                        w(a.wipeMove, {curX: F, curY: G})
                    }
                }
            }
            function y(f) {
                var g = new Date().getTime();
                var p = E - g;
                var N = F;
                var e = G;
                var k = N - B;
                var o = e - C;
                var r = Math.abs(k);
                var l = Math.abs(o);
                if (r < 15 && l < 15 && p < 100) {
                    c = false;
                    if (a.preventDefault) {
                        A();
                        I.trigger("click");
                        return
                    }
                } else {
                    if (J) {
                        var q = I.data("events");
                        if (q) {
                            var s = q.click;
                            if (s && s.length > 0) {
                                b.each(s, function(K, L) {
                                    c = L;
                                    return
                                });
                                I.unbind("click")
                            }
                        }
                    }
                }
                var u = k > 0;
                var h = o > 0;
                var m = ((r + l) * 60) / ((p) / 6 * (p));
                if (m < 1) {
                    m = 1
                }
                if (m > 5) {
                    m = 5
                }
                var n = {speed: parseInt(m), x: r, y: l, source: I};
                if (r >= a.moveX) {
                    if (a.allowDiagonal && l >= a.moveY) {
                        if (u && h) {
                            w(a.wipeDownRight, n, f)
                        } else {
                            if (u && !h) {
                                w(a.wipeUpRight, n, f)
                            } else {
                                if (!u && h) {
                                    w(a.wipeDownLeft, n, f)
                                } else {
                                    w(a.wipeUpLeft, n, f)
                                }
                            }
                        }
                    } else {
                        if (r >= l) {
                            if (u) {
                                w(a.wipeRight, n, f)
                            } else {
                                w(a.wipeLeft, n, f)
                            }
                        }
                    }
                } else {
                    if (l >= a.moveY && l > r) {
                        if (h) {
                            w(a.wipeDown, n, f)
                        } else {
                            w(a.wipeUp, n, f)
                        }
                    }
                }
                A()
            }
            function A() {
                B = false;
                C = false;
                E = false;
                x = false;
                if (c) {
                    window.setTimeout(function() {
                        I.bind("click", c);
                        c = false
                    }, 50)
                }
            }
            function w(e, g, f) {
                if (e) {
                    if (a.preventDefaultWhenTriggering) {
                        f.preventDefault()
                    }
                    e(g)
                }
            }
            if ("ontouchstart" in document.documentElement) {
                b(this).bind("touchstart", D);
                b(this).bind("touchend", v)
            } else {
                J = true;
                b(this).bind("mousedown", D);
                b(this).bind("mouseout mouseup", v)
            }
        });
        return this
    }
})(jQuery);
/*!
 * Spinners 3.0.0
 * (c) 2010-2012 Nick Stakenburg - http://www.nickstakenburg.com
 *
 * Spinners is freely distributable under the terms of an MIT-style license.
 *
 * GitHub: http://github.com/staaky/spinners
 */
var Spinners = {version: "3.0.0"};
(function(b) {
    function c(k) {
        return k * Math.PI / 180
    }
    function d(k) {
        this.element = k
    }
    function e(k, l) {
        k && (this.element = k, a.remove(k), a.removeDetached(), this._position = 0, this._state = "stopped", this.setOptions(b.extend({color: "#000", dashes: 12, radius: 5, height: 5, width: 1.8, opacity: 1, padding: 3, rotation: 700}, l || {})), this.drawPosition(0), a.add(this))
    }
    var f = {scroll: function(l, m) {
            if (!m) {
                return l
            }
            var k = l.slice(0, m);
            return l.slice(m, l.length).concat(k)
        }, isElement: function(k) {
            return k && 1 == k.nodeType
        }, element: {isAttached: function() {
                return function(k) {
                    for (; k && k.parentNode; ) {
                        k = k.parentNode
                    }
                    return !!k && !!k.body
                }
            }()}}, g = {drawRoundedRectangle: function(l, n) {
            var o = b.extend({top: 0, left: 0, width: 0, height: 0, radius: 0}, n || {}), p = o.left, q = o.top, k = o.width, m = o.height, o = o.radius;
            l.beginPath(), l.moveTo(p + o, q), l.arc(p + k - o, q + o, o, c(-90), c(0), !1), l.arc(p + k - o, q + m - o, o, c(0), c(90), !1), l.arc(p + o, q + m - o, o, c(90), c(180), !1), l.arc(p + o, q + o, o, c(-180), c(-90), !1), l.closePath(), l.fill()
        }}, h = function() {
        function l(n) {
            var o = [];
            0 == n.indexOf("#") && (n = n.substring(1)), n = n.toLowerCase();
            if ("" != n.replace(m, "")) {
                return null
            }
            3 == n.length ? (o[0] = n.charAt(0) + n.charAt(0), o[1] = n.charAt(1) + n.charAt(1), o[2] = n.charAt(2) + n.charAt(2)) : (o[0] = n.substring(0, 2), o[1] = n.substring(2, 4), o[2] = n.substring(4));
            for (n = 0; n < o.length; n++) {
                o[n] = parseInt(o[n], 16)
            }
            return o.red = o[0], o.green = o[1], o.blue = o[2], o
        }
        var m = RegExp("[0123456789abcdef]", "g"), k = function() {
            function n(p, q, o) {
                return p = p.toString(o || 10), Array(q - p.length).join("0") + p
            }
            return function(o, p, q) {
                return"#" + n(o, 2, 16) + n(p, 2, 16) + n(q, 2, 16)
            }
        }();
        return{hex2rgb: l, hex2fill: function(n, p) {
                "undefined" == typeof p && (p = 1);
                var o = p, q = l(n);
                return q[3] = o, q.opacity = o, "rgba(" + q.join() + ")"
            }, rgb2hex: k}
    }();
    b.extend(Spinners, {enabled: !1, support: {canvas: function() {
                var k = b("<canvas>")[0];
                return !!k.getContext && !!k.getContext("2d")
            }()}, init: function() {
            if (this.support.canvas || window.G_vmlCanvasManager && window.attachEvent && -1 === navigator.userAgent.indexOf("Opera")) {
                window.G_vmlCanvasManager && window.G_vmlCanvasManager.init_(document), this.enabled = !0
            }
        }, create: function(k, l) {
            return d.create(k, l), this.get(k)
        }, get: function(k) {
            return new d(k)
        }, play: function(k) {
            return this.get(k).play(), this
        }, pause: function(k) {
            return this.get(k).pause(), this
        }, toggle: function(k) {
            return this.get(k).toggle(), this
        }, stop: function(k) {
            return this.get(k).stop(), this
        }, remove: function(k) {
            return this.get(k).remove(), this
        }, removeDetached: function() {
            return a.removeDetached(), this
        }, center: function(k) {
            return this.get(k).center(), this
        }, setOptions: function(k, l) {
            return this.get(k).setOptions(l), this
        }, getDimensions: function(k) {
            return k = 2 * a.get(k)[0].getLayout().workspace.radius, {width: k, height: k}
        }});
    var a = {spinners: [], get: function(k) {
            if (k) {
                var l = [];
                return b.each(this.spinners, function(n, m) {
                    m && (f.isElement(k) ? m.element == k : b(m.element).is(k)) && l.push(m)
                }), l
            }
        }, add: function(k) {
            this.spinners.push(k)
        }, remove: function(k) {
            b(b.map(this.spinners, function(l) {
                if (f.isElement(k) ? l.element == k : b(l.element).is(k)) {
                    return l.element
                }
            })).each(b.proxy(function(l, m) {
                this.removeByElement(m)
            }, this))
        }, removeByElement: function(k) {
            var l = this.get(k)[0];
            l && (l.remove(), this.spinners = b.grep(this.spinners, function(m) {
                return m.element != k
            }))
        }, removeDetached: function() {
            b.each(this.spinners, b.proxy(function(k, l) {
                l && l.element && !f.element.isAttached(l.element) && this.remove(l.element)
            }, this))
        }};
    b.extend(d, {create: function(k, l) {
            if (k) {
                var m = l || {}, n = [];
                return f.isElement(k) ? n.push(new e(k, m)) : b(k).each(function(o, p) {
                    n.push(new e(p, m))
                }), n
            }
        }}), b.extend(d.prototype, {items: function() {
            return a.get(this.element)
        }, play: function() {
            return b.each(this.items(), function(k, l) {
                l.play()
            }), this
        }, stop: function() {
            return b.each(this.items(), function(k, l) {
                l.stop()
            }), this
        }, pause: function() {
            return b.each(this.items(), function(k, l) {
                l.pause()
            }), this
        }, toggle: function() {
            return b.each(this.items(), function(k, l) {
                l.toggle()
            }), this
        }, center: function() {
            return b.each(this.items(), function(k, l) {
                l.center()
            }), this
        }, setOptions: function(k) {
            return b.each(this.items(), function(l, m) {
                m.setOptions(k)
            }), this
        }, remove: function() {
            return a.remove(this.element), this
        }}), b.extend(e.prototype, {setOptions: function(k) {
            this.options = b.extend({}, this.options, k || {}), this.options.radii && (k = this.options.radii, this.options.radius = Math.min(k[0], k[1]), this.options.height = Math.max(k[0], k[1]) - this.options.radius), this.options.dashWidth && (this.options.width = this.options.dashWidth), this.options.speed && (this.options.duration = 1000 * this.options.speed);
            var k = this._state, l = this._position;
            this._layout = null, this.build(), l && l >= this.options.dashes - 1 && (this._position = this.options.dashes - 1);
            switch (k) {
                case"playing":
                    this.play();
                    break;
                case"paused":
                case"stopped":
                    this.drawPosition(this._position)
            }
            this._centered && this.center()
        }, remove: function() {
            this.canvas && (this.pause(), b(this.canvas).remove(), this.ctx = this.canvas = null)
        }, build: function() {
            this.remove();
            var k = this.getLayout().workspace.radius;
            return b(document.body).append(this.canvas = b("<canvas>").attr({width: 2 * k, height: 2 * k}).css({zoom: 1})), window.G_vmlCanvasManager && G_vmlCanvasManager.initElement(this.canvas[0]), this.ctx = this.canvas[0].getContext("2d"), this.ctx.globalAlpha = this.options.opacity, b(this.element).append(this.canvas), this.ctx.translate(k, k), this
        }, drawPosition: function(k) {
            var l = this.getLayout().workspace, k = f.scroll(l.opacities, -1 * k), m = l.radius, l = this.options.dashes, n = c(360 / l);
            this.ctx.clearRect(-1 * m, -1 * m, 2 * m, 2 * m);
            for (m = 0; m < l; m++) {
                this.drawDash(k[m], this.options.color), this.ctx.rotate(n)
            }
        }, drawDash: function(n, o) {
            this.ctx.fillStyle = h.hex2fill(o, n);
            var k = this.getLayout(), m = k.workspace.radius, l = k.dash.position, k = k.dash.dimensions;
            g.drawRoundedRectangle(this.ctx, {top: l.top - m, left: l.left - m, width: k.width, height: k.height, radius: Math.min(k.height, k.width) / 2})
        }, _nextPosition: function() {
            var k = this.options.rotation / this.options.dashes;
            this.nextPosition(), this._playTimer = window.setTimeout(b.proxy(this._nextPosition, this), k)
        }, nextPosition: function() {
            this._position == this.options.dashes - 1 && (this._position = -1), this._position++, this.drawPosition(this._position)
        }, play: function() {
            if ("playing" != this._state) {
                this._state = "playing";
                var k = this.options.rotation / this.options.dashes;
                return this._playTimer = window.setTimeout(b.proxy(this._nextPosition, this), k), this
            }
        }, pause: function() {
            if ("paused" != this._state) {
                return this._pause(), this._state = "paused", this
            }
        }, _pause: function() {
            this._playTimer && (window.clearTimeout(this._playTimer), this._playTimer = null)
        }, stop: function() {
            if ("stopped" != this._state) {
                return this._pause(), this._position = 0, this.drawPosition(0), this._state = "stopped", this
            }
        }, toggle: function() {
            return this["playing" == this._state ? "pause" : "play"](), this
        }, getLayout: function() {
            if (this._layout) {
                return this._layout
            }
            for (var k = this.options, l = k.dashes, m = k.width, n = k.radius, o = k.radius + k.height, p = Math.max(m, o), p = Math.ceil(Math.max(p, Math.sqrt(o * o + m / 2 * (m / 2)))), k = p += k.padding, q = 1 / l, r = [], D = 0; D < l; D++) {
                r.push((D + 1) * q)
            }
            return this._layout = l = {workspace: {radius: k, opacities: r}, dash: {position: {top: p - o, left: p - m / 2}, dimensions: {width: m, height: o - n}}}
        }, center: function() {
            var k = 2 * this.getLayout().workspace.radius;
            b(this.element.parentNode).css({position: "relative"}), b(this.element).css({position: "absolute", height: k + "px", width: k + "px", top: "50%", left: "50%", marginLeft: -0.5 * k + "px", marginTop: -0.5 * k + "px"}), this._centered = !0
        }}), Spinners.init(), Spinners.enabled || (d.create = function() {
        return[]
    })
})(jQuery);
var TimerHandler = function(d, c) {
    if (typeof (d) == "undefined") {
        d = 1000
    }
    this._interval = d;
    this._callbacks = new Array();
    this._intervalId = null;
    this._lastId = 0;
    this.pageReloadAlreadyTriggered = false;
    this.checkEventsAlreadyQueued = false;
    if (c != false) {
        this.startTimer()
    }
};
TimerHandler.prototype.appendCallback = function(c) {
    var d = this._lastId++;
    this._callbacks[d] = c;
    return d
};
TimerHandler.prototype.removeCallback = function(b) {
    this._callbacks[b] = null
};
TimerHandler.prototype.startTimer = function() {
    var b = this;
    this._intervalId = window.setInterval(function() {
        b._timer()
    }, this._interval)
};
TimerHandler.prototype.stopTimer = function() {
    window.clearInterval(this._intervalId)
};
TimerHandler.prototype._timer = function() {
    for (var b in this._callbacks) {
        if (this._callbacks[b] != null) {
            this._callbacks[b]()
        }
    }
}
/*!
 * Tipped - The jQuery Tooltip - v3.1.8
 * (c) 2010-2013 Nick Stakenburg
 *
 * http://projects.nickstakenburg.com/tipped
 *
 * License: http://projects.nickstakenburg.com/tipped/license
 */
;
var Tipped = {version: "3.1.8"};
Tipped.Skins = {base: {afterUpdate: false, ajax: {cache: true, type: "get"}, background: {color: "#f2f2f2", opacity: 1}, border: {size: 1, color: "#000", opacity: 1}, closeButtonSkin: "default", containment: {selector: "viewport"}, fadeIn: 180, fadeOut: 220, showDelay: 75, hideDelay: 25, radius: {size: 5, position: "background"}, hideAfter: false, hideOn: {element: "self", event: "mouseleave"}, hideOthers: false, hook: "topleft", inline: false, offset: {x: 0, y: 0}, onHide: false, onShow: false, shadow: {blur: 2, color: "#000", offset: {x: 0, y: 0}, opacity: 0.12}, showOn: "mousemove", spinner: true, stem: {height: 9, width: 18, offset: {x: 9, y: 9}, spacing: 2}, target: "self"}, reset: {ajax: false, closeButton: false, hideOn: [{element: "self", event: "mouseleave"}, {element: "tooltip", event: "mouseleave"}], hook: "topmiddle", stem: true}, dark: {background: {color: "#282828"}, border: {color: "#9b9b9b", opacity: 0.4, size: 1}, shadow: {opacity: 0.02}, spinner: {color: "#fff"}}, light: {background: {color: "#fff"}, border: {color: "#646464", opacity: 0.4, size: 1}, shadow: {opacity: 0.04}}, gray: {background: {color: [{position: 0, color: "#8f8f8f"}, {position: 1, color: "#808080"}]}, border: {color: "#131313", size: 1, opacity: 0.6}}, tiny: {background: {color: "#161616"}, border: {color: "#969696", opacity: 0.35, size: 1}, fadeIn: 0, fadeOut: 0, radius: 4, stem: {width: 11, height: 6, offset: {x: 6, y: 6}}, shadow: false, spinner: {color: "#fff"}}, yellow: {background: "#ffffaa", border: {size: 1, color: "#6d5208", opacity: 0.4}}, red: {background: {color: [{position: 0, color: "#e13c37"}, {position: 1, color: "#e13c37"}]}, border: {size: 1, color: "#150201", opacity: 0.6}, spinner: {color: "#fff"}}, green: {background: {color: [{position: 0, color: "#4bb638"}, {position: 1, color: "#4aab3a"}]}, border: {size: 1, color: "#122703", opacity: 0.6}, spinner: {color: "#fff"}}, blue: {background: {color: [{position: 0, color: "#4588c8"}, {position: 1, color: "#3d7cb9"}]}, border: {color: "#020b17", opacity: 0.6}, spinner: {color: "#fff"}}};
(function(b) {
    b.extend(Tipped.Skins, {black: b.extend(true, {}, Tipped.Skins.dark, {radius: 0}), white: b.extend(true, {}, Tipped.Skins.light, {radius: 0})})
})(jQuery);
Tipped.Skins.CloseButtons = {base: {diameter: 17, border: 2, x: {diameter: 10, size: 2, opacity: 1}, states: {"default": {background: {color: [{position: 0, color: "#1a1a1a"}, {position: 0.46, color: "#171717"}, {position: 0.53, color: "#121212"}, {position: 0.54, color: "#101010"}, {position: 1, color: "#000"}], opacity: 1}, x: {color: "#fafafa", opacity: 1}, border: {color: "#fff", opacity: 1}}, hover: {background: {color: "#333", opacity: 1}, x: {color: "#e6e6e6", opacity: 1}, border: {color: "#fff", opacity: 1}}}, shadow: {blur: 1, color: "#000", offset: {x: 0, y: 0}, opacity: 0.5}}, reset: {}, "default": {}, light: {diameter: 17, border: 2, x: {diameter: 10, size: 2, opacity: 1}, states: {"default": {background: {color: [{position: 0, color: "#797979"}, {position: 0.48, color: "#717171"}, {position: 0.52, color: "#666"}, {position: 1, color: "#666"}], opacity: 1}, x: {color: "#fff", opacity: 0.95}, border: {color: "#676767", opacity: 1}}, hover: {background: {color: [{position: 0, color: "#868686"}, {position: 0.48, color: "#7f7f7f"}, {position: 0.52, color: "#757575"}, {position: 1, color: "#757575"}], opacity: 1}, x: {color: "#fff", opacity: 1}, border: {color: "#767676", opacity: 1}}}}};
eval(function(e, a, c, n, k, m) {
    k = function(b) {
        return(b < a ? "" : k(parseInt(b / a))) + ((b = b % a) > 35 ? String.fromCharCode(b + 29) : b.toString(36))
    };
    if (!"".replace(/^/, String)) {
        while (c--) {
            m[k(c)] = n[c] || k(c)
        }
        n = [function(b) {
                return m[b]
            }];
        k = function() {
            return"\\w+"
        };
        c = 1
    }
    while (c--) {
        if (n[c]) {
            e = e.replace(new RegExp("\\b" + k(c) + "\\b", "g"), n[c])
        }
    }
    return e
}('(12(a){12 c(a,b){13 c=[a,b];1a c.15=a,c.17=b,c}12 f(a){1N.5v&&5v[5v.6z?"6z":"8c"](a)}12 j(a){11.1g=a}12 k(a){13 b={};28(13 c 5w a)b[c]=a[c]+"2w";1a b}12 l(a,b){1a 1b.8d(a*a+b*b)}12 m(a){1a 2E*a/1b.2Z}12 n(a){1a a*1b.2Z/2E}12 o(a){1a 1/1b.4A(a)}12 v(b){1f(b){11.1g=b,u.1z(b);13 c=11.2e();11.19=a.1k({},c.19),11.2x=1,11.1o={},11.1V=a(b).1X("2p-1V"),u.30(11),11.29=11.19.1u.1D,11.6A=11.19.1l&&11.29,11.3a={x:0,y:0},11.3l={17:0,15:0},11.1P()}}12 x(b,c){11.1g=b,11.1g&&c&&(11.19=a.1k({31:3,1A:{x:0,y:0},1Q:"#4B",1K:.5,2L:1},20[2]||{}),11.2x=11.19.2L,11.1o={},11.1V=a(b).1X("2p-1V"),w.30(11),11.1P())}12 z(b){11.1g=b,11.1g&&(11.19=a.1k({31:5,1A:{x:0,y:0},1Q:"#4B",1K:.5,2L:1},20[1]||{}),11.2x=11.19.2L,11.1V=a(b).1X("2p-1V"),y.30(11),11.1P())}12 A(b,c){28(13 d 5w c)c[d]&&c[d].3D&&c[d].3D===5x?(b[d]=a.1k({},b[d])||{},A(b[d],c[d])):b[d]=c[d];1a b}12 C(b,c){1f(11.1g=b,11.1g){13 e=a(b).1X("2p-1V");e&&B.1z(b),e=h(),a(b).1X("2p-1V",e),11.1V=e;13 f;"8e"!=a.1p(c)||d.2j(c)?f=20[2]||{}:(f=c,c=1r),11.19=B.6B(f);13 g=b.6C("5y");1f(!c){13 i=b.6C("1X-2p");i?c=i:g&&(c=g)}g&&(a(b).1X("5z",g),b.8f("5y","")),11.2F=c,11.2k=11.19.2k||+B.19.4C,11.1o={2G:{14:1,18:1},5A:[],3b:[],2q:{4D:!1,2l:!1,1L:!1,3c:!1,1P:!1,4E:!1,5B:!1,3E:!1},5C:""};13 j=11.19.1C;11.1C="2M"==j?"2M":"4F"!=j&&j?d.2j(j)?j:j&&1x.6D(j)||11.1g:11.1g,11.6E(),B.30(11)}}13 b=6F.3F.8g,d={8h:12(c,d){13 e=c;1a 12(){13 c=[a.1v(e,11)].6G(b.5D(20));1a d.5E(11,c)}},2j:12(a){1a a&&1==a.8i},4G:12(a,c){13 d=b.5D(20,2);1a 8j(12(){1a a.5E(a,d)},c)},44:12(a){1a d.4G.5E(11,[a,1].6G(b.5D(20,1)))},5F:12(a){1a{x:a.5G,y:a.6H}},1g:{4H:12(a){13 b=0,d=0;8k b+=a.4I||0,d+=a.4J||0,a=a.4K;8l(a);1a c(d,b)},4L:12(b){13 e=a(b).1A(),f=d.1g.4H(b),g={17:a(1N).4I(),15:a(1N).4J()};1a e.15+=f.15-g.15,e.17+=f.17-g.17,c(e.15,e.17)},5H:12(){12 a(a){28(13 b=a;b&&b.4K;)b=b.4K;1a b}1a 12(b){13 c=a(b);1a!(!c||!c.3d)}}()}},e=12(a){12 b(b){13 c=5I(b+"([\\\\d.]+)").8m(a);1a c?5J(c[1]):!0}1a{3m:!(!1N.8n||-1!==a.3n("5K"))&&b("8o "),5K:a.3n("5K")>-1&&(!!1N.5L&&5L.6I&&5J(5L.6I())||7.55),5M:a.3n("6J/")>-1&&b("6J/"),4M:a.3n("4M")>-1&&-1===a.3n("8p")&&b("8q:"),6K:!!a.3e(/8r.*8s.*8t/),4N:a.3n("4N")>-1&&b("4N/")}}(8u.8v),g={32:{46:{5N:"1.4.4",5O:1N.46&&46.8w.8x}},6L:12(){12 b(b){28(13 c=b.3e(a),d=c&&c[1]&&c[1].2N(".")||[],e=0,f=0,g=d.2a;g>f;f++)e+=2O(d[f]*1b.6M(10,6-2*f));1a c&&c[3]?e-1:e}13 a=/^(\\d+(\\.?\\d+){0,3})([A-6N-8y-]+[A-6N-8z-9]+)?/;1a 12(a){11.32[a].6O||(11.32[a].6O=!0,(!11.32[a].5O||b(11.32[a].5O)<b(11.32[a].5N)&&!11.32[a].6P)&&(11.32[a].6P=!0,f("1S 8A "+a+" >= "+11.32[a].5N)))}}()},h=12(){13 a=0,b="8B";1a 12(c){28(c=c||b,a++;1x.6D(c+a);)a++;1a c+a}}(),i=12(){13 b=[];1a{1t:12(c){28(13 d=1r,e=0;b.2a>e;e++)b[e]&&b[e].47==c.47&&b[e].1p.6Q()==c.1p.6Q()&&a.6R(b[e].1X||{})==a.6R(c.1X||{})&&(d=b[e].4O);1a d},4P:12(c,d){11.1z(c.47),b.2n(a.1k({},c,{4O:d}))},1z:12(a){28(13 c=0;b.2a>c;c++)b[c]&&b[c].47==a&&3G b[c]},6S:12(){b=[]}}}();a.1k(1S,12(){1a{2H:{3f:12(){13 a=1x.22("3f");1a!(!a.3o||!a.3o("2d"))}(),3H:12(){6T{1a!!("8C"5w 1N||1N.6U&&1x 8D 6U)}6V(a){1a!1}}(),48:12(){13 b=["8E","8F","8G"],c=!1;1a a.1w(b,12(a,b){6T{1x.8H(b),c=!0}6V(d){}}),c}()},3p:12(){(11.2H.3f||e.3m)&&(g.6L("46"),a(1x).6W(12(){B.6X()}))},4Q:12(a,b,c){1a j.4Q(a,b,c),11.1t(a)},1t:12(a){1a 3q j(a)},5P:12(a){1a B.5P(a)},1W:12(a){1a 11.1t(a).1W(),11},1I:12(a){1a 11.1t(a).1I(),11},33:12(a){1a 11.1t(a).33(),11},2P:12(a){1a 11.1t(a).2P(),11},1z:12(a){1a 11.1t(a).1z(),11},4R:12(){1a B.4R(),11},5Q:12(a){1a B.5Q(a),11},5R:12(a){1a B.5R(a),11},1L:12(b){1f(d.2j(b))1a B.5S(b);1f("5T"!=a.1p(b)){13 c=a(b),e=0;1a a.1w(c,12(a,b){B.5S(b)&&e++}),e}1a B.3I().2a},5U:12(){1a B.5U(),11}}}()),a.1k(j,{4Q:12(b,c){1f(b){13 e=20[2]||{},f=[];1a B.6Y(),d.2j(b)?f.2n(3q C(b,c,e)):a(b).1w(12(a,b){f.2n(3q C(b,c,e))}),f}}}),a.1k(j.3F,{49:12(){1a B.2r.4S={x:0,y:0},B.1t(11.1g)},1W:12(){1a a.1w(11.49(),12(a,b){b.1W()}),11},1I:12(){1a a.1w(11.49(),12(a,b){b.1I()}),11},33:12(){1a a.1w(11.49(),12(a,b){b.33()}),11},2P:12(){1a a.1w(11.49(),12(a,b){b.2P()}),11},1z:12(){1a B.1z(11.1g),11}});13 p={4T:12(){13 b;1a b=e.6K?{14:1N.5V,18:1N.5W}:{18:a(1N).18(),14:a(1N).14()}}},q={3r:1b.1E(1b.4U(1N.3r?5J(1N.3r)||1:1,2)),3p:12(){12 a(a){13 b=a.3o("2d");b.8I(q.3r,q.3r)}1a 1N.4V&&!1S.2H.3f&&e.3m?12(b){4V.8J(b),a(b)}:12(b){a(b)}}(),3J:12(b,c){a(b).3g({14:c.14*11.3r,18:c.18*11.3r}).1q(k(c))},6Z:12(b){13 c=a.1k({17:0,15:0,14:0,18:0,1n:0},20[1]||{}),d=c,e=d.15,f=d.17,g=d.14,h=d.18,i=d.1n;1a i?(b.2f(),b.3s(e+i,f),b.26(e+g-i,f+i,i,n(-90),n(0),!1),b.26(e+g-i,f+h-i,i,n(0),n(90),!1),b.26(e+i,f+h-i,i,n(90),n(2E),!1),b.26(e+i,f+i,i,n(-2E),n(-90),!1),b.2g(),b.34(),3t 0):(b.70(e,f,g,h),3t 0)},8K:12(b,c){28(13 d=a.1k({x:0,y:0,1Q:"#4B"},20[2]||{}),e=0,f=c.2a;f>e;e++)28(13 g=0,h=c[e].2a;h>g;g++){13 i=2O(c[e].3u(g))*(1/9);b.2Q=t.2R(d.1Q,i),i&&b.70(d.x+g,d.y+e,1,1)}},4a:12(b,c){13 d;1f("2s"==a.1p(c))d=t.2R(c);1G 1f("2s"==a.1p(c.1Q))d=t.2R(c.1Q,"2y"==a.1p(c.1K)?c.1K:1);1G 1f(a.71(c.1Q)){13 e=a.1k({3K:0,3L:0,3M:0,3N:0},20[2]||{});d=q.72.73(b.8L(e.3K,e.3L,e.3M,e.3N),c.1Q,c.1K)}1a d}};q.72={73:12(b,c){28(13 d="2y"==a.1p(20[2])?20[2]:1,e=0,f=c.2a;f>e;e++){13 g=c[e];("5T"==a.1p(g.1K)||"2y"!=a.1p(g.1K))&&(g.1K=1),b.8M(g.1e,t.2R(g.1Q,g.1K*d))}1a b}};13 r={74:["3O","4b","3P","3Q","4c","4d","4e","4f","4g","4h","4i","3R"],4j:{75:/^(17|15|1R|1O)(17|15|1R|1O|2t|2S)$/,1J:/^(17|1R)/,35:/(2t|2S)/,76:/^(17|1R|15|1O)/},77:12(){13 a={17:"18",15:"14",1R:"18",1O:"14"};1a 12(b){1a a[b]}}(),35:12(a){1a!!a.3v().3e(11.4j.35)},78:12(a){1a!11.35(a)},2I:12(a){1a a.3v().3e(11.4j.1J)?"1J":"2b"},5X:12(a){13 b=1r,c=a.3v().3e(11.4j.76);1a c&&c[1]&&(b=c[1]),b},2N:12(a){1a a.3v().3e(11.4j.75)}},s={5Y:12(a){13 b=a.19.1l;1a{14:b.14,18:b.18}},4k:12(b,c){13 d=a.1k({3S:"1E"},20[2]||{}),e=b.19.1l,f=e.14,g=e.18,h=11.4W(f,g,c);1a d.3S&&(h.14=1b[d.3S](h.14),h.18=1b[d.3S](h.18)),{14:h.14,18:h.18}},4W:12(a,b,c){13 d=m(1b.79(.5*(b/a))),e=2E-d,f=1b.4A(n(e-90))*c,g=a+2*f,h=g*b/a;1a{14:g,18:h}},3T:12(a,b){13 c=11.4k(a,b),d=11.5Y(a),f=(r.35(a.29),1b.1E(c.18+b));1a a.19.1l.1A||0,a.19.1n&&a.19.1n.2u||0,{2z:{1c:{14:1b.1E(c.14),18:1b.1E(f)}},1i:{1c:c},1l:{1c:{14:d.14,18:d.18}}}},5Z:12(b,c,d){13 f=b.19,g={17:0,15:0},h={17:0,15:0},i=a.1k({},c),j=b.1i,k=k||11.3T(b,b.1i),l=k.2z.1c;d&&(l.18=d,j=0);13 m=r.2N(b.29),n=r.2I(b.29);1f(b.19.1l){13 o=r.5X(b.29);1f("17"==o?g.17=l.18-j:"15"==o&&(g.15=l.18-j),"1J"==n){1T(m[2]){1h"2t":1h"2S":h.15=.5*i.14;1B;1h"1O":h.15=i.14}"1R"==m[1]&&(h.17=i.18-j+l.18)}1G{1T(m[2]){1h"2t":1h"2S":h.17=.5*i.18;1B;1h"1R":h.17=i.18}"1O"==m[1]&&(h.15=i.14-j+l.18)}i[r.77(o)]+=l.18-j}1G 1f("1J"==n){1T(m[2]){1h"2t":1h"2S":h.15=.5*i.14;1B;1h"1O":h.15=i.14}"1R"==m[1]&&(h.17=i.18)}1G{1T(m[2]){1h"2t":1h"2S":h.17=.5*i.18;1B;1h"1R":h.17=i.18}"1O"==m[1]&&(h.15=i.14)}13 p=f.1n&&f.1n.2u||0,q=f.1i&&f.1i.2u||0;1f(b.19.1l){13 t=p&&"1m"==f.1n.1e?p:0,u=p&&"1i"==f.1n.1e?p:p+q,v=q+t+.5*k.1l.1c.14-.5*k.1i.1c.14,w=u>v?u-v:0,x=1b.1E(q+t+.5*k.1l.1c.14+w);1f("1J"==n)1T(m[2]){1h"15":h.15+=x;1B;1h"1O":h.15-=x}1G 1T(m[2]){1h"17":h.17+=x;1B;1h"1R":h.17-=x}}13 y;1f(f.1l&&(y=f.1l.1A)){13 z=s.60(y,b.6A,c,k.1i.1c,q,p);1f(y=z.1A,z.4l,"1J"==n)1T(m[2]){1h"15":h.15+=y.x;1B;1h"1O":h.15-=y.x}1G 1T(m[2]){1h"17":h.17+=y.y;1B;1h"1R":h.17-=y.y}}13 B;1f(f.1l&&(B=f.1l.8N))1f("1J"==n)1T(m[1]){1h"17":h.17-=B;1B;1h"1R":h.17+=B}1G 1T(m[1]){1h"15":h.15-=B;1B;1h"1O":h.15+=B}1a{1c:i,1e:{17:0,15:0},1m:{1e:g,1c:c},1l:{1c:l},2J:h}},60:12(b,c,d,e,f,g){13 h=r.2I(c),i=a.1k({},b),j={x:0,y:0},k=0;1a"1J"==h&&(k=d.14-e.14-2*f-2*g)<2*b.x&&(j.x=i.x,/(1O)$/.3h(c)&&(j.x*=-1),i.x=0),"2b"==h&&(k=d.18-e.18-2*f-2*g)<2*b.y&&(j.y=i.y,/(1R)$/.3h(c)&&(j.y*=-1),i.y=0),{1A:i,4l:j}}},t=12(){12 d(a){13 b=a;1a b.7a=a[0],b.7b=a[1],b.7c=a[2],b}12 e(a){1a 2O(a,16)}12 f(a){13 b=6F(3);1f(0==a.3n("#")&&(a=a.4X(1)),a=a.3v(),""!=a.61(c,""))1a 1r;3==a.2a?(b[0]=a.3u(0)+a.3u(0),b[1]=a.3u(1)+a.3u(1),b[2]=a.3u(2)+a.3u(2)):(b[0]=a.4X(0,2),b[1]=a.4X(2,4),b[2]=a.4X(4));28(13 f=0;b.2a>f;f++)b[f]=e(b[f]);1a d(b)}12 g(a,b){13 c=f(a);1a c[3]=b,c.1K=b,c}12 h(b,c){1a"5T"==a.1p(c)&&(c=1),"8O("+g(b,c).8P()+")"}12 i(a){1a"#"+(j(a)[2]>50?"4B":"8Q")}12 j(a){1a k(f(a))}12 k(a){13 f,g,h,a=d(a),b=a.7a,c=a.7b,e=a.7c,i=b>c?b:c;e>i&&(i=e);13 j=c>b?b:c;1f(j>e&&(j=e),h=i/8R,g=0!=i?(i-j)/i:0,0==g)f=0;1G{13 k=(i-b)/(i-j),l=(i-c)/(i-j),m=(i-e)/(i-j);f=b==i?m-l:c==i?2+k-m:4+l-k,f/=6,0>f&&(f+=1)}f=1b.23(7d*f),g=1b.23(62*g),h=1b.23(62*h);13 n=[];1a n[0]=f,n[1]=g,n[2]=h,n.8S=f,n.8T=g,n.8U=h,n}13 b="8V",c=5I("["+b+"]","g");1a{8W:f,2R:h,8X:i}}(),u={4Y:{},1t:12(b){1f(!b)1a 1r;13 c=1r,d=a(b).1X("2p-1V");1a d&&(c=11.4Y[d]),c},30:12(a){11.4Y[a.1V]=a},1z:12(a){13 b=11.1t(a);b&&(3G 11.4Y[b.1V],b.1z())}};a.1k(v.3F,12(){12 b(){11.1o.1u={};13 b=11.29;a.1w(r.74,a.1v(12(b,c){13 d,e=11.1o.1u[c]={};11.29=c;13 f=11.2o();d=f,e.2J=d.2J;13 g=d.1H.1c,h={17:d.1H.1e.17,15:d.1H.1e.15};1f(e.1H={1c:g,1e:h},e.1D={1c:d.21.1c},11.1s){13 i=11.1s.2o(),j=i.21.1e,k=e.1H.1e;a.1k(!0,e,{2J:i.2J,1H:{1e:{17:k.17+j.17,15:k.15+j.15}},1D:{1c:i.1D.1c}})}},11)),11.29=b}12 c(){11.36(),11.19.1s&&(w.1z(11.1g),11.19.1y&&11.19.1y.1s&&y.1z(11.1g)),11.2T&&(11.2T.1z(),11.2T=1r),11.1j&&(a(11.1j).1z(),11.1j=1r)}12 d(){11.1H&&(11.1y&&(a(11.1y).1z(),11.1y=1r,11.63=1r,11.64=1r),a(11.1H).1z(),11.1l=1r,11.1m=1r,11.1H=1r,11.1o={})}12 f(){13 a=11.2e();11.2G=a.1o.2G;13 b=a.19;11.1n=b.1n&&b.1n.2u||0,11.1i=b.1i&&b.1i.2u||0,11.2m=b.2m;13 c=1b.4U(11.2G.18,11.2G.14);11.1n>c/2&&(11.1n=1b.65(c/2)),"1i"==11.19.1n.1e&&11.1n>11.1i&&(11.1i=11.1n),11.1o={19:{1n:11.1n,1i:11.1i,2m:11.2m}}}12 g(){11.36(),1N.4V&&1N.4V.8Y(1x);13 b=11.2e(),c=11.19;11.1H=a("<2h>").1Y("8Z")[0],a(b.4Z).1Z(11.1H),11.51(),11.7e(b),c.1y&&(11.7f(b),c.1y.1s&&(11.2U?(11.2U.19=c.1y.1s,11.2U.1P()):11.2U=3q z(11.1g,a.1k({2L:11.2x},c.1y.1s)))),e.3m&&7>e.3m&&a(b.1j).66(11.2T=a("<91>").1Y("92").3g({93:0,4m:"94:\'\';"})),11.52(),c.1s&&(11.1s?(11.1s.19=c.1s,11.1s.1P()):11.1s=3q x(11.1g,11,a.1k({2L:11.2x},c.1s))),11.7g()}12 h(){13 b=11.2e(),c=a(b.1j),d=a(b.1j).67(".7h").7i()[0];1f(d){a(d).1q({14:"68",18:"68"});13 e=2O(c.1q("17")),f=2O(c.1q("15")),g=2O(c.1q("14"));c.1q({15:"-7j",17:"-7j",14:"95",18:"68"}),b.1F("1L")||a(b.1j).1W();13 h=B.53.69(d);b.19.3i&&"2y"==a.1p(b.19.3i)&&h.14>b.19.3i&&(a(d).1q({14:b.19.3i+"2w"}),h=B.53.69(d)),b.1F("1L")||a(b.1j).1I(),b.1o.2G=h,c.1q({15:f+"2w",17:e+"2w",14:g+"2w"}),11.1P()}}12 i(a,b,c){13 d=!1;11.4n(a)&&(d=!0),11.7k(b)&&(d=!0),c&&11.7l(c)&&(d=!0),d&&11.1P()}12 j(a){13 b=!1;1a(11.3l.15!=a.15||11.3l.17!=a.17)&&(b=!0,11.3l=a),b}12 l(a){13 b=!1;1a(11.3a.x!=a.x||11.3a.y!=a.y)&&(b=!0,11.3a=a),b}12 m(a){13 c=!1;1a 11.29!=a&&(c=!0,11.29=a),c}12 o(){1a B.1t(11.1g)[0]}12 p(){1a s.3T(11,11.1i)}12 u(){13 b=11.2e().19.1y,c=b.3w+2*b.1i;a(11.63).1q({15:-1*c+"2w"}),a(11.64).1q({15:0})}12 v(){13 b=11.2e().19.1y,c=b.3w+2*b.1i;a(11.63).1q({15:0}),a(11.64).1q({15:c+"2w"})}12 A(b){13 c=b.19.1y,d={14:c.3w+2*c.1i,18:c.3w+2*c.1i};a(b.1j).1Z(a(11.1y=1x.22("2h")).1Y("7m").1q(k(d)).1Z(a(11.7n=1x.22("2h")).1Y("96").1q(k(d)))),11.6a(b,"6b"),11.6a(b,"6c"),1S.2H.3H||e.4N||a(11.1y).3U("4o",a.1v(11.7o,11)).3U("54",a.1v(11.7p,11))}12 C(b,c){13 d=b.19.1y,e=d.3w,f=d.1i||0,g=d.x.3w,h=d.x.2u,j=(d.x.97,d.2q[c||"6b"]),l={14:e+2*f,18:e+2*f};g>=e&&(g=e-2);13 m;a(11.7n).1Z(a(11[c+"7q"]=1x.22("2h")).1Y("98").1q(a.1k(k(l),{15:("6c"==c?l.14:0)+"2w"}))),a(1x.3d).1Z(a(m=1x.22("3f"))),q.3J(m,l),q.3p(m);13 o=m.3o("2d");o.2L=11.2x,a(11[c+"7q"]).1Z(m),o.99(l.14/2,l.18/2),o.2Q=q.4a(o,j.1m,{3K:0,3L:0-e/2,3M:0,3N:0+e/2}),o.2f(),o.26(0,0,e/2,0,2*1b.2Z,!0),o.2g(),o.34(),f&&(o.2Q=q.4a(o,j.1i,{3K:0,3L:0-e/2-f,3M:0,3N:0+e/2+f}),o.2f(),o.26(0,0,e/2,1b.2Z,0,!1),o.1d((e+f)/2,0),o.26(0,0,e/2+f,0,1b.2Z,!0),o.26(0,0,e/2+f,1b.2Z,0,!0),o.1d(e/2,0),o.26(0,0,e/2,0,1b.2Z,!1),o.2g(),o.34());13 p=g/2,r=h/2;1f(r>p){13 s=r;r=p,p=s}o.2Q=t.2R(j.x.1Q||j.x,j.x.1K||1),o.56(n(45)),o.2f(),o.3s(0,0),o.1d(0,p);28(13 u=0;4>u;u++)o.1d(0,p),o.1d(r,p),o.1d(r,p-(p-r)),o.1d(p,r),o.1d(p,0),o.56(n(90));o.2g(),o.34()}12 D(b){13 l,m,o,p,q,c=a.1k({1l:!1,3x:1r,9a:1r,2f:!1,2g:!1,3y:1r,3z:1r,1n:0,1i:0,57:0,37:{x:0,y:0}},20[1]||{}),d=c.3y,e=c.3z,f=c.37,g=c.1i,h=c.1n,i=c.3x,j=d.1m.1e,k=d.1m.1c,t={x:1b.2V(11.3a.x),y:1b.2V(11.3a.y)},u={x:0,y:0},v={x:0,y:0};1f(e){l=e.1l.1c,m=e.2z.1e,o=e.2z.1c,p=o.14-l.14;13 w=c.57,x=g+h+.5*l.14-.5*e.1i.1c.14;q=1b.1E(w>x?w-x:0);13 y=s.60(f,i,k,e.1i.1c,g,h);f=y.1A,v=y.4l,u={x:1b.1U(k.14-2*1b.1U(q,f.x||0)-e.1i.1c.14-(2*h||0),0),y:1b.1U(k.18-2*1b.1U(q,f.y||0)-e.1i.1c.18-(2*h||0),0)},r.35(i)&&(u.x*=.5,u.y*=.5),t.x=1b.4U(t.x,u.x),t.y=1b.4U(t.y,u.y),r.35(i)&&(0>11.3a.x&&t.x>0&&(t.x*=-1),0>11.3a.y&&t.y>0&&(t.y*=-1)),11.3l&&11.3l.3A&&a.1w(11.3l.3A,12(b,c){a.1w("17 1O 1R 15".2N(" "),12(a,b){c==b&&5I("("+b+")$").3h(i)&&(t[/^(15|1O)$/.3h(b)?"x":"y"]=0)})})}13 z,A;1f(h?(z=j.15+g+h,A=j.17+g):(z=j.15+g,A=j.17+g),f&&f.x&&/^(3O|3R)$/.3h(i)&&(z+=f.x),c.2f&&b.2f(),b.3s(z,A),c.1l)1T(i){1h"3O":z=j.15+g,h&&(z+=h),z+=1b.1U(q,f.x||0),z+=t.x,b.1d(z,A),A-=l.18,z+=.5*l.14,b.1d(z,A),A+=l.18,z+=.5*l.14,b.1d(z,A);1B;1h"4b":1h"58":z=j.15+.5*k.14-.5*l.14,z+=t.x,b.1d(z,A),A-=l.18,z+=.5*l.14,b.1d(z,A),A+=l.18,z+=.5*l.14,b.1d(z,A),z=j.15+.5*k.14-.5*o.14,b.1d(z,A);1B;1h"3P":z=j.15+k.14-g-l.14,h&&(z-=h),z-=1b.1U(q,f.x||0),z-=t.x,b.1d(z,A),A-=l.18,z+=.5*l.14,b.1d(z,A),A+=l.18,z+=.5*l.14,b.1d(z,A)}1f(h?h&&(b.26(j.15+k.14-g-h,j.17+g+h,h,n(-90),n(0),!1),z=j.15+k.14-g,A=j.17+g+h):(z=j.15+k.14-g,A=j.17+g,b.1d(z,A)),c.1l)1T(i){1h"3Q":A=j.17+g,h&&(A+=h),A+=1b.1U(q,f.y||0),A+=t.y,b.1d(z,A),z+=l.18,A+=.5*l.14,b.1d(z,A),z-=l.18,A+=.5*l.14,b.1d(z,A);1B;1h"4c":1h"59":A=j.17+.5*k.18-.5*l.14,A+=t.y,b.1d(z,A),z+=l.18,A+=.5*l.14,b.1d(z,A),z-=l.18,A+=.5*l.14,b.1d(z,A);1B;1h"4d":A=j.17+k.18-g,h&&(A-=h),A-=l.14,A-=1b.1U(q,f.y||0),A-=t.y,b.1d(z,A),z+=l.18,A+=.5*l.14,b.1d(z,A),z-=l.18,A+=.5*l.14,b.1d(z,A)}1f(h?h&&(b.26(j.15+k.14-g-h,j.17+k.18-g-h,h,n(0),n(90),!1),z=j.15+k.14-g-h,A=j.17+k.18-g):(z=j.15+k.14-g,A=j.17+k.18-g,b.1d(z,A)),c.1l)1T(i){1h"4e":z=j.15+k.14-g,h&&(z-=h),z-=1b.1U(q,f.x||0),z-=t.x,b.1d(z,A),z-=.5*l.14,A+=l.18,b.1d(z,A),z-=.5*l.14,A-=l.18,b.1d(z,A);1B;1h"4f":1h"5a":z=j.15+.5*k.14+.5*l.14,z+=t.x,b.1d(z,A),z-=.5*l.14,A+=l.18,b.1d(z,A),z-=.5*l.14,A-=l.18,b.1d(z,A);1B;1h"4g":z=j.15+g+l.14,h&&(z+=h),z+=1b.1U(q,f.x||0),z+=t.x,b.1d(z,A),z-=.5*l.14,A+=l.18,b.1d(z,A),z-=.5*l.14,A-=l.18,b.1d(z,A)}1f(h?h&&(b.26(j.15+g+h,j.17+k.18-g-h,h,n(90),n(2E),!1),z=j.15+g,A=j.17+k.18-g-h):(z=j.15+g,A=j.17+k.18-g,b.1d(z,A)),c.1l)1T(i){1h"4h":A=j.17+k.18-g,h&&(A-=h),A-=1b.1U(q,f.y||0),A-=t.y,b.1d(z,A),z-=l.18,A-=.5*l.14,b.1d(z,A),z+=l.18,A-=.5*l.14,b.1d(z,A);1B;1h"4i":1h"5b":A=j.17+.5*k.18+.5*l.14,A+=t.y,b.1d(z,A),z-=l.18,A-=.5*l.14,b.1d(z,A),z+=l.18,A-=.5*l.14,b.1d(z,A);1B;1h"3R":A=j.17+g+l.14,h&&(A+=h),A+=1b.1U(q,f.y||0),A+=t.y,b.1d(z,A),z-=l.18,A-=.5*l.14,b.1d(z,A),z+=l.18,A-=.5*l.14,b.1d(z,A)}1a h?h&&(b.26(j.15+g+h,j.17+g+h,h,n(-2E),n(-90),!1),z=j.15+g+h,A=j.17+g,z+=1,b.1d(z,A)):(z=j.15+g,A=j.17+g,b.1d(z,A)),c.2g&&b.2g(),{x:z,y:A,1l:t,5c:v,37:f}}12 E(b){13 o,p,q,r,s,t,c=a.1k({1l:!1,3x:1r,2f:!1,2g:!1,3y:1r,3z:1r,1n:0,1i:0,7r:0,37:{x:0,y:0},5d:1r},20[1]||{}),d=c.3y,e=c.3z,g=(c.7r,c.37),h=c.1i,i=c.1n&&c.1n.2u||0,j=c.7s,k=c.3x,l=d.1m.1e,m=d.1m.1c,u=c.5d&&c.5d.1l||{x:0,y:0};1f(e){o=e.1l.1c,p=e.2z.1e,q=e.2z.1c,r=e.1i.1c,s=q.14-o.14;13 v=h+j+.5*o.14-.5*r.14;t=1b.1E(i>v?i-v:0)}13 w=l.15+h+j,x=l.17+h;j&&(w+=1),a.1k({},{x:w,y:x}),c.2f&&b.2f();13 z=a.1k({},{x:w,y:x});1f(x-=h,b.1d(w,x),i?i&&(b.26(l.15+i,l.17+i,i,n(-90),n(-2E),!0),w=l.15,x=l.17+i):(w=l.15,x=l.17,b.1d(w,x)),c.1l)1T(k){1h"3R":x=l.17+h,j&&(x+=j),x-=.5*r.14,x+=.5*o.14,x+=1b.1U(t,g.y||0),x+=u.y,b.1d(w,x),w-=r.18,x+=.5*r.14,b.1d(w,x),w+=r.18,x+=.5*r.14,b.1d(w,x);1B;1h"4i":1h"5b":x=l.17+.5*m.18-.5*r.14,x+=u.y,b.1d(w,x),w-=r.18,x+=.5*r.14,b.1d(w,x),w+=r.18,x+=.5*r.14,b.1d(w,x);1B;1h"4h":x=l.17+m.18-h-r.14,j&&(x-=j),x+=.5*r.14,x-=.5*o.14,x-=1b.1U(t,g.y||0),x-=u.y,b.1d(w,x),w-=r.18,x+=.5*r.14,b.1d(w,x),w+=r.18,x+=.5*r.14,b.1d(w,x)}1f(i?i&&(b.26(l.15+i,l.17+m.18-i,i,n(-2E),n(-9b),!0),w=l.15+i,x=l.17+m.18):(w=l.15,x=l.17+m.18,b.1d(w,x)),c.1l)1T(k){1h"4g":w=l.15+h,j&&(w+=j),w-=.5*r.14,w+=.5*o.14,w+=1b.1U(t,g.x||0),w+=u.x,b.1d(w,x),x+=r.18,w+=.5*r.14,b.1d(w,x),x-=r.18,w+=.5*r.14,b.1d(w,x);1B;1h"4f":1h"5a":w=l.15+.5*m.14-.5*r.14,w+=u.x,b.1d(w,x),x+=r.18,w+=.5*r.14,b.1d(w,x),x-=r.18,w+=.5*r.14,b.1d(w,x),w=l.15+.5*m.14+r.14,b.1d(w,x);1B;1h"4e":w=l.15+m.14-h-r.14,j&&(w-=j),w+=.5*r.14,w-=.5*o.14,w-=1b.1U(t,g.x||0),w-=u.x,b.1d(w,x),x+=r.18,w+=.5*r.14,b.1d(w,x),x-=r.18,w+=.5*r.14,b.1d(w,x)}1f(i?i&&(b.26(l.15+m.14-i,l.17+m.18-i,i,n(90),n(0),!0),w=l.15+m.14,x=l.17+m.14+i):(w=l.15+m.14,x=l.17+m.18,b.1d(w,x)),c.1l)1T(k){1h"4d":x=l.17+m.18-h,x+=.5*r.14,x-=.5*o.14,j&&(x-=j),x-=1b.1U(t,g.y||0),x-=u.y,b.1d(w,x),w+=r.18,x-=.5*r.14,b.1d(w,x),w-=r.18,x-=.5*r.14,b.1d(w,x);1B;1h"4c":1h"59":x=l.17+.5*m.18+.5*r.14,x+=u.y,b.1d(w,x),w+=r.18,x-=.5*r.14,b.1d(w,x),w-=r.18,x-=.5*r.14,b.1d(w,x);1B;1h"3Q":x=l.17+h,j&&(x+=j),x+=r.14,x-=.5*r.14-.5*o.14,x+=1b.1U(t,g.y||0),x+=u.y,b.1d(w,x),w+=r.18,x-=.5*r.14,b.1d(w,x),w-=r.18,x-=.5*r.14,b.1d(w,x)}1f(i?i&&(b.26(l.15+m.14-i,l.17+i,i,n(0),n(-90),!0),w=l.15+m.14-i,x=l.17):(w=l.15+m.14,x=l.17,b.1d(w,x)),c.1l)1T(k){1h"3P":w=l.15+m.14-h,w+=.5*r.14-.5*o.14,j&&(w-=j),w-=1b.1U(t,g.x||0),w-=u.x,b.1d(w,x),x-=r.18,w-=.5*r.14,b.1d(w,x),x+=r.18,w-=.5*r.14,b.1d(w,x);1B;1h"4b":1h"58":w=l.15+.5*m.14+.5*r.14,w+=u.x,b.1d(w,x),x-=r.18,w-=.5*r.14,b.1d(w,x),x+=r.18,w-=.5*r.14,b.1d(w,x),w=l.15+.5*m.14-r.14,b.1d(w,x),b.1d(w,x);1B;1h"3O":w=l.15+h+r.14,w-=.5*r.14,w+=.5*o.14,j&&(w+=j),w+=1b.1U(t,g.x||0),w+=u.x,b.1d(w,x),x-=r.18,w-=.5*r.14,b.1d(w,x),x+=r.18,w-=.5*r.14,b.1d(w,x)}b.1d(z.x,z.y-h),b.1d(z.x,z.y),c.2g&&b.2g()}12 F(b){13 c=11.2o(),d=11.19.1l&&11.4p(),e=11.29&&11.29.3v(),f=11.1n,h=11.1i,i=11.2m,k=({14:2*h+2*i+11.2G.14,18:2*h+2*i+11.2G.18},b.19.1l&&b.19.1l.1A||{x:0,y:0}),l=0,m=0;f&&(l="1m"==11.19.1n.1e?f:0,m="1i"==11.19.1n.1e?f:l+h),a(1x.3d).1Z(11.2W=1x.22("3f")),q.3J(11.2W,c.1H.1c),q.3p(11.2W);13 n=11.2W.3o("2d");n.2L=11.2x,a(11.1H).1Z(11.2W),n.2Q=q.4a(n,11.19.1m,{3K:0,3L:c.1m.1e.17+h,3M:0,3N:c.1m.1e.17+c.1m.1c.18-h}),n.9c=0;13 o;1f(o=11.6d(n,{2f:!0,2g:!0,1i:h,1n:l,57:m,3y:c,3z:d,1l:11.19.1l,3x:e,37:k}),n.34(),h){13 p=q.4a(n,11.19.1i,{3K:0,3L:c.1m.1e.17,3M:0,3N:c.1m.1e.17+c.1m.1c.18});n.2Q=p,o=11.6d(n,{2f:!0,2g:!1,1i:h,1n:l,57:m,3y:c,3z:d,1l:11.19.1l,3x:e,37:k}),11.7t(n,{2f:!1,2g:!0,1i:h,7s:l,1n:{2u:m,1e:11.19.1n.1e},3y:c,3z:d,1l:11.19.1l,3x:e,37:o.37,5d:o}),n.34()}11.3B=o}12 G(){13 i,a=11.2e(),b=11.2G,c=a.19,d=11.1n,f=11.1i,g=11.2m,h={14:2*f+2*g+b.14,18:2*f+2*g+b.18};1f(11.19.1l){13 j=11.4p();i=j.2z.1c}13 k=s.5Z(11,h),l=k.1c,m=k.1e,h=k.1m.1c,o=k.1m.1e;k.1l.1c;13 r,t,u,q={17:0,15:0},v={14:l.14,18:l.18};1f(c.1y){13 w=d;"1m"==c.1n.1e&&(w+=f);13 x=w-1b.9d(n(45))*w,y="1O";11.29.3v().3e(/^(3P|3Q)$/)&&(y="15");13 z=c.1y.3w+2*c.1y.1i,r={14:z,18:z};1f(q.15=o.15-z/2+("15"==y?x:h.14-x),q.17=o.17-z/2+x,"15"==y){1f(0>q.15){13 A=1b.2V(q.15);v.14+=A,m.15+=A,q.15=0}}1G{13 B=q.15+z-v.14;B>0&&(v.14+=B)}1f(0>q.17){13 C=1b.2V(q.17);v.18+=C,m.17+=C,q.17=0}1f(11.19.1y.1s){13 D=11.19.1y.1s,E=D.31,F=D.1A;1f(t={14:r.14+2*E,18:r.18+2*E},u={17:q.17-E+F.y,15:q.15-E+F.x},"15"==y){1f(0>u.15){13 A=1b.2V(u.15);v.14+=A,m.15+=A,q.15+=A,u.15=0}}1G{13 B=u.15+t.14-v.14;B>0&&(v.14+=B)}1f(0>u.17){13 C=1b.2V(u.17);v.18+=C,m.17+=C,q.17+=C,u.17=0}}}13 G=k.2J;G.17+=m.17,G.15+=m.15;13 H={15:1b.1E(m.15+o.15+11.1i+11.19.2m),17:1b.1E(m.17+o.17+11.1i+11.19.2m)},I={1D:{1c:{14:1b.1E(v.14),18:1b.1E(v.18)}},21:{1c:{14:1b.1E(v.14),18:1b.1E(v.18)}},1H:{1c:l,1e:{17:1b.23(m.17),15:1b.23(m.15)}},1m:{1c:{14:1b.1E(h.14),18:1b.1E(h.18)},1e:{17:1b.23(o.17),15:1b.23(o.15)}},2J:{17:1b.23(G.17),15:1b.23(G.15)},2F:{1e:H}};1a 11.19.1y&&(I.1y={1c:{14:1b.1E(r.14),18:1b.1E(r.18)},1e:{17:1b.23(q.17),15:1b.23(q.15)}},11.19.1y.1s&&(I.2U={1c:{14:1b.1E(t.14),18:1b.1E(t.18)},1e:{17:1b.23(u.17),15:1b.23(u.15)}})),I}12 H(){13 b=11.2o(),c=11.2e();a(c.1j).1q(k(b.1D.1c)),a(c.4Z).1q(k(b.21.1c)),11.2T&&11.2T.1q(k(b.1D.1c)),a(11.1H).1q(a.1k(k(b.1H.1c),k(b.1H.1e))),11.1y&&(a(11.1y).1q(k(b.1y.1e)),b.2U&&a(11.2U.1j).1q(k(b.2U.1e))),a(c.38).1q(k(b.2F.1e))}12 I(a){11.2x=a||0,11.1s&&(11.1s.2x=11.2x)}12 J(a){11.7u(a),11.1P()}1a{51:f,7g:b,1P:g,1z:c,36:d,2e:o,2P:h,5e:i,7l:j,7k:l,4n:m,7f:A,6a:C,7e:F,6d:D,7t:E,7o:u,7p:v,4p:p,2o:G,52:H,7u:I,9e:J}}());13 w={3j:{},1t:12(b){1f(!b)1a 1r;13 c=1r,d=a(b).1X("2p-1V");1a d&&(c=11.3j[d]),c},30:12(a){11.3j[a.1V]=a},1z:12(a){13 b=11.1t(a);b&&(3G 11.3j[b.1V],b.1z())},4q:12(a){1a 1b.2Z/2-1b.6M(a,1b.4A(a)*1b.2Z)}};w.4r={4k:12(a,b){13 c=u.1t(a.1g),d=c.4p().1i.1c,e=11.4W(d.14,d.18,b,{3S:!1});1a{14:e.14,18:e.18}},9f:12(a,b,c){13 d=.5*a,e=m(1b.9g(d/l(d,b))),f=2E-e-90,g=o(n(f))*c,h=2*(d+g),i=h/a*b;1a{14:h,18:i}},4W:12(a,b,c){13 d=m(1b.79(.5*(b/a))),e=2E-d,f=1b.4A(n(e-90))*c,g=a+2*f,h=g*b/a;1a{14:g,18:h}},3T:12(b){13 c=u.1t(b.1g),d=b.19.31,e=r.78(c.29),g=(r.2I(c.29),w.4r.4k(b,d)),h={2z:{1c:{14:1b.1E(g.14),18:1b.1E(g.18)},1e:{17:0,15:0}}};1f(d){h.2X=[];28(13 i=0;d>=i;i++){13 j=w.4r.4k(b,i,{3S:!1}),k={1e:{17:h.2z.1c.18-j.18,15:e?d-i:(h.2z.1c.14-j.14)/2},1c:j};h.2X.2n(k)}}1G h.2X=[a.1k({},h.2z)];1a h},56:12(a,b,c){s.56(a,b.3k(),c)}},a.1k(x.3F,12(){12 b(){1a B.1t(11.1g)[0]}12 c(){1a u.1t(11.1g)}12 d(){11.36()}12 e(){11.1j&&(a(11.1j).1z(),11.1l=1r,11.1m=1r,11.1H=1r,11.1j=1r,11.1o={})}12 f(){}12 g(){11.36(),11.51();13 b=11.2e(),c=11.3k();11.1j=a("<2h>").1Y("9h")[0],a(b.1j).66(11.1j),c.2T&&a(b.1j).66(c.2T),c.2o(),a(11.1j).1q({17:0,15:0}),11.7v(),11.52()}12 h(){1a 11.19.1K/(11.19.31+1)}12 i(){13 b=11.3k(),c=b.2o(),d=11.2e(),e=11.2o(),f=11.19.31,g=w.4r.3T(11),h=b.29,i=r.5X(h),j={17:f,15:f};1f(d.19.1l){13 l=g.2X[g.2X.2a-1];"15"==i&&(j.15+=1b.1E(l.1c.18)),"17"==i&&(j.17+=1b.1E(l.1c.18))}13 m=b.1o.19,n=m.1n,o=m.1i;"1m"==d.19.1n.1e&&n&&(n+=o);13 p=e.1H.1c;a(11.1j).1Z(a(11.1H=1x.22("2h")).1Y("9i").1q(k(p))).1q(k(p)),a(1x.3d).1Z(a(11.2W=1x.22("3f"))),q.3J(11.2W,e.1H.1c),q.3p(11.2W);13 s=11.2W.3o("2d");s.2L=11.2x,a(11.1H).1Z(11.2W);28(13 u=f+1,v=0;f>=v;v++)s.2Q=t.2R(11.19.1Q,w.4q(v*(1/u))*(11.19.1K/u)),q.6Z(s,{14:c.1m.1c.14+2*v,18:c.1m.1c.18+2*v,17:j.17-v,15:j.15-v,1n:n+v});1f(b.19.1l){13 x={x:j.15,y:j.17},y=g.2X[0].1c,z=b.19.1l,A=o;A+=.5*z.14;13 B=b.19.1n&&"1m"==b.19.1n.1e?b.19.1n.2u||0:0;B&&(A+=B);13 C=o+B+.5*z.14-.5*y.14,D=1b.1E(n>C?n-C:0),E=b.3B&&b.3B.1l||{x:0,y:0},F=b.3B&&b.3B.5c||{x:0,y:0};1f(A+=1b.1U(D,b.19.1l.1A&&b.19.1l.1A[i&&/^(15|1O)$/.3h(i)?"y":"x"]||0),"17"==i||"1R"==i){1T(h){1h"3O":1h"4g":x.x+=A+E.x-F.x;1B;1h"4b":1h"58":1h"4f":1h"5a":x.x+=.5*c.1m.1c.14+E.x;1B;1h"3P":1h"4e":x.x+=c.1m.1c.14-(A-E.x+F.x)}"1R"==i&&(x.y+=c.1m.1c.18);28(13 v=0,G=g.2X.2a;G>v;v++){s.2Q=t.2R(11.19.1Q,w.4q(v*(1/u))*(11.19.1K/u));13 f=g.2X[v];s.2f(),"17"==i?(s.3s(x.x,x.y-v),s.1d(x.x-.5*f.1c.14,x.y-v),s.1d(x.x,x.y-v-f.1c.18),s.1d(x.x+.5*f.1c.14,x.y-v)):(s.3s(x.x,x.y+v),s.1d(x.x-.5*f.1c.14,x.y+v),s.1d(x.x,x.y+v+f.1c.18),s.1d(x.x+.5*f.1c.14,x.y+v)),s.2g(),s.34()}}1G{1T(h){1h"3R":1h"3Q":x.y+=A+E.y-F.y;1B;1h"4i":1h"5b":1h"4c":1h"59":x.y+=.5*c.1m.1c.18+E.y;1B;1h"4h":1h"4d":x.y+=c.1m.1c.18-(A-E.y+F.y)}"1O"==i&&(x.x+=c.1m.1c.14);28(13 v=0,G=g.2X.2a;G>v;v++){s.2Q=t.2R(11.19.1Q,w.4q(v*(1/u))*(11.19.1K/u));13 f=g.2X[v];s.2f(),"15"==i?(s.3s(x.x-v,x.y),s.1d(x.x-v,x.y-.5*f.1c.14),s.1d(x.x-v-f.1c.18,x.y),s.1d(x.x-v,x.y+.5*f.1c.14)):(s.3s(x.x+v,x.y),s.1d(x.x+v,x.y-.5*f.1c.14),s.1d(x.x+v+f.1c.18,x.y),s.1d(x.x+v,x.y+.5*f.1c.14)),s.2g(),s.34()}}}}12 j(){13 b=11.3k();b.2G,b.1n;13 e=b.2o(),g=(11.2e(),11.19.31),h=a.1k({},e.1m.1c);h.14+=2*g,h.18+=2*g;13 i,k;1f(b.19.1l){13 l=w.4r.3T(11);i=l.2z.1c,k=i.18}13 m=s.5Z(b,h,k),n=m.1c,o=m.1e,h=m.1m.1c,p=m.1m.1e,r=e.1H.1e,t=e.1m.1e,u={17:r.17+t.17-(p.17+g)+11.19.1A.y,15:r.15+t.15-(p.15+g)+11.19.1A.x},v=e.2J,x=e.21.1c,y={17:0,15:0};1f(0>u.17){13 z=1b.2V(u.17);y.17+=z,u.17=0,v.17+=z}1f(0>u.15){13 A=1b.2V(u.15);y.15+=A,u.15=0,v.15+=A}13 B={18:1b.1U(n.18+u.17,x.18+y.17),14:1b.1U(n.14+u.15,x.14+y.15)},C={15:1b.1E(y.15+e.1H.1e.15+e.1m.1e.15+b.1i+b.2m),17:1b.1E(y.17+e.1H.1e.17+e.1m.1e.17+b.1i+b.2m)},D={1D:{1c:B},21:{1c:x,1e:y},1j:{1c:n,1e:u},1H:{1c:n,1e:{17:1b.23(o.17),15:1b.23(o.15)}},1m:{1c:{14:1b.1E(h.14),18:1b.1E(h.18)},1e:{17:1b.23(p.17),15:1b.23(p.15)}},2J:v,2F:{1e:C}};1a D}12 l(){13 b=11.2o(),c=11.3k(),d=11.2e();1f(a(d.1j).1q(k(b.1D.1c)),a(d.4Z).1q(a.1k(k(b.21.1e),k(b.21.1c))),c.2T&&c.2T.1q(k(b.1D.1c)),d.19.1y){13 e=c.2o(),f=b.21.1e,g=e.1y.1e;1f(a(c.1y).1q(k({17:f.17+g.17,15:f.15+g.15})),d.19.1y.1s){13 h=e.2U.1e;a(c.2U.1j).1q(k({17:f.17+h.17,15:f.15+h.15}))}}a(11.1j).1q(a.1k(k(b.1j.1c),k(b.1j.1e))),a(11.1H).1q(k(b.1H.1c)),a(d.38).1q(k(b.2F.1e))}1a{51:f,1z:d,36:e,1P:g,2e:b,3k:c,2o:j,7w:h,7v:i,52:l}}());13 y={3j:{},1t:12(b){1f(!b)1a 1r;13 c=a(b).1X("2p-1V");1a c?11.3j[c]:1r},30:12(a){11.3j[a.1V]=a},1z:12(a){13 b=11.1t(a);b&&(3G 11.3j[b.1V],b.1z())}};a.1k(z.3F,12(){12 b(){1a B.1t(11.1g)[0]}12 c(){1a u.1t(11.1g)}12 d(){1a 11.19.1K/(11.19.31+1)}12 e(){11.36()}12 f(){11.1j&&(a(11.1j).1z(),11.1j=1r)}12 g(){11.36();13 c=(11.2e(),11.3k()),d=c.2o().1y.1c,e=a.1k({},d),f=11.19.31;e.14+=2*f,e.18+=2*f,a(c.1y).6e(a(11.1j=1x.22("2h")).1Y("9j")),a(1x.3d).1Z(a(11.4s=1x.22("3f"))),q.3J(11.4s,e),q.3p(11.4s);13 g=11.4s.3o("2d");g.2L=11.2x,a(11.1j).1Z(11.4s);28(13 h=e.14/2,i=e.18/2,j=d.18/2,k=f+1,l=0;f>=l;l++)g.2Q=t.2R(11.19.1Q,w.4q(l*(1/k))*(11.19.1K/k)),g.2f(),g.26(h,i,j+l,n(0),n(7d),!0),g.2g(),g.34()}1a{1P:g,1z:e,36:f,2e:b,3k:c,7w:d}}());13 B={2A:{},19:{3V:"6f",4C:9k},6X:12(){12 b(){13 b=["2B"];1S.2H.3H&&(b.2n("9l"),a(1x.3d).3U("2B",12(){1a 3t 0})),a.1w(b,12(b,c){a(1x.7x).9m(".3C .7m, .3C .9n-1D",c,12(b){b.9o(),b.9p(),B.6g(a(b.1C).5f(".3C")[0]).1I()})}),a(1N).3U("3J",a.1v(11.7y,11))}1a b}(),7y:12(){11.5g&&(1N.6h(11.5g),11.5g=1r),11.5g=d.4G(a.1v(12(){13 b=11.3I();a.1w(b,12(a,b){b.1e()})},11),9q)},5h:12(b){13 d,c=a(b).1X("2p-1V");1f(!c){13 e=11.6g(a(b).5f(".3C")[0]);e&&e.1g&&(c=a(e.1g).1X("2p-1V"))}1a c&&(d=11.2A[c])?d:3t 0},5P:12(a){13 b;1a d.2j(a)&&(b=11.5h(a)),b&&b.1g},1t:12(b){13 c=[];1f(d.2j(b)){13 e=11.5h(b);e&&(c=[e])}1G a.1w(11.2A,12(d,e){e.1g&&a(e.1g).7z(b)&&c.2n(e)});1a c},6g:12(b){1f(!b)1a 1r;13 c=1r;1a a.1w(11.2A,12(a,d){d.1F("1P")&&d.1j===b&&(c=d)}),c},9r:12(b){13 c=[];1a a.1w(11.2A,12(d,e){e.1g&&a(e.1g).7z(b)&&c.2n(e)}),c},1W:12(b){1f(d.2j(b)){13 c=b,e=11.1t(c)[0];e&&e.1W()}1G a(b).1w(a.1v(12(a,b){13 c=11.1t(b)[0];c&&c.1W()},11))},1I:12(b){1f(d.2j(b)){13 c=11.1t(b)[0];c&&c.1I()}1G a(b).1w(a.1v(12(a,b){13 c=11.1t(b)[0];c&&c.1I()},11))},33:12(b){1f(d.2j(b)){13 c=b,e=11.1t(c)[0];e&&e.33()}1G a(b).1w(a.1v(12(a,b){13 c=11.1t(b)[0];c&&c.33()},11))},4R:12(){a.1w(11.3I(),12(a,b){b.1I()})},2P:12(b){1f(d.2j(b)){13 c=b,e=11.1t(c)[0];e&&e.2P()}1G a(b).1w(a.1v(12(a,b){13 c=11.1t(b)[0];c&&c.2P()},11))},3I:12(){13 b=[];1a a.1w(11.2A,12(a,c){c.1L()&&b.2n(c)}),b},5S:12(b){13 c=!1;1a d.2j(b)&&a.1w(11.3I()||[],12(a,d){1a d.1g==b?(c=!0,!1):3t 0}),c},7A:12(){13 c,b=0;1a a.1w(11.2A,12(a,d){d.2k>b&&(b=d.2k,c=d)}),c},7B:12(){1>=11.3I().2a&&a.1w(11.2A,12(b,c){c.1F("1P")&&!c.19.2k&&a(c.1j).1q({2k:c.2k=+B.19.4C})})},30:12(a){11.2A[a.1V]=a},5i:12(b){13 c=11.5h(b);1f(c){13 d=a(c.1g).1X("2p-1V");3G 11.2A[d],c.1I(),c.1z()}},1z:12(b){d.2j(b)?11.5i(b):a(b).1w(a.1v(12(a,b){11.5i(b)},11))},6Y:12(){a.1w(11.2A,a.1v(12(a,b){b.1g&&!d.1g.5H(b.1g)&&11.5i(b.1g)},11))},5Q:12(a){11.19.3V=a||"6f"},5R:12(a){11.19.4C=a||0},5U:12(){a.1w(11.2A,a.1v(12(a,b){b.1o&&b.1o.2l&&(b.1o.2l.6i(),b.1o.2l=1r),b.27("3c",!1)},11)),i.6S()},6B:12(){12 f(d){13 e;1a e="2s"==a.1p(d)?{1g:c.25&&c.25.1g||b.25.1g,2v:d}:A(a.1k({},b.25),d)}12 g(f){1a b=1S.2C.7C,c=A(a.1k({},b),1S.2C.6j),d=1S.2C.6k.7C,e=A(a.1k({},d),1S.2C.6k.6j),g=h,h(f)}12 h(g){g.21=g.21&&1S.2C[g.21]?g.21:1S.2C[B.19.3V]?B.19.3V:"6f";13 h=g.21?a.1k({},1S.2C[g.21]||1S.2C[B.19.3V]):{},i=A(a.1k({},c),h),j=A(a.1k({},i),g);1f(j.2c){13 k=c.2c||{},l=b.2c;"4t"==a.1p(j.2c)&&(j.2c={3W:k.3W||l.3W,1p:k.1p||l.1p}),j.2c=A(a.1k({},l),j.2c)}1f(j.1m&&"2s"==a.1p(j.1m)&&(j.1m={1Q:j.1m,1K:1}),j.1i){13 m,n=c.1i||{},o=b.1i;m="2y"==a.1p(j.1i)?{2u:j.1i,1Q:n.1Q||o.1Q,1K:n.1K||o.1K}:A(a.1k({},o),j.1i),j.1i=0===m.2u?!1:m}1f(j.1n){13 p;p="2y"==a.1p(j.1n)?{2u:j.1n,1e:c.1n&&c.1n.1e||b.1n.1e}:A(a.1k({},b.1n),j.1n),j.1n=0===p.2u?!1:p}13 q,s=s=j.1u&&j.1u.1C||"2s"==a.1p(j.1u)&&j.1u||c.1u&&c.1u.1C||"2s"==a.1p(c.1u)&&c.1u||b.1u&&b.1u.1C||b.1u,t=j.1u&&j.1u.1D||c.1u&&c.1u.1D||b.1u&&b.1u.1D||B.2r.6l(s);1f(j.1u?"2s"==a.1p(j.1u)?q={1C:j.1u,1D:B.2r.7D(j.1u)}:(q={1D:t,1C:s},j.1u.1D&&(q.1D=j.1u.1D),j.1u.1C&&(q.1C=j.1u.1C)):q={1D:t,1C:s},"2M"==j.1C){13 u=r.2I(q.1C);q.1C="1J"==u?q.1C.61(/(15|1O)/,"2t"):q.1C.61(/(17|1R)/,"2t")}j.1u=q;13 v;1f("2M"==j.1C?(v=a.1k({},b.1A),a.1k(v,1S.2C.6j.1A||{}),g.21&&a.1k(v,(1S.2C[g.21]||1S.2C[B.19.3V]).1A||{}),v=B.2r.7E(b.1A,b.1u,q.1C,!0),g.1A&&(v=a.1k(v,g.1A||{})),j.3X=0):v={x:j.1A.x,y:j.1A.y},j.1A=v,j.1y&&j.7F){13 w=a.1k({},1S.2C.6k[j.7F]),x=A(a.1k({},e),w);1f(x.2q&&a.1w(["6b","6c"],12(b,c){13 f=x.2q[c],g=e.2q&&e.2q[c];1f(f.1m){13 h=g&&g.1m;1f("2y"==a.1p(f.1m))f.1m={1Q:h&&h.1Q||d.2q[c].1m.1Q,1K:f.1m};1G 1f("2s"==a.1p(f.1m)){13 i=h&&"2y"==a.1p(h.1K)&&h.1K||d.2q[c].1m.1K;f.1m={1Q:f.1m,1K:i}}1G f.1m=A(a.1k({},d.2q[c].1m),f.1m)}1f(f.1i){13 j=g&&g.1i;f.1i="2y"==a.1p(f.1i)?{1Q:j&&j.1Q||d.2q[c].1i.1Q,1K:f.1i}:A(a.1k({},d.2q[c].1i),f.1i)}}),x.1s){13 z=e.1s&&e.1s.3D&&e.1s.3D==5x?e.1s:d.1s;x.1s.3D&&x.1s.3D==5x&&(z=A(z,x.1s)),x.1s=z}j.1y=x}1f(j.1s){13 C;C="4t"==a.1p(j.1s)?c.1s&&"4t"==a.1p(c.1s)?b.1s:c.1s?c.1s:b.1s:A(a.1k({},b.1s),j.1s||{}),"2y"==a.1p(C.1A)&&(C.1A={x:C.1A,y:C.1A}),j.1s=C}1f(j.1l){13 D={};D="4t"==a.1p(j.1l)?A({},b.1l):A(A({},b.1l),a.1k({},j.1l)),"2y"==a.1p(D.1A)&&(D.1A={x:D.1A,y:D.1A}),j.1l=D}1f(j.2Y&&("2s"==a.1p(j.2Y)?j.2Y={5j:j.2Y,7G:!0}:"4t"==a.1p(j.2Y)&&(j.2Y=j.2Y?{5j:"4T",7G:!0}:!1)),j.25&&"2B-9s"==j.25&&(j.7H=!0,j.25=!1),j.25)1f(a.71(j.25)){13 E=[];a.1w(j.25,12(a,b){E.2n(f(b))}),j.25=E}1G j.25=[f(j.25)];1a j.2K&&"2s"==a.1p(j.2K)&&(j.2K=[""+j.2K]),j.2m=0,j.1M&&(1N.6m||(j.1M=!1)),j}13 b,c,d,e;1a g}()};B.2r=12(){12 c(c){13 d=r.2N(c),e=d[1],f=d[2],g=r.2I(c),h=a.1k({1J:!0,2b:!0},20[1]||{});1a"1J"==g?(h.2b&&(e=b[e]),h.1J&&(f=b[f])):(h.2b&&(f=b[f]),h.1J&&(e=b[e])),e+f}12 f(a){13 d=r.2N(a);1a c(d[1]+b[d[2]])}12 h(b,c){a(b.1j).1q({17:c.17+"2w",15:c.15+"2w"})}12 j(a,b,d,e){13 g=y(a,b,d,e),h=d&&"2s"==7I d.1p?d.1p:"";1f(/9t$/.3h(h),1===g.3Y.3Z)1a l(a,g),g;13 m=b,n=e,o={1J:!g.3Y.1J,2b:!g.3Y.2b},p={1J:!1,2b:!1},q=r.2I(b);1a((p.2b="1J"==q&&o.2b)||(p.1J="2b"==q&&o.1J))&&(m=c(b,p),n=c(e,p),g=y(a,m,d,n),1===g.3Y.3Z)?(l(a,g),g):(g=k(g,a),l(a,g),g)}12 k(a,b){13 c=z(b),d=c.1c,e=c.1e,f=u.1t(b.1g).1o.1u[a.1u.1D].1D.1c,g=a.1e,h={17:0,15:0,3A:[]};1a e.15>g.15&&(h.15=e.15-g.15,h.3A.2n("15"),a.1e.15=e.15),e.17>g.17&&(h.17=g.17-e.17,h.3A.2n("17"),a.1e.17=e.17),e.15+d.14<g.15+f.14&&(h.15=e.15+d.14-(g.15+f.14),h.3A.2n("1O"),a.1e.15=e.15+d.14-f.14),e.17+d.18<g.17+f.18&&(h.17=e.17+d.18-(g.17+f.18),h.3A.2n("1R"),a.1e.17=e.17+d.18-f.18),a.7J=h,a}12 l(a,b){a.5e(b.1u.1D,b.3Y.4l,b.7J),h(a,b.1e)}12 m(a){1a a&&(/^2M|2B|3H$/.3h("2s"==7I a.1p&&a.1p||"")||a.5G>=0)}12 n(a,b,c){1a a>=b&&c>=a}12 o(a,b,c,d){13 e=n(a,c,d),f=n(b,c,d);1f(e&&f)1a b-a;1f(e&&!f)1a d-a;1f(!e&&f)1a b-c;13 g=n(c,a,b),h=n(d,a,b);1a g&&h?d-c:g&&!h?b-c:!g&&h?d-a:0}12 q(a,b){1a o(a.1e.15,a.1e.15+a.1c.14,b.1e.15,b.1e.15+b.1c.14)*o(a.1e.17,a.1e.17+a.1c.18,b.1e.17,b.1e.17+b.1c.18)}12 s(a,b){13 c=a.1c.14*a.1c.18;1a c?q(a,b)/c:0}12 t(a,b){13 c=r.2N(b),d=r.2I(b),e={15:0,17:0};1f("1J"==d){1T(c[2]){1h"2t":1h"2S":e.15=.5*a.14;1B;1h"1O":e.15=a.14}"1R"==c[1]&&(e.17=a.18)}1G{1T(c[2]){1h"2t":1h"2S":e.17=.5*a.18;1B;1h"1R":e.17=a.18}"1O"==c[1]&&(e.15=a.14)}1a e}12 v(b){13 c=d.1g.4L(b),e=d.1g.4H(b),f={17:a(1N).4I(),15:a(1N).4J()};1a c.15+=-1*(e.15-f.15),c.17+=-1*(e.17-f.17),c}12 y(b,e,f,g){13 h,i,j,k=u.1t(b.1g),l=k.19,n=l.1A,o=m(f);1f(o||!f){1f(j={14:24,18:24},o){13 p=d.5F(f);h={17:p.y-.5*j.18+6,15:p.x-.5*j.14+6}}1G{13 q=b.1o.2v;h={17:(q?q.y:0)-.5*j.18+6,15:(q?q.x:0)-.5*j.14+6}}b.1o.2v={x:h.15,y:h.17}}1G h=v(f),j={14:a(f).7K(),18:a(f).7L()};1f(l.1l&&"2M"!=l.1C){13 y=r.2N(g),A=r.2N(e),C=r.2I(g),D=k.1o.19,E=k.4p().1i.1c,F=D.1n,G=D.1i,H=F&&"1m"==l.1n.1e?F:0,I=F&&"1i"==l.1n.1e?F:F+G,J=G+H+.5*l.1l.14-.5*E.14,K=I>J?I-J:0;4u=1b.1E(G+H+.5*l.1l.14+K+l.1l.1A["1J"==C?"x":"y"]),"1J"==C&&"15"==y[2]&&"15"==A[2]||"1O"==y[2]&&"1O"==A[2]?(j.14-=2*4u,h.15+=4u):("2b"==C&&"17"==y[2]&&"17"==A[2]||"1R"==y[2]&&"1R"==A[2])&&(j.18-=2*4u,h.17+=4u)}i=a.1k({},h);13 L=o?c(l.1u.1D):l.1u.1C,M=t(j,L),N=t(j,g);({17:h.17+M.17+n.y,15:h.15+M.15+n.x}),h={15:h.15+N.15,17:h.17+N.17};13 P=a.1k({},n);P=x(P,L,g,"2M"==k.19.1C),h.17+=P.y,h.15+=P.x;13 k=u.1t(b.1g),Q=k.1o.1u,R=a.1k({},Q[e]),S={x:0,y:0},y=r.2N(g);1f("2t"!=y[2]){13 C=C=r.2I(g),T=B.2r.6l(g,"2b"==C?{1J:!0,2b:!1}:{1J:!1,2b:!0});e==T&&(S.y=k.3B.5c.y,S.x=k.3B.5c.x)}13 U={17:h.17-R.2J.17-S.y,15:h.15-R.2J.15-S.x};R.1D.1e=U;13 V={1J:!0,2b:!0},W={x:0,y:0};1f(b.19.2Y){13 X=z(b),Y=b.19.1s?w.1t(b.1g):k,Z=Y.2o().1D.1c;V.3Z=s({1c:Z,1e:U},X),1>V.3Z&&((U.15<X.1e.15||U.15+Z.14>X.1e.15+X.1c.14)&&(V.1J=!1,W.x=U.15<X.1e.15?U.15-X.1e.15:U.15+Z.14-(X.1e.15+X.1c.14)),(U.17<X.1e.17||U.17+Z.18>X.1e.17+X.1c.18)&&(V.2b=!1,W.y=U.17<X.1e.17?U.17-X.1e.17:U.17+Z.18-(X.1e.17+X.1c.18)))}1G V.3Z=1;V.4l=W;13 $=Q[e].1H,7M=s({1c:j,1e:i},{1c:$.1c,1e:{17:U.17+$.1e.17,15:U.15+$.1e.15}});1a{1e:U,3Z:{1C:7M},3Y:V,1u:{1D:e,1C:g}}}12 z(b){13 c={17:a(1N).4I(),15:a(1N).4J()},e=b.19,f=e.1C;("2M"==f||"4F"==f)&&(f=b.1g);13 g=a(f).5f(e.2Y.5j).7i()[0];1f(!g||"4T"==e.2Y.5j)1a{1c:p.4T(),1e:c};13 h=d.1g.4L(g),i=d.1g.4H(g);1a h.15+=-1*(i.15-c.15),h.17+=-1*(i.17-c.17),{1c:{14:a(g).5V(),18:a(g).5W()},1e:h}}13 b={15:"1O",1O:"15",17:"1R",1R:"17",2t:"2t",2S:"2S"};e.3m&&9>e.3m||e.4M&&2>e.4M||e.5M&&9u>e.5M;13 x=12(){13 a=[[-1,-1],[0,-1],[1,-1],[-1,0],[0,0],[1,0],[-1,1],[0,1],[1,1]],b={3R:0,3O:0,4b:1,58:1,3P:2,3Q:2,4c:5,59:5,4d:8,4e:8,4f:7,5a:7,4g:6,4h:6,4i:3,5b:3};1a 12(c,d,e,f){13 g=a[b[d]],h=a[b[e]],i=[1b.65(.5*1b.2V(g[0]-h[0]))?-1:1,1b.65(.5*1b.2V(g[1]-h[1]))?-1:1];1a r.35(d)||!r.35(e)||f||("1J"==r.2I(e)?i[0]=0:i[1]=0),{x:i[0]*c.x,y:i[1]*c.y}}}();1a{1t:y,4P:j,6l:c,7D:f,7N:v,7E:x,6n:m}}(),B.2r.4S={x:0,y:0},a(1x).6W(12(){13 b=B.2r;a(1x).3U("5k",12(a){b.4S={x:a.5G,y:a.6H}})}),B.53=12(){12 b(){a(1x.3d).1Z(a(1x.22("2h")).1Y("9v").1Z(a(1x.22("2h")).1Y("3C").1Z(a(11.1j=1x.22("2h")).1Y("7O"))))}12 c(b){1a{14:a(b).5V(),18:a(b).5W()}}12 e(b){13 d=c(b),e=b.4K;1a e&&a(e).1q({14:d.14+"2w"})&&c(b).18>d.18&&d.14++,a(e).1q({14:"62%"}),d}12 f(b,c,e){11.1j||11.1P();13 f=b.19,g=a.1k({1M:!1},20[3]||{});!f.7P&&!d.2j(c)||a(c).1X("7Q")||(f.7P&&"2s"==a.1p(c)&&(b.39=a("#"+c)[0],c=b.39),!b.40&&c&&d.1g.5H(c)&&(a(b.39).1X("7R",a(b.39).1q("7S")),b.40=1x.22("2h"),a(b.39).6e(a(b.40).1I())));13 h=1x.22("2h");a(11.1j).1Z(a(h).1Y("7h 9w").1Z(c)),d.2j(c)&&a(c).1W(),f.21&&a(h).1Y("9x"+b.19.21);13 i=a(h).67("7T[4m]").9y(12(){1a!(a(11).3g("18")&&a(11).3g("14"))});1f(i.2a>0&&!b.1F("3E")){b.27("3E",!0),f.1M&&(g.1M||b.1M||(b.1M=b.6o(f.1M)),b.1F("1L")&&(b.1e(),a(b.1j).1W()),b.1M.6p());13 j=0,k=1b.1U(9z,9A*(i.2a||0));b.2i("3E"),b.41("3E",a.1v(12(){i.1w(12(){11.6q=12(){}}),j>=i.2a||(11.5l(b,h),e&&e())},11),k),a.1w(i,a.1v(12(c,d){13 f=3q 9B;f.6q=a.1v(12(){f.6q=12(){};13 c=f.14,g=f.18,k=a(d).3g("14"),l=a(d).3g("18");k&&l||(!k&&l?(c=1b.23(l*c/g),g=l):!l&&k&&(g=1b.23(k*g/c),c=k),a(d).3g({14:c,18:g}),j++),j==i.2a&&(b.2i("3E"),b.1M&&(b.1M.1z(),b.1M=1r),b.1F("1L")&&a(b.1j).1I(),11.5l(b,h),e&&e())},11),f.4m=d.4m},11))}1G 11.5l(b,h),e&&e()}12 g(b,c){13 d=e(c),f={14:d.14-(2O(a(c).1q("2m-15"))||0)-(2O(a(c).1q("2m-1O"))||0),18:d.18-(2O(a(c).1q("2m-17"))||0)-(2O(a(c).1q("2m-1R"))||0)};b.19.3i&&"2y"==a.1p(b.19.3i)&&f.14>b.19.3i&&(a(c).1q({14:b.19.3i+"2w"}),d=e(c)),b.1o.2G=d,a(b.38).7U(c)}1a{1P:b,42:f,5l:g,69:e}}(),a.1k(C.3F,12(){12 b(a,b,c){11.1o.3b[a]=d.4G(b,c)}12 c(a){1a 11.1o.3b[a]}12 e(a){11.1o.3b[a]&&(1N.6h(11.1o.3b[a]),3G 11.1o.3b[a])}12 f(){a.1w(11.1o.3b,12(a,b){1N.6h(b)}),11.1o.3b=[]}12 g(b,c,d,e){c=c;13 f=a.1v(d,e||11);11.1o.5A.2n({1g:b,7V:c,7W:f}),a(b).3U(c,f)}12 h(){a.1w(11.1o.5A,12(b,c){a(c.1g).7X(c.7V,c.7W)})}12 j(a,b){11.1o.2q[a]=b}12 l(a){1a 11.1o.2q[a]}12 m(){11.2D(11.1g,"4o",11.5m),11.2D(11.1g,"54",a.1v(12(a){11.6r(a)},11)),11.19.2K&&a.1w(11.19.2K,a.1v(12(b,c){13 d=!1;"2B"==c&&(11.19.25&&a.1w(11.19.25,12(a,b){1a"4F"==b.1g&&"2B"==b.2v?(d=!0,!1):3t 0}),11.27("5B",d)),11.2D(11.1g,c,"2B"==c?d?11.33:11.1W:a.1v(12(){11.7Y()},11))},11)),11.19.25?a.1w(11.19.25,a.1v(12(b,c){13 d;1T(c.1g){1h"4F":1f(11.1F("5B")&&"2B"==c.2v)1a;d=11.1g;1B;1h"1C":d=11.1C}d&&11.2D(d,c.2v,"2B"==c.2v?11.1I:a.1v(12(){11.6s()},11))},11)):11.19.7Z&&11.19.2K&&!a.6t("2B",11.19.2K)>-1&&11.2D(11.1g,"54",a.1v(12(){11.2i("1W")},11));13 b=!1;!11.19.9C&&11.19.2K&&((b=a.6t("5k",11.19.2K)>-1)||a.6t("5n",11.19.2K)>-1)&&"2M"==11.1C&&11.2D(11.1g,b?"5k":"5n",12(a){11.1F("4E")&&11.1e(a)})}12 n(){11.2D(11.1j,1S.2H.3H?"5n":"4o",11.5m),11.2D(11.1j,"54",11.6r),11.2D(11.1j,1S.2H.3H?"5n":"4o",a.1v(12(){11.5o("4v")||11.1W()},11)),11.19.25&&a.1w(11.19.25,a.1v(12(b,c){13 d;1T(c.1g){1h"1D":d=11.1j}d&&11.2D(d,c.2v,c.2v.3e(/^(2B|5k|4o)$/)?11.1I:a.1v(12(){11.6s()},11))},11))}12 o(a,b,c){13 d=u.1t(11.1g);d&&d.5e(a,b,c)}12 p(a){13 b=u.1t(11.1g);b&&b.4n(a)}12 q(){11.4n(11.19.1u.1D)}12 r(){a(11.1j=1x.22("2h")).1Y("3C"),11.80()}12 s(){11.1P();13 a=u.1t(11.1g);a?a.1P():(3q v(11.1g),11.27("4E",!0))}12 t(){11.1F("1P")||(a(1x.3d).1Z(a(11.1j).1q({15:"-5p",17:"-5p",2k:11.2k}).1Z(a(11.4Z=1x.22("2h")).1Y("9D")).1Z(a(11.38=1x.22("2h")).1Y("7O"))),a(11.1j).1Y("9E"+11.19.21),11.19.7H&&(a(11.1g).1Y("81"),11.2D(1x.7x,"2B",a.1v(12(b){1f(11.1L()){13 c=a(b.1C).5f(".3C, .81")[0];(!c||c&&c!=11.1j&&c!=11.1g)&&11.1I()}},11))),1S.2H.48&&(11.19.4w||11.19.3X)&&(11.5q(11.19.4w),a(11.1j).1Y("6u")),11.82(),11.27("1P",!0),B.30(11))}12 w(){13 c;11.2F,11.40&&11.39&&((c=a(11.39).1X("7R"))&&a(11.39).1q({7S:c}),a(11.40).6e(11.39).1z(),11.40=1r)}12 x(){d.44(a.1v(12(){11.83()},11)),11.84(),11.6v(),d.44(a.1v(12(){a(11.1j).67("7T[4m]").7X("9F")},11)),u.1z(11.1g),11.1F("1P")&&11.1j&&(a(11.1j).1z(),11.1j=1r);13 c,b="5z";(c=a(11.1g).1X(b))&&a(11.1g).3g("5y",c).85("5z"),a(11.1g).85("2p-1V")}12 y(b){13 c=a.1k({4x:11.19.4x,1M:!1},20[1]||{});11.1P(),11.1F("1L")&&a(11.1j).1I(),B.53.42(11,b,a.1v(12(){13 b=11.1F("1L");b||11.27("1L",!0),11.86(),b||11.27("1L",!1),11.1F("1L")&&(a(11.1j).1I(),11.1e(),11.5r(),a(11.1j).1W()),11.27("3c",!0),c.4x&&c.4x(11.38.4y,11.1g),c.4z&&c.4z()},11),{1M:c.1M})}12 z(b){13 c,d={47:11.2F,1p:11.19.2c.1p,1X:11.19.2c.1X||{},87:11.19.2c.87||"7U"};1f(!(11.1F("2l")||11.19.2c.3W&&11.1F("3c"))){1f(11.19.2c.3W&&(c=i.1t(d)))1a 11.6w(c,{4z:a.1v(12(){11.1F("1L")&&11.19.43&&11.19.43(11.38.4y,11.1g)},11)}),3t 0;11.27("2l",!0),11.19.1M&&(11.1M?11.1M.6p():(11.1M=11.6o(11.19.1M),11.27("3c",!1)),11.1e(b)),11.1o.2l&&(11.1o.2l.6i(),11.1o.2l=1r),11.1o.2l=a.2c(a.1k({},d,{9G:a.1v(12(b,c,e){0!==e.9H&&(i.4P(d,e.4O),11.6w(e.4O,{4z:a.1v(12(){11.27("2l",!1),11.1F("1L")&&11.19.43&&11.19.43(11.38.4y,11.1g),11.1M&&(11.1M.1z(),11.1M=1r)},11)}))},11)}))}}12 A(b){13 c=a.1k({1M:11.19.1M&&11.1M},20[1]||{});11.42(b,c)}12 C(){13 b=1x.22("2h");a(b).1X("7Q",!0);13 c=6m.4Q(b,a.1k({},20[0]||{})),d=6m.5Y(b);1a a(b).1q(k(d)),11.42(b,{4x:!1,4z:12(){c.6p()}}),c}12 E(){1f(11.1F("1P")&&!11.19.2k){13 b=B.7A();b&&b!=11&&11.2k<=b.2k&&a(11.1j).1q({2k:11.2k=b.2k+1})}}12 F(){13 a=u.1t(11.1g);a&&(a.2P(),11.1L()&&11.1e())}12 G(a){1f(1S.2H.48){a=a||0;13 b=11.1j.9I;b.9J=a+"5s",b.9K=a+"5s",b.9L=a+"5s",b.9M=a+"5s"}}12 H(b){11.2i("1I"),11.2i("4v"),11.1F("1L")||11.5o("1W")||11.41("1W",a.1v(12(){11.2i("1W"),11.1W(b)},11),11.19.7Z||1)}12 I(b){1f(11.2i("1I"),11.2i("4v"),!11.1L()){1f("12"==a.1p(11.2F)||"12"==a.1p(11.1o.5t)){"12"!=a.1p(11.1o.5t)&&(11.1o.5t=11.2F);13 c=11.1o.5t(11.1g)||!1;1f(c!=11.1o.5C&&(11.1o.5C=c,11.27("3c",!1),11.6v()),11.2F=c,!c)1a}11.19.9N&&B.4R(),11.27("1L",!0),11.19.2c?11.88(b):11.1F("3c")||11.42(11.2F),11.1F("4E")&&11.1e(b),11.5r(),11.19.5u&&d.44(a.1v(12(){11.5m()},11)),"12"==a.1p(11.19.43)&&(!11.19.2c||11.19.2c&&11.19.2c.3W&&11.1F("3c"))&&11.19.43(11.38.4y,11.1g),1S.2H.48&&(11.19.4w||11.19.3X)&&(11.5q(11.19.4w),a(11.1j).1Y("89").8a("6u")),a(11.1j).1W()}}12 J(){11.2i("1W"),11.1F("1L")&&(11.27("1L",!1),1S.2H.48&&(11.19.4w||11.19.3X)?(11.5q(11.19.3X),a(11.1j).8a("89").1Y("6u"),11.41("4v",a.1v(11.6x,11),11.19.3X)):11.6x(),11.1o.2l&&(11.1o.2l.6i(),11.1o.2l=1r,11.27("2l",!1)))}12 K(){11.1F("1P")&&(a(11.1j).1q({15:"-5p",17:"-5p"}),B.7B(),"12"!=a.1p(11.19.8b)||11.1M||11.19.8b(11.38.4y,11.1g))}12 L(){11.2i("1W"),!11.5o("1I")&&11.1F("1L")&&11.41("1I",a.1v(12(){11.2i("1I"),11.2i("4v"),11.1I()},11),11.19.9O||1)}12 M(a){11[11.1L()?"1I":"1W"](a)}12 N(){1a 11.1F("1L")}12 O(){11.27("4D",!0),11.1F("1L")&&11.5r(),11.19.5u&&11.2i("6y")}12 P(){11.27("4D",!1),11.19.5u&&11.41("6y",a.1v(12(){11.2i("6y"),11.1F("4D")||11.1I()},11),11.19.5u)}13 D=12(b){1f(11.1L()){13 c;1f("2M"==11.19.1C){13 e=B.2r.6n(b),f=B.2r.4S;1f(e)f.x||f.y?(11.1o.2v={x:f.x,y:f.y},c=1r):c=b;1G{1f(f.x||f.y)11.1o.2v={x:f.x,y:f.y};1G 1f(!11.1o.2v){13 g=B.2r.7N(11.1g);11.1o.2v={x:g.15,y:g.17}}c=1r}}1G c=11.1C;1f(B.2r.4P(11,11.19.1u.1D,c,11.19.1u.1C),b&&B.2r.6n(b)){13 h={14:a(11.1j).7K(),18:a(11.1j).7L()},i=d.5F(b),g=d.1g.4L(11.1j);i.x>=g.15&&i.x<=g.15+h.14&&i.y>=g.17&&i.y<=g.17+h.18&&d.44(a.1v(12(){11.2i("1I")},11))}}};1a{1P:t,6E:r,86:s,80:m,82:n,1W:I,1I:J,6x:K,33:M,1L:N,7Y:H,6s:L,5q:G,27:j,1F:l,5m:O,6r:P,5o:c,41:b,2i:e,84:f,2D:g,83:h,5e:o,4n:p,9P:q,2P:F,42:y,88:z,6w:A,6o:C,1e:D,5r:E,6v:w,1z:x}}()),1S.3p()})(46);', 62, 610, "|||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||||this|function|var|width|left||top|height|options|return|Math|dimensions|lineTo|position|if|element|case|border|container|extend|stem|background|radius|_cache|type|css|null|shadow|get|hook|proxy|each|document|closeButton|remove|offset|break|target|tooltip|ceil|getState|else|bubble|hide|horizontal|opacity|visible|spinner|window|right|build|color|bottom|Tipped|switch|max|uid|show|data|addClass|append|arguments|skin|createElement|round||hideOn|arc|setState|for|_hookPosition|length|vertical|ajax||getTooltip|beginPath|closePath|div|clearTimer|isElement|zIndex|xhr|padding|push|getOrderLayout|tipped|states|Position|string|middle|size|event|px|_globalAlpha|number|box|tooltips|click|Skins|setEvent|180|content|contentDimensions|support|getOrientation|anchor|showOn|globalAlpha|mouse|split|parseInt|refresh|fillStyle|hex2fill|center|iframeShim|closeButtonShadow|abs|bubbleCanvas|blurs|containment|PI|add|blur|scripts|toggle|fill|isCenter|cleanup|cornerOffset|contentElement|inlineContent|_stemCorrection|timers|updated|body|match|canvas|attr|test|maxWidth|shadows|getSkin|_adjustment|IE|indexOf|getContext|init|new|devicePixelRatio|moveTo|void|charAt|toLowerCase|diameter|hookPosition|layout|stemLayout|sides|_corrections|t_Tooltip|constructor|preloading_images|prototype|delete|touch|getVisible|resize|x1|y1|x2|y2|topleft|topright|righttop|lefttop|math|getLayout|bind|defaultSkin|cache|fadeOut|contained|overlap|inlineMarker|setTimer|update|onShow|defer||jQuery|url|cssTransitions|items|createFillStyle|topmiddle|rightmiddle|rightbottom|bottomright|bottommiddle|bottomleft|leftbottom|leftmiddle|regex|getBorderDimensions|correction|src|setHookPosition|mouseenter|getStemLayout|transition|Stem|closeButtonCanvas|boolean|sideOffset|fadeTransition|fadeIn|afterUpdate|firstChild|callback|cos|000|startingZIndex|active|skinned|self|delay|cumulativeScrollOffset|scrollTop|scrollLeft|parentNode|cumulativeOffset|Gecko|Chrome|responseText|set|create|hideAll|mouseBuffer|viewport|min|G_vmlCanvasManager|getCenterBorderDimensions|substring|skins|skinElement||prepare|order|UpdateQueue|mouseleave||rotate|borderRadius|topcenter|rightcenter|bottomcenter|leftcenter|corner|corrections|setHookPositionAndStemCorrection|closest|_resizeTimer|_getTooltip|_remove|selector|mousemove|_updateTooltip|setActive|touchmove|getTimer|10000px|setFadeDuration|raise|ms|contentFunction|hideAfter|console|in|Object|title|tipped_restore_title|events|toggles|fnCallContent|call|apply|pointer|pageX|isAttached|RegExp|parseFloat|Opera|opera|WebKit|required|available|findElement|setDefaultSkin|setStartingZIndex|isVisibleByElement|undefined|clearAjaxCache|innerWidth|innerHeight|getSide|getDimensions|getBubbleLayout|nullifyCornerOffset|replace|100|defaultCloseButton|hoverCloseButton|floor|prepend|find|auto|getMeasureElementDimensions|drawCloseButtonState|default|hover|_drawBackgroundPath|before|dark|getByTooltipElement|clearTimeout|abort|reset|CloseButtons|getInversedPosition|Spinners|isPointerEvent|insertSpinner|play|onload|setIdle|hideDelayed|inArray|t_hidden|_restoreInlineContent|afterAjaxUpdate|_hide|idle|warn|_stemPosition|createOptions|getAttribute|getElementById|_preBuild|Array|concat|pageY|version|AppleWebKit|MobileSafari|check|pow|Za|checked|notified|toUpperCase|param|clear|try|DocumentTouch|catch|ready|startDelegating|removeDetached|drawRoundedRectangle|fillRect|isArray|Gradient|addColorStops|positions|toOrientation|side|toDimension|isCorner|atan|red|green|blue|360|drawBubble|drawCloseButton|createHookCache|t_ContentContainer|first|25000px|setStemCorrection|setAdjustment|t_Close|closeButtonShift|closeButtonMouseover|closeButtonMouseout|CloseButton|stemOffset|backgroundRadius|_drawBorderPath|setGlobalAlpha|drawBackground|getBlurOpacity|documentElement|onWindowResize|is|getHighestTooltip|resetZ|base|getTooltipPositionFromTarget|adjustOffsetBasedOnHooks|closeButtonSkin|flip|hideOnClickOutside|typeof|adjustment|outerWidth|outerHeight|_|getAbsoluteOffset|t_Content|inline|isSpinner|tipped_restore_inline_display|display|img|html|eventName|handler|unbind|showDelayed|showDelay|createPreBuildObservers|t_hideOnClickOutside|createPostBuildObservers|clearEvents|clearTimers|removeData|_buildSkin|dataType|ajaxUpdate|t_visible|removeClass|onHide|log|sqrt|object|setAttribute|slice|wrap|nodeType|setTimeout|do|while|exec|attachEvent|MSIE|KHTML|rv|Apple|Mobile|Safari|navigator|userAgent|fn|jquery|z_|z0|requires|_t_uid_|ontouchstart|instanceof|WebKitTransitionEvent|TransitionEvent|OTransitionEvent|createEvent|scale|initElement|drawPixelArray|createLinearGradient|addColorStop|spacing|rgba|join|fff|255|hue|saturation|brightness|0123456789abcdef|hex2rgb|getSaturatedBW|init_|t_Bubble||iframe|t_iframeShim|frameBorder|javascript|15000px|t_CloseButtonShift|lineCap|t_CloseState|translate|stemCorrection|270|lineWidth|sin|setOpacity|getCenterBorderDimensions2|acos|t_Shadow|t_ShadowBubble|t_CloseButtonShadow|999999|touchstart|delegate|close|preventDefault|stopPropagation|200|getBySelector|outside|move|530|t_UpdateQueue|t_clearfix|t_Content_|filter|8e3|750|Image|fixed|t_Skin|t_Tooltip_|load|success|status|style|MozTransitionDuration|webkitTransitionDuration|OTransitionDuration|transitionDuration|hideOthers|hideDelay|resetHookPosition".split("|"), 0, {}));
function reloadEventbox(k) {
    var l;
    if (typeof (k) == "string") {
        l = $.parseJSON(k)
    } else {
        l = k
    }
    var g = false;
    var f = typeof l.eventText;
    var h = parseInt(l.friendly) + parseInt(l.neutral) + parseInt(l.hostile);
    if (h > 0) {
        g = true
    }
    if (g) {
        $("#eventFriendly").html(l.friendly);
        $("#eventNeutral").html(l.neutral);
        $("#eventHostile").html(l.hostile);
        $("#eventContent").html(l.eventText);
        $("#eventClass").attr("class", l.eventText)
    }
    if (f == "string" || f == "undefined") {
        $("#eventboxLoading").hide();
        if (g) {
            $("#eventboxBlank").hide();
            $("#eventboxFilled").show();
            new simpleCountdown(getElementByIdWithCache("tempcounter"), l.eventTime, function() {
                setTimeout(getAjaxEventbox, 3000)
            })
        } else {
            $("#eventboxBlank").show();
            $("#eventboxFilled").hide()
        }
    }
}
function reloadResources(d, f) {
    var e;
    if (typeof (d) == "string") {
        e = $.parseJSON(d)
    } else {
        e = d
    }
    reloadResourceTicker(e);
    $("#resources_metal").html(e.metal.resources["actualFormat"]);
    $("#resources_metal").attr("class", e.metal["class"]);
    changeTooltip($("#metal_box"), e.metal.tooltip);
    $("#resources_crystal").html(e.crystal.resources["actualFormat"]);
    $("#resources_crystal").attr("class", e.crystal["class"]);
    changeTooltip($("#crystal_box"), e.crystal.tooltip);
    $("#resources_deuterium").html(e.deuterium.resources["actualFormat"]);
    $("#resources_deuterium").attr("class", e.deuterium["class"]);
    changeTooltip($("#deuterium_box"), e.deuterium.tooltip);
    $("#resources_energy").html(e.energy.resources["actualFormat"]);
    $("#resources_energy").attr("class", e.energy["class"]);
    changeTooltip($("#energy_box"), e.energy.tooltip);
    $("#resources_darkmatter").html(e.darkmatter.resources["actualFormat"]);
    $("#resources_darkmatter").attr("class", e.darkmatter["class"]);
    changeTooltip($("#darkmatter_box"), e.darkmatter.tooltip);
    honorScore = e.honorScore;
    darkMatter = e.darkmatter.resources["actual"];
    if (typeof (f) == "function") {
        f(e)
    }
}
function reloadResourceTicker(b) {
    if (typeof (b) == "string") {
        b = $.parseJSON(b)
    }
    resourceTickerMetal = {available: b.metal.resources["actual"], limit: b.metal.resources["max"], production: b.metal.resources["production"], valueElem: "resources_metal"};
    resourceTickerCrystal = {available: b.crystal.resources["actual"], limit: b.crystal.resources["max"], production: b.crystal.resources["production"], valueElem: "resources_crystal"};
    resourceTickerDeuterium = {available: b.deuterium.resources["actual"], limit: b.deuterium.resources["max"], production: b.deuterium.resources["production"], valueElem: "resources_deuterium"};
    if (!vacation) {
        if (typeof (metalTicker) != "undefined") {
            timerHandler.removeCallback(metalTicker.intervalObj)
        }
        if (typeof (crystalTicker) != "undefined") {
            timerHandler.removeCallback(crystalTicker.intervalObj)
        }
        if (typeof (deuteriumTicker) != "undefined") {
            timerHandler.removeCallback(deuteriumTicker.intervalObj)
        }
        metalTicker = new resourceTicker(resourceTickerMetal);
        crystalTicker = new resourceTicker(resourceTickerCrystal);
        deuteriumTicker = new resourceTicker(resourceTickerDeuterium)
    }
}
function reloadRightmenu(b) {
    $.get(b, {}, displayRightmenu)
}
function displayRightmenu(b) {
    $("#rechts").html(b);
    initPlanetSorting()
}
function ajaxFormSubmit(l, f, k) {
    var h = $("#" + l + "").serialize();
    var g = null;
    if (k != null && typeof k == "function") {
        g = k
    }
    $.ajax({type: "POST", url: f, data: h, success: g})
}
function initConnectionErrorFunction() {
    if (isMobile) {
        document.addEventListener("deviceready", function() {
            $(document).ajaxError(function(h, g, e, f) {
                HostApp.ShowNoConnectionScreen()
            })
        }, false)
    }
}
function initAllianceInfo() {
    initConnectionErrorFunction();
    initTooltips();
    initOverlays();
    initHideElements();
    if (!isMobile) {
        $("a.bbcodeLink:not(.overlay)").click(function() {
            var b = $(this).attr("href");
            window.open("redir.php?url=" + encodeURI(b), "_newtab");
            return false
        })
    }
}
function manageTabs(f) {
    var d = "#" + f;
    var e = $(d).attr("rel");
    if ($(d).hasClass("opened")) {
        $(d).addClass("closed");
        $(d).removeClass("opened");
        $("#" + e).hide()
    } else {
        $(d).removeClass("closed");
        $(d).addClass("opened");
        $("#" + e).show()
    }
}
function ajaxLoad(b) {
    $("#eins select").ogameDropDown("destroy");
    $("#eins").html('<div class="ajaxLoad">' + LocalizationStrings.loading + "</div>");
    $.post(b, {ajax: 1}, function(a) {
        $("#eins").html(a).find("select").ogameDropDown()
    })
}
function initAlliance() {
    initToggleHeader("alliance");
    $(".navi").click(function() {
        var b = $(this).attr("rel");
        $("#tab-ally li").removeClass("aktiv");
        $(this).parent().addClass("aktiv");
        hideTipsOnTabChange();
        ajaxLoad(b)
    })
}
function initAllianceBroadcast() {
    $("#allianceBroadCast").submit(function() {
        var b = $(this);
        $.post(b.attr("action"), b.serialize() + "&ajax=1", function(a) {
            $("#eins").html(a)
        });
        return false
    })
}
function initAllianceManagement() {
    $(".contentz").tabs({activate: hideTipsOnTabChange});
    $(".allyTagChange").tabs({activate: hideTipsOnTabChange});
    $(".quitAlly").tabs({activate: hideTipsOnTabChange});
    $(".dissolve").bind("click", dissolve);
    $(".deleteRank").bind("click", deleteRank);
    $(".transferLeadership").bind("click", transferLeadership);
    $(".takeoverLeadership").bind("click", takeoverLeadership)
}
function initBBCodeEditor(q, D, A, B, x) {
    var w;
    if (typeof (B) == "undefined" || B == null) {
        w = $("textarea:not(.markItUpEditor)")
    } else {
        w = $(B).filter(":not(.markItUpEditor)")
    }
    if (w.length == 0) {
        return
    }
    var A = A || false;
    var r = [];
    for (var y = 6; y <= 30; y += 2) {
        r.push({name: y, openWith: "[size=" + y + "]", closeWith: "[/size]", placeHolder: "Text", className: "fontSize" + y})
    }
    var C = [];
    $.each(D, function(a, b) {
        C.push({name: b, replaceWith: "[item]" + a + "[/item]"})
    });
    function F(c) {
        if (c.selection.length == 0) {
            return
        }
        var a = $(c.textarea);
        var f = a.getSelection();
        var b = a.val().indexOf(c.openWith, f.start);
        var d = b + c.openWith.length;
        var g = typeof (c.placeHolder) == "string" ? c.placeHolder.length : 0;
        var e = {start: d, end: d + g};
        a.setSelection(e)
    }
    function E(b) {
        var d = b.openWith;
        var a = $(b.textarea);
        var e = a.getSelection();
        a.siblings(".colorpicker").val("").colorpicker("open").colorpicker("option", "close", function(g, f) {
            var k = d.replace(/%colorCode%/, f.formatted);
            var h = "%colorCode%".length - f.formatted.length;
            e.start = e.start - h;
            e.end = e.end - h;
            a.val(a.val().replace(d, k)).setSelection(e)
        });
        var c = a.siblings(".markItUpHeader").find("." + b.className);
        $(".ui-colorpicker:visible").css("top", c.offset().top + c.height()).css("left", c.offset().left);
        $(".ui-colorpicker").draggable();
        $(".ui-colorpicker-rgb-r .ui-colorpicker-number").focus();
        return b
    }
    function u(b) {
        var a = $(b.textarea);
        var f = a.getSelection();
        var e = b.openWith;
        var c = $("#backgroundImagePicker");
        if (c.is(":visible")) {
            c.dialog("close")
        }
        c.find("input:checked").prop("checked", false);
        c.find(".url").val("http://").focus();
        openOverlay(c, {type: "inline", title: q.backgroundImage, close: function() {
                var h = c.find(".url").val();
                var n = c.find(".repeatX:checked").length;
                var g = c.find(".repeatY:checked").length;
                var k = "";
                if (n && g) {
                    k = "yes"
                } else {
                    if (n) {
                        k = "yes-x"
                    } else {
                        if (g) {
                            k = "yes-y"
                        }
                    }
                }
                if (k.length) {
                    h += " image-repeat=" + k
                }
                var l = e.replace(/%image%/, h);
                var m = "%image%".length - h.length;
                f.start = f.start - m;
                f.end = f.end - m;
                a.val(a.val().replace(e, l)).setSelection(f)
            }});
        var d = a.siblings(".markItUpHeader").find("." + b.className);
        c.parent().css("top", d.offset().top + d.height()).css("left", d.offset().left);
        return b
    }
    var s = [{name: q.bold, key: "B", openWith: "[b]", closeWith: "[/b]", className: "bold"}, {name: q.italic, key: "I", openWith: "[i]", closeWith: "[/i]", className: "italic"}, {name: q.underline, key: "U", openWith: "[u]", closeWith: "[/u]", className: "underline"}, {name: q.stroke, key: "S", openWith: "[s]", closeWith: "[/s]", className: "strikeThrough"}, {name: q.sub, openWith: "[sub]", closeWith: "[/sub]", className: "sub"}, {name: q.sup, openWith: "[sup]", closeWith: "[/sup]", className: "sup"}, {separator: "---------------"}, {name: q.fontColor, afterInsert: E, openWith: "[color=%colorCode%]", closeWith: "[/color]", placeHolder: q.textPlaceHolder, className: "fontColor"}, {name: q.fontSize, className: "fontSize", dropMenu: r}, {name: q.backgroundColor, afterInsert: E, openWith: "[background color=%colorCode%]", closeWith: "[/background]", placeHolder: q.textPlaceHolder, className: "backgroundColor"}, {name: q.backgroundImage, afterInsert: u, openWith: "[background image=%image%]", closeWith: "[/background]", placeHolder: q.textPlaceHolder, className: "backgroundImage"}, {separator: "---------------"}, {name: q.player, openWith: "[player]", closeWith: "[/player]", placeHolder: q.playerPlaceHolder, className: "player"}, {name: q.item, className: "item", dropMenu: C}, {name: q.coordinates, openWith: "[coordinates]", closeWith: "[/coordinates]", placeHolder: q.coordinatePlaceHolder, className: "coordinates"}, {name: q.tooltip, openWith: '[tooltip text="[![Tooltip Text:!:Tooltip Text]!]"]', closeWith: "[/tooltip]", placeHolder: q.textPlaceHolder, className: "tooltip"}, {separator: "---------------"}, {name: q.alignLeft, openWith: "[align=left]", closeWith: "[/align]", className: "leftAlign"}, {name: q.alignCenter, openWith: "[align=center]", closeWith: "[/align]", className: "centerAlign"}, {name: q.alignRight, openWith: "[align=right]", closeWith: "[/align]", className: "rightAlign"}, {name: q.alignJustify, openWith: "[align=justify]", closeWith: "[/align]", className: "justifyAlign"}, {separator: "---------------"}, {name: q.block, openWith: "[p]", closeWith: "[/p]", className: "block"}, {name: q.code, openWith: "[code]", closeWith: "[/code]", className: "code"}, {name: q.spoiler, openWith: "[spoiler]", closeWith: "[/spoiler]", className: "spoiler"}, {separator: "---------------"}, {name: q.list, openWith: "[*]", multiline: true, openBlockWith: "[list]\n", closeBlockWith: "\n[/list]", className: "list", afterMultiInsert: F, placeHolder: q.textPlaceHolder}, {name: q.hr, openWith: "[hr]", className: "hr"}, {separator: "---------------"}, {name: q.picture, key: "Z", replaceWith: "[img][![" + q.picture + ":!:http://]!][/img]", className: "picture"}, {name: q.link, key: "L", openWith: "[url=[![" + q.link + ":!:http://]!]]", closeWith: "[/url]", placeHolder: q.textPlaceHolder, className: "link"}, {name: q.email, key: "E", openWith: "[email=[![" + q.email + ":!:]!]]", closeWith: "[/email]", placeHolder: q.textPlaceHolder, className: "email"}, {name: q.preview, className: "preview", call: "preview"}];
    if (!A) {
        $.each(s, function(a) {
            if (this.className == "picture" || this.className == "backgroundImage") {
                s.splice(a, 1)
            }
        })
    }
    if (isMobile) {
        $.each(s, function(a) {
            if (this.className == "fontColor" || this.className == "backgroundColor") {
                s.splice(a, 1)
            }
        })
    }
    var v = {onShiftEnter: {keepDefault: false, replaceWith: "\n"}, onCtrlEnter: {keepDefault: false, openWith: "\n[p]", closeWith: "[/p]"}, onTab: {keepDefault: false, replaceWith: "\t"}, markupSet: s, resizeHandle: false, previewParserPath: bbcodePreviewUrl + "&imgAllowed=" + (A ? 1 : 0) + "&showAt=" + x, previewAutoRefresh: true, previewParserVar: "text", afterInsert: function(a) {
            $(a.textarea).trigger("keyup")
        }};
    $.colorpicker.regional.custom = q.colorPicker;
    w.each(function() {
        var a = $(this);
        v.previewInElement = $('<div class="markItUpPreviewDiv"></div>').insertAfter(a);
        a.markItUp(v).after($('<input type="hidden" class="colorpicker"/>').colorpicker({color: "#000000", colorFormat: "#HEX", hsv: false, parts: "popup", regional: "custom", showCancelButton: false}));
        if (isMobile) {
            a.siblings(".markItUpHeader").find("a").attr("title", "");
            a.siblings(".markItUpHeader").find("li:not(.markItUpDropMenu) a").bind("mouseup", function() {
                a.focus()
            })
        } else {
            a.siblings(".markItUpHeader").find("ul ul a").attr("title", "")
        }
        if ($("#backgroundImagePicker").length == 0) {
            $("body").append($('<div id="backgroundImagePicker" style="display: none;"><table><tr><td>' + q.backgroundImage + ':</td><td><input type="text" class="url"/></td></tr><tr><td>' + q.backgroundImagePicker.repeatX + ':</td><td><input type="checkbox" class="repeatX"/></td></tr><tr><td>' + q.backgroundImagePicker.repeatY + ':</td><td><input type="checkbox" class="repeatY"/></td></tr></table><div><a href="javascript:void(0);" class="btn_blue">' + q.backgroundImagePicker.ok + "</a></div></div>"));
            $("#backgroundImagePicker").find("a").bind("click", function() {
                $("#backgroundImagePicker").dialog("close")
            })
        }
    })
}
function initBBCodes() {
    $(document).undelegate(".spoilerHeader", "click").delegate(".spoilerHeader", "click", function() {
        var b = this;
        console.log(this);
        $(this).next(".spoilerText").toggle(0, function() {
            Tipped.refresh(b)
        })
    })
}
function initInviteCodes() {
    $("#buddyinvite .code").click(function() {
        $(this).selectText()
    })
}
function incrementBuddyCount() {
    var c = parseInt($("#buddyCount").text()) + 1;
    var d = parseInt($("#newRequestCount").text()) - 1;
    updateRequestCount(d);
    updateBuddyCount(c)
}
function updateRequestCount(b) {
    $("#newRequestCount").html(b)
}
function updateBuddyCount(b) {
    $("#buddyCount").html(b)
}
function buddyListReady() {
    addZebra();
    $(".deleteBuddy").bind("click", deleteBuddy)
}
function requestsReady() {
    addZebra();
    $(".cancelRequest").bind("click", cancelRequest);
    $(".acceptRequest").bind("click", acceptRequest);
    $(".rejectRequest").bind("click", rejectRequest)
}
function addZebra() {
    $(".zebra tr").mouseover(function() {
        $(this).addClass("over")
    }).mouseout(function() {
        $(this).removeClass("over")
    });
    $(".zebra tr:even").addClass("alt")
}
function initBuddies() {
    $("#buddies .nav").unbind("click").bind("click", function(c) {
        c.preventDefault();
        var d = $(this);
        hideTipsOnTabChange();
        $.get($(this).attr("href"), {}, function(a) {
            d.parents(".messagebox").find(".ajaxContent").html(a)
        });
        d.parents("ul").find("li").removeClass("aktiv");
        d.parent().addClass("aktiv")
    })
}
function initBuddyRequestForm() {
    $(".overlayDiv .buddyRequest form").unbind("submit").bind("submit", function() {
        var b = $(this);
        $.post(b.attr("action"), b.serialize(), function(d) {
            var a = b.parents(".overlayDiv");
            a.html(d)
        });
        return false
    });
    $(".buddyRequest").each(function() {
        var c = $(this);
        var d = c.parents(".ui-dialog").find(".ui-dialog-title");
        if (!d.find("span.buddyName").length) {
            d.append($(document.createElement("span")).addClass("buddyName").text(" (" + c.attr("data-title") + ")"))
        }
    })
}
function initBuyResourceOverlay(f, e, d) {
    $(".close_buyResourceOverlay").on("click", function() {
        $("#buyResourceOverlayBody").closest(".ui-dialog").find(".ui-icon-closethick").click()
    });
    $("#premiumConfirmButton").on("click", function(a) {
        a.preventDefault();
        if (f && e) {
            errorBoxDecision(d.allNetworkAttention, d.slotWarning, d.allYes, d.allNo, sendDMAcceptanceForm)
        } else {
            sendDMAcceptanceForm()
        }
    })
}
function sendDMAcceptanceForm() {
    $("#premiumAcceptForm").submit();
    return
}
function openBuyResourceDialog(b) {
    openOverlay(b, {"class": "buyResourceDialog"})
}
function abortBuyResource() {
    $(".overlaydiv .abort_button").on("click", function() {
        $(".overlaydiv").dialog("close")
    })
}
function initBuyResources() {
    refreshBars("bar_container", "filllevel_bar");
    $(".fill_resource").on("click", ".fillup", onChangeToPremium).on("click", ".btn_premium", submitBuyRequest)
}
function onChangeToPremium(g) {
    var f = $(g.currentTarget).find(".btn_blue"), h = f.closest(".fillup"), e = f.closest(".fill_resource_ctn").find(".premium_bar");
    $(".fillup").removeClass("premium").parent().find(".current_stock span").removeClass("premium_txt").each(function() {
        var a = $(this);
        a.text(a.data("currentAmount"))
    });
    $(".fill_resource .btn_premium").html(loca.fillUpResource).attr("class", "btn_blue");
    $(".premium_bar").css("width", "0%").data("premiumPercent", 0);
    if (f.attr("disabled") == "disabled") {
        return
    }
    f.html(loca.buyNow).attr("class", "btn_premium small");
    h.addClass("premium");
    h.parent().find(".current_stock span").addClass("premium_txt").text(f.data("newValueFormatted"));
    e.data("premiumPercent", f.data("premiumPercent"));
    changeTooltip(e, "+" + f.data("premiumValue"));
    refreshBars("bar_container", "filllevel_bar", "premium_bar")
}
function submitBuyRequest(l) {
    var n = $(l.currentTarget), m = n.data("resource"), e = n.data("premiumCosts"), k = n.data("packageType"), h = n.data("traderBuyResource");
    $.ajax({url: "index.php?page=traderOverview", data: {buyResource: m, buyPackage: k, costs: e, token: h, ajax: 1}, type: "POST", dataType: "json", success: function(a) {
            refreshToken = function(b) {
                $(".btn_blue").each(function() {
                    $(this).data("traderBuyResource", b)
                })
            };
            refreshToken(a.buyResourceToken);
            if (!a.success) {
                fadeBox(a.message, true);
                return
            }
            getAjaxResourcebox(function(b) {
                $(".fill_resource .bar_container").each(function() {
                    var c = $(this);
                    c.data("currentAmount", b[c.data("resource")]["resources"]["actual"]);
                    c.parent().find(".current_stock span").html(a[c.data("resource")]).data("currentAmount", a[c.data("resource")]);
                    refreshBars("fill_resource .bar_container", "filllevel_bar")
                })
            });
            $(".fill_resource .fillup").each(function() {
                var c = $(this);
                var d = c.find("a");
                var g = d.data("resource");
                var b = d.data("packageType");
                if (!a.possiblePackages[g][b]["isBuyable"]) {
                    d.attr("disabled", "disabled");
                    c.attr("disabled", "disabled");
                    c.addClass("disabled")
                }
                d.data("premiumCosts", a.possiblePackages[g][b]["costs"]);
                d.data("premiumValue", a.possiblePackages[g][b]["resources"]);
                d.data("newValueFormatted", a.possiblePackages[g][b]["newValueFormatted"]);
                if (a.possiblePackages[g][b]["displayCosts"]) {
                    c.find(".fillup_cost .premium_txt").html(a.possiblePackages[g][b]["formattedCosts"])
                } else {
                    c.find(".fillup_cost").addClass("overmark").html("-")
                }
                if (b == 3) {
                    var f = d.data("buyButtonClass");
                    if (!a.possiblePackages[g][b]["isCapped"] && c.children("." + f).length) {
                        c.children("." + f).removeClass(f).addClass("fillup_100percent");
                        c.children(".fillup_txt").html(loca.fillUpTo)
                    }
                }
            })
        }, error: function() {
        }})
}
function initChangelog() {
    $("#changelog dd").hide();
    $("#changelog dt").mouseover(function() {
        $(this).css("cursor", "pointer")
    });
    $("#changelog dt").click(function() {
        if ($(this).hasClass("open")) {
            $(this).next("dd").hide();
            $(this).removeClass("open")
        } else {
            $(this).next("dd").show().find("dd:first").show();
            $(this).next("dd").find("dt:first").addClass("open");
            $(this).addClass("open")
        }
    });
    $("#changelog dt:first").click()
}
function countdown(l, g, f) {
    if (g == null || g == "") {
        g = 2
    }
    var h = this;
    h.countValue = parseInt(f) || -1;
    h.timestamp = 0;
    h.maxDigits = parseInt(g);
    h.delimiter = " ";
    h.approx = "";
    h.showunits = true;
    h.zerofill = false;
    var k = new Date();
    h.startTime = k.getTime();
    h.startLeftoverTime = parseInt(l);
    this.getCurrentTimestring = function() {
        return h.formatTime(h.getLeftoverTime())
    };
    this.getLeftoverTime = function() {
        var a = new Date();
        return Math.round((h.startLeftoverTime + ((a.getTime() - h.startTime) * h.countValue) / 1000))
    };
    this.formatTime = function(a) {
        return formatTimeWrapper(a, h.maxDigits, h.showunits, h.delimiter, h.zerofill, h.approx)
    }
}
function formatTimeWrapper(o, u, q, v, s, n) {
    var k = [];
    k.week = 604800;
    k.day = 86400;
    k.hour = 3600;
    k.minute = 60;
    k.second = 1;
    var w = "";
    for (var r in k) {
        var p = Math.floor(o / k[r]);
        if (u > 0 && (p > 0 || s && w != "")) {
            o = o - p * k[r];
            if (w != "") {
                w += v;
                if (p < 10 && p > 0 && s) {
                    p = "0" + p
                }
                if (p == 0) {
                    p = "00"
                }
            }
            w += p + (q ? LocalizationStrings.timeunits["short"][r] : "");
            u--
        }
    }
    if (o > 0) {
        w = n + w
    }
    return w
}
function bauCountdown(k, l, f, g) {
    if (typeof (k) == "object") {
        var h = this;
        h.totalTime = f;
        h.startHeight = k.offsetHeight;
        h.htmlObj = $(k);
        h.timeHtmlObj = h.htmlObj.siblings(".timeLink").find(".time");
        this.updateCountdown = function() {
            h.countdown.getCurrentTimestring();
            timestamp = h.countdown.getLeftoverTime();
            timestring = h.countdown.getCurrentTimestring();
            h.timeHtmlObj.text(timestring);
            var a = Math.max(0, timestamp) / h.totalTime;
            if (a > 0) {
                var b = Math.round(h.startHeight * a);
                h.htmlObj.css({height: b + "px", marginTop: (h.startHeight - b) + "px"})
            } else {
                h.timeHtmlObj.text(LocalizationStrings.status.ready);
                h.htmlObj.css({height: h.startHeight + "px", marginTop: 0});
                if (timestamp <= -1 && timestamp > -10 && !isOverlayOpen()) {
                    reload_page(g)
                }
            }
        };
        if (h.timeHtmlObj.length) {
            h.countdown = new countdown(l);
            timerHandler.appendCallback(h.updateCountdown);
            h.updateCountdown()
        } else {
            window.status = "kein timeHtmlObj"
        }
    }
}
function schiffbauCountdown(o, k, m, q, r, l) {
    if (typeof (o) == "object") {
        var n = this;
        n.totalTime = r;
        n.oneShipTime = r;
        n.shipCount = k;
        n.currentShips = m;
        n.startHeight = o.offsetHeight;
        n.htmlObj = $(o);
        var p = n.htmlObj.siblings(".timeLink");
        n.timeHtmlObj = p.find(".time");
        n.countHtmlObj = $("#shipcount");
        n.shipsHtmlObj = $("#bestand");
        this.updateCountdown = function() {
            n.countdown.getCurrentTimestring();
            timestamp = n.countdown.getLeftoverTime();
            timestring = n.countdown.getCurrentTimestring();
            n.timeHtmlObj.text(timestring);
            var a = Math.max(0, timestamp) / n.totalTime;
            if (a > 0) {
                var b = Math.round(n.startHeight * a);
                n.htmlObj.css({height: b + "px", marginTop: (n.startHeight - b) + "px"})
            } else {
                if (n.shipCount > 0) {
                    n.shipCount--;
                    n.currentShips++
                }
                if (n.shipCount >= 0) {
                    n.countHtmlObj.text(n.shipCount);
                    $("#shipcount").text(n.shipCount)
                }
                n.shipsHtmlObj.text(gfNumberGetHumanReadable(n.currentShips));
                if (n.shipCount > 0) {
                    n.countdown = new countdown(r);
                    n.timeHtmlObj.text("-")
                } else {
                    if (timestamp <= -1 && timestamp > -10) {
                        if (l != null && timestamp > -10 && !isOverlayOpen()) {
                            reload_page(l)
                        }
                        timerHandler.removeCallback(n.timer)
                    }
                    n.timeHtmlObj.text(LocalizationStrings.status.ready)
                }
            }
        };
        if (n.timeHtmlObj && n.countHtmlObj && n.shipsHtmlObj) {
            totalTime = Math.floor(k * r);
            n.countdown = new countdown(q);
            n.timer = timerHandler.appendCallback(n.updateCountdown);
            n.updateCountdown()
        } else {
            window.status = "kein: timeHtmlObj oder countHtmlObj oder shipsHtmlObj"
        }
    }
}
function baulisteCountdown(k, f, g, l) {
    if (typeof (k) == "object") {
        var h = this;
        h.timeHtmlObj = k;
        h.updateCountdown = function() {
            var a = h.countdown.getLeftoverTime();
            if (a > 0) {
                $(h.timeHtmlObj).html(h.countdown.getCurrentTimestring())
            } else {
                $(h.timeHtmlObj).html(LocalizationStrings.status.ready);
                if (typeof (l) == "function") {
                    l()
                }
                if (a <= -1 && a > -10) {
                    if (g != null && a > -10 && !isOverlayOpen()) {
                        reload_page(g)
                    }
                    timerHandler.removeCallback(h.timer)
                }
            }
        };
        if (h.timeHtmlObj) {
            h.countdown = new countdown(f, 3);
            h.timer = timerHandler.appendCallback(h.updateCountdown);
            h.updateCountdown()
        }
    }
}
function eventboxCountdown(l, n, h, m, g) {
    if (typeof (l) == "object") {
        var k = this;
        k.timeHtmlObj = l;
        this.updateCountdown = function() {
            k.countdown.getCurrentTimestring();
            var a = k.countdown.getLeftoverTime();
            var b = k.countdown.getCurrentTimestring();
            if (a > 0) {
                $(k.timeHtmlObj).html(b)
            } else {
                timerHandler.removeCallback(k.timer);
                $(k.timeHtmlObj).html(LocalizationStrings.status.ready);
                if (!timerHandler.checkEventsAlreadyQueued) {
                    timerHandler.checkEventsAlreadyQueued = true;
                    setTimeout(function() {
                        $.post(m, {ids: g}, function(c) {
                            var e = $.parseJSON(c);
                            for (var d in e.rows) {
                                $(h).find("#eventRow-" + e.rows[d]).remove();
                                $(".union" + e.rows[d]).remove()
                            }
                            $(".eventFleet").removeClass("odd");
                            $(".partnerInfo").removeClass("part-even");
                            $(".eventFleet:odd").addClass("odd");
                            $(".partnerInfo:even").addClass("part-even");
                            timerHandler.checkEventsAlreadyQueued = false
                        })
                    }, 2500)
                }
            }
        };
        if (k.timeHtmlObj) {
            k.countdown = new countdown(n, 3);
            k.timer = timerHandler.appendCallback(k.updateCountdown);
            k.updateCountdown()
        }
    }
}
function simpleCountdown(k, g, l, f) {
    if (typeof (k) == "object") {
        var h = this;
        h.timeHtmlObj = $(k)[0];
        this.updateCountdown = function() {
            var a = h.countdownObject.getLeftoverTime();
            var b = h.countdownObject.getCurrentTimestring();
            if (a > 0) {
                h.timeHtmlObj.innerHTML = b;
                if (typeof f == "string" && $.isFunction(window[f])) {
                    window[f]()
                } else {
                    if ($.isFunction(f)) {
                        f()
                    }
                }
            } else {
                timerHandler.removeCallback(h.timer);
                h.timeHtmlObj.innerHTML = LocalizationStrings.status.ready;
                if (typeof l == "string" && $.isFunction(window[l])) {
                    window[l]()
                } else {
                    if ($.isFunction(l)) {
                        l()
                    }
                }
            }
        };
        if (typeof (h.timer) != "undefined") {
            timerHandler.removeCallback(h.timer)
        }
        if (h.timeHtmlObj) {
            h.countdownObject = new countdown(g, 3);
            h.timer = timerHandler.appendCallback(h.updateCountdown);
            h.updateCountdown()
        }
    }
}
function countdownWithTickFunction(m, p, h, n, o, k) {
    if (typeof (m) == "object") {
        var l = this;
        l.timeHtmlObj = m;
        if (typeof ($(m).attr("data-countdown")) != "undefined") {
            timerHandler.removeCallback($(m).attr("data-countdown"))
        }
        this.updateCountdown = function() {
            timestamp = l.countdown.getLeftoverTime();
            timestring = l.countdown.getCurrentTimestring();
            if (timestamp > 0) {
                l.timeHtmlObj.innerHTML = timestring;
                if (typeof o == "string" && $.isFunction(window[o])) {
                    window[o](timestamp, h)
                } else {
                    if ($.isFunction(o)) {
                        o(timestamp, h)
                    }
                }
            } else {
                timerHandler.removeCallback(l.timer);
                l.timeHtmlObj.innerHTML = LocalizationStrings.status.ready;
                if (typeof n == "string" && $.isFunction(window[n])) {
                    window[n]()
                } else {
                    if ($.isFunction(n)) {
                        n()
                    }
                }
            }
        };
        if (l.timeHtmlObj) {
            l.countdown = new countdown(p, k);
            l.timer = timerHandler.appendCallback(l.updateCountdown);
            l.updateCountdown();
            $(m).attr("data-countdown", l.timer)
        }
        return l
    }
}
function reloadCountdown(h, e, f) {
    if (typeof (h) == "object") {
        var g = this;
        g.timeHtmlObj = h;
        this.updateCountdown = function() {
            g.countdown.getCurrentTimestring();
            timestamp = g.countdown.getLeftoverTime();
            timestring = g.countdown.getCurrentTimestring();
            if (timestamp > 0) {
                g.timeHtmlObj.innerHTML = timestring
            } else {
                g.timeHtmlObj.innerHTML = LocalizationStrings.status.ready;
                if (timestamp <= -2 && timestamp > -10 && !isOverlayOpen()) {
                    reload_page(f)
                }
            }
        };
        if (g.timeHtmlObj) {
            g.countdown = new countdown(e, 3);
            timerHandler.appendCallback(g.updateCountdown);
            g.updateCountdown()
        }
    }
}
function movementImageCountdown(m, p, n, k, h, o) {
    if (typeof (m) == "object") {
        var l = this;
        l.timeHtmlObj = m;
        this.updateCountdown = function() {
            l.countdown.getCurrentTimestring();
            var a = l.countdown.getLeftoverTime();
            var b = l.countdown.getCurrentTimestring();
            if (a > 0) {
                percent = 100 - a / (n / 100);
                if (!k) {
                    pixel = Math.abs((o / 100) * percent)
                } else {
                    pixel = (o * 2) - Math.abs(((o * 2) / 100) * percent)
                }
                pixel = Math.round(pixel);
                if (h) {
                    l.timeHtmlObj.style.marginRight = pixel + "px"
                } else {
                    l.timeHtmlObj.style.marginLeft = pixel + "px"
                }
            }
        };
        if (l.timeHtmlObj) {
            l.countdown = new countdown(p, 3);
            timerHandler.appendCallback(l.updateCountdown);
            l.updateCountdown()
        }
    }
}
function shipCountdown(r, o, l, q, u, m, n, p) {
    if ((typeof (r) == "object") && (typeof (o) == "object") && (typeof (l) == "object")) {
        var s = this;
        s.totalTimeHtmlObj = r;
        s.unitTimeHtmlObj = o;
        s.sumCountHtmlObj = l;
        this.updateCountdown = function() {
            s.unitCountdown.getCurrentTimestring();
            unitTimestamp = s.unitCountdown.getLeftoverTime();
            unitTimestring = s.unitCountdown.getCurrentTimestring();
            s.totalCountdown.getCurrentTimestring();
            totalTimestamp = s.totalCountdown.getLeftoverTime();
            totalTimestring = s.totalCountdown.getCurrentTimestring();
            if (unitTimestamp > 0) {
                s.unitTimeHtmlObj.innerHTML = unitTimestring
            } else {
                n--;
                s.unitTimeHtmlObj.innerHTML = LocalizationStrings.status.ready;
                if (n > 0) {
                    s.unitCountdown = new countdown(q);
                    s.sumCountHtmlObj.innerHTML = n
                } else {
                    s.sumCountHtmlObj.innerHTML = 0
                }
            }
            if (n > 0) {
                s.totalTimeHtmlObj.innerHTML = totalTimestring
            } else {
                s.totalTimeHtmlObj.innerHTML = LocalizationStrings.status.ready;
                if (!isOverlayOpen()) {
                    reload_page(p)
                }
            }
        };
        if ((s.totalTimeHtmlObj) && (s.unitTimeHtmlObj) && (s.sumCountHtmlObj)) {
            s.totalCountdown = new countdown(m);
            s.unitCountdown = new countdown(u);
            timerHandler.appendCallback(s.updateCountdown);
            s.updateCountdown()
        }
    }
}
function reload_page(b) {
    if (timerHandler && timerHandler.pageReloadAlreadyTriggered == false) {
        timerHandler.pageReloadAlreadyTriggered = true;
        openParentLocation(b)
    }
}
function initItemActivation(c) {
    inventoryObj.initalizeSlider(inventoryObj.items_inventory, "js_activeItemSlider", 395, 172, " ", true, " ", true, true);
    if (typeof (c) == "undefined" || c.length == 0 || c == 1) {
        var d = $(".item_img_box .detail_button").filter(":first");
        if (d.length === 0) {
            $("#noItems").show();
            $("#itemDetailBox").hide();
            return
        } else {
            $.bbq.pushState({item: d.attr("ref")})
        }
    } else {
        $.bbq.pushState({item: c});
        $(window).trigger("hashchange")
    }
    $("#activeBuffDetails .js_is_active").each(function() {
        $durationEl = $(this).parent().siblings(".js_duration");
        $pusherEl = $(this).parent().siblings(".pusher");
        startCooldown($durationEl, $pusherEl, 75)
    });
    $(document).undelegate("#activeBuffDetails .detail_button", "click.updateItemDetails").delegate("#activeBuffDetails .detail_button", "click.updateItemDetails", function() {
        if ($(this).hasClass("active")) {
            return
        }
        $("#activeBuffDetails .detail_button").removeClass("active");
        $(this).addClass("active");
        $.bbq.pushState({item: $(this).attr("ref")})
    }).undelegate("#activeBuffDetails .build-it", "click.activateItem").delegate("#activeBuffDetails .build-it", "click.activateItem", function() {
        activateItem($(this).attr("ref"))
    }).undelegate("#activeBuffDetails .buyAndActivate.dm.build-it_disabled", "click.activateItem").delegate("#activeBuffDetails .buyAndActivate.dm.build-it_disabled", "click.activateItem", function() {
        if (vacation) {
            return
        }
        var a = $(this).attr("ref");
        if ($("#js_activeItemSlider>li a[ref='" + a + "']").length == 0) {
            return
        }
        errorBoxDecision(LocalizationStrings.error, translation.buyDMDecision, LocalizationStrings.yes, LocalizationStrings.no, function() {
            window.location.href = $("#darkmatter_box a").attr("href")
        })
    }).undelegate("#activeBuffDetails .close_detail", "click.changeHash").delegate("#activeBuffDetails .close_detail", "click.changeHash", function() {
        $.bbq.pushState({item: ""})
    })
}
function initBuffBar() {
    $(".sliderWrapper .active_items").anythingSlider({resizeContents: false, buildNavigation: false, buildStartStop: false, infiniteSlides: false, stopAtEnd: true});
    $(".sliderWrapper .active_items").removeClass("hidden");
    $(window).unbind("hashchange.openBuffBar").bind("hashchange.openBuffBar", function(k) {
        var l = $.deparam.fragment(k.fragment);
        if (typeof (l.item) != "undefined") {
            var f = $("#buffBar .activate_item");
            $("#buffBar a").removeClass("active");
            var h = l.item;
            if (h != "") {
                if ($("#activeBuffDetails:visible").length) {
                    if (typeof (inventoryObj.items_inventory[h]) == "undefined") {
                        var g = $("#activeBuffDetails .detail_button").filter(":first");
                        $.bbq.pushState({item: g.attr("ref")});
                        return
                    }
                    $("#buffBar a[ref='" + l.item + "']").addClass("active");
                    f.addClass("active");
                    $("#noItems").hide();
                    $("#itemDetailBox").show();
                    updateItemDetails(h)
                } else {
                    $("#buffBar a[ref='" + l.item + "']").addClass("active");
                    f.addClass("active");
                    gfSlider.slideIn(getElementByIdWithCache("detail"), h)
                }
            } else {
                if ($("#activeBuffDetails .detail_button").filter(":first").length === 0) {
                    $("#noItems").show();
                    $("#itemDetailBox").hide()
                }
                $("#activeBuffDetails .close_details").click();
                f.removeClass("active")
            }
        }
    });
    $(document).undelegate("#buffBar a", "click.openDetails").delegate("#buffBar a", "click.openDetails", function() {
        if ($(this).hasClass("active")) {
            $.bbq.pushState({item: ""})
        } else {
            $.bbq.pushState({item: $(this).attr("ref")})
        }
    });
    $("#buffBar").unbind("click.openDetails").bind("click.openDetails", function(b) {
        if (!$(b.target).is("#buffBar .activate_item") && !$(b.target).is(".arrow a")) {
            $("#buffBar .activate_item").click()
        }
    });
    $("#buffBar .active_items div:not(.activate_item)").each(function() {
        $durationEl = $(this).find(".js_duration");
        $pusherEl = $(this).find(".pusher");
        startCooldown($durationEl, $pusherEl, 32)
    });
    $(window).trigger("hashchange")
}
function getItem(b) {
    if (typeof (inventoryObj.items_inventory[b]) != "undefined") {
        return inventoryObj.items_inventory[b]
    }
    return null
}
function updateItemDetails(e) {
    var h = getItem(e);
    $("#activeBuffDetails .detail_button").removeClass("active");
    $('#activeBuffDetails .detail_button[ref="' + e + '"]').addClass("active");
    $("#activeBuffDetails .js_itemName").html(h.name);
    $("#activeBuffDetails .js_itemEffect").html(h.effect);
    $("#activeBuffDetails .js_itemAmount").html(h.amount);
    if (h.firstStatus) {
        $("#activeBuffDetails .js_itemDurationStatus").html(translation.durationType[h.firstStatus])
    } else {
        $("#activeBuffDetails .js_itemDurationStatus").html(translation.durationType.effecting)
    }
    if (h.duration) {
        if (h.durationExtension) {
            $("#activeBuffDetails .js_itemDuration").html(formatTimeWrapper(h.duration, 2, true, " ", false, "") + h.durationExtension)
        } else {
            $("#activeBuffDetails .js_itemDuration").html(formatTimeWrapper(h.duration, 2, true, " ", false, ""))
        }
    } else {
        if (h.duration === null) {
            if (h.moonOnlyItem) {
                $("#activeBuffDetails .js_itemDuration").html(translation.permanentMoon)
            } else {
                $("#activeBuffDetails .js_itemDuration").html(translation.permanent)
            }
        } else {
            $("#activeBuffDetails .js_itemDuration").html(translation.now)
        }
    }
    if (h.timeLeft) {
        $("#activeBuffDetails .js_itemTimeLeftTxt").show();
        $("#activeBuffDetails .js_itemTimeLeft").html(formatTimeWrapper(h.timeLeft, 2, true, " ", false, ""))
    } else {
        $("#activeBuffDetails .js_itemTimeLeftTxt").hide()
    }
    var g = $("#activationButton");
    g.attr("ref", e);
    g.removeClass("buyAndActivate activateItem build-it_disabled build-it dm bp").addClass(h.currency);
    if (h.amount > 0) {
        g.addClass("activateItem").html("<span>" + ((h.timeLeft > 0 && h.extendable) ? translation.extend : translation.activate) + "</span>").addClass(h.canBeActivated ? "build-it" : "build-it_disabled")
    } else {
        var f = (h.timeLeft > 0 && h.extendable) ? translation.buyAndExtend : translation.buyAndActivate;
        f = f.replace(/%price%/, tsdpkt(h.costs));
        f = f.replace(/%currency%/, translation.currencies[h.currency]);
        g.addClass("buyAndActivate").html("<span>" + f + "</span>").addClass(h.canBeBoughtAndActivated && h.hasEnoughCurrency ? "build-it" : "build-it_disabled")
    }
}
function activateItem(e) {
    var f = {ajax: 1, token: activateToken, referrerPage: $.deparam.querystring().page};
    var h = getItem(e);
    if (h.amount > 0) {
        f.item = e
    } else {
        f.buyAndActivate = e
    }
    function g() {
        $.ajax({cache: false, url: inventoryObj.inventoryUrl, data: f, type: "POST", dataType: "json", success: function(F, N, D) {
                activateToken = F.newToken;
                if (F.error) {
                    fadeBox(F.message, true);
                    return
                }
                if (F.message.reload) {
                    location.href = getRedirectLink();
                    return
                }
                fadeBox(F.message.message, false);
                if (F.message.buff != false) {
                    var b = getItem(F.message.buff);
                    var a = true;
                    var O = $(".active_items");
                    var d = O.data("AnythingSlider");
                    var H;
                    O.find("li a").removeClass("active");
                    O.find("li a.activate_item").addClass("active");
                    O.find("div[data-id=" + F.message.buffId + "]").each(function() {
                        $(this).hide().show("pulsate").find("a").addClass("active");
                        a = false;
                        H = $(this)
                    });
                    if (a == true) {
                        var L = $('<div data-uuid="' + b.ref + '" data-id="' + F.message.buffId + '"><div class="js_duration" style="display: none;"></div><a href="javascript:void(0);" ref="' + b.ref + '" class="detail_button slideIn active_item active r_' + F.message.item.rarity + ' border3px tooltipHTML" title="' + F.message.item.toolTip + '"><div class="pusher" style="height: 0%; "></div><img src="/cdn/img/item-images/' + b.image + '-small.png" alt=""/></a></div>');
                        var E = 14;
                        var B = d.currentPage;
                        var c = d.options.animationTime;
                        if (typeof (F.message.upgraded) != "undefined") {
                            for (var P in F.message.upgraded) {
                                var G = F.message.upgraded[P];
                                O.find("div[data-uuid=" + G + "]").remove()
                            }
                            var J = $(document.createDocumentFragment());
                            var M = O.find("li > div");
                            M.each(function(l, k) {
                                if (l % E == 0) {
                                    $("<li/>").appendTo(J)
                                }
                                $(this).appendTo(J.children().last())
                            });
                            O.empty().append(J);
                            d.updateSlider()
                        }
                        var I = O.children().last().children().length;
                        if (I < E) {
                            L.hide().appendTo(O.children().last()).show("pulsate");
                            if (B == d.pages) {
                                d.options.animationTime = 0
                            }
                            d.gotoPage(d.pages);
                            if (B == d.pages) {
                                d.options.animationTime = c
                            }
                        } else {
                            L = L.hide().wrap("<li/>");
                            L.parent().appendTo(O).children().last();
                            d.updateSlider();
                            if (B == d.pages) {
                                d.options.animationTime = 0
                            }
                            d.gotoPage(d.pages);
                            if (B == d.pages) {
                                d.options.animationTime = c
                            }
                            L.show("pulsate")
                        }
                        H = L
                    }
                }
                var C = H.find(".pusher");
                var K = H.find(".js_duration");
                K.attr("data-total-duration", F.message.totalDuration).text(F.message.item.timeLeft);
                startCooldown(K, C, 32);
                getAjaxResourcebox();
                $.ajax({type: "POST", url: detailUrl, data: {type: e}, beforeSend: function() {
                        $("#detailWrapper .detail_screen").html('<p class="ajaxLoad">' + LocalizationStrings.loading + "</p>")
                    }, success: function(k) {
                        $("#detailWrapper .detail_screen").html(k)
                    }})
            }, error: function(a) {
                fadeBox("Error!", true)
            }})
    }
    if (h.isAnUpgrade) {
        errorBoxDecision(LocalizationStrings.activateItem.upgradeItemQuestionHeader, LocalizationStrings.activateItem.upgradeItemQuestion, LocalizationStrings.yes, LocalizationStrings.no, g);
        return
    }
    g()
}
function initEmpireEquipment() {
    $(".overview_equipment .item_img_box .hidden").each(function() {
        startCooldown($(this), $(this).parent().parent().find(".pusher"), 32)
    })
}
function startCooldown(e, f, g) {
    if ($.trim(e.text()).match(/^\d+$/)) {
        var h = new countdownWithTickFunction(e[0], parseInt($.trim(e.text())), parseInt(e.attr("data-total-duration")), function() {
            location.href = getRedirectLink()
        }, function(b, a) {
            var d = 1 - (b / a);
            var c = Math.floor(g * d);
            f.css("height", c + "px")
        })
    }
}
function errorBoxAsArray(b) {
    if (b.type == "notify") {
        notifyBoxAsArray(b)
    } else {
        if (b.type == "decision") {
            errorBoxDecision(b)
        } else {
            if (b.type == "fadeBox") {
                fadeBox(b.text, b.failed)
            }
        }
    }
}
function notifyBoxAsArray(b) {
    errorBoxNotify(b.title, b.text, b.buttonOk, String(b.okFunction), b.removeOpen, b.modal)
}
function fadeBox(d, e, f) {
    if (e) {
        $("#fadeBoxStyle").attr("class", "failed")
    } else {
        $("#fadeBoxStyle").attr("class", "success")
    }
    $("#fadeBoxContent").html(d);
    $("#fadeBox").stop(false, true).show().fadeOut(10000, f)
}
function errorBoxDecision(q, s, y, n, v, x, w) {
    var r = getIEVersion() <= 9 && (w || false);
    var p = $("#errorBoxDecision");
    p.find("#errorBoxDecisionHead").html(q);
    p.find("#errorBoxDecisionContent").html(s);
    var o = function(a) {
        a.stopPropagation();
        if (typeof (p.data("uiDialog")) != "undefined") {
            p.dialog("destroy")
        }
        if (typeof (v) == "function") {
            v()
        }
    };
    var u = function(a) {
        a.stopPropagation();
        if (typeof (p.data("uiDialog")) != "undefined") {
            p.dialog("destroy")
        }
        if (typeof (x) == "function") {
            x()
        }
    };
    p.find(".yes, .no").unbind("click");
    p.unbind("keydown.yesHandler");
    setTimeout(function() {
        var b = p.find(".yes");
        var a = p.find(".no");
        b.unbind("click").bind("click", o).focus().find("#errorBoxDecisionYes").html(y);
        a.unbind("click").bind("click", u).find("#errorBoxDecisionNo").html(n);
        if (r) {
            b.attr("href", "#");
            a.attr("href", "#")
        } else {
            b.attr("href", "javascript:void(0);");
            a.attr("href", "javascript:void(0);")
        }
        p.bind("keydown.yesHandler", function(c) {
            if (c.which == KeyEvent.DOM_VK_RETURN) {
                p.find(".yes").trigger("click")
            }
        })
    }, 100);
    Tipped.hideAll();
    p.dialog({resizable: false, modal: true, title: q, close: u, width: 400, dialogClass: "errorBox"})
}
function errorBoxNotify(n, p, m, q, r) {
    var o = getIEVersion() <= 9 && (r || false);
    var l = $("#errorBoxNotify");
    l.find("#errorBoxNotifyHead").html(n);
    l.find("#errorBoxNotifyContent").html(p);
    var u = function(a) {
        a.stopPropagation();
        l.dialog("destroy");
        if (typeof (q) == "function") {
            q()
        } else {
            if (typeof (window[q]) == "function") {
                window[q]()
            }
        }
    };
    var s = l.find(".ok");
    s.unbind("click").bind("click", u).find("#errorBoxNotifyOk").html(m);
    if (o) {
        s.attr("href", "#")
    } else {
        s.attr("href", "javascript:void(0);")
    }
    Tipped.hideAll();
    l.dialog({resizable: false, modal: true, title: n, close: u, width: 400, dialogClass: "errorBox"})
}
function eventBDayInitGalaxy() {
    if (isMobile) {
        $(".js_bday_details").hide();
        $(".bdaySlotBox .name").click(function(b) {
            $(".row").children().each(function() {
                if ($(this).html().trim()) {
                    $(this).removeClass("active")
                }
            });
            $(".bdaySlotBox .name").removeClass("active");
            $(".js_detailRow").hide();
            $(this).toggleClass("active");
            if ($(b.target).attr("class").indexOf("planet") !== -1) {
                $(".js_detailRowPlanet17").toggle()
            } else {
                if ($(b.target).attr("class").indexOf("debris") !== -1) {
                    $(".js_detailRowDebris17").toggle()
                }
            }
        })
    }
}
function eventBDayInit() {
    var b = $(".event_box");
    $("#eventBDayWrapper").click(function(a) {
        if ($(a.target).attr("id") === "BDayContent" || $(a.target).attr("id") === "BDayEventClose" || $(a.target).closest("#BDayHeader").length > 0) {
            b.hide();
            $(".bday_box").removeClass("active")
        }
        a.stopPropagation()
    });
    $(".bday_box").click(function(d) {
        $(".bday_box").removeClass("active");
        var a = $(d.target).closest(".bday_box").attr("id").replace("box", "");
        b.removeClass().addClass("event_box " + eventBoxData[a].eventTypeClass);
        if (eventBoxData[a] !== undefined) {
            b.attr("id", "eventBox" + a).show();
            $("#box" + a).addClass("active");
            if (eventBoxData[a].eventTypeClass !== "future") {
                $("#eventBox" + a + " #BDayEventDate").html(eventBoxData[a].date + ": ")
            } else {
                $("#eventBox" + a + " #BDayEventDate").html("")
            }
            $("#eventBox" + a + " #BDayEventTitle").html(eventBoxData[a].title);
            $("#eventBox" + a + " #BDayofficerImg").attr("src", eventBoxData[a].eventOfficerImgSrc);
            if (eventBoxData[a].eventTypeClass !== "future" || eventBoxData[a].txtChronic !== undefined) {
                $("#eventBox" + a + " #BDayEventTxtChronic").html(eventBoxData[a].txtChronic);
                $("#eventBox" + a + " #BDayChronic").show()
            } else {
                $("#eventBox" + a + " #BDayChronic").hide()
            }
            if (eventBoxData[a].eventImgSrc === undefined && eventBoxData[a].eventTypeClass === "future") {
                $("#eventBox" + a + " #BDayEventImg").attr("src", "http://gf3.geo.gfsrv.net/cdn82/d995359d038c9a0c21aed16b3cc162.png")
            } else {
                $("#eventBox" + a + " #BDayEventImg").attr("src", eventBoxData[a].eventImgSrc)
            }
            if (eventBoxData[a].eventTxtDesc === undefined) {
                $("#eventBox" + a + " #BDayEventTxtDesc").html("")
            } else {
                $("#eventBox" + a + " #BDayEventTxtDesc").html(eventBoxData[a].eventTxtDesc)
            }
            $("#eventBox" + a + " #BDayEventPastTxt").hide();
            if (eventBoxData[a].eventTypeClass === "past") {
                $("#eventBox" + a + " #BDayEventPastTxt").html(eventPastTxt).show()
            }
            $("#eventBox" + a + " #BDayEventBtnCTA").hide();
            if ((eventBoxData[a].eventTypeClass !== ("past" || "future")) && eventBoxData[a].btnCTA !== undefined) {
                $("#eventBox" + a + " #BDayEventBtnCTA").html(eventBoxData[a].btnCTA).attr("href", eventBoxData[a].btnCTALink).show()
            }
        }
    })
}
function initBDayEventHints() {
    $(document).undelegate(".event_build_faster, .event_active_hint", "click").delegate(".event_build_faster, .event_active_hint", "click", function(b) {
        b.stopPropagation();
        if ($(this).parent().attr("id") === "expeditionbutton") {
            doExpedition()
        } else {
            $(this).siblings(".detail_button").click()
        }
    })
}
function initEventTable() {
    $(".eventFleet:odd").addClass("odd");
    $(".partnerInfo:even").addClass("part-even");
    $(".partnerInfo").hide();
    $(document).undelegate(".toggleDetails", "click").delegate(".toggleDetails", "click", function() {
        var b = $(".partnerInfo." + $(this).attr("rel"));
        if ($(b).is(":hidden")) {
            $(b).show();
            $(this).parents("tr").addClass("detailsOpened").removeClass("detailsClosed")
        } else {
            $(b).hide();
            $(this).parents("tr").addClass("detailsClosed").removeClass("detailsOpened")
        }
    })
}
function initExodus() {
    if ($("#exodus-indicator").length && exodus.ready == false) {
        exodus.ready = true;
        exodus.createIndicator();
        var d = function(a) {
            if ($("#exodus-timer").hasClass("end-soon")) {
                return
            }
            if (a < 86400) {
                $("#exodus-timer").addClass("end-soon")
            }
        };
        var c = parseInt($("#exodus-timer").text());
        d(c);
        new simpleCountdown(getElementByIdWithCache("exodus-timer"), c, function() {
            $("#exodus-timer").remove()
        }, function(a) {
            d(a)
        })
    }
}
var exodus = {ready: false, noServers: true, secondaryShown: false, createIndicator: function() {
        exodus.indicator = $("#exodus-indicator");
        if (exodus.indicator.length > 0) {
            exodus.indicator.bind("click", exodus.showDialog)
        }
    }, appendServerRow: function(h, l, m, o) {
        var p = (exodus.data["migration-host"] == l.host);
        var k = $('<li class="' + (exodus.odd++ % 2 ? "odd" : "even") + '" id="server-' + l.id + '"/>').bind("click", function() {
            if ($(this).hasClass("disabled")) {
                return
            } else {
                if ($(this).hasClass("row-selected")) {
                    exodus.confirmButton.removeClass("confirm");
                    $(this).removeClass("row-selected");
                    exodus.markedServer = null
                } else {
                    exodus.markedServer = l;
                    if (exodus.markedServer != exodus.selectedServer) {
                        exodus.confirmButton.addClass("confirm")
                    } else {
                        if (exodus.confirmButton.hasClass("confirm")) {
                            exodus.confirmButton.removeClass("confirm")
                        }
                    }
                    h.find("li").removeClass("row-selected");
                    $(this).addClass("row-selected")
                }
            }
        }).hide().append($('<span class="exodus-universe-treeview-column-checkbox"/>').append($("<span/>"))).append($('<span class="exodus-universe-treeview-column-name"/>').text(l.name)).append($('<span class="exodus-universe-treeview-column-startdate"/>').text(l.since)).append($('<span class="exodus-universe-treeview-column-free-spaces"/>')).append($('<span class="exodus-universe-treeview-column-features"/>').text(l.features));
        h.append(k);
        var n = $('<li id="wait-server-' + l.id + '"/>').append($('<img alt="' + exodus.data.translations.loading + '" src="' + exodus.data["load-image"] + '"/>'));
        h.append(n);
        if (p) {
            exodus.markedServer = l;
            exodus.selectedServer = l;
            k.addClass("server-selected");
            k.addClass("row-selected")
        }
        $.jsonp({url: "http://" + l.host + "/service/exodus.php?action=getServerInfo&data=" + l.data + "&callback=?", error: function() {
                exodus.handleError(l.id, exodus.data.translations["error-no-server"]);
                $("#server-" + l.id).show();
                $("#wait-server-" + l.id).remove();
                if (exodus.noServers && m) {
                    exodus.showSecondaryServers(h)
                }
            }, success: function(a) {
                if (!a.currentPlayerCount) {
                    exodus.handleError(l.id, exodus.data.translations["error-no-server"]);
                    $("#server-" + l.id).show();
                    $("#wait-server-" + l.id).remove();
                    return
                }
                $("#server-" + l.id + " .exodus-universe-treeview-column-free-spaces").text(a.freeSlots);
                if (a.alreadyMigrating) {
                    exodus.handleSuccess(l.id, exodus.data.translations["success-server-selected"]);
                    if (!o) {
                        exodus.noServers = false
                    }
                } else {
                    if (a.alreadyRegistered) {
                        exodus.handleError(l.id, exodus.data.translations["error-account"])
                    } else {
                        if (a.usernameInUse) {
                            exodus.handleError(l.id, exodus.data.translations["error-name-in-use"])
                        } else {
                            if (a.freeSlots <= 0) {
                                exodus.handleError(l.id, exodus.data.translations["error-no-free-slots"])
                            } else {
                                if (!o) {
                                    exodus.noServers = false
                                }
                            }
                        }
                    }
                }
                if (exodus.noServers && m) {
                    exodus.showSecondaryServers(h)
                }
                $("#server-" + l.id).show();
                $("#wait-server-" + l.id).remove()
            }})
    }, handleError: function(d, c) {
        $("#server-" + d).find("span.exodus-success").remove();
        $("#server-" + d).find("span.exodus-error").remove();
        $("#server-" + d).append('<span class="exodus-error"><strong>' + exodus.data.translations["error-impossible"] + "</strong><br/>" + c + "</span>");
        $("#server-" + d).addClass("disabled")
    }, handleSuccess: function(d, c) {
        $("#server-" + d).find("span.exodus-success").remove();
        $("#server-" + d).find("span.exodus-error").remove();
        $("#server-" + d).append('<span class="exodus-success"><strong>' + c + "</strong></span>")
    }, showSecondaryServers: function(d) {
        for (var c = 0; c < exodus.data["secondary-servers"].length; c++) {
            exodus.appendServerRow(d, exodus.data["secondary-servers"][c], false, true)
        }
        exodus.secondaryShown = true
    }, showDialog: function() {
        if (exodus.isOpen != null) {
            if (exodus.isOpen == false) {
                exodus.overlay.show();
                exodus.dialog.show();
                $("html, body").animate({scrollTop: 0}, 100)
            }
            return
        }
        exodus.data = {"load-image": exodus.indicator.attr("data-load-image"), "exodus-start": exodus.indicator.attr("data-exodus-start"), "exodus-end": exodus.indicator.attr("data-exodus-end"), "next-migration": exodus.indicator.attr("data-next-migration"), translations: $.parseJSON(exodus.indicator.attr("data-translations")), "migration-host": exodus.indicator.attr("data-migration-host"), "primary-servers": $.parseJSON(exodus.indicator.attr("data-primary-servers")), "secondary-servers": $.parseJSON(exodus.indicator.attr("data-secondary-servers")), "user-data": exodus.indicator.attr("data-user-data"), "user-validation": exodus.indicator.attr("data-user-validation"), "see-dialog": exodus.indicator.attr("data-user-see-dialog"), "ally-id": exodus.indicator.attr("data-user-ally-id"), "buddy-amount": exodus.indicator.attr("data-user-buddy-amount")};
        if (exodus.data["user-validation"] == 0) {
            errorBoxNotify(LocalizationStrings.error, exodus.data.translations["error-user-not-validated"], LocalizationStrings.ok);
            return
        }
        exodus.isOpen = true;
        exodus.selectedServer = null;
        exodus.markedServer = null;
        exodus.dialog = $('<div id="exodus-dialog"/>');
        exodus.overlay = $('<div id="exodus-overlay"/>');
        var h = $('<div id="exodus-header"/>');
        var f = $('<div id="exodus-close" class="ui-icon ui-icon-closethick"/>');
        var k = $('<div id="exodus-content"/>');
        var l = $('<div id="exodus-top-content"/>');
        var g = $('<ul id="exodus-tab-bar"/>');
        exodus.overlay.bind("click", exodus.closeDialog);
        f.bind("click", exodus.closeDialog);
        h.append($('<div id="exodus-header-content"/>').text(exodus.data.translations["exodus-dialog-title"]));
        l.text(exodus.data.translations["exodus-period"] + " " + exodus.data["exodus-start"] + "  " + exodus.data["exodus-end"]);
        if (exodus.data["next-migration"] != "") {
            l.append($('<span id="exodus-next-migration"/>').text(exodus.data["next-migration"]));
            l.append($("<span/>").text(": " + exodus.data.translations["next-migration-processing"]))
        }
        allyView = $('<li id="ally-show"/>').text(exodus.data.translations["tab-ally-mebers"]);
        allyView.bind("click", function() {
            exodus.showAllyMemberTab()
        });
        buddyView = $('<li id="buddy-show"/>').text(exodus.data.translations["tab-buddies"]);
        buddyView.bind("click", function() {
            exodus.showBuddyTab()
        });
        serverView = $('<li id="uni-select"/>').text(exodus.data.translations["tab-uni-selection"]);
        serverView.bind("click", function() {
            exodus.showServerSelection()
        });
        rulesView = $('<li id="rules-show"/>').text(exodus.data.translations["tab-rules"]);
        rulesView.bind("click", function() {
            exodus.showRulesTab()
        });
        g.append(serverView);
        if (exodus.data["ally-id"] > 0) {
            g.append(allyView)
        }
        if (exodus.data["buddy-amount"] > 0) {
            g.append(buddyView)
        }
        g.append(rulesView);
        k.append(l).append(g);
        exodus.dialog.append(h).append(k).append(f);
        $("body").append(exodus.overlay).append(exodus.dialog);
        if (exodus.data["see-dialog"] == "0") {
            exodus.showRulesTab();
            exodus.data["see-dialog"] = "1";
            exodus.indicator.attr("data-user-see-dialog", 1);
            $.jsonp({url: "/service/exodus.php?action=seeDialog&data=" + exodus.data["user-data"] + "&callback=?", error: function(a) {
                    errorBoxNotify(LocalizationStrings.error, "TEST: " + exodus.data["user-data"], LocalizationStrings.ok)
                }, success: ""})
        } else {
            exodus.showServerSelection()
        }
        $("html, body").animate({scrollTop: 0}, 100)
    }, closeDialog: function() {
        exodus.dialog.hide();
        exodus.overlay.hide();
        exodus.isOpen = false
    }, createButton: function(b) {
        return $('<div class="exodus-button"/>').append($('<div class="exodus-button-left"/>')).append($('<div class="exodus-button-label"/>').text(b)).append($('<div class="exodus-button-right"/>'))
    }, showServerSelection: function() {
        this.resetView("#uni-select");
        if (exodus.tabContent != null) {
            exodus.tabContent.show()
        } else {
            exodus.tabContent = $('<div id="exodus-tab-content"/>');
            exodus.universeTreeviewHeader = $('<div id="exodus-universe-treeview-header"/>').append($('<span class="exodus-universe-treeview-column-checkbox"/>').text("\u2714").css("visibility", "hidden")).append($('<span class="exodus-universe-treeview-column-name"/>').text(exodus.data.translations["uni-selection-name"])).append($('<span class="exodus-universe-treeview-column-startdate"/>').text(exodus.data.translations["uni-selection-start"])).append($('<span class="exodus-universe-treeview-column-free-spaces"/>').text(exodus.data.translations["uni-selection-free-spaces"])).append($('<span class="exodus-universe-treeview-column-features"/>').text(exodus.data.translations["uni-selection-specifics"]));
            var e = $('<ul id="exodus-universe-treeview"/>');
            exodus.confirmButton = exodus.createButton(exodus.data.translations["uni-selection-confirm"]);
            exodus.revertButton = exodus.createButton(exodus.data.translations["uni-selection-revert"]);
            exodus.confirmButton.bind("click", function() {
                if (!$(this).hasClass("confirm") || exodus.markedServer == null) {
                    return
                }
                var a = exodus.markedServer;
                $.jsonp({url: "http://" + a.host + "/service/exodus.php?action=requestMigration&data=" + a.data + "&callback=?", error: function() {
                        exodus.handleError(a.id, exodus.data.translations["error-no-server"])
                    }, success: function(b) {
                        if (b.errorMessage) {
                            exodus.handleError(a.id, exodus.data.translations["error-no-server"])
                        } else {
                            if (exodus.selectedServer != null) {
                                e.find("li").removeClass("row-selected");
                                e.find("li").removeClass("server-selected");
                                $("#server-" + exodus.selectedServer.id).find("span.exodus-success").remove();
                                $("#server-" + exodus.selectedServer.id).find("span.exodus-error").remove()
                            }
                            exodus.indicator.attr("data-migration-host", a.host);
                            exodus.data["migration-host"] = a.host;
                            $("#exodus-indicator-waiting").attr("id", "exodus-indicator-acknowledged");
                            exodus.handleSuccess(a.id, exodus.data.translations["success-server-selected"]);
                            exodus.revertButton.addClass("cancel");
                            $("#server-" + a.id).addClass("server-selected");
                            exodus.selectedServer = a;
                            var c = $("#server-" + a.id).find("span.exodus-universe-treeview-column-free-players");
                            c.text(parseInt(c.text()) - 1);
                            exodus.confirmButton.removeClass("confirm")
                        }
                    }})
            });
            exodus.revertButton.bind("click", function() {
                if (!$(this).hasClass("cancel") || exodus.selectedServer == null) {
                    return
                }
                var a = exodus.selectedServer;
                $.jsonp({url: "http://" + a.host + "/service/exodus.php?action=cancelMigration&data=" + a.data + "&callback=?", error: function() {
                        exodus.closeDialog()
                    }, success: function(b) {
                        if (b.errorMessage) {
                            exodus.closeDialog()
                        } else {
                            exodus.indicator.attr("data-migration-host", "");
                            $("#exodus-indicator-acknowledged").attr("id", "exodus-indicator-waiting");
                            e.find("li").removeClass("row-selected");
                            e.find("li").removeClass("server-selected");
                            $("#server-" + a.id).find("span.exodus-success").remove();
                            $("#server-" + a.id).find("span.exodus-error").remove();
                            exodus.confirmButton.removeClass("confirm");
                            exodus.revertButton.removeClass("cancel");
                            var c = $("#server-" + a.id).find("span.exodus-universe-treeview-column-free-players");
                            c.text(parseInt(c.text()) + 1);
                            exodus.markedServer = null;
                            exodus.selectedServer = null
                        }
                    }})
            });
            if (exodus.data["migration-host"] != "") {
                exodus.revertButton.addClass("cancel")
            }
            exodus.tabContent.append(exodus.universeTreeviewHeader).append(e).append(exodus.confirmButton).append(exodus.revertButton);
            exodus.odd = 0;
            for (var d = 0; d < exodus.data["primary-servers"].length; d++) {
                var f = (exodus.data["primary-servers"].length == d + 1);
                exodus.appendServerRow(e, exodus.data["primary-servers"][d], f, false)
            }
            if (!exodus.secondaryShown) {
                for (var d = 0; d < exodus.data["secondary-servers"].length; d++) {
                    if (exodus.data["migration-host"] == exodus.data["secondary-servers"][d]["host"]) {
                        exodus.appendServerRow(e, exodus.data["secondary-servers"][d], false, true)
                    }
                }
                exodus.secondaryShown = true
            }
            $("#exodus-content").append(exodus.tabContent)
        }
    }, showAllyMemberTab: function() {
        this.resetView("#ally-show");
        if (exodus.allyMemberContent != null) {
            exodus.allyMemberContent.show()
        } else {
            exodus.allyMemberContent = $('<div id="exodus-ally-content"/>');
            $.jsonp({url: "/service/exodus.php?action=getAllyMemberSelection&data=" + exodus.data["user-data"] + "&callback=?", error: function() {
                }, success: function(g) {
                    if (g.errorMessage) {
                        exodus.closeDialog()
                    } else {
                        var h = $('<div id="exodus-universe-treeview-header"/>').append($('<span class="exodus-universe-treeview-column-member-name"/>').text(exodus.data.translations["ally-members-name"])).append($('<span class="exodus-universe-treeview-column-server-name"/>').text(exodus.data.translations["ally-members-server"]));
                        var l = $('<div id="exodus-universe-treeview"/>');
                        for (var f = 0; f < g.length; f++) {
                            var k = $('<li id="server-' + f + '" class="' + (f % 2 ? "odd" : "even") + '"/>').append($('<span class="exodus-universe-treeview-column-member-name"/>').text(g[f].db_character));
                            if (g[f].server_name != null) {
                                k.append($('<span class="exodus-universe-treeview-column-server-name"/>').text(g[f].server_name))
                            } else {
                                k.append($('<span class="exodus-universe-treeview-column-server-name"/>').text(exodus.data.translations["ally-member-no-selction"]))
                            }
                            l.append(k)
                        }
                        exodus.allyMemberContent.append(h);
                        exodus.allyMemberContent.append(l);
                        $("#exodus-content").append(exodus.allyMemberContent)
                    }
                }})
        }
    }, showBuddyTab: function() {
        this.resetView("#buddy-show");
        if (exodus.buddyContent != null) {
            exodus.buddyContent.show()
        } else {
            exodus.buddyContent = $('<div id="exodus-buddy-content"/>');
            $.jsonp({url: "/service/exodus.php?action=getBuddySelection&data=" + exodus.data["user-data"] + "&callback=?", error: function() {
                }, success: function(d) {
                    if (d.errorMessage) {
                        exodus.closeDialog()
                    } else {
                        header = $('<div id="exodus-universe-treeview-header"/>').append($('<span class="exodus-universe-treeview-column-member-name"/>').text(exodus.data.translations["ally-members-name"])).append($('<span class="exodus-universe-treeview-column-server-name"/>').text(exodus.data.translations["ally-members-server"]));
                        var c = $('<div id="exodus-universe-treeview"/>');
                        for (i = 0; i < d.length; i++) {
                            row = $('<li id="server-' + i + '" class="' + (i % 2 ? "odd" : "even") + '"/>').append($('<span class="exodus-universe-treeview-column-member-name"/>').text(d[i].db_character));
                            if (d[i].server_name != null) {
                                row.append($('<span class="exodus-universe-treeview-column-server-name"/>').text(d[i].server_name))
                            } else {
                                row.append($('<span class="exodus-universe-treeview-column-server-name"/>').text(exodus.data.translations["ally-member-no-selction"]))
                            }
                            c.append(row)
                        }
                        exodus.buddyContent.append(header);
                        exodus.buddyContent.append(c);
                        $("#exodus-content").append(exodus.buddyContent)
                    }
                }})
        }
    }, showRulesTab: function() {
        this.resetView("#rules-show");
        rules = new Array("uni-fusion", "pre-exodus", "exodus-phase", "post-exodus", "exodus-uni", "target-uni");
        if (exodus.rulesContent != null) {
            exodus.rulesContent.show()
        } else {
            exodus.rulesContent = $('<div id="exodus-rules-content"/>');
            rule = $('<div class="exodus_rule"/>');
            for (var b = 0; b < rules.length; b++) {
                rule.append($('<h2 class="exodus-rule-title" />').text(exodus.data.translations["title-" + rules[b]]));
                rule.append($('<p class="exodus-rule-description" />').text(exodus.data.translations["description-" + rules[b]]));
                exodus.rulesContent.append(rule)
            }
            $("#exodus-content").append(exodus.rulesContent)
        }
    }, resetView: function(b) {
        if ($(b).hasClass("selected")) {
            return
        }
        if ($("#uni-select").hasClass("selected")) {
            exodus.tabContent.hide()
        } else {
            if ($("#buddy-show").hasClass("selected")) {
                exodus.buddyContent.hide()
            } else {
                if ($("#ally-show").hasClass("selected")) {
                    exodus.allyMemberContent.hide()
                } else {
                    if ($("#rules-show").hasClass("selected")) {
                        exodus.rulesContent.hide()
                    }
                }
            }
        }
        $("#uni-select").removeClass("selected");
        $("#ally-show").removeClass("selected");
        $("#buddy-show").removeClass("selected");
        $("#rules-show").removeClass("selected");
        $(b).addClass("selected")
    }};
function initFleet1() {
    checkShips("shipsChosen");
    initToggleHeader("fleet1");
    $(".combatunits").unbind("change").bind("change", function() {
        setTemplate(shipTemplates[$(this).val()], maxShips);
        checkShips("shipsChosen")
    });
    focusOnTabChange("#continue", true)
}
function setTemplate(d, e) {
    for (var f in d) {
        if (!$("#ship_" + f).attr("disabled")) {
            $("#ship_" + f).val(d[f])
        }
        if (typeof e[f] == "undefined") {
            e[f] = 0
        }
        checkIntInput("#ship_" + f, 0, e[f])
    }
}
function resetForm() {
    $(".fleetValues").val("")
}
function checkShips(l) {
    if (document.forms[l] != undefined) {
        var m = 0;
        var h = document.forms[l].length;
        for (var n = 0; n < h; n++) {
            var g = document.forms[l].elements[n].id;
            if (typeof g != "undefined") {
                expl = g.split("_");
                if (expl[0] == "ship") {
                    value = document.forms[l].elements[n].value;
                    if (!$("#" + g).attr("disabled") && value != "") {
                        m = m + value
                    }
                }
            }
        }
        var k = "";
        if (m == 0 || !sendingEnabled) {
            validated = false;
            $("#continue").attr("class", "off");
            k = loca.fleetNoSelection;
            if (!sendingEnabled) {
                k = loca.fleetNoFreeSlots
            }
        } else {
            validated = true;
            $("#continue").attr("class", "on")
        }
        $("#allornone .info").html(k)
    }
}
function initStandardFleet() {
    $(".list tr:even").addClass("alt");
    $(".standardFleetSubmit").unbind("click").bind("click", function() {
        $(this).parents("form").submit()
    });
    $(".standardFleetReset").unbind("click").bind("click", function() {
        $(this).parents("form")[0].reset()
    });
    $(".changeFleet").unbind("click").bind("click", function() {
        $(".combatunits").val($(this).attr("rel")).trigger("change");
        $(this).parents(".ui-dialog").find(".ui-dialog-titlebar-close").click()
    })
}
function setShipsFleet(e, h, f) {
    $("#template_id").val(f);
    $("#template_name").val(h);
    for (var g in e) {
        $("#ship" + g).val(e[g])
    }
}
function toggleMaxShips(h, g, f) {
    var e = $(h).find("#ship_" + g);
    if (parseInt(e.val()) !== f) {
        e.val(f)
    } else {
        e.val("")
    }
    $("#continue").focus()
}
function initFleet2() {
    updateVariables();
    timerHandler.appendCallback(updateTimesFleet2);
    if (!isMobile) {
        $("#galaxy").focus()
    }
    initToggleHeader("fleet2");
    initBackButton();
    focusOnTabChange("#continue", true);
    detachEventHandlers();
    attachEventHandlers();
    if ($(".combatunits>option:selected").length) {
        $(".combatunits>option:selected").change()
    }
}
function attachEventHandlers() {
    var b = $("#speed");
    $(document).on("mouseover focus", "#speedLinks>a", function(a) {
        b.val($(this).attr("data-value"));
        updateVariables()
    }).on("mouseleave blur", "#speedLinks>a", function(a) {
        resetSpeedToSelected()
    }).on("mouseup touchstart", "#speedLinks>a", function(a) {
        $("#speedLinks>a.selected").removeClass("selected");
        $(this).addClass("selected").focus();
        b.val($(this).attr("data-value"));
        updateVariables()
    }).on("keyup", "#speedLinks>a", function(a) {
        if (a.keyCode == KeyEvent.DOM_VK_LEFT) {
            $(this).prev().focus()
        } else {
            if (a.keyCode == KeyEvent.DOM_VK_RIGHT) {
                $(this).next().focus()
            } else {
                if (a.keyCode == KeyEvent.DOM_VK_RETURN) {
                    a.stopPropagation();
                    a.preventDefault();
                    if ($(this).hasClass("selected")) {
                        trySubmit()
                    } else {
                        $(this).trigger("mouseup")
                    }
                }
            }
        }
    }).on("keypress", "#speedLinks>a", function(a) {
        if (a.keyCode == KeyEvent.DOM_VK_RETURN) {
            a.stopPropagation();
            a.preventDefault();
            if ($(this).hasClass("selected")) {
                trySubmit()
            } else {
                $(this).click()
            }
        }
    }).on("keypress", "#contentWrapper #inhalt", submitOnEnter)
}
function detachEventHandlers() {
    $(document).off("mouseover focus mouseleave blur mouseup touchstart keyup keypress", "#speedLinks>a").off("keypress", "#contentWrapper #inhalt")
}
function resetSpeedToSelected() {
    if (currentPage == "fleet2") {
        $("#speed").val($("#speedLinks>a.selected").attr("data-value"));
        updateVariables()
    }
}
function initBackButton() {
    $("#back").unbind("click").bind("click", function() {
        resetSpeedToSelected();
        $(this).parents("form").attr("action", returnLink).submit()
    })
}
function prepareVariables() {
    checkCoords();
    speed = $("#speed").val()
}
function setTType(b) {
    b = b == null ? $("#type").val() : b;
    if (b == 1) {
        $("#pbutton").attr("class", "planet_selected")
    } else {
        $("#pbutton").attr("class", "planet")
    }
    if (b == 2) {
        $("#dbutton").attr("class", "debris_selected")
    } else {
        $("#dbutton").attr("class", "debris")
    }
    if (b == 3) {
        $("#mbutton").attr("class", "moon_selected")
    } else {
        $("#mbutton").attr("class", "moon")
    }
    if (b == 1) {
        $("#targetPlanetName").html(locaAllPlanet)
    } else {
        if (b == 2) {
            $("#targetPlanetName").html(locaAllDebris)
        } else {
            if (b == 3) {
                $("#targetPlanetName").html(locaAllMoon)
            }
        }
    }
    $("#type").val(b)
}
function shortLinkChange(d) {
    var e;
    if (d != null) {
        e = $("#aksbox").val()
    } else {
        e = $("#slbox").val()
    }
    if (e != "-") {
        var f = e.split("#");
        $("#galaxy").val(f[0]);
        $("#system").val(f[1]);
        $("#position").val(f[2]);
        setTType(f[3]);
        $("#targetPlanetName").html(f[4]);
        targetGalaxy = f[0];
        targetSystem = f[1];
        targetPosition = f[2]
    }
    focusContinueButton()
}
function focusContinueButton() {
    setTimeout(function() {
        $("#continue").focus()
    }, 100)
}
function handleUnion() {
    if ($("#aksbox").val() == "-") {
        document.details.union.value = 0;
        document.details.mission.value = mission
    } else {
        parts = $("#aksbox").val().split("#");
        document.details.union.value = parts[5];
        document.details.mission.value = missionUnionattack
    }
}
function hideStatusBar() {
    if ($(".fleetStatus") && (targetGalaxy != defaultTargetGalaxy || targetSystem != defaultTargetSystem || targetPosition != defaultTargetPosition)) {
        $(".fleetStatus").hide();
        $("input[name='mission']").value = ""
    }
}
function checkCoords() {
    checkIntInput("#galaxy", 1, maxGalaxy);
    checkIntInput("#system", 1, maxSystem);
    checkIntInput("#position", 1, maxPosition);
    targetGalaxy = $("#galaxy").val();
    targetSystem = $("#system").val();
    targetPosition = $("#position").val();
    if (targetPosition == 16) {
        setTType(1);
        modifyPlanetName();
        checkOk()
    }
}
function checkTarget() {
    var d = checkUrl;
    var c = {};
    c.galaxy = $("#galaxy").val();
    c.system = $("#system").val();
    c.planet = $("#position").val();
    c.type = $("#type").val();
    if ($("form[name='details'] input[name='am" + colonizationID + "']").length > 0 && $("form[name='details'] input[name='am" + colonizationID + "']").val() > 0) {
        c.cs = 1
    }
    if ($("form[name='details'] input[name='am" + recyclerID + "']").length > 0 && $("form[name='details'] input[name='am" + recyclerID + "']").val() > 0) {
        c.recycler = 1
    }
    $.post(d, c, displayError)
}
function updateTimesFleet2() {
    var d = getFormatedDate(serverTime.getTime() + 1000 * duration, "[d].[m].[y] [G]:[i]:[s]");
    var c = getFormatedDate(serverTime.getTime() + 1000 * 2 * duration, "[d].[m].[y] [G]:[i]:[s]");
    if (document.getElementById) {
        $("#arrivalTime").html(d);
        $("#returnTime").html(c)
    }
}
function initFleet3() {
    timerHandler.appendCallback(updateTimesFleet3);
    if (!isMobile) {
        $("#metal").focus()
    }
    initToggleHeader("fleet3");
    initBackButton();
    if ($("#missions .on .selected").length) {
        $("#missions .on .selected")[0].onclick()
    }
    $("#contentWrapper #inhalt").unbind("keydown.continue").bind("keydown.continue", function(b) {
        if (b.keyCode == KeyEvent.DOM_VK_RETURN) {
            trySubmit()
        }
    })
}
function updateHoldingOrExpTime() {
    if ($('form input[name="mission"]').val() == missionHold) {
        $('form input[name="holdingOrExpTime"]').val($('form input[name="holdingtime"]').val());
        holdingTime = $('form [name="holdingtime"]').val()
    } else {
        if ($('form input[name="mission"]').val() == missionExpedition) {
            $('form input[name="holdingOrExpTime"]').val($('form input[name="expeditiontime"]').val());
            holdingTime = $('form [name="expeditiontime"]').val()
        } else {
            $('form input[name="holdingOrExpTime"]').val(0);
            holdingTime = 0
        }
    }
}
function checkRessourceByType(h) {
    var g = getValue($("#" + h).val());
    var f = 0;
    var k = 0;
    if (h == "metal") {
        f = metalOnPlanet;
        k = cargoSpace - crystal - deuterium
    } else {
        if (h == "crystal") {
            f = crystalOnPlanet;
            k = cargoSpace - metal - deuterium
        } else {
            if (h == "deuterium") {
                f = deuteriumOnPlanet;
                k = cargoSpace - metal - crystal
            } else {
                f = metalOnPlanet;
                k = cargoSpace - crystal - deuterium
            }
        }
    }
    if (g != "") {
        var l = parseInt(g);
        l = isNaN(l) ? 0 : l;
        l = Math.abs(l);
        l = Math.min(l, f);
        if (l > k) {
            l = k
        }
        updateRessVarByType(h, l);
        formatNumber($("#" + h), l)
    } else {
        updateRessVarByType(h, 0)
    }
}
function updateRessVarByType(d, c) {
    if (d == "metal") {
        metal = c
    } else {
        if (d == "crystal") {
            crystal = c
        } else {
            if (d == "deuterium") {
                deuterium = c
            } else {
                metal = c
            }
        }
    }
}
function resetByRessourceType(b) {
    if (b == "metal") {
        metal = 0
    }
    if (b == "crystal") {
        crystal = 0
    }
    if (b == "deuterium") {
        deuterium = 0
    }
    $("#" + b).val(0);
    updateVariables()
}
function maxMetal() {
    var b;
    b = cargoSpace - crystal - deuterium;
    b = Math.max(b, 0);
    b = Math.min(b, metalOnPlanet);
    metal = Math.max(metal, b);
    formatNumber($("#metal"), metal)
}
function maxCrystal() {
    var b;
    b = cargoSpace - metal - deuterium;
    b = Math.max(b, 0);
    b = Math.min(b, crystalOnPlanet);
    crystal = Math.max(crystal, b);
    formatNumber($("#crystal"), crystal)
}
function maxDeuterium() {
    var b;
    b = cargoSpace - metal - crystal;
    b = Math.max(b, 0);
    b = Math.min(b, deuteriumOnPlanet - consumption);
    b = Math.max(b, 0);
    deuterium = Math.max(deuterium, b);
    formatNumber($("#deuterium"), deuterium)
}
function maxAll() {
    metal = 0;
    crystal = 0;
    deuterium = 0;
    maxMetal();
    maxCrystal();
    maxDeuterium()
}
function updateTimesFleet3() {
    durationAKS = durationAKS - 1;
    checkTimes()
}
function checkTimes() {
    var f = duration;
    if ($("#missionButton2").hasClass("selected")) {
        f = Math.max(durationAKS, duration)
    }
    var e = serverTime.getTime() + 1000 * f;
    var d = e + 1000 * duration + holdingTime * 3600 * 1000;
    if (durationAKS >= duration) {
        $("#durationAKS").html(getFormatedTime(durationAKS))
    }
    $("#arrivalTime").text(getFormatedDate(e, "[d].[m].[y] [G]:[i]:[s]"));
    $("#returnTime").text(getFormatedDate(d, "[d].[m].[y] [G]:[i]:[s]"))
}
function setSelected(b) {
    $("#missions>li>a.selected").removeClass("selected");
    $("#missionButton" + b).addClass("selected");
    isAggressiveMission = ((b == 1) || (b == 2) || (b == 6) || (b == 9));
    $("#fightAfterRetreat,#aks,#holdtimeline,#expeditiontimeline").hide();
    switch (b) {
        case 1:
            $("#fightAfterRetreat").show();
            break;
        case 2:
            $("#aks").show();
            break;
        case 5:
            $("#holdtimeline").show();
            break;
        case 15:
            $("#expeditiontimeline").show();
            break
    }
    checkTimes()
}
function updateMission(g, e, f, h) {
    $(".missionName").text(g);
    $(".mission_description").text(e);
    $("#missionNameWrapper").removeClass("off");
    $(".briefing_overlay").hide();
    if (f == "off") {
        $("#missionNameWrapper").addClass("off");
        $(".briefing_overlay").show()
    }
    $('form input[name="mission"]').val(h);
    updateHoldingOrExpTime();
    updateVariables()
}
var validated = false;
var sendingEnabled = true;
var shipIDs = [];
var speeds = [];
var completeConsumptions = [];
var storageCapacity = null;
var probeStorageCapacity = null;
var probeCompleteConsumption = null;
var maxSpeed = 0;
var speedFactor = 1;
var maxGalaxy = null;
var maxSystem = null;
var maxPosition = null;
var currentGalaxy = 1;
var currentSystem = 1;
var currentPosition = 1;
var currentPlanetType = 1;
var targetGalaxy = 1;
var targetSystem = 1;
var targetPosition = 1;
var defaultTargetGalaxy = 1;
var defaultTargetSystem = 1;
var defaultTargetPosition = 1;
var speed = 0;
var holdingTime = 0;
var metal = 0;
var crystal = 0;
var deuterium = 0;
var currentDeuterium = 0;
var returnLink = "";
var checkUrl = "";
var colonizationID = 0;
var missionNone = null;
var missionUnionattack = null;
var distance = 5;
var duration = 0;
var consumption = 0;
var cargoSpace = 0;
var cargoLeft = 0;
var locaAllPlanet = "";
var locaAllMoon = "";
var locaAllDebris = "";
var storageCapacity = 0;
var probeStorageCapacity = 0;
var probeCompleteConsumption = 0;
var metal = 0;
var crystal = 0;
var deuterium = 0;
var distance = 5;
var duration = 0;
var consumption = 0;
var cargoSpace = 0;
var metalOnPlanet = 0;
var crystalOnPlanet = 0;
var deuteriumOnPlanet = 0;
var returnLink = "";
var missionHold = null;
var missionExpedition = null;
var durationAKS = 0;
var isAggressiveMission = false;
function getDistance() {
    var d;
    var e;
    var f;
    d = Math.abs(currentGalaxy - targetGalaxy);
    e = Math.abs(currentSystem - targetSystem);
    f = Math.abs(currentPosition - targetPosition);
    if (d != 0) {
        return d * 20000
    } else {
        if (e != 0) {
            return e * 5 * 19 + 2700
        } else {
            if (f != 0) {
                return f * 5 + 1000
            } else {
                return 5
            }
        }
    }
}
function getDuration() {
    return Math.round(((35000 / speed * Math.sqrt(distance * 10 / maxSpeed) + 10) / speedFactor))
}
function getConsumption(h) {
    var k = 0;
    var f = 0;
    var g = 0;
    var l = Math.max(1, duration * speedFactor - 10);
    for (i = 0, maxI = shipIDs.length; i < maxI; i++) {
        if (h == 0 || h == null || shipIDs[i] == h) {
            g++;
            shipSpeedValue = 35000 / l * Math.sqrt(distance * 10 / speeds[i]);
            f += completeConsumptions[i] * holdingTime;
            k += completeConsumptions[i] * distance / 35000 * ((shipSpeedValue / 10) + 1) * ((shipSpeedValue / 10) + 1)
        }
    }
    if (g > 0) {
        k = Math.round(k) + 1;
        if (holdingTime > 0) {
            k += Math.max(Math.floor(f / 10), 1)
        }
        return k
    } else {
        return 0
    }
}
function getFreeStorage() {
    var b = storageCapacity;
    b -= consumption;
    b -= (probeStorageCapacity - getConsumption(210));
    return b
}
function updateVariables() {
    if (currentPage == "fleet2") {
        prepareVariables()
    }
    distance = getDistance();
    duration = getDuration();
    consumption = getConsumption();
    cargoSpace = getFreeStorage();
    cargoLeft = cargoSpace - metal - crystal - deuterium;
    refreshFormData()
}
function refreshFormData() {
    $("#duration").html(formatTime(duration) + " h");
    $("#distanceValue").html(tsdpkt(distance));
    styleClass = cargoSpace < 0 ? "overmark" : "undermark";
    $("#storage").html('<span class="' + styleClass + '">' + tsdpkt(cargoSpace) + "</span>");
    styleClass = consumption > currentDeuterium ? "overmark" : "undermark";
    $("#consumption").html('<span class="' + styleClass + '">' + tsdpkt(consumption) + "</span>");
    if (("" + consumption).length > 6) {
        $("#consumption").parent().find(".nameOfConsumedResource").hide()
    } else {
        $("#consumption").parent().find(".nameOfConsumedResource").show()
    }
    styleClass = cargoLeft < 0 ? "overmark" : "undermark";
    $("#remainingresources").html('<span class="' + styleClass + '">' + tsdpkt(cargoLeft) + "</style>");
    $(".bar_container").data("currentAmount", cargoSpace - cargoLeft);
    $(".bar_container").data("capacity", cargoSpace);
    refreshBars("bar_container", "filllevel_bar");
    setTType();
    if (currentPage == "fleet2") {
        modifyPlanetName()
    }
    checkOk()
}
function modifyPlanetName() {
    newName = getOwnName();
    if (newName != "") {
        $("#targetPlanetName").html(newName);
        $("#statusTarget").html(newName)
    }
    hideStatusBar()
}
function checkOk() {
    switch (currentPage) {
        case"fleet2":
            if ((currentGalaxy == $("#galaxy").val() && currentSystem == $("#system").val() && currentPosition == $("#position").val() && currentPlanetType == $("#type").val()) || $("#galaxy").val() == "" || $("#system").val() == "" || $("#position").val() == "" || consumption > currentDeuterium || cargoSpace < 0) {
                validated = false;
                $("#continue").attr("class", "off")
            } else {
                validated = true;
                $("#continue").attr("class", "on")
            }
            break;
        case"fleet3":
            if (isMissionValid() && cargoLeft >= 0) {
                validated = true;
                $("#start").attr("class", "on")
            } else {
                validated = false;
                $("#start").attr("class", "off")
            }
            break
        }
}
function submitOnKey(b) {
    if (b == 37) {
        system = system > 1 ? parseInt(system) - 1 : maxSystems;
        canLoadContent(galaxy, system)
    } else {
        if (b == 39) {
            system = system < maxSystems ? parseInt(system) + 1 : 1;
            canLoadContent(galaxy, system)
        } else {
            if (b == 40) {
                galaxy = galaxy > 1 ? parseInt(galaxy) - 1 : maxGalaxies;
                canLoadContent(galaxy, system)
            } else {
                if (b == 38) {
                    galaxy = galaxy < maxGalaxies ? parseInt(galaxy) + 1 : 1;
                    canLoadContent(galaxy, system)
                }
            }
        }
    }
}
function keyevent(d) {
    var c;
    if ($(":focus").closest(".ui-dialog").length) {
        return true
    }
    if (window.event) {
        c = window.event.keyCode
    } else {
        if (d) {
            c = d.which
        } else {
            return true
        }
    }
    submitOnKey(c)
}
function launchMissiles(b) {
    var b = $.parseJSON(b);
    if (b.status) {
        $("#missileValue").html(b.rockets)
    }
    errorBoxAsArray(b.errorbox);
    $("#rocketattack").parent().dialog("close")
}
function errorBoxSubmitYes() {
    location.href = officersLink
}
function movePlanet(d, e) {
    function f() {
        $.post(d, function(a) {
            if ((a == "") || (a == null)) {
                fadeBox(galaxyLoca.reservationSuccess, false);
                setTimeout('reload_page("' + e + '")', 3000)
            } else {
                fadeBox(a, true)
            }
        })
    }
    errorBoxDecision(galaxyLoca.questionTitle, galaxyLoca.question, LocalizationStrings.yes, LocalizationStrings.no, f)
}
function addToTable(n, q, m) {
    var l = n;
    if (m != null) {
        l += " (" + tsdpkt(m) + ") " + LocalizationStrings.ok
    }
    if (isMobile) {
        fadeBox(l, q != "success");
        return
    }
    var r = new Date();
    var s = "fleetstatus" + r.getTime();
    var o = 'id="' + s + '"';
    var p = 'class="' + q + '"';
    var u = "<div " + o + " " + p + ">" + l + "</div>";
    $(u).prependTo("#fleetstatusrow");
    fadingDivs.push(s);
    if (fadingDivs.length > 1) {
        oldId = fadingDivs.shift();
        $("#" + oldId).fadeOut(2000)
    }
}
function setShips(d, e) {
    var f = document.getElementById(d);
    f.innerHTML = e
}
function doLoad(b) {
    var b = $.parseJSON(b);
    if (b.status) {
        $("#galaxy_input").val(b.galaxy);
        $("#system_input").val(b.system);
        removeTooltip($("#galaxytable tbody *"));
        $.each(buildListCountdowns, function() {
            timerHandler.removeCallback(this.timer)
        });
        loadContent(b.galaxy, b.system)
    } else {
        $("#galaxyLoading").hide();
        errorBoxDeuterium()
    }
}
function displayContentGalaxy(c) {
    var d = getTooltipSelector("#inhalt");
    removeTooltip(d);
    $("#galaxyContent").html(c);
    tabletInitGalaxyDetails();
    eventBDayInitGalaxy();
    $("#galaxyLoading").hide();
    if (preserveSystemOnPlanetChange) {
        $(".planetlink, .moonlink").querystring({galaxy: galaxy, system: system})
    }
}
function submitForm() {
    galaxy = $("#galaxy_input").val();
    system = $("#system_input").val();
    canLoadContent(galaxy, system)
}
function canLoadContent(c, d) {
    $("#galaxyLoading").show();
    $.post(canLoadContentLink, {galaxy: c, system: d}, doLoad)
}
function loadContent(c, d) {
    $.post(contentLink, {galaxy: c, system: d}, displayContentGalaxy);
    getAjaxResourcebox()
}
function errorBoxDeuterium() {
    fadeBox(galaxyLoca.deuteriumNeeded, true)
}
function doScan(d, c) {
    sendShips(constants.espionage, galaxy, system, d, c, spionageAmount)
}
function initPhalanx() {
    getAjaxResourcebox();
    $(".eventFleet:odd").addClass("odd");
    $(".partnerInfo:even").addClass("part-even");
    $(".toggleInfos").click(function() {
        id = $(this).attr("rel");
        if ($(this).attr("class") == "toggleInfos infosOpen") {
            $(this).removeClass("infosOpen");
            $(this).addClass("infosClosed");
            $(this).children().attr("src", "http://gf2.geo.gfsrv.net/cdn10/de1e5f629d9e47d283488eee0c0ede.gif");
            $("." + id).attr("style", "display: none;")
        } else {
            $(this).addClass("infosOpen");
            $(this).removeClass("infosClosed");
            $(this).children().attr("src", "http://gf3.geo.gfsrv.net/cdnb6/577565fadab7780b0997a76d0dca9b.gif");
            $("." + id).attr("style", "display: block;")
        }
    });
    var b = $(".overlayDiv.phalanx").siblings(".ui-dialog-titlebar");
    if (b.find(".refreshPhalanxLink").length) {
        $("#phalanxWrap .refreshPhalanxLink").remove()
    } else {
        b.find(".ui-dialog-title").append($("#phalanxWrap .refreshPhalanxLink"))
    }
}
function initMissleAttackLayer() {
    $("#rocketattack").parent().dialog("option", "title", $("#rocketattack").attr("data-title"));
    $("#rocketattack input#anz").keyup(function() {
        checkIntInput($(this), 1, $(this).data("max"))
    }).change(function() {
        checkIntInput($(this), 1, $(this).data("max"))
    }).focus();
    $("#rocketattack #number").bind("click", function() {
        var a = $("#rocketattack input#anz");
        if (parseInt(a.val()) != a.data("max")) {
            a.val(a.data("max"))
        } else {
            a.val("1")
        }
    });
    $("#rocketattack #priority a").bind("click", function() {
        var d = $(this);
        var a = $("#primaryTarget");
        $("#rocketattack #priority a").not(d).removeClass("active");
        if (d.hasClass("active")) {
            d.removeClass("active");
            a.val("");
            $("#noPriorityInfo").show()
        } else {
            d.addClass("active");
            a.val(d.attr("ref"));
            $("#noPriorityInfo").hide()
        }
    });
    $("form#rocketForm").submit(function() {
        ajaxFormSubmit("rocketForm", $(this).attr("action"), launchMissiles);
        return false
    });
    function b() {
        var a = $("#rocketattack #arrivalTime #timer");
        a.html(getFormatedDate(serverTime.getTime() + 1000 * a.data("duration"), "[d].[m].[y] [G]:[i]:[s]"))
    }
    timerHandler.appendCallback(b);
    b()
}
function displayMiniFleetMessage(d) {
    var f = d.message;
    if (typeof (d.coordinates) != "undefined") {
        f += " [" + d.coordinates.galaxy + ":" + d.coordinates.system + ":" + d.coordinates.position + "]"
    }
    if (d.success) {
        var e = "#ownFleetStatus_" + d.coordinates.position + "_" + d.planetType;
        switch (d.type) {
            case 1:
                $(e).removeClass("fleetNeutral");
                $(e).attr("title", galaxyLoca.fleetAttacking).addClass("fleetHostile").addClass("tooltip");
                break;
            case 2:
                $(e).attr("title", galaxyLoca.fleetUnderway).addClass("fleetNeutral").addClass("tooltip");
                break
        }
        addToTable(f, "success", d.shipsSent);
        $("#slotUsed").html(tsdpkt(d.slots));
        setShips("probeValue", tsdpkt(d.probes));
        setShips("recyclerValue", tsdpkt(d.recyclers));
        setShips("missileValue", tsdpkt(d.missiles))
    } else {
        addToTable(f, "error")
    }
    shipsendingDone = 1
}
var DOM_GET_ELEMENT_BY_ID_CACHE = [];
function getElementByIdWithCache(b) {
    if (!DOM_GET_ELEMENT_BY_ID_CACHE[b]) {
        DOM_GET_ELEMENT_BY_ID_CACHE[b] = document.getElementById(b)
    }
    return DOM_GET_ELEMENT_BY_ID_CACHE[b]
}
function number_format(v, x, o, w) {
    o = o || LocalizationStrings.decimalPoint;
    w = w || LocalizationStrings.thousandSeperator;
    var q = "";
    var p = v.toString();
    var r = p.indexOf("e");
    if (r > -1) {
        q = p.substring(r);
        v = parseFloat(p.substring(0, r))
    }
    if (x != null) {
        var n = Math.pow(10, x);
        v = Math.round(v * n) / n
    }
    var y = v < 0 ? "-" : "";
    var s = (v > 0 ? Math.floor(v) : Math.abs(Math.ceil(v))).toString();
    var u = v.toString().substring(s.length + y.length);
    o = o != null ? o : ".";
    u = x != null && x > 0 || u.length > 1 ? (o + u.substring(1)) : "";
    if (x != null && x > 0) {
        for (i = u.length - 1, z = x; i < z; ++i) {
            u += "0"
        }
    }
    w = (w != o || u.length == 0) ? w : null;
    if (w != null && w != "") {
        for (i = s.length - 3; i > 0; i -= 3) {
            s = s.substring(0, i) + w + s.substring(i)
        }
    }
    return y + s + u + q
}
function gfNumberGetHumanReadable(g, e, f) {
    g = Math.floor(g);
    e = e || false;
    var h = "";
    var f = f || 3;
    if (e) {
        if (g >= 1000000000) {
            h = LocalizationStrings.unitMilliard;
            g = g / 1000000000
        } else {
            if (g >= 1000000) {
                h = LocalizationStrings.unitMega;
                g = g / 1000000
            }
        }
    }
    floorWithPrecision = function(a, b) {
        return Math.floor(a * Math.pow(10, b)) / Math.pow(10, b)
    };
    g = floorWithPrecision(g, f);
    while (f >= 0) {
        if (floorWithPrecision(g, f - 1) != g) {
            break
        }
        f = f - 1
    }
    return number_format(g, f, LocalizationStrings.decimalPoint, LocalizationStrings.thousandSeperator) + h
}
function getNumberFormatShort(f, e) {
    if (typeof (e) == "undefined") {
        e = 0
    }
    f = Math.floor(f);
    var d = "";
    if (f >= 1000000000) {
        d = LocalizationStrings.unitMilliard;
        f = f / 1000000000
    }
    if (f >= 1000000) {
        d = LocalizationStrings.unitMega;
        f = f / 1000000
    }
    if (f >= 1000) {
        d = LocalizationStrings.unitKilo;
        f = f / 1000
    }
    return number_format(f, e, LocalizationStrings.decimalPoint, LocalizationStrings.thousandSeperator) + d
}
function createExpireTime(c) {
    var d = new Date();
    c = c * 1000;
    d.setTime(c);
    return d
}
function initHighscore() {
    $("a.navButton, a.subnavButton").click(function() {
        var h = $(this).attr("rel");
        var a = $(this).parent();
        var l = "";
        if (a.attr("id") == "typeButtons") {
            $("#typeButtons > a.active").removeClass("active")
        } else {
            if (a.attr("id") == "categoryButtons") {
                $("#categoryButtons > a.active").removeClass("active");
                $("#typeButtons a.active").each(function() {
                    h = $(this).attr("rel")
                })
            }
        }
        if (searchRelId != null && a.attr("id") == "typeButtons" || a.attr("id") == "subnav_fleet") {
            l = "&searchRelId=" + searchRelId
        }
        $(".subnavButton[rel!=" + h + "]").removeClass("active");
        $("#stat_list_content").html(LocalizationStrings.loading);
        $(this).addClass("active");
        var b = $("#categoryButtons > a.active").attr("rel");
        var k = highscoreContentUrl + "&category=" + b + "&type=" + h + l;
        if ((a.attr("id") == "typeButtons" || $(this).hasClass("subnavButton")) && searchSite != site) {
            k = k + "&site=" + site
        }
        removeTooltip(getTooltipSelector("#highscoreContent #ranks"));
        ajaxSumbit(k, "send", "stat_list_content");
        if ($(".navButton.active").attr("rel") == 1) {
            $("#highscoreContent .header h2").text(highscoreLoca.playerHighscore)
        } else {
            $("#highscoreContent .header h2").text(highscoreLoca.allianceHighscore)
        }
    });
    $(".stat_filter").click(function() {
        var a = $(this).attr("id");
        $(".subnav").hide();
        $("#subnav_" + a).fadeIn("slow")
    });
    var d = $("#ranks").offset().top;
    var c = $("#scrollToTop");
    $(window).unbind("scroll.highscoreTop").bind("scroll.highscoreTop", function(a) {
        var b = $(this).scrollTop();
        if (b > d) {
            c.css("visibility", "visible")
        } else {
            c.css("visibility", "hidden")
        }
    });
    $(document).undelegate(".scrollToTop", "click").delegate(".scrollToTop", "click", function() {
        $("html, body").animate({scrollTop: 0}, 50)
    })
}
function initHighscoreContent() {
    if (userWantsFocus) {
        if ($("#position" + searchPosition).length > 0) {
            $("html, body").animate({scrollTop: Math.max(0, $("#position" + searchPosition).offset().top - 200)}, 1000)
        }
    }
    $(".changeSite").change(function() {
        var a = $(this).val();
        $("#stat_list_content").html('<div class="ajaxLoad">' + LocalizationStrings.loading + "</div>");
        ajaxCall(highscoreContentUrl + "&category=" + currentCategory + "&type=" + currentType + "&site=" + a, "stat_list_content")
    });
    var d = $("#scrollToTop");
    var e = $("#ranks thead .score");
    function f() {
        if (e.length) {
            d.css("left", e.offset().left)
        }
    }
    f();
    $(window).unbind("resize.highscoreTop").bind("resize.highscoreTop", f)
}
function saveImperiumOrder(e, d) {
    var f = "impSortOrder";
    if (d) {
        f = "impSortOrderMoon"
    }
    $.ajax({url: saveUrl, method: "post", dataType: "json", data: {ajax: 1, type: f, planets: $(e).sortable("toArray")}})
}
function clearImperiumOrder() {
    $.ajax({url: saveUrl, method: "post", dataType: "json", data: {ajax: 1, type: "reset"}, success: function(b) {
            if (!b.error) {
                location.reload()
            }
        }})
}
function createSummaryHtml(n) {
    var q = "";
    var l = null;
    var o = 0;
    var r = 0;
    var k = "";
    q = q + '<div class="planetHead"><div class="planetname">' + n.translations.summary + '</div><div class="planetImg"><img src="http://gf3.geo.gfsrv.net/cdn8a/7efb2e73ca11d2344bbed43668da10.jpg"/></div><div class="planetData"><ul><li class="coords textLeft"></li><li class="fields textRight"></li></ul></div><div class="clearfloat"/></div>';
    for (group in n.groups) {
        q = q + '<div class="row" /><div class="values ' + group + " group" + group + '">';
        for (r = 0; k = n.groups[group][r]; r++) {
            if (n.translations.planets[k] == null) {
                continue
            }
            var m = {hourly: 0, daily: 0, weekly: 0};
            if (k == "name") {
                o = n.translations.summary
            } else {
                o = 0;
                if (group == "research") {
                    if (!isNaN(n.planets[0][k])) {
                        o = n.planets[0][k]
                    }
                } else {
                    $.each(n.planets, function() {
                        l = this;
                        if (!isNaN(l[k])) {
                            o = o + parseInt(l[k]);
                            if (group == "supply" && !isNaN(l.production.hourly[k - 1])) {
                                m.hourly += l.production.hourly[k - 1];
                                m.daily += l.production.daily[k - 1];
                                m.weekly += l.production.weekly[k - 1]
                            }
                        }
                    })
                }
            }
            if (group == "supply" || group == "station") {
                o = "&#x00F8; " + tsdpkt(round(o / n.planets.length, 1))
            } else {
                if (group == "items") {
                    o = "&nbsp;"
                } else {
                    o = tsdpkt(o)
                }
            }
            if (group == "supply" && k != "name" && m.hourly > 0) {
                var p = "<table><tr><td>" + n.translations.production.hourly + ":</td><td style=&quot;text-align: right;&quot;>" + tsdpkt(m.hourly) + "</td></tr><tr><td>" + n.translations.production.daily + ":</td><td style=&quot;text-align: right;&quot;>" + tsdpkt(m.daily) + "</td></tr><tr><td>" + n.translations.production.weekly + ":</td><td style=&quot;text-align: right;&quot;>" + tsdpkt(m.weekly) + "</td></tr></table>";
                p = p.replace(/</, "&lt;").replace(/>/, "&gt;");
                q = q + '<div class="tooltipRight ' + k + '" title="' + p + '">' + o + "</div>"
            } else {
                q = q + '<div class="' + k + '">' + o + "</div>"
            }
        }
        q = q + "</div>"
    }
    q = '<div id="planet0" class="planet summary">' + q + "</div>";
    return q
}
function createHeaderHtml(g) {
    var h = "";
    var e = 0;
    var f = "";
    h = h + '<div id="wrapTL"><div id="tab-left"><a id="planetsTab" href="javascript:void(0);" class="active" title=""><span>' + g.translations.planetsTab + '</span></a><a id="moonsTab" href="javascript:void(0);" title="" class=""><span>' + g.translations.moonsTab + "</span></a></div></div>";
    for (group in g.groups) {
        h = h + '<div id="' + group + '" class="firstCat headers ' + group + " headers" + group + '" group="' + group + '"><h3 class="open"><span>' + g.translations.groups[group] + '</span></h3><ul class="secondCat ' + group + " group" + group + '">';
        for (e = 0; f = g.groups[group][e]; e++) {
            if (g.translations.planets[f] == null) {
                continue
            }
            h += '<li class="' + f + '">';
            if (g.translations.planets[f + "_full"] != g.translations.planets[f]) {
                h += '<span class="tooltipLeft" title="' + g.translations.planets[f + "_full"] + '">' + g.translations.planets[f] + "</span>"
            } else {
                h += "<span>" + g.translations.planets[f] + "</span>"
            }
            h += "</li>"
        }
        h = h + "</ul></div>"
    }
    h = '<div id="empireTab"><div class="wrapTab"><div class="tab-part01"></div><h2>' + g.translations.header + '</h2><span class="reset"><img src="http://gf2.geo.gfsrv.net/cdnab/f805c477d15ae3131b7c39c7d70e48.gif" width="16" height="16"><a href="javascript:void(0);" onClick="clearImperiumOrder(); return false;">' + g.translations.reset + '</a></span><div class="wrapCorner"></div><br class="clearfloat"/></div></div><div class="header">' + h + "</div>";
    return h
}
function createPlanetsHtml(m) {
    var r = "";
    var q = "";
    var n = "";
    var l = "";
    var k = "";
    var o = 0;
    var p = "";
    $.each(m.planets, function() {
        r = this;
        n = "";
        l = "";
        q = (r.name.length > 13) ? r.name.substr(0, 11) + "..." : r.name;
        n += '<div class="planetHead">';
        if (r.name != q) {
            n += '<div class="planetname tooltip" title="' + r.name + '">' + q + "</div>"
        } else {
            n += '<div class="planetname">' + q + "</div>"
        }
        if (isMobile) {
            n += '<div class="planetImg"><img class="' + r.border + '" src="' + r.image + '"/></div><div class="planetData"><div class="planetDataTop odd"><ul><li class="coords textLeft"><a class="dark_highlight_tablet" href="' + r.coordinatesLink + '" >' + r.coordinates + '</a></li><li class="coords"><span class="dark_highlight_tablet energy tooltipRight" title="' + (r.type == 3 ? r.diameterTooltip : r.energyTooltip) + '">' + (r.type == 3 ? "\u2300: " + r.diameter : r.energyDescr + r.energy) + '</span></li></ul></div><div class="planetDataTop"><ul class="planet_data_2"><li class="fields textLeft">' + r.fieldUsed + "/" + r.fieldMax + '</li><li class="fields textLeft">' + r.temperature + '</li></ul></div></div><div class="clearfloat"/></div>'
        } else {
            n += '<div class="planetImg"><img class="' + r.border + '" src="' + r.image + '"/></div><div class="planetData"><div class="planetDataTop odd"><ul><li class="coords textLeft"><a href="' + r.coordinatesLink + '" >' + r.coordinates + '</a></li><li class="fields textRight">' + r.fieldUsed + "/" + r.fieldMax + '</li></ul></div><div class="planetDataTop"><ul><li class="coords textLeft">' + (r.type == 3 ? r.diameterDescr : r.energyDescr) + '</li><li class="coords textRight">' + (r.type == 3 ? r.diameter : r.energy) + '</li></ul></div><div class="planetDataBottom odd"><ul><li class="fields textCenter">' + r.temperature + '</li></ul></div></div><div class="clearfloat"/></div>'
        }
        for (var a in m.groups) {
            n = n + '<div class="row" /><div class="values ' + a + " group" + a + '">';
            for (o = 0; p = m.groups[a][o]; o++) {
                p = String(p);
                if (r[p + "_html"] != null) {
                    p = p + "_html"
                }
                l = p;
                if (p.substring(p.length - 5) == "_html") {
                    l = p.substring(0, p.length - 5)
                }
                n = n + '<div class="' + l + '">' + r[p] + "</div>"
            }
            n = n + "</div>"
        }
        k = k + '<div id="planet' + this.id + '" class="planet">' + n + "</div>"
    });
    return k
}
function createImperiumHtml(n, r, p, m) {
    var u = 0;
    if (typeof p.planets != "undefined") {
        u = p.planets.length
    }
    var q = 345 + u * 165;
    $("#mainWrapper").attr("style", "width: " + q + "px");
    $(r).show();
    var o = createHeaderHtml(p) + '<div class="planetWrapper">' + createPlanetsHtml(p) + createSummaryHtml(p) + '</div><br class="clearfloat"/>';
    $(n).append(o);
    $(n + " .planetWrapper").sortable({start: function() {
            removeTooltip(getTooltipSelector())
        }, update: function() {
            saveImperiumOrder(n + " .planetWrapper", m)
        }}).disableSelection();
    for (group in p.groups) {
        $(n + " .headers" + group).click(function() {
            var b = n + " .group" + $(this).attr("group");
            var a = "#" + $(this).attr("group") + " h3";
            $(b).toggle();
            $(a).removeClass("openhover").removeClass("closehover").removeClass("close").removeClass("open");
            if ($(b).attr("style").toLowerCase().substr(9, 4) == "none") {
                $(a).addClass("close");
                $.cookie("impToggleState" + $(this).attr("group"), "1", {expires: 365})
            } else {
                $(a).addClass("open");
                $.cookie("impToggleState" + $(this).attr("group"), "0", {expires: 365})
            }
        });
        var s = $.cookie("impToggleState" + group);
        if (s != null && s == "1") {
            $("#" + group + " > h3").removeClass("open");
            $("#" + group + " > h3").addClass("close");
            $(n + " .group" + group).toggle()
        }
    }
    $(r).hide();
    var l = $.inArray(0, empireOrder);
    if (l > -1) {
        $(".planetWrapper .planet:eq(" + l + "):not(:last-child)").before($("#planet0"))
    }
    initTooltips()
}
function displayMessage(b) {
    location.reload(true)
}
function doUpgrade(m, q, p, l, n) {
    if (forcedToVacation) {
        errorBoxNotify(LocalizationStrings.error, LocalizationStrings.forcedVacationWarning, LocalizationStrings.ok);
        return
    }
    var o = {};
    o.modus = p;
    o.techid = m;
    o.listid = l;
    o.planet = q;
    var r = LocalizationStrings.lastSlotWarningPlanet;
    var k = upgradeUrl;
    if (p == 2) {
        k += "&token=" + cancelBuildingToken
    }
    if (planetType == 1) {
        r = LocalizationStrings.lastSlotWarningMoon
    }
    if (n) {
        errorBoxDecision(LocalizationStrings.attention, r, LocalizationStrings.yes, LocalizationStrings.no, function() {
            $.post(k, o, displayMessage)
        })
    } else {
        $.post(k, o, displayMessage)
    }
}
function initEmpire() {
    initConnectionErrorFunction();
    $(".secondCat").each(function() {
        $(this).find("li:last").addClass("catbox-end")
    });
    $(".values").each(function() {
        if (!$(this).hasClass("groupitems")) {
            $(this).find("div:even").addClass("even");
            $(this).find("div:odd").addClass("odd");
            $(this).find("div:last").addClass("box-end")
        }
        if ($(this).children().hasClass("equipment")) {
            $(this).children(".equipment").addClass("box-end")
        }
    });
    $("#settings li:last").addClass("set-end");
    $(".header h3").hover(function() {
        $(this).addClass($(this).attr("class") + "hover")
    }, function() {
        $(this).removeClass("openhover").removeClass("closehover")
    });
    $(".header h3").click(function() {
        $(this).removeClass("openhover").removeClass("closehover");
        var b = $(this).attr("class");
        if (b == "open") {
            $(this).addClass("close")
        } else {
            $(this).addClass("open")
        }
        $(this).removeClass(b)
    });
    $(".planet").hover(function() {
        $(this).addClass("move")
    }, function() {
        $(this).removeClass("move")
    });
    $(".values div img").hover(function() {
        $(this).addClass("imghover")
    }, function() {
        $(this).removeClass("imghover")
    });
    $("#planetsTab").click(function() {
        window.location.href = empireUrl + "&planetType=0"
    });
    if (moonCount > 0) {
        $("#moonsTab").click(function() {
            window.location.href = empireUrl + "&planetType=1"
        })
    } else {
        $("#moonsTab").addClass("nomoons")
    }
    if (planetType == 1) {
        $("#planetsTab").removeClass("active");
        $("#moonsTab").addClass("active")
    }
    initBuffBarEmpire()
}
function initBuffBarEmpire() {
    var b = $(".empireItems");
    b.anythingSlider({resizeContents: false, buildNavigation: false, buildStartStop: false, infiniteSlides: false, stopAtEnd: true});
    b.removeClass("hidden")
}
function toggleEvents(b) {
    if ($("#eventboxContent").is(":hidden")) {
        $("#eventboxContent").slideDown("fast");
        $("#js_eventDetailsClosed").hide();
        $("#js_eventDetailsOpen").show();
        if (typeof toggleEvents.loaded == "undefined" || !toggleEvents.loaded) {
            $("#eventboxContent").html('<img height="16" width="16" src="http://gf3.geo.gfsrv.net/cdne3/3f9884806436537bdec305aa26fc60.gif" />');
            $.get(eventlistLink, function(a) {
                $("#eventboxContent").html(a);
                toggleEvents.loaded = true
            })
        }
    } else {
        if (b) {
            return
        }
        $("#eventboxContent").slideUp("fast");
        $("#js_eventDetailsClosed").show();
        $("#js_eventDetailsOpen").hide()
    }
    $("#contentWrapper select").ogameDropDown("hide")
}
function showGoogleAnalytics() {
    var f = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(decodeURI("%3Cscript src='" + f + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    try {
        var e = _gat._getTracker("UA-11968132-1");
        e._setDomainName(".ogame.gameforge.com");
        e._trackPageview()
    } catch (d) {
    }
}
function changeSetting(l, k, h, f, g) {
    $.ajax({type: "POST", url: changeSettingsLink, dataType: "json", data: {token: changeSettingsToken, key: l, value: k}, success: function(a) {
            changeSettingsToken = a.newToken;
            if (a.message.length > 0) {
                fadeBox(a.message, a.error)
            }
            if (!a.error && typeof (h) == "function") {
                h()
            } else {
                if (a.error && typeof (f) == "function") {
                    f()
                }
            }
        }, error: function(a) {
            if (typeof (g) == "undefined" || g) {
                fadeBox(LocalizationStrings.error, true)
            }
            if (a.error && typeof (f) == "function") {
                f()
            }
        }})
}
function getOverlayText(b) {
    if (b.hasClass("building") && b.children().hasClass("build-faster-img")) {
        return locaPremium.buildingHalfOverlay
    } else {
        if (b.hasClass("building") && b.children().hasClass("build-finish-img")) {
            return locaPremium.buildingFullOverlay
        } else {
            if (b.hasClass("ships") && b.children().hasClass("build-faster-img")) {
                return locaPremium.shipsHalfOverlay
            } else {
                if (b.hasClass("ships") && b.children().hasClass("build-finish-img")) {
                    return locaPremium.shipsFullOverlay
                } else {
                    if (b.hasClass("research") && b.children().hasClass("build-faster-img")) {
                        return locaPremium.researchHalfOverlay
                    } else {
                        if (b.hasClass("research") && b.children().hasClass("build-finish-img")) {
                            return locaPremium.researchFullOverlay
                        }
                    }
                }
            }
        }
    }
}
function getFastBuildPrice(b) {
    if (b.hasClass("building")) {
        return priceBuilding
    } else {
        if (b.hasClass("research")) {
            return priceResearch
        } else {
            if (b.hasClass("ships")) {
                return priceShips
            }
        }
    }
}
function getRedirectLink(f) {
    var d = {_rnd: Math.random()};
    if (f != undefined) {
        for (var e in f) {
            d[e] = f[e]
        }
    }
    return $.param.fragment($.param.querystring(window.location.href, d), {})
}
function sendShips(h, k, l, g, n, m) {
    if (shipsendingDone == 1) {
        shipsendingDone = 0;
        params = {mission: h, galaxy: k, system: l, position: g, type: n, shipCount: m, token: miniFleetToken};
        $.ajax(miniFleetLink, {data: params, dataType: "json", type: "POST", success: function(a) {
                if (typeof (a.newToken) != "undefined") {
                    miniFleetToken = a.newToken
                }
                displayMiniFleetMessage(a.response)
            }})
    }
}
function outlawWarning(q, u, s, p, n, l, m) {
    if (typeof (m) != "function") {
        if (q == constants.espionage) {
            m = r
        } else {
            if (q == constants.missleattack) {
                m = o
            }
        }
    }
    if (showOutlawWarning) {
        errorBoxDecision(LocalizationStrings.attention, LocalizationStrings.outlawWarning, LocalizationStrings.yes, LocalizationStrings.no, m)
    } else {
        m()
    }
    function r() {
        sendShips(q, u, s, p, n, l)
    }
    function o() {
        openOverlay(missleAttackLink + "&galaxy=" + u + "&system=" + s + "&position=" + p + "&planetType=" + n, {modal: true})
    }}
function initThousandSeparator() {
    $(".checkThousandSeparator").unbind("keyup.checkThousandSeparator").bind("keyup.checkThousandSeparator", function(e) {
        if (e.which == 8 || e.which == 46) {
            var f = $(this).getSelection();
            var g = $(this).val();
            if (g.substr(f.start - 1, 1) == LocalizationStrings.thousandSeperator) {
                var h;
                if (e.which == 8) {
                    h = g.substr(0, f.start - 2) + g.substr(f.start - 1)
                } else {
                    h = g.substr(0, f.start) + g.substr(f.start + 1)
                }
                formatNumber($(this), h)
            }
        }
    })
}
function initIndex() {
    initConnectionErrorFunction();
    $("select").ogameDropDown();
    $("#planet .slot").hover(function() {
        $(this).addClass("slot-hover")
    }, function() {
        $(this).removeClass("slot-hover")
    });
    $("#eventboxFilled").hover(function() {
        $(this).addClass("eventboxHover")
    }, function() {
        $(this).removeClass("qeventboxHover")
    });
    $(document).undelegate(".eventToggle", "click").delegate(".eventToggle", "click", function() {
        toggleEvents();
        return false
    }).undelegate("a.build-faster", "click").delegate("a.build-faster", "click", function() {
        var c = $(this);
        if (darkMatter < getFastBuildPrice(c)) {
            errorBoxDecision(LocalizationStrings.error, loca.errorNotEnoughDM, LocalizationStrings.yes, LocalizationStrings.no, redirectPremium);
            return
        }
        var d = $.deparam.querystring().page;
        errorBoxDecision(loca.notice, getOverlayText(c), LocalizationStrings.yes, LocalizationStrings.no, function() {
            $.ajax({url: c.attr("rel"), data: {ajax: 1, token: activateToken, referrerPage: d}, type: "POST", dataType: "json", error: function() {
                    fadeBox(LocalizationStrings.error, true);
                    c.addClass("disabled")
                }, success: function(a) {
                    activateToken = a.newToken;
                    if (a.error) {
                        fadeBox(a.message, true);
                        c.addClass("disabled")
                    } else {
                        location.href = getRedirectLink()
                    }
                }});
            return false
        })
    }).undelegate(".slideIn", "click").delegate(".slideIn", "click", function() {
        $(".slideIn").removeClass("active");
        var b = $(this).attr("ref");
        $("a[ref='" + b + "']").addClass("active");
        Tipped.hideAll();
        $("html, body").animate({scrollTop: 0}, 500);
        gfSlider.slideIn(getElementByIdWithCache("detail"), b)
    });
    if ($("#eventboxContent").is(":visible")) {
        toggleEvents.loaded = true;
        $("#eventboxFilled a").addClass("open")
    }
    $("#banner_skyscraper a.close_details").click(function() {
        changeSetting("hideBanner", $(this).attr("ref"), function() {
            $("#banner_skyscraper").remove()
        })
    });
    initHideElements();
    initOverlays();
    initLinks();
    initThousandSeparator();
    initExodus();
    initTooltips();
    initAjaxResourcebox();
    initPlanetSorting();
    initRetinaImages();
    initBDayEventHints();
    timerHandler.appendCallback(function() {
        localTime = new Date();
        serverTime = new Date(localTime.valueOf() + timeDiff);
        $(".OGameClock").html(getFormatedDate(serverTime.getTime(), "[d].[m].[Y] <span>[H]:[i]:[s]</span>"))
    })
}
function initPlanetSorting() {
    $("#planetList.sortable").sortable({start: function() {
            Tipped.hideAll()
        }, stop: function() {
            Tipped.hideAll();
            changeSetting("customPlanetOrder", $(this).sortable("toArray"))
        }});
    if ($(".lockPlanets").hasClass("closed")) {
        $("#planetList.sortable").sortable("disable")
    }
    $(".lockPlanets").unbind("click").bind("click", function() {
        var b = $(this);
        changeSetting("planetOrderLocked", b.hasClass("open") ? 1 : 0, function() {
            var a;
            if (b.hasClass("open")) {
                b.removeClass("open").addClass("closed");
                $("#planetList.sortable").sortable("disable");
                a = LocalizationStrings.planetOrder.unlock
            } else {
                b.removeClass("closed").addClass("open");
                $("#planetList.sortable").sortable("enable");
                a = LocalizationStrings.planetOrder.lock
            }
            changeTooltip(b, a)
        })
    })
}
function initHideElements() {
    $(document).undelegate("html", "touchstart.hideElem click.hideElem").delegate("html", "touchstart.hideElem click.hideElem", function(l) {
        l.stopPropagation();
        if ($(this).data("noclick")) {
            return
        }
        if (isMobile) {
            var h = l.target.tagName.toUpperCase();
            if (!(h === "TEXTAREA" || h === "INPUT" || h === "SELECT")) {
                document.activeElement.blur()
            }
            if (!$(l.target).parents(".markItUpHeader ul").length) {
                $(".markItUpHeader ul ul").hide()
            }
        }
        if (!$(l.target).parents(".t_Tooltip").length) {
            Tipped.hideAll()
        }
        if (!isMobile) {
            if ($(l.target).parents(".ui-dialog").length || $(l.target).parents(".t_Tooltip").length) {
                return
            }
            var k = $(".overlayDiv");
            if (typeof (k.data("uiDialog")) != "undefined") {
                var n = k.find(".markItUpDropMenu[id]");
                for (var e = 0; e < n.length; ++e) {
                    var m = $("body>ul[rel=" + n[e].id + "]");
                    m.hide()
                }
                k.dialog("close")
            }
        }
    })
}
function initJumpgate() {
    $("select").ogameDropDown();
    $(".list tr:even").addClass("alt");
    $(document).undelegate("#jumpgateForm .ship_input_row .textinput", "keyup change input").delegate("#jumpgateForm .ship_input_row .textinput", "keyup change input", function() {
        checkIntInput(this, 0, $(this).attr("rel"))
    }).undelegate("#jumpgateForm .ship_input_row .textinput", "focus").delegate("#jumpgateForm .ship_input_row .textinput", "focus", function() {
        $(this).val("")
    });
    $("#jumpgate .answerHeadline, .js_openStandardMoonMenu").click(function() {
        if (!player.hasCommander) {
            errorBoxNotify(LocalizationStrings.error, translation.changeSettingOnlyWithCommander, LocalizationStrings.ok, null, false)
        } else {
            $("#jumpgate").find(".answerHeadline").toggleClass("open");
            $(".thirdCol").toggleClass("hidden")
        }
    });
    $(".js_executeJumpButton").click(function() {
        var d = $("#jumpgateForm").find('select[name="zm"]').val();
        if (d != 0) {
            var c = true;
            $(".ship_selection_table input").each(function() {
                if ($(this).val() > 0) {
                    c = false
                }
            });
            if (!c) {
                ajaxFormSubmit("jumpgateForm", $(this).attr("data-url"), jumpgateDone)
            } else {
                fadeBox(translation.noShipsWereSelected, true)
            }
        } else {
            fadeBox(translation.validTargetNeeded, true)
        }
    })
}
function jumpgateDone(b) {
    var b = $.parseJSON(b);
    if (b.status) {
        planet = b.targetMoon;
        $(".overlayDiv").dialog("destroy")
    }
    errorBoxAsArray(b.errorbox);
    if (typeof (b.newToken) != "undefined") {
        setNewTokenData(b.newToken)
    }
}
function jumpgateDefaultTargetSelectionCallback(f) {
    var f = $.parseJSON(f);
    if (f.status) {
        var e = $("#jumpgateForm").find('select[name="zm"]');
        e.find("option").removeAttr("selected");
        var d = e.find('option[value="' + f.targetMoon + '"]');
        if (d.length) {
            d.attr("selected", "selected")
        } else {
            if (e.find('option[value="0"]').length == 0) {
                e.append($(document.createElement("option")).attr("value", 0).attr("selected", "selected").text("--"))
            } else {
                e.find('option[value="0"]').attr("selected", "selected")
            }
        }
        e.trigger("change");
        e.ogameDropDown("refresh")
    }
    errorBoxAsArray(f.errorbox);
    if (typeof (f.newToken) != "undefined") {
        setNewTokenData(f.newToken)
    }
}
function setNewTokenData(b) {
    $('#jumpgateForm input[name="token"]').val(b);
    $('#jumpgateDefaultTargetSelectionForm input[name="token"]').val(b)
}
if (typeof KeyEvent == "undefined") {
    var KeyEvent = {DOM_VK_CANCEL: 3, DOM_VK_HELP: 6, DOM_VK_BACK_SPACE: 8, DOM_VK_TAB: 9, DOM_VK_CLEAR: 12, DOM_VK_RETURN: 13, DOM_VK_ENTER: 14, DOM_VK_SHIFT: 16, DOM_VK_CONTROL: 17, DOM_VK_ALT: 18, DOM_VK_PAUSE: 19, DOM_VK_CAPS_LOCK: 20, DOM_VK_ESCAPE: 27, DOM_VK_SPACE: 32, DOM_VK_PAGE_UP: 33, DOM_VK_PAGE_DOWN: 34, DOM_VK_END: 35, DOM_VK_HOME: 36, DOM_VK_LEFT: 37, DOM_VK_UP: 38, DOM_VK_RIGHT: 39, DOM_VK_DOWN: 40, DOM_VK_PRINTSCREEN: 44, DOM_VK_INSERT: 45, DOM_VK_DELETE: 46, DOM_VK_0: 48, DOM_VK_1: 49, DOM_VK_2: 50, DOM_VK_3: 51, DOM_VK_4: 52, DOM_VK_5: 53, DOM_VK_6: 54, DOM_VK_7: 55, DOM_VK_8: 56, DOM_VK_9: 57, DOM_VK_SEMICOLON: 59, DOM_VK_EQUALS: 61, DOM_VK_A: 65, DOM_VK_B: 66, DOM_VK_C: 67, DOM_VK_D: 68, DOM_VK_E: 69, DOM_VK_F: 70, DOM_VK_G: 71, DOM_VK_H: 72, DOM_VK_I: 73, DOM_VK_J: 74, DOM_VK_K: 75, DOM_VK_L: 76, DOM_VK_M: 77, DOM_VK_N: 78, DOM_VK_O: 79, DOM_VK_P: 80, DOM_VK_Q: 81, DOM_VK_R: 82, DOM_VK_S: 83, DOM_VK_T: 84, DOM_VK_U: 85, DOM_VK_V: 86, DOM_VK_W: 87, DOM_VK_X: 88, DOM_VK_Y: 89, DOM_VK_Z: 90, DOM_VK_CONTEXT_MENU: 93, DOM_VK_NUMPAD0: 96, DOM_VK_NUMPAD1: 97, DOM_VK_NUMPAD2: 98, DOM_VK_NUMPAD3: 99, DOM_VK_NUMPAD4: 100, DOM_VK_NUMPAD5: 101, DOM_VK_NUMPAD6: 102, DOM_VK_NUMPAD7: 103, DOM_VK_NUMPAD8: 104, DOM_VK_NUMPAD9: 105, DOM_VK_MULTIPLY: 106, DOM_VK_ADD: 107, DOM_VK_SEPARATOR: 108, DOM_VK_SUBTRACT: 109, DOM_VK_DECIMAL: 110, DOM_VK_DIVIDE: 111, DOM_VK_F1: 112, DOM_VK_F2: 113, DOM_VK_F3: 114, DOM_VK_F4: 115, DOM_VK_F5: 116, DOM_VK_F6: 117, DOM_VK_F7: 118, DOM_VK_F8: 119, DOM_VK_F9: 120, DOM_VK_F10: 121, DOM_VK_F11: 122, DOM_VK_F12: 123, DOM_VK_F13: 124, DOM_VK_F14: 125, DOM_VK_F15: 126, DOM_VK_F16: 127, DOM_VK_F17: 128, DOM_VK_F18: 129, DOM_VK_F19: 130, DOM_VK_F20: 131, DOM_VK_F21: 132, DOM_VK_F22: 133, DOM_VK_F23: 134, DOM_VK_F24: 135, DOM_VK_NUM_LOCK: 144, DOM_VK_SCROLL_LOCK: 145, DOM_VK_COMMA: 188, DOM_VK_PERIOD: 190, DOM_VK_SLASH: 191, DOM_VK_BACK_QUOTE: 192, DOM_VK_OPEN_BRACKET: 219, DOM_VK_BACK_SLASH: 220, DOM_VK_CLOSE_BRACKET: 221, DOM_VK_QUOTE: 222, DOM_VK_META: 224}
}
(function(b) {
    b.fn.extend({ogameDropDown: function(l) {
            if (b("body.showOldDropdowns").length) {
                return this
            }
            function a(e) {
                var d = e.outerHeight();
                var g = b('.dropdown.currentlySelected[rel="' + e.attr("id") + '"]');
                if (g.length) {
                    var p = Math.min(b(window).innerWidth() + b(window).scrollLeft() - e.width() - 3, g.offset().left);
                    var c;
                    var f = Math.ceil(g.offset().top);
                    if (f + g.height() + d + b("#siteFooter").outerHeight() >= b(window).innerHeight() + b(window).scrollTop()) {
                        c = f - d + 1
                    } else {
                        c = f + g.height() + 1
                    }
                    e.css("left", p).css("top", c).css("min-width", g.width())
                }
            }
            var k = {destroy: function() {
                    b(this).filter("select.dropdownInitialized").each(function() {
                        var c = b(this);
                        b('.dropdown[rel="' + c.data("dropdownId") + '"]').remove();
                        b("ul#" + c.data("dropdownId")).remove();
                        c.removeClass("dropdownInitialized").data("dropdownId", "").show()
                    })
                }, hide: function() {
                    b(this).filter("select.dropdownInitialized").each(function() {
                        var c = b('.currentlySelected[rel="' + b(this).data("dropdownId") + '"]');
                        c.find("a").removeClass("hover");
                        b(".dropdownList#" + c.attr("rel")).hide()
                    })
                }, reposition: function() {
                    b(this).filter("select.dropdownInitialized").each(function() {
                        a(b("#" + b(this).data("dropdownId")))
                    })
                }, refresh: function() {
                    var d = b(this).find("option[selected]");
                    var e = getIEVersion() < 999 ? "#" : "javascript:void(0);";
                    var c = b('a[class="' + d.attr("class") + '"][rel="' + b(this).data("dropdownId") + '"]').text(d.text())
                }};
            if (typeof (l) == "string") {
                if (typeof (k[l]) == "function") {
                    k[l].call(this)
                }
                return this
            }
            b(this).filter("select:not(.dropdownInitialized)").each(function() {
                var r = b(this);
                var e = "dropdown" + Math.floor(Math.random() * 1000);
                var u = r.find("option[selected]");
                if (u.length == 0) {
                    u = r.find("option:first-child")
                }
                var d = getIEVersion() < 999 ? "#" : "javascript:void(0);";
                var g = b('<a class="' + u.attr("class") + '" data-value="' + u.val() + '" rel="' + e + '" href="' + d + '">' + u.text() + "</a>");
                var s = b('<span class="dropdown currentlySelected ' + r.attr("class") + '" rel="' + e + '"></span>').append(g).width(r.css("width").length ? r.css("width") : r.width()).data("selectElement", r);
                if (r.is("[readonly]") || r.is(":disabled")) {
                    s.addClass("disabled")
                }
                r.after(s).hide().addClass("dropdownInitialized").data("dropdownId", e);
                var c = b('<ul class="dropdown dropdownList" id="' + e + '"></ul>').delegate("a", "click", function(o) {
                    o.stopPropagation();
                    g.html(b(this).html()).attr("class", b(this).attr("class")).attr("data-value", b(this).attr("data-value"));
                    c.hide().find("a").removeClass("focus");
                    b(this).addClass("focus");
                    var p = b(this).attr("data-value");
                    r.val(b(this).attr("data-value")).trigger("change").find('option[value="' + p + '"], option:contains("' + p + '")').trigger("click")
                });
                function f() {
                    if (r.is(r.is("[readonly]") || ":disabled")) {
                        return
                    }
                    if (!c.hasClass("initialized")) {
                        c.addClass("initialized");
                        r.find("option").each(function() {
                            var o = b(this).html();
                            if (typeof (b(this).attr("data-html")) != "undefined") {
                                o = b(this).attr("data-html")
                            }
                            if (typeof (b(this).attr("data-html-prepend")) != "undefined") {
                                o = b(this).attr("data-html-prepend") + o
                            }
                            if (typeof (b(this).attr("data-html-append")) != "undefined") {
                                o += b(this).attr("data-html-append")
                            }
                            $li = b('<li><a class="' + b(this).attr("class") + '" data-value="' + b(this).val() + '">' + o + "</a></li>");
                            c.append($li);
                            if (b(this).is(":selected")) {
                                $li.find("a").addClass("focus")
                            }
                        })
                    }
                }
                g.bind("focus", function(o) {
                    b(".dropdownList").not(c).hide();
                    b(".dropdown.currentlySelected").removeClass("focus");
                    b(this).addClass("hover");
                    s.addClass("focus");
                    f()
                }).bind("mousewheel", function(o) {
                    f();
                    b(this).unbind("mousewheel")
                }).bind("click", function(o) {
                    o.preventDefault();
                    if (r.is(r.is("[readonly]") || ":disabled")) {
                        return
                    }
                    b(".dropdownList").not(c).hide();
                    b(".dropdown.currentlySelected").removeClass("focus");
                    s.addClass("focus");
                    if (c.is(":hidden")) {
                        b(this).addClass("hover");
                        f();
                        a(c);
                        b(window).unbind("resize.dropdown" + e).bind("resize.dropdown" + e, function() {
                            a(c)
                        });
                        c.show();
                        if (c.hasScrollbar()) {
                            c.find("a").css("padding-right", 22)
                        }
                    } else {
                        b(this).removeClass("hover");
                        b(window).unbind("resize.dropdown" + e);
                        c.hide()
                    }
                });
                b("body").append(c)
            });
            var m = "";
            var h;
            function n(g, q) {
                m = g;
                clearTimeout(h);
                h = setTimeout(function() {
                    m = ""
                }, 1500);
                var d = b(".dropdownList:visible");
                var r = false;
                if (d.length == 0) {
                    var e = b(".dropdown.currentlySelected.focus");
                    if (e.length) {
                        d = b("#" + e.attr("rel"));
                        r = true
                    } else {
                        return
                    }
                }
                var c = m.toLowerCase();
                var f = d.find("a").filter(function() {
                    if (b(this).attr("data-value").toLowerCase().indexOf(c) == 0) {
                        return true
                    }
                    return b(this).text().trim().toLowerCase().indexOf(c) == 0
                });
                if (f.length) {
                    q.preventDefault();
                    d.find("a").removeClass("focus");
                    b(f.get(0)).addClass("focus").focus();
                    if (r) {
                        f.click()
                    }
                } else {
                    clearTimeout(h);
                    m = ""
                }
            }
            b(document).undelegate("html", "touchstart.dropdown click.dropdown").delegate("html", "touchstart.dropdown click.dropdown", function(c) {
                if (b(c.target).closest(".dropdown").length == 0) {
                    b(".dropdownList").hide();
                    b(".currentlySelected a").removeClass("hover");
                    b(".currentlySelected").removeClass("focus")
                }
            }).undelegate(".dropdown", "mousewheel.dropdown").delegate(".dropdown", "mousewheel.dropdown", function(e, B) {
                e.preventDefault();
                var x = b(e.target).closest(".dropdown");
                var f;
                if (x.hasClass("currentlySelected")) {
                    f = b("#" + x.attr("rel"))
                } else {
                    f = x
                }
                var d = b('[rel="' + f.attr("id") + '"] a');
                var y = f.find("a:focus");
                if (y.length == 0) {
                    y = f.find("a.focus")
                }
                if (y.length == 0) {
                    y = f.find('a[data-value="' + d.attr("data-value") + '"]')
                }
                var v = y.parent();
                var A = null;
                var g = Math.abs(B);
                if (B > 0) {
                    for (var c = 0; c < g; c++) {
                        if (v.is(":first-child")) {
                            A = v.find("a");
                            break
                        } else {
                            A = v.prev().find("a")
                        }
                        v = A.parent()
                    }
                } else {
                    for (var c = 0; c < g; c++) {
                        if (v.is(":last-child")) {
                            A = v.find("a");
                            break
                        } else {
                            A = v.next().find("a")
                        }
                        v = A.parent()
                    }
                }
                if (A != null) {
                    v = A.parent();
                    f.find("a").removeClass("focus");
                    A.addClass("focus").focus();
                    if (f.is(":hidden")) {
                        A.click()
                    } else {
                        var w = v.position().top;
                        if (w < 0) {
                            f.scrollTop(f.scrollTop() + w)
                        } else {
                            if (w + v.outerHeight() > f.innerHeight()) {
                                f.scrollTop(f.scrollTop() + w + v.outerHeight() - f.innerHeight())
                            }
                        }
                    }
                }
            }).undelegate("*", "focus.dropdown").delegate("*", "focus.dropdown", function(c) {
                if (b(c.target).closest(".dropdown").length == 0) {
                    b(".currentlySelected a").removeClass("hover");
                    b(".currentlySelected").removeClass("focus")
                }
            }).unbind("keydown.dropdown").bind("keydown.dropdown ", function(f) {
                if (b(":focus").length > 0 && b(":focus").parents(".dropdown").length == 0) {
                    return
                }
                var e = false;
                var s = b(".dropdownList:visible");
                if (s.length == 0) {
                    var g = b(".dropdown.currentlySelected.focus");
                    if (g.length) {
                        s = b("#" + g.attr("rel"));
                        e = true
                    } else {
                        return
                    }
                }
                var d = b('[rel="' + s.attr("id") + '"] a');
                var w = s.find("a:focus");
                if (w.length == 0) {
                    w = s.find("a.focus")
                }
                if (w.length == 0) {
                    w = s.find('a[data-value="' + d.attr("data-value") + '"]')
                }
                var u = w.parent();
                var c = null;
                if (f.keyCode == KeyEvent.DOM_VK_UP || f.keyCode == KeyEvent.DOM_VK_DOWN || typeof (delta) != "undefined") {
                    if (f.keyCode == KeyEvent.DOM_VK_UP) {
                        if (u.is(":first-child")) {
                            c = u.find("a")
                        } else {
                            c = u.prev().find("a")
                        }
                        u = c.parent()
                    } else {
                        if (u.is(":last-child")) {
                            c = u.find("a")
                        } else {
                            c = u.next().find("a")
                        }
                        u = c.parent()
                    }
                    f.preventDefault()
                } else {
                    if (f.keyCode == KeyEvent.DOM_VK_BACK_SPACE) {
                        n(m.substring(0, m.length - 1), f)
                    } else {
                        if (f.keyCode == KeyEvent.DOM_VK_RETURN) {
                            f.preventDefault();
                            if (e) {
                                d.parents("form").submit();
                                return
                            } else {
                                e = true;
                                c = w
                            }
                        } else {
                            if (f.keyCode == KeyEvent.DOM_VK_ESCAPE) {
                                c = s.find('[data-value="' + d.attr("data-value") + '"]');
                                e = true
                            }
                        }
                    }
                }
                if (c != null) {
                    u = c.parent();
                    s.find("a").removeClass("focus");
                    c.addClass("focus").focus();
                    if (e) {
                        c.click()
                    } else {
                        var v = u.position().top;
                        if (v < 0) {
                            s.scrollTop(s.scrollTop() + v)
                        } else {
                            if (v + u.outerHeight() > s.innerHeight()) {
                                s.scrollTop(s.scrollTop() + v + u.outerHeight() - s.innerHeight())
                            }
                        }
                    }
                }
            }).unbind("keypress.dropdown").bind("keypress.dropdown", function(c) {
                if (b(":focus").length > 0 && b(":focus").parents(".dropdown").length == 0 || c.charCode == 0) {
                    return
                }
                n(m + String.fromCharCode(c.charCode), c)
            });
            return b(this)
        }, selectText: function() {
            var a, k, g = this[0], l = {func: "function", obj: "object"}, h = function(d, c) {
                return typeof c === d
            };
            if (h(l.obj, g.ownerDocument) && h(l.obj, g.ownerDocument.defaultView) && h(l.func, g.ownerDocument.defaultView.getSelection)) {
                k = g.ownerDocument.defaultView.getSelection();
                if (h(l.func, k.setBaseAndExtent)) {
                    k.setBaseAndExtent(g, 0, g, b(g).contents().size())
                } else {
                    if (h(l.func, g.ownerDocument.createRange)) {
                        a = g.ownerDocument.createRange();
                        if (h(l.func, a.selectNodeContents) && h(l.func, k.removeAllRanges) && h(l.func, k.addRange)) {
                            a.selectNodeContents(g);
                            k.removeAllRanges();
                            k.addRange(a)
                        }
                    }
                }
            } else {
                if (h(l.obj, document.body) && h(l.obj, document.body.createTextRange)) {
                    a = document.body.createTextRange();
                    if (h(l.obj, a.moveToElementText) && h(l.obj, a.select)) {
                        a.moveToElementText(g);
                        a.select()
                    }
                }
            }
            return this
        }, hasScrollbar: function() {
            return this.get(0).scrollHeight > this.innerHeight()
        }})
})(jQuery);
function initShowMessage() {
    var b = $('.overlayDiv[data-page="showmessage"]');
    $(".answerHeadline", b).click(function() {
        $(this).toggleClass("open");
        if ($(this).hasClass("open")) {
            $(".answerForm", b).show();
            $(".textWrapper", b).addClass("textWrapperSmall");
            $(".textWrapper", b).removeClass("textWrapper")
        } else {
            $(".answerForm", b).hide();
            $(".textWrapperSmall", b).addClass("textWrapper");
            $(".textWrapperSmall", b).removeClass("textWrapperSmall")
        }
    });
    $(".note > div:first-child", b).addClass("newMessage");
    $(".info:odd", b).css("margin-left", "40px");
    $("div.note p:first").after('<span class="seperator">');
    $(".answerHeadline", b).hover(function() {
        $(this).addClass("pushable")
    }, function() {
        $(this).removeClass("pushable")
    });
    $(".melden", b).click(function() {
        manageErrorbox($(this).attr("rel"), 1)
    })
}
function initMessages() {
    $(document).undelegate("a.espionageReport", "click.shareReport").delegate("a.espionageReport", "click.shareReport", function() {
        shareEspionageReport(this)
    })
}
function markAsRead(g) {
    if ($("#TR" + g).hasClass("new")) {
        $("#TR" + g).removeClass("new");
        var f = $(".reiter.active span.msgSum");
        if (f.length) {
            var e = parseInt(/^\((\d+)\)$/.exec(f.text())[1]);
            var h = e - 1;
            if (h > 0) {
                f.text("(" + h + ")")
            } else {
                f.remove()
            }
        }
        $msgSpan = $("#message_alert_box span");
        e = parseInt($msgSpan.text());
        h = e - 1;
        if (h > 0) {
            $msgSpan.text(h)
        } else {
            $msgSpan.text("");
            $("#message_alert_box").attr("id", "message_alert_box_default").addClass("emptyMessage")
        }
    }
}
function switchMessageView(b) {
    if ($("#" + b + ":hidden").length > 0) {
        $("#" + b).show()
    } else {
        $("#" + b).hide()
    }
}
function initAdressbook() {
    $(".addressBook").tabs({activate: hideTipsOnTabChange});
    $(".zebra tr").mouseover(function() {
        $(this).addClass("over")
    }).mouseout(function() {
        $(this).removeClass("over")
    });
    $(".zebra tr:odd").addClass("alt")
}
function initNetworkAjax() {
    var e = $(".reiter");
    if (!$.isFunction(f)) {
        var f = function() {
            e.removeClass("active");
            $(this).addClass("active");
            ajaxLoad($(this).attr("id"), 1)
        }
    }
    e.off("click");
    e.click(f);
    $("#checkAll").off("click").click(function() {
        $(".checker").prop("checked", $(this).is(":checked"))
    });
    function d(a) {
        $("#TR" + a).hide()
    }
    $(".overlay").click(function() {
        var a = $(this).attr("id");
        markAsRead(a)
    });
    $("#messageContent select").change(function() {
        if (typeof ($("select option:selected").attr("id")) == "undefined") {
            $(".buttonOK").hide();
            mod = ""
        } else {
            $(".buttonOK").show();
            mod = $("select option:selected").attr("id")
        }
    });
    $(".del").click(function() {
        mod = $(this).attr("id")
    });
    $(".underlined").click(function() {
        $(".buttonOK").hide()
    });
    reduceMsgCount(aktCat)
}
function MessageSlider(d) {
    var f = this;
    f.htmlobject = d;
    var e = document.documentElement.clientHeight - 160;
    this.open = function() {
        if (!this.inAction) {
            f.startTime = new Date().getTime();
            f.inAction = true;
            f.slideInStep()
        }
    }, this.slideInStep = function() {
        time = new Date().getTime();
        height = parseInt(f.currHeight * ((time - f.startTime) / 500));
        if (height < f.currHeight) {
            f.htmlobject.style.height = height + "px";
            window.setTimeout(f.slideInStep, 10)
        } else {
            f.htmlobject.style.height = f.currHeight + "px";
            f.inAction = false
        }
    }, this.close = function() {
        if (!f.inAction) {
            f.startTime = new Date().getTime();
            f.inAction = true;
            f.htmlobject.style.height = "0px";
            f.inAction = false
        }
    }, f.inAction = false;
    if (document.getElementById("messages")) {
        f.currHeight = Math.min(document.getElementById("messages").offsetHeight, e)
    } else {
        f.currHeight = e
    }
}
function closeDetails(f, d) {
    var e = $("#fleet" + f);
    e.children(".openDetails").children().children().attr("src", "http://gf2.geo.gfsrv.net/cdn10/de1e5f629d9e47d283488eee0c0ede.gif");
    e.children(".quantity").show();
    e.removeClass("detailsOpened");
    e.addClass("detailsClosed");
    currentMovementTabExtensionStates[f] = [0, d];
    updateCookieStatus(currentMovementTabExtensionStates)
}
function openDetails(f, d) {
    var e = $("#fleet" + f);
    e.children(".openDetails").children().children().attr("src", "http://gf3.geo.gfsrv.net/cdnb6/577565fadab7780b0997a76d0dca9b.gif");
    e.children(".quantity").hide();
    e.removeClass("detailsClosed");
    e.addClass("detailsOpened");
    currentMovementTabExtensionStates[f] = [1, d];
    updateCookieStatus(currentMovementTabExtensionStates)
}
function updateCookieStatus(d) {
    var e = JSON.stringify(d);
    var f = JSON.stringify({expires: Math.round(new Date().getTime() / 1000) + 7 * 86400});
    $.cookie("tabBoxFleets", e, f)
}
function openCloseDetails(c, d) {
    if ($("#fleet" + c).attr("class") == "fleetDetails detailsOpened") {
        closeDetails(c, d)
    } else {
        openDetails(c, d)
    }
}
function initMovement() {
    initToggleHeader("movement");
    $("a.openCloseDetails").click(function() {
        openCloseDetails($(this).attr("data-mission-id"), $(this).attr("data-end-time"))
    });
    $(".closeAll").click(function() {
        if (showInfos == 0) {
            showInfos = 1;
            $(".closeAll").children().removeClass("all_open").addClass("all_closed")
        } else {
            showInfos = 0;
            $(".closeAll").children().removeClass("all_closed").addClass("all_open")
        }
        $("a.openCloseDetails").each(function() {
            if (showInfos === 1) {
                closeDetails($(this).attr("data-mission-id"), $(this).attr("data-end-time"))
            } else {
                if (showInfos === 0) {
                    openDetails($(this).attr("data-mission-id"), $(this).attr("data-end-time"))
                }
            }
        })
    });
    timerHandler.appendCallback(function() {
    })
}
function addUserToUnion() {
    $("#participantselect").append($("#buddyselect").find("li.ui-selected"))
}
function removeUserFromUnion() {
    $("#buddyselect").append($("#participantselect").find("li.ui-selected"))
}
function addUserToUnionByForm() {
    var d = $("#unionUserSearch").find('[name="addtogroup"]');
    var f = d.val();
    var e = $("#participantselect");
    if (e.find('li[ref="' + f + '"]').length == 0) {
        e.append($(document.createElement("li")).attr("ref", f).text(f))
    }
    d.val("")
}
function setUnionUsers() {
    var b = "";
    $("#participantselect").find("li").each(function() {
        b += $(this).attr("ref") + ";"
    });
    b = b.substring(0, b.length - 1);
    $("#unionUsers").val(b)
}
function unionUser(d) {
    var c = $.parseJSON(d);
    if (c.status) {
        addUserToUnionByForm()
    } else {
        errorBoxAsArray(c.errorbox)
    }
}
function initFederationLayer() {
    $("#switch").click(function() {
        var b = $("#searchFed");
        b.find("> .wrap").toggle();
        b.find("> #honorWarning").toggle()
    });
    $("#buddyselect, #participantselect").selectable({filter: "li:not(.undermark)"});
    $(document).undelegate("ul#buddyselect li", "dblclick").delegate("ul#buddyselect li", "dblclick", function() {
        addUserToUnion()
    }).undelegate("ul#participantselect li", "dblclick").delegate("ul#participantselect li", "dblclick", function() {
        removeUserFromUnion()
    })
}
function submit_unionform() {
    setUnionUsers();
    ajaxFormSubmit("unionform", $("form#unionform").attr("action"), unionEdit)
}
function recallShipCountdown(f, h) {
    var g = this;
    var e = $(".reversal_time[ref='" + f + "']");
    if (isMobile && e.length) {
        this.updateCountdown = function() {
            var b = g.countdown.getLeftoverTime();
            var a = getFormatedDate(new Date(b * 1000 + timeDiff), "[d].[m].[Y] [H]:[i]:[s]");
            e.html(a)
        };
        g.countdown = new countdown(h, 3, 2);
        g.timer = timerHandler.appendCallback(g.updateCountdown);
        g.updateCountdown()
    }
}
function initNotesForm() {
    $("select").ogameDropDown();
    $("#createNote .text").trigger("keyup");
    if ($("#popupContent").length) {
        initNotes()
    }
}
function initNotes() {
    $("select").ogameDropDown();
    function c(a) {
        var b = false;
        $(a).find(":input").each(function() {
            if (typeof ($(this).data("value")) != "undefined") {
                if ($(this).data("value") != $(this).val()) {
                    b = true
                }
            }
        });
        return b
    }
    var d = $(".overlayDiv.notices");
    d.find(".openOverlay").unbind("click").bind("click", function() {
        var b = $(this).attr("data-overlay-class");
        var f = {title: $(this).attr("data-title"), close: function() {
                var e = $("." + b);
                if (c(e.find("form"))) {
                    errorBoxDecision(LocalizationStrings.question, locaNotes.changesNotSaved + "<br/><br/>" + locaNotes.questionSaveChanges, LocalizationStrings.yes, LocalizationStrings.no, function() {
                        e.find("form").trigger("submit");
                        e.remove()
                    }, function() {
                        e.remove()
                    }, true)
                } else {
                    e.remove()
                }
            }, "class": b};
        openOverlay($(this).attr("href"), f);
        if (b.indexOf("newNote-") === 0) {
            var a = parseInt(b.replace(/^newNote-/, "")) + 1;
            $(this).attr("data-overlay-class", "newNote-" + a)
        }
        return false
    });
    $(document).undelegate("#noteList form", "submit").delegate("#noteList form", "submit", function() {
        $.post($("#noteList").attr("rel"), $(this).serialize(), function(a) {
            d.html(a)
        })
    }).undelegate("#createNote form [type=submit]", "click").delegate("#createNote form [type=submit]", "click", function(a) {
        a.preventDefault();
        $(this).parents("form").submit()
    }).undelegate("#createNote form", "submit").delegate("#createNote form", "submit", function(a) {
        a.preventDefault();
        var b = $(this);
        $.ajax({url: $(this).attr("rel"), type: "post", data: b.serialize(), dataType: "json", error: function() {
                fadeBox(LocalizationStrings.error, true)
            }, success: function(f) {
                if (f.error != null) {
                    fadeBox(f.error, true)
                } else {
                    if ($("#popupContent").length) {
                        $(window).unbind("beforeunload.checkChanges");
                        location.href = b.attr("rel") + "&popup=1"
                    } else {
                        if (b.parents(".overlayDiv").is(":visible")) {
                            b.parents(".overlayDiv").dialog("option", "close", function() {
                                $(this).remove()
                            }).dialog("close")
                        }
                        if (f.success != null) {
                            fadeBox(f.success, false)
                        }
                        d.load(d.find("#noteList").attr("rel"))
                    }
                }
            }});
        return false
    }).undelegate("#createNote .textBox", "keyup touchstart change").delegate("#createNote .textBox", "keyup touchstart change", function() {
        var a = $(this).val().length;
        var f = $(this).attr("data-max-length");
        if (a > f) {
            var b = $(this).getSelection();
            $(this).val($(this).val().substr(0, f));
            a = f;
            $(this).setSelection(b)
        }
        $(this).parents("form").find(".cntChars").text(a)
    });
    $(window).unbind("beforeunload.checkChanges").bind("beforeunload.checkChanges", function() {
        var a = false;
        $("#createNote form").each(function() {
            if (c(this)) {
                a = true
            }
        });
        if (a) {
            return locaNotes.changesNotSaved
        }
    })
}
function scrollToTopOfDialog(b) {
    $("html, body").stop().animate({scrollTop: Math.max(0, b.offset().top - 300)}, 200)
}
function openOverlay(N, G) {
    if (typeof (openOverlay.index) == "undefined") {
        openOverlay.index = 0
    } else {
        openOverlay.index++
    }
    var T = openOverlay.index;
    G = G || {};
    if ((typeof (G.type) == "undefined" || G.type != "inline") && !N.match(new RegExp("^(" + ogameUrl + "|" + startpageUrl + ")"))) {
        window.open("redir.php?url=" + encodeURI(N), "_newtab");
        return
    }
    if (typeof (G.height) == "undefined") {
        G.height = "auto"
    }
    if (typeof (G.width) == "undefined") {
        G.width = "auto"
    }
    if (typeof (G.position) == "undefined") {
        if (isMobile && !isMobileApp) {
            G.position = {my: "top", at: "top"}
        } else {
            G.position = {my: "center", at: "center"}
        }
    }
    G.closeText = "";
    if ($(".overlayDiv").length && !isMobile) {
        var K = $(".overlayDiv:last");
        var M = K.offset();
        G.position = {my: "left top", at: "left+" + (M.left + 10) + " top+" + (M.top + 10)}
    }
    function B(a) {
        var b = a.parent(".ui-dialog");
        if (b.length) {
            b.css("top", Math.max(0, parseInt(b.css("top").replace(/px$/, "")))).css("left", Math.max(0, parseInt(b.css("left").replace(/px$/, ""))))
        }
    }
    var Q = G.type;
    delete G.type;
    if (Q != "inline") {
        var P = $(document.createElement("img")).attr("src", "http://gf1.geo.gfsrv.net/cdnc6/4161a64a933a5345d00cb9fdaa25c7.gif").attr("alt", LocalizationStrings.loading);
        var L = $(document.createElement("div")).css("text-align", "center").css("margin-top", "20px").append(P);
        var C = $(document.createElement("div")).addClass("overlayDiv").css("display", "none").append(L).appendTo("body");
        var H = function() {
            C.find("select").ogameDropDown("destroy");
            C.remove();
            Tipped.hideAll()
        };
        switch (typeof (G.close)) {
            case"function":
                break;
            case"string":
                var A = G.close.split(" ");
                G.close = function() {
                    $.each(A, function(a, b) {
                        if (b == "__default") {
                            H()
                        } else {
                            window[b]()
                        }
                    })
                };
                break;
            default:
                G.close = H;
                break
            }
    }
    if (typeof (N) == "string") {
        var R = $.deparam($.param.querystring(N));
        if (typeof (R.page) != "undefined") {
            C.attr("data-page", R.page)
        }
        if (!isMobile && $.inArray(R.page, popupWindows) != -1) {
            var J = Math.max(0, Math.floor($(window).height() / 2 - G.popupHeight / 2));
            var O = Math.max(0, Math.floor($(window).width() / 2 - G.popupWidth / 2));
            var U = window.open(N + "&popup=1", R.page, "width=" + G.popupWidth + ",height=" + G.popupHeight + ",scrollbars=yes,resizable=yes,top=" + J + ",left=" + O);
            C.remove();
            U.focus();
            return
        }
    }
    if (typeof (G["class"]) != "undefined") {
        var S = G["class"].split(" ").join(".");
        if ($(".overlayDiv." + S).length) {
            $.get(N, {}, function(a) {
                $(".overlayDiv." + G["class"]).empty().append(a).dialog("moveToTop")
            });
            C.remove();
            C = $(".overlayDiv." + S);
            if (typeof (R.page) != "undefined") {
                C.attr("data-page", R.page)
            }
            if (typeof (G.title) != "undefined") {
                C.dialog("option", "title", G.title)
            }
            scrollToTopOfDialog(C);
            return true
        } else {
            C.addClass(G["class"])
        }
    }
    if (Q == "inline") {
        C = $(N)
    }
    if (isNaN(G.dragStart) && isNaN(G.dragStop)) {
        var D;
        G.dragStart = function() {
            $("html").data("noclick", true);
            C.dialog("option", "width", C.width()).dialog("option", "height", C.height());
            D = {bg: C.css("background"), image: C.css("background-image"), x: C.css("background-position-x"), y: C.css("background-position-y"), position: C.css("background-position")};
            C.find("select").ogameDropDown("hide");
            C.children().hide();
            var d = C.find(".markItUpDropMenu[id]");
            for (var e = 0; e < d.length; ++e) {
                var a = $("body>ul[rel=" + d[e].id + "]");
                var c = (typeof a.attr("old_left") == "undefined" ? -18 : 0);
                var b = (typeof a.attr("old_left") == "undefined" ? -6 : 0);
                a.attr("old_top", C.offset()["top"] + c).attr("old_left", C.offset()["left"] + b).hide()
            }
            C.css("background", "#000000")
        };
        G.dragStop = function() {
            setTimeout(function() {
                $("html").data("noclick", false)
            }, 100);
            if (typeof (C.bg) == "undefined" || C.bg.length == 0) {
                C.css("background-image", D.image);
                if (typeof (D.position) == "undefined" || D.position.length == 0) {
                    C.css("background-position-x", D.x).css("background-position-y", D.y)
                } else {
                    C.css("background-position", D.position)
                }
            } else {
                C.css("background", D.bg)
            }
            C.children().show();
            var c = C.find(".markItUpDropMenu[id]");
            for (var a = 0; a < c.length; ++a) {
                var b = $("body>ul[rel=" + c[a].id + "]");
                b.css({top: (parseInt(b.css("top")) - b.attr("old_top") + C.offset()["top"]) + "px", left: (parseInt(b.css("left")) - b.attr("old_left") + C.offset()["left"]) + "px"});
                if ($(c[a]).attr("data-opened") == 1) {
                    b.show()
                }
            }
            C.dialog("option", "width", G.width).dialog("option", "height", G.height);
            B(C)
        }
    }
    if (isNaN(G.resizable)) {
        G.resizable = false
    }
    if (isMobile) {
        G.draggable = false
    }
    if (G.modal) {
        G.open = function() {
            $(".ui-widget-overlay").css("height", "").css("width", "")
        }
    }
    switch (Q) {
        case"iframe":
            var E = overlayWidth;
            var I = overlayHeight;
            if (typeof (G.iframeWidth) != "undefined") {
                E = G.iframeWidth;
                delete G.iframeWidth
            }
            if (typeof (G.iframeHeight) != "undefined") {
                I = G.iframeHeight;
                delete G.iframeHeight
            }
            C.html("<iframe allowTransparency='true'frameborder='0' hspace='0' src='" + N + "' id='TB_iframeContent' name='TB_iframeContent" + Math.round(Math.random() * 1000) + "' style='width:" + (E + 25) + "px;height:" + (I + 1) + "px;' ></iframe>").dialog(G).dialog("moveToTop");
            B(C);
            break;
        case"inline":
            var F = $(N);
            var V = F.parent();
            F.addClass("overlayDiv").dialog(G).dialog("moveToTop");
            B(F);
            break;
        default:
            C.dialog(G).dialog("moveToTop");
            $.get(N, {}, function(a) {
                C.empty().append(a).dialog("option", "position", C.dialog("option", "position"));
                setTimeout(function() {
                    C.dialog("option", "position", C.dialog("option", "position"));
                    B(C)
                }, 100)
            })
    }
    Tipped.hideAll();
    $("select").ogameDropDown("hide");
    if (!isMobile) {
        $(window).bind("resize.overlay" + T, function() {
            if (C.is(":data(dialog)")) {
                C.dialog("option", "position", C.dialog("option", "position"));
                B(C)
            } else {
                $(window).unbind("resize.overlay" + T)
            }
        })
    }
}
function isOverlayOpen() {
    return $(".overlayDiv").length > 0
}
function initOverlays() {
    $(document).undelegate("a.overlay", "click").delegate("a.overlay", "click", function(k) {
        k.preventDefault();
        var e = $(this).attr("href");
        if ($(this).data("overlay-same")) {
            var h = $(this).parents(".ui-dialog");
            var l = h.find(".overlayDiv");
            if ($(this).data("overlay-same") && l.length > 0) {
                $.get(e, {}, function(a) {
                    removeTooltip(l.find(getTooltipSelector()));
                    l.empty().append(a).dialog("moveToTop");
                    h.hide();
                    h.show()
                });
                return false
            }
        }
        var g = {zIndex: 4000};
        if ($(this).data("overlay-title")) {
            g.title = $(this).data("overlay-title")
        } else {
            if (typeof ($(this).attr("title")) != "undefined" && $(this).attr("title").length) {
                g.title = $(this).attr("title")
            } else {
                if ($(this).data("tipped_restore_title")) {
                    g.title = $(this).data("tipped_restore_title").replace(/^.+\|/, "")
                }
            }
        }
        if ($(this).data("overlay-class")) {
            g["class"] = $(this).data("overlay-class")
        }
        if ($(this).data("overlay-width")) {
            g.width = $(this).data("overlay-width")
        }
        if ($(this).data("overlay-height")) {
            g.height = $(this).data("overlay-height")
        }
        if ($(this).data("overlay-popup-width")) {
            g.popupWidth = $(this).data("overlay-popup-width")
        }
        if ($(this).data("overlay-popup-height")) {
            g.popupHeight = $(this).data("overlay-popup-height")
        }
        if ($(this).data("overlay-modal")) {
            g.modal = $(this).data("overlay-modal");
            g.resizable = false;
            g.draggable = false
        }
        if ($(this).data("overlay-iframe")) {
            g.type = "iframe";
            if ($(this).data("iframe-width")) {
                g.iframeWidth = $(this).data("iframe-width")
            }
            if ($(this).data("iframe-height")) {
                g.iframeHeight = $(this).data("iframe-height")
            }
        } else {
            if ($(this).data("overlay-inline")) {
                g.type = "inline";
                e = $(this).data("overlay-inline")
            }
        }
        if ($(this).data("overlay-close")) {
            g.close = $(this).data("overlay-close")
        }
        openOverlay(e, g);
        return false
    })
}
function initOverview() {
    $(".cancelMove").click(function() {
        var c = $(this);
        var d = window.location;
        errorBoxDecision(planetMoveLoca.askTitle, planetMoveLoca.askCancel, planetMoveLoca.yes, planetMoveLoca.no, function() {
            $.ajax({method: "get", url: c.attr("rel"), dataType: "json", cache: false, success: function(a) {
                    if (a.error.length > 0) {
                        fadeBox(a.error, true)
                    } else {
                        location.href = getRedirectLink()
                    }
                }, error: function() {
                    fadeBox(planetMoveLoca.error, true)
                }})
        })
    });
    $(document).undelegate("#planetMaintenanceDelete", "submit").delegate("#planetMaintenanceDelete", "submit", function(b) {
        b.preventDefault();
        ajaxFormSubmit("planetMaintenanceDelete", $(this).attr("action"), planetGivenup)
    }).undelegate("#abandonplanet #block", "click").delegate("#abandonplanet #block", "click", function(c) {
        c.preventDefault();
        if (isMobileOnly || isFacebookUser) {
            var d = $("#giveupHeadline").attr("rel") == 3 ? loca.moonGiveupQuestion : loca.planetGiveupQuestion;
            d = d.replace("%planetName%", $("#giveupName").text()).replace("%planetCoordinates%", $("#giveupCoordinates").text());
            errorBoxDecision($("#giveupHeadline").text(), d, LocalizationStrings.yes, LocalizationStrings.no, function() {
                $("#planetMaintenanceDelete").submit()
            })
        } else {
            show_hide_menus("#validate");
            show_hide_menus("#giveUpNotification")
        }
    }).undelegate(".openPlanetRenameGiveupBox", "click").delegate(".openPlanetRenameGiveupBox", "click", function(b) {
        b.stopPropagation();
        openPlanetRenameGiveupBox()
    })
}
function clearField() {
    currentValue = $("#planetName").val();
    if (defaultName == currentValue) {
        clearInput("#planetName")
    }
}
function fillField() {
    currentValue = $("#planetName").val();
    if (currentValue == "") {
        $("#planetName").val(defaultName)
    }
}
function openBuddyOverlay(d, c) {
    openOverlay(d, {"class": "buddies", title: c})
}
function planetGivenup(b) {
    var b = $.parseJSON(b);
    errorBoxAsArray(b.errorbox);
    if (typeof (b.newToken) == "string") {
        $("#planetMaintenanceDelete input[name='token']").val(b.newToken)
    }
}
function initPreferences() {
    $(".category").click(function() {
        document.prefs.reset()
    });
    $("div.wrap > div.group").hide();
    $("div.wrap > div.group:first,div.wrap:eq(1) > div.group:eq(0),div.wrap:eq(2) > div.group:eq(0),div.wrap:eq(3) > div.group:eq(0)").show();
    $("div.wrap > div.bar").click(function() {
        $(this).next("div.group:hidden").slideDown("fast", function() {
            Tipped.show($(":input:visible"))
        }).siblings("div.group:visible").slideUp("fast", function() {
            Tipped.hide($(":input:not(:visible)"))
        });
        $(".formError").validationEngine("closePrompt")
    });
    $(".content .bar").hover(function() {
        $(this).addClass("bar-hover")
    }, function() {
        $(this).removeClass("bar-hover")
    });
    $("#newpass1").bind("keyup", function() {
        var u = $(this).val();
        var E = u.length;
        var w = u.match(/[^A-Za-z\d]/);
        var x = u.match(/\d/);
        var s = u.match(/[a-z]/) && u.match(/[A-Z]/);
        var D = 0;
        var q = 4;
        var v = {length: false, "mixed-case": false, "special-chars": false, numbers: false};
        if (E >= passwordMinLength && E <= passwordMaxLength) {
            v.length = true;
            D++
        }
        if (s) {
            v["mixed-case"] = true;
            D++
        }
        if (x) {
            v.numbers = true;
            D++
        }
        if (w) {
            v["special-chars"] = true;
            D++
        }
        for (var F in v) {
            var y = v[F];
            var A = $("#password-meter-status-" + F);
            A.find("img.status-checked").css("visibility", y ? "visible" : "hidden")
        }
        var C = Math.floor(D / q * 2);
        var r = new Array("low", "medium", "high");
        for (var B in r) {
            if (B != C) {
                $("#password-meter-rating-" + r[B]).removeClass("arrow")
            } else {
                $("#password-meter-rating-" + r[B]).addClass("arrow")
            }
        }
    });
    $(".contentzs").tabs({beforeActivate: function(d, c) {
            $("input#selectedTab").val($(c.tab).parent().prevAll().length)
        }, activate: function() {
            Tipped.hide($("input:not(:visible)"));
            Tipped.show($("input:visible"))
        }, active: selectedTab});
    $("#sortSetting").unbind("change").bind("change", function() {
        var d = "settings_order";
        if ($(this).val() == customSorting) {
            var e = $("#sortOrder");
            e.attr("disabled", "disabled").attr("name", "");
            $("#sortOrderHidden").attr("name", d).val(e.val());
            $("#sortOrder").next(".dropdown").addClass("disabled")
        } else {
            $("#sortOrder").next(".dropdown").removeClass("disabled");
            var f = $("#sortOrderHidden");
            f.attr("name", "");
            $("#sortOrder").removeClass("disabled").attr("name", d).removeAttr("disabled").val(f.val())
        }
    }).trigger("change");
    if (moveInProgress) {
        $("form#prefs").on("submit", function(c) {
            var d = $(this);
            if (d.find("input#urlaubs_modus.notOnVacation:checked").length) {
                errorBoxDecision(LocalizationStrings.attention, preferenceLoca.planetMoveQuestion, LocalizationStrings.yes, LocalizationStrings.no, function() {
                    d.off("submit").submit()
                });
                c.preventDefault();
                return false
            }
        })
    }
    if (isMobileOnly) {
        $("#prefs").bind("submit", function() {
            var b = $(this);
            if (!b.data("asking") && $("#db_character", b).val().length) {
                b.data("asking", true);
                errorBoxDecision(preferenceLoca.changeNameTitle, preferenceLoca.changeNameQuestion.replace("%newName%", $("#db_character", b).val()), LocalizationStrings.yes, LocalizationStrings.no, function() {
                    b.submit();
                    b.data("asking", false)
                }, function() {
                    b.data("asking", false)
                });
                return false
            }
        })
    }
    if (tabsDisabled) {
        $(".contentzs").tabs("option", "disabled", [1, 2]);
        $("#tabGeneral, #tabRepresentation").attr("title", preferenceLoca.tabDisabled).attr("class", "tooltip")
    }
    $("div.wrap:visible > div.bar:eq(" + openGroup + ")").click()
}
function display_info(b) {
    if (document.getElementById("infoInput").innerHTML == "" || document.getElementById("infoInput").innerHTML != get_displayText(b)) {
        document.getElementById("infoInput").innerHTML = get_displayText(b)
    }
}
function display_error(b) {
    if (document.getElementById("errorInput").innerHTML == "" || document.getElementById("errorInput").innerHTML != get_errorText(b)) {
        document.getElementById("errorInput").innerHTML = get_errorText(b);
        document.getElementById("error").style.display = "block"
    }
}
function hide_error(b) {
    document.getElementById("errorInput").innerHTML = "";
    document.getElementById("error").style.display = "none"
}
function checkUsername() {
    var b = document.forms["new"].elements.username.value;
    if (b.length < 3 || b.length >= 20) {
        display_error("username")
    } else {
        hide_error()
    }
}
function checkEmail() {
    var b = document.forms["new"].elements.email.value;
    validate = b.match(/[a-zA-Z0-9]+@+[a-zA-Z0-9]+[.]+[a-zA-Z0-9]{2,4}/);
    if (b.length < 3 || b.length >= 64 || !validate) {
        display_error("email")
    } else {
        hide_error()
    }
}
function resourceTicker(e) {
    var f = this;
    f.config = e;
    f.htmlObj = document.getElementById(f.config.valueElem);
    var d = new Date();
    f.startTime = d.getTime();
    f.updateResource = function() {
        var a = new Date().getTime();
        nrResource = f.config.available + f.config.production * (a - f.startTime) / 1000;
        nrResource = Math.max(0, Math.floor(nrResource));
        if (nrResource < f.config.available || nrResource >= f.config.available && nrResource < f.config.limit) {
            f.htmlObj.innerHTML = gfNumberGetHumanReadable(nrResource, isMobile);
            if (nrResource >= f.config.limit[1]) {
                f.htmlObj.className = "overmark"
            } else {
                if (nrResource >= f.config.limit * 0.9 && nrResource < f.config.limit) {
                    f.htmlObj.className = "middlemark"
                } else {
                    if (nrResource <= f.config.limit * 0.9) {
                        f.htmlObj.className = ""
                    }
                }
            }
            if (f.config.production < 0 && nrResource == 0 || f.config.production == 0) {
                timerHandler.removeCallback(f.intervalObj)
            }
        } else {
            if (f.config.production > 0 && nrResource >= f.config.available && nrResource >= f.config.limit) {
                nrResource = gfNumberGetHumanReadable(f.config.limit, isMobile);
                f.htmlObj.innerHTML = nrResource;
                f.htmlObj.className = "overmark";
                timerHandler.removeCallback(f.intervalObj)
            }
        }
    };
    if (f.config.production > 0 && f.config.available >= f.config.limit) {
        return
    }
    if (f.config.production <= 0 && f.config.available == 0) {
        return
    }
    f.intervalObj = timerHandler.appendCallback(f.updateResource)
}
function initResourceTrader() {
    $(".big_tabs").tabs({activate: hideTipsOnTabChange});
    $(".resource_link").on("click", onSelectResource);
    $(".btn_calltrader").on("click", callTrader)
}
function onSelectResource(f) {
    var e = $(f.currentTarget);
    if (!e.hasClass("active")) {
        $(".resource_link").removeClass("active");
        e.addClass("active");
        $(".btn_calltrader").attr("disabled", false).data("offerId", e.data("resourceId"));
        var d = $(".getNewTraderDiv");
        if (d.hasClass("hidden") && !e.hasClass("oldTraderActive") || !d.hasClass("hidden") && e.hasClass("oldTraderActive")) {
            d.parent().children().toggleClass("hidden")
        }
    }
}
function showTradeNowButton() {
    if ($("#callTrader").hasClass("traderActive")) {
        $("#callTrader").show()
    } else {
        $("#callTrader").hide()
    }
}
function calcCosts(c, d) {
    return Math.ceil(d * factor[offer_id] / factor[c])
}
function calcInputFromCosts(c, d) {
    return Math.max(Math.floor(d / factor[offer_id] * factor[c]), 0)
}
function setValue(c, d) {
    if (offer_id == c) {
        $("#" + c + "_value_label").html(number_format(d, 0, loca.decimalPoint, loca.thousandsSeparator))
    } else {
        formatNumber("#" + c + "_value", d)
    }
}
function checkValue(b) {
    setValue(b, Math.min(getValue($("#" + b + "_value").val()), Math.round(storage[b])));
    free_id = 6 - b - offer_id;
    offer_costs = calcCosts(free_id, getValue($("#" + free_id + "_value").val()));
    costs = calcCosts(b, getValue($("#" + b + "_value").val()));
    freeOfferCosts = Math.round(offer_amount - (offer_costs));
    if (costs > freeOfferCosts) {
        setValue(b, calcInputFromCosts(b, freeOfferCosts));
        costs = calcCosts(b, getValue($("#" + b + "_value").val()))
    }
    offer_costs = offer_costs + costs;
    setValue(offer_id, offer_costs);
    document.getElementById(b + "_storage").innerHTML = number_format((storage[b] - getValue($("#" + b + "_value").val())), 0, loca.decimalPoint, loca.thousandsSeparator)
}
function setMaxValue(b) {
    setValue(b, storage[b]);
    checkValue(b)
}
function callTrader(h) {
    if ($(h.currentTarget).attr("disabled") == "disabled") {
        return
    }
    var g = $(h.currentTarget).data("offerId"), e = $(h.currentTarget).data("askOverwrite");
    if (typeof (e) == "undefined") {
        e = true
    }
    if (darkMatter < traderCosts) {
        errorBoxDecision(LocalizationStrings.error, loca.errorNotEnoughDM, LocalizationStrings.yes, LocalizationStrings.no, redirectPremium);
        return
    }
    function f() {
        if (!$(".call_trader_box .getNewTraderDiv").hasClass("hidden")) {
            $(".call_trader_box").children().toggleClass("hidden")
        }
        $(".resource_list .resource_link").removeClass("oldTraderActive").filter(function(a) {
            return $(this).data("resourceId") == g
        }).addClass("oldTraderActive");
        $("#callTrader").show().addClass("traderActive");
        $.post(traderCallLink, {offer_id: g, token: traderResourcesToken}, function(a) {
            a = $.parseJSON(a);
            traderResourcesToken = a.newToken;
            if (a.status == "1") {
                traderObj.reloadResources();
                $("#callTrader").addClass("traderActive").show();
                openOverlay(traderOverlayLink, {"class": "traderlayer"});
                var d = $("#activeTrader");
                var b = "metal";
                var c = loca.traderResourceTitleMetal;
                switch (g) {
                    case 2:
                        b = "crystal";
                        c = loca.traderResourceTitleCrystal;
                        break;
                    case 3:
                        b = "deut";
                        c = loca.traderResourceTitleDeuterium;
                        break
                }
                d.find(".left_content #material").attr("class", b);
                d.find("p.stimulus").html(c);
                d.show();
                $("#boxHeader, #boxFooter").show()
            } else {
                errorBoxAsArray(a.errorbox)
            }
        })
    }
    if (e && $("#callTrader").is(":visible")) {
        errorBoxDecision(loca.traderResourceNewQuestionHeadline, loca.traderResourceNewQuestion, LocalizationStrings.yes, LocalizationStrings.no, f)
    } else {
        f()
    }
}
function tradeDone(b) {
    b = $.parseJSON(b);
    traderResourcesToken = b.newToken;
    if (b.status == "1") {
        $(".overlayDiv.traderlayer").dialog("close");
        $(".call_trader_box").children().toggleClass("hidden");
        traderObj.reloadResources();
        $("#callTrader").removeClass("traderActive").hide();
        $(".resource_link").removeClass("oldTraderActive active");
        $(".btn_calltrader").attr("disabled", true);
        $("#activeTrader").hide()
    }
    errorBoxAsArray(b.errorbox)
}
function initSearch() {
    $(document).ready(function() {
        $("#searchText").focus();
        $(".searchTabs .tab").unbind("click").bind("click", function() {
            $(this).parents(".subsection_tabs").find("li").removeClass("ui-tabs-active");
            $(this).parent().addClass("ui-tabs-active");
            ajaxSearch(1, this)
        });
        $(".searchall .buttonSave").unbind("click").bind("click", function() {
            ajaxSearch(1, this)
        })
    }).undelegate(".searchTabs .ajaxSearch", "click").delegate(".searchTabs .ajaxSearch", "click", function(b) {
        b.stopPropagation();
        ajaxSearch($(this).attr("ref"), this)
    })
}
function closeSearch() {
    if (typeof (currentPage != "undefined")) {
        if (currentPage == "fleet1" || currentPage == "fleet2") {
            $("a#continue").focus()
        } else {
            if (currentPage == "fleet3") {
                $("a#start").focus()
            }
        }
    }
}
var inventoryObj = {currentPage: null, currentItems: null, currentItem: null, currentCategory: null, initalizeSlider: function(R, N, P, U, O, al, ac, ai, S) {
        if (inventoryObj.currentItems == R && typeof (al) == "undefined" || al == false) {
            return
        }
        inventoryObj.currentItems = R;
        O = O || "slideIn";
        ac = ac || "tooltipHTML js_hideTipOnMobile";
        if (typeof (ai) == "undefined") {
            ai = true
        }
        if (typeof (S) == "undefined") {
            S = true
        }
        $("#" + N + "Box").remove(".anythingSlider");
        var ag = [];
        var af = 0;
        for (var M in R) {
            var W = R[M];
            if (typeof (W.hide) != "undefined" && W.hide) {
                continue
            }
            if (inventoryObj.currentPage == "shop" || inventoryObj.currentPage == "inventory") {
                var T = af % inventoryObj.itemsPerSlide;
                ag[af + (2 * (T % 3)) - 2 * Math.floor(T / 3)] = W
            } else {
                ag[af] = W
            }
            af++
        }
        var Q = 0, I = 0, L = $('<ul id="' + N + '" />');
        for (var ak = ag.length; I < ak; I++) {
            if (typeof (ag[I]) == "undefined") {
                K.append('<div class="item_img"><div class="empty border5px"></div></div>');
                continue
            }
            var W = ag[I];
            if (I % inventoryObj.itemsPerSlide == 0) {
                var K = $('<li class="slide_' + Q + '" />').appendTo(L);
                Q++
            }
            var aj, V, Z;
            if (inventoryObj.currentPage == "shop") {
                aj = getNumberFormatShort(W.costs, null) + " " + loca.currency[W.currency];
                V = "price"
            } else {
                aj = getNumberFormatShort(W.amount);
                V = "amount"
            }
            var Y;
            if (ai) {
                Y = W.imageLarge + "-75x.png"
            } else {
                Y = W.imageLarge + "-100x.png"
            }
            var X;
            if (W.canBeActivated || W.canBeBoughtAndActivated) {
                X = "enabled"
            } else {
                X = "disabled"
            }
            if (W.isReduced) {
                Z = '<div class="sale_badge ' + X + '"></div>'
            } else {
                Z = ""
            }
            var ad = (W.timeLeft != null) ? " js_is_active " : "";
            var ae = "";
            var aa = W.title;
            if (N.indexOf("js_activeItemSlider") != -1) {
                aa = "";
                ae = (W.timeLeft != null) ? '<span class="js_duration undermark" data-total-duration="' + W.totalTime + '">' + W.timeLeft + "</span>" : ""
            }
            var ab = "";
            if (W.timeLeft != null && N.indexOf("js_activeItemSlider") != -1) {
                ab = '<div class="pusher"></div>'
            }
            var ah = "";
            if ($.inArray(birthdayCategory, W.category) != -1) {
                ah = '<div class="event_active_hint"></div>'
            }
            K.append('<div class="item_img r_' + W.rarity + '" style="background-image: url(/cdn/img/item-images/' + Y + ');"><div class="item_img_box">' + ah + '<div class="activation ' + X + ad + '"></div><a href="javascript:void(0);" tabindex="1" title="' + aa + '" class="detail_button ' + ac + " " + O + '" ref="' + W.ref + '">' + Z + '<span class="ecke"><span class="level ' + V + '">' + aj + "</span></span></a></div>" + ae + ab + "</div>")
        }
        $("#" + N + "Box").prepend(L);
        if (I % inventoryObj.itemsPerSlide != 0) {
            for (var J = I % inventoryObj.itemsPerSlide; J < inventoryObj.itemsPerSlide; J++) {
                $("#" + N + " li:last").append('<div class="item_img"><div class="empty border5px"></div></div>')
            }
        }
        return mySlider = $("#" + N).anythingSlider({startStopped: true, buildStartStop: false, expand: true, resizeContents: false, theme: "default", infiniteSlides: false, autoPlay: false, easing: "swing", resizeContents:true, stopAtEnd: true, playRtl: isRTLEnabled, hashTags: true, buildNavigation: S, onInitialized: function(e, k) {
                if (isMobile) {
                    var h = 1000, f = 50, d = 0, b = 0, g = "ontouchend" in document, a = (g) ? "touchstart" : "mousedown", c = (g) ? "touchmove" : "mousemove", l = (g) ? "touchend" : "mouseup";
                    k.$window.bind(a, function(m) {
                        b = (new Date()).getTime();
                        d = m.originalEvent.touches ? m.originalEvent.touches[0].pageX : m.pageX
                    }).bind(l, function(m) {
                        b = 0;
                        d = 0
                    }).bind(c, function(n) {
                        var m = n.originalEvent.touches ? n.originalEvent.touches[0].pageX : n.pageX, o = (d === 0) ? 0 : Math.abs(m - d), p = (new Date()).getTime();
                        if (b !== 0 && p - b < h && o > f) {
                            if (m < d) {
                                k.goForward()
                            }
                            if (m > d) {
                                k.goBack()
                            }
                            b = 0;
                            d = 0
                        }
                    })
                }
            }})
    }, initShop: function() {
        var b = this;
        $(window).unbind(".shop");
        $(document).undelegate(".slideIn", "click.shop").delegate(".slideIn", "click.shop", function() {
            if (b.currentItem == $(this).attr("ref")) {
                b.currentItem = null;
                $.bbq.pushState({item: ""})
            } else {
                b.currentItem = $(this).attr("ref");
                $.bbq.pushState({item: $(this).attr("ref")})
            }
        });
        $("button.to_shop").bind("click.shop", function() {
            $.bbq.pushState({page: "shop"})
        });
        $("button.to_inventory").bind("click.shop", function() {
            $.bbq.pushState({page: "inventory"})
        });
        $("button.buyResourcesLink").bind("click", function() {
            reload_page($(this).data("link"))
        });
        $(".to_shop, .to_inventory").hover(function() {
            $(this).addClass("hover")
        }, function() {
            $(this).removeClass("hover")
        });
        $(".categoryFilter li a").bind("click.shop", function() {
            $.bbq.pushState({category: $(this).attr("rel")})
        });
        $(window).unbind("hashchange.shop").bind("hashchange.shop", function(a) {
            b.onHashChange($.deparam.fragment(a.fragment))
        });
        b.onHashChange($.deparam.fragment());
        inventoryObj.refreshResources()
    }, onHashChange: function(l) {
        if (typeof (l.page) == "undefined") {
            var h = {page: "shop", category: $(".categoryFilter a:first").attr("rel")};
            if (typeof (l.item) != "undefined" && l.item != "") {
                var k = inventoryObj.items_shop[l.item];
                if (k.category.length > 0) {
                    h.category = k.category[k.category.length - 1]
                }
            }
            $.bbq.pushState(h);
            return
        }
        var f = this.currentPage != l.page;
        if (f) {
            if (l.page == "inventory") {
                this.openInventory();
                $(".planetlink, .moonlink").fragment({page: l.inventory})
            } else {
                this.openShop();
                $(".planetlink, .moonlink").fragment({page: l.shop})
            }
            this.updateCategoryAmount()
        }
        if (typeof (l.category) == "undefined") {
            $.bbq.pushState({category: $(".categoryFilter a:first").attr("rel")});
            return
        } else {
            if (l.category != this.currentCategory || f) {
                this.changeCategory(l.category)
            }
        }
        if (typeof (l.item) == "undefined" || l.item == "" && this.currentItem != null) {
            $("#itemDetails a.close_details").click();
            $(".planetlink, .moonlink").fragment({item: ""})
        } else {
            if (this.currentItem != l.item) {
                var g = $(".slideIn[ref='" + l.item + "']");
                if (g.length) {
                    g.click()
                } else {
                    gfSlider.slideIn(getElementByIdWithCache("detail"), l.item)
                }
                $(".planetlink, .moonlink").fragment({item: l.item})
            }
        }
    }, initShopDetails: function() {
        var c = this;
        var d = $.deparam.querystring().page;
        $(document).undelegate("#itemDetails .close_details", "click").delegate("#itemDetails .close_details", "click", function() {
            $("a.slideIn[ref=" + $(this).attr("ref") + "]:first").click()
        }).undelegate("#itemDetails a.item.build-it", "click").delegate("#itemDetails a.item.build-it", "click", function() {
            $.ajax({url: $(this).attr("rel"), data: {ajax: 1, token: buyToken}, type: "POST", dataType: "json", error: function() {
                    fadeBox(translation.buyError, true)
                }, success: function(a) {
                    buyToken = a.newToken;
                    if (a.error) {
                        fadeBox(a.message, true)
                    } else {
                        fadeBox(a.message, false);
                        inventoryObj.refreshResources();
                        inventoryObj.refreshItemData(a.item)
                    }
                }});
            return false
        }).undelegate("#itemDetails a.item.build-it_disabled.dm", "click").delegate("#itemDetails a.item.build-it_disabled.dm", "click", function() {
            errorBoxDecision(LocalizationStrings.error, loca.buyDMDecision, LocalizationStrings.yes, LocalizationStrings.no, function() {
                if ($("a.dm_button").length > 0) {
                    $("a.dm_button").click()
                } else {
                    window.location.href = $("#darkmatter_box a").attr("href")
                }
            })
        }).undelegate("#itemDetails a.activateItem.build-it", "click").delegate("#itemDetails a.activateItem.build-it", "click", function() {
            var a = $(this);
            function b() {
                $.ajax({url: a.attr("rel"), data: {ajax: 1, token: activateToken, referrerPage: d}, type: "POST", dataType: "json", error: function() {
                        fadeBox(translation.buyError, true);
                        $("#itemDetails a.activateItem").removeClass("build-it").addClass("build-it_disabled")
                    }, success: function(f) {
                        activateToken = f.newToken;
                        if (f.error) {
                            fadeBox(f.message, true);
                            $("#itemDetails a.activateItem").removeClass("build-it").addClass("build-it_disabled")
                        } else {
                            if (f.message.reload) {
                                location.href = getRedirectLink();
                                return
                            }
                            f = f.message;
                            fadeBox(f.message, false);
                            inventoryObj.refreshResources();
                            inventoryObj.refreshItemData(f.item)
                        }
                    }})
            }
            if (a.hasClass("isUpgrade")) {
                errorBoxDecision(LocalizationStrings.activateItem.upgradeItemQuestionHeader, LocalizationStrings.activateItem.upgradeItemQuestion, LocalizationStrings.yes, LocalizationStrings.no, b)
            } else {
                b()
            }
            return false
        }).undelegate("#itemDetails a.buyAndActivate.build-it", "click").delegate("#itemDetails a.buyAndActivate.build-it", "click", function() {
            var a = $(this);
            function b() {
                $.ajax({url: a.attr("rel"), data: {ajax: 1, token: activateToken, referrerPage: d}, type: "POST", dataType: "json", error: function() {
                        fadeBox(translation.buyError, true);
                        $("#itemDetails a.activateItem").removeClass("build-it").addClass("build-it_disabled")
                    }, success: function(f) {
                        activateToken = f.newToken;
                        if (f.error) {
                            fadeBox(f.message, true);
                            $("#itemDetails a.activateItem").removeClass("build-it").addClass("build-it_disabled")
                        } else {
                            if (f.message.reload) {
                                location.href = getRedirectLink();
                                return
                            }
                            f = f.message;
                            fadeBox(f.message, false);
                            inventoryObj.refreshResources();
                            inventoryObj.refreshItemData(f.item)
                        }
                    }})
            }
            if (a.hasClass("isUpgrade")) {
                errorBoxDecision(LocalizationStrings.activateItem.upgradeItemQuestionHeader, LocalizationStrings.activateItem.upgradeItemQuestion, LocalizationStrings.yes, LocalizationStrings.no, b)
            } else {
                b()
            }
            return false
        })
    }, refreshResources: function() {
        getAjaxResourcebox(function(b) {
            $(".to_dark_matter .level").text(b.darkmatter.resources["actualFormat"])
        })
    }, refreshItemData: function(e) {
        var d = e.ref;
        changeTooltip($(".detail_button[ref='" + d + "']"), e.title);
        $(".detail_button[ref='" + d + "'] span.amount, #itemDetails[data-uuid='" + d + "'] span.amount").html(tsdpkt(e.amount));
        if (typeof (inventoryObj.items_inventory) != "undefined") {
            if (inventoryObj.items_inventory.length == 0) {
                inventoryObj.items_inventory = {}
            } else {
                if (e.amount <= 0) {
                    delete inventoryObj.items_inventory[d]
                } else {
                    inventoryObj.items_inventory[d] = e
                }
            }
        }
        if (typeof (inventoryObj.items_shop) != "undefined") {
            if (inventoryObj.items_shop.length == 0) {
                inventoryObj.items_shop = {}
            }
            inventoryObj.items_shop[d] = e
        }
        changeTooltip($('#itemDetails[data-uuid="' + d + '"] a.activateItem, #itemDetails[data-uuid="' + d + '"] a.buyAndActivate'), e.activationTitle);
        if (e.hasEnoughCurrency) {
            $('#itemDetails[data-uuid="' + d + '"] a.item').addClass("build-it").removeClass("build-it_disabled")
        } else {
            $('#itemDetails[data-uuid="' + d + '"] a.item').removeClass("build-it").addClass("build-it_disabled")
        }
        if (e.amount > 0) {
            $('#itemDetails[data-uuid="' + d + '"] a.activateItem').show();
            $('#itemDetails[data-uuid="' + d + '"] a.buyAndActivate').hide();
            if (e.canBeActivated) {
                $('#itemDetails[data-uuid="' + d + '"] a.activateItem').removeClass("build-it_disabled").addClass("build-it")
            } else {
                $('#itemDetails[data-uuid="' + d + '"] a.activateItem').addClass("build-it_disabled").removeClass("build-it")
            }
        } else {
            $('#itemDetails[data-uuid="' + d + '"] a.activateItem').hide();
            $('#itemDetails[data-uuid="' + d + '"] a.buyAndActivate').show();
            if (e.canBeBoughtAndActivated && e.hasEnoughCurrency) {
                $('#itemDetails[data-uuid="' + d + '"] a.buyAndActivate').removeClass("build-it_disabled").addClass("build-it")
            } else {
                $('#itemDetails[data-uuid="' + d + '"] a.buyAndActivate').addClass("build-it_disabled").removeClass("build-it")
            }
        }
        if (isMobile) {
            var f = "";
            if ($('#itemDetails[data-uuid="' + d + '"] a.activateItem:visible,#itemDetails[data-uuid="' + d + '"] a.buyAndActivate:visible').hasClass("build-it_disabled")) {
                f += e.activationTitle
            }
            if (e.buyTitle.length && e.buyTitle != e.activationTitle) {
                f += e.buyTitle
            }
            $('#itemDetails[data-uuid="' + d + '"] .info_txt').text(f)
        }
        if (e.timeLeft > 0 && e.extendable) {
            $('#itemDetails[data-uuid="' + d + '"] a.activateItem span').html(loca.extend);
            $('#itemDetails[data-uuid="' + d + '"] a.buyAndActivate span').html(loca.buyAndExtend)
        } else {
            $('#itemDetails[data-uuid="' + d + '"] a.activateItem span').html(loca.activate);
            $('#itemDetails[data-uuid="' + d + '"] a.buyAndActivate span').html(loca.buyAndActivate)
        }
        if (e.isAnUpgrade) {
            $('#itemDetails[data-uuid="' + d + '"] a.activateItem, #itemDetails[data-uuid="' + d + '"] a.buyAndActivate').addClass("isUpgrade")
        } else {
            $('#itemDetails[data-uuid="' + d + '"] a.activateItem, #itemDetails[data-uuid="' + d + '"] a.buyAndActivate').removeClass("isUpgrade")
        }
        if (this.inShop === true) {
            this.changeCategory($(".categoryFilter a.active").attr("rel"))
        }
        this.updateCategoryAmount()
    }, boughtItemHint: function() {
        $(".to_inventory .bought_item_notice").show().fadeOut(1000)
    }, openShop: function() {
        this.currentPage = "shop";
        $("#js_inventorySliderBox").hide();
        $("#js_shopSliderBox").show();
        $(".to_inventory").removeClass("active");
        $(".to_shop").addClass("active");
        $("#buttonz h2").text(loca.LOCA_PREMIUM_SHOP);
        if (isMobile) {
            $(".js_shopCurrentPage").html(loca.shopText)
        }
    }, openInventory: function() {
        this.currentPage = "inventory";
        $("#js_shopSliderBox").hide();
        $("#js_inventorySliderBox").show();
        $(".to_shop").removeClass("active");
        $(".to_inventory").addClass("active");
        $("#buttonz h2").text(loca.LOCA_PREMIUM_INVENTORY);
        if (isMobile) {
            $(".js_shopCurrentPage").html(loca.inventoryText)
        }
    }, changeCategory: function(c) {
        inventoryObj.currentCategory = c;
        $(".planetlink, .moonlink").fragment({category: c});
        $(".categoryFilter li, .categoryFilter li a").removeClass("active");
        $('.categoryFilter li a[rel="' + c + '"]').addClass("active").parent().addClass("active");
        $(".anythingSlider").remove();
        var d = function(m, a) {
            var n = [];
            var l = [];
            var b = 0;
            $.each(m, function(f) {
                if (this.category != null) {
                    var e = "$" + this.category.join("$") + "$";
                    if (e.toLowerCase().indexOf("$" + c + "$") != -1) {
                        n[inventoryObj.item_orders[c][this.ref]] = this;
                        if (inventoryObj.item_orders[c][this.ref] > b) {
                            b = inventoryObj.item_orders[c][this.ref]
                        }
                    }
                }
            });
            for (var k = 0; k <= b; ++k) {
                if (n[k]) {
                    l[k] = n[k]
                }
            }
            inventoryObj.initalizeSlider(l, a, 340, 340, null, null, null, false)
        };
        if (inventoryObj.currentPage == "shop") {
            d(inventoryObj.items_shop, "js_shopSlider")
        } else {
            if (inventoryObj.currentPage == "inventory") {
                d(inventoryObj.items_inventory, "js_inventorySlider")
            }
        }
    }, updateCategoryAmount: function() {
        var d;
        if (inventoryObj.currentPage == "shop") {
            d = inventoryObj.items_shop
        } else {
            if (inventoryObj.currentPage == "inventory") {
                d = inventoryObj.items_inventory
            } else {
                return
            }
        }
        var c = $(".categoryFilter");
        c.find(".amount").text(0);
        $.each(d, function(l) {
            if (this.category != null) {
                for (var a in this.category) {
                    var b = this.category[a];
                    var h = c.find('a[rel="' + b + '"] .amount');
                    var k;
                    if (inventoryObj.currentPage == "shop") {
                        k = 1
                    } else {
                        if (inventoryObj.currentPage == "inventory") {
                            k = this.amount
                        }
                    }
                    h.text(tsdpkt(getValue(h.text()) + k))
                }
            }
        });
        $.each(c.find("li"), function(b) {
            var a = inventoryObj.currentPage.slice(0, 1).toUpperCase() + inventoryObj.currentPage.slice(1);
            if ($(this).hasClass("in" + a)) {
                $(this).show()
            } else {
                $(this).hide();
                if (!c.find("li:visible .active").length) {
                    c.find("li:visible:first a").click()
                }
            }
        })
    }};
function GFSlider(d) {
    var c = this;
    if (OGConfig.sliderOn == 1) {
        c.duration = 500
    } else {
        c.duration = 1
    }
    c.zIndex = 10;
    c.intervalTime = 30;
    c.lastTid = 0;
    c.inAction = false;
    c.isOpen = false;
    c.lastObj = false;
    c.currHeight = d.offsetHeight;
    c.opacity = 1;
    c.header = document.getElementById("header_text");
    c.ressButton = document.getElementById("resources_button");
    c.areaMap = document.getElementById("transImg");
    this.slideIn = function(b, a, f) {
        if (!c.inAction) {
            c.slideInObj = b;
            if (c.lastTid != a || f) {
                b.opacity = 1;
                c.lastTid = a;
                $("#detail").html('<div id="techDetailLoading"></div>');
                if (!c.isOpen) {
                    if (c.ressButton) {
                        c.ressButton.style.display = "none"
                    }
                    b.style.height = "1px";
                    b.style.display = "block";
                    b.style.overflow = "hidden";
                    c.inAction = true;
                    c.startTime = new Date().getTime();
                    c.slideInStep();
                    c.isOpen = true
                } else {
                    loadDetails(c.lastTid)
                }
            } else {
                c.header.style.display = "block";
                c.opacity = 0;
                c.lastTid = 0;
                c.inAction = true;
                c.isOpen = false;
                c.startTime = new Date().getTime();
                c.slideOutObj = c.slideInObj;
                c.slideOutStep()
            }
        }
    };
    this.slideInStep = function() {
        d = c.slideInObj;
        var a = new Date().getTime();
        var b = parseInt(c.currHeight * ((a - c.startTime) / c.duration));
        if (b < c.currHeight) {
            d.style.height = (b) + "px";
            d.style.marginTop = (c.currHeight - 1 - b) + "px";
            window.setTimeout(c.slideInStep, c.intervalTime);
            c.opacity = Math.max(c.opacity - 0.1, 0);
            c.header.style.opacity = c.opacity;
            c.header.style.filter = "Alpha(opacity=" + (0.5 * 100) + ")"
        } else {
            d.style.height = c.currHeight + "px";
            d.style.marginTop = "0px";
            c.inAction = false;
            c.header.style.display = "none";
            loadDetails(c.lastTid);
            if (c.lastObj && d != c.lastObj) {
                c.hideLast()
            }
            c.lastObj = d
        }
    };
    this.slideOutStep = function() {
        d = c.slideInObj;
        var a = new Date().getTime();
        height = parseInt(c.currHeight * ((a - c.startTime) / c.duration));
        if (height < c.currHeight) {
            d.style.height = (c.currHeight - 1 - height) + "px";
            d.style.marginTop = (height) + "px";
            window.setTimeout(c.slideOutStep, c.intervalTime);
            c.opacity = Math.max(c.opacity + 0.1, 0);
            c.header.style.opacity = c.opacity
        } else {
            d.style.height = c.currHeight + "px";
            d.style.marginTop = "0px";
            c.opacity = 1;
            c.header.style.opacity = c.opacity;
            if (c.ressButton) {
                c.ressButton.style.display = "block"
            }
            d.style.display = "none";
            c.inAction = false;
            c.hideLast()
        }
    };
    this.hideLast = function() {
        if (c.lastObj) {
            $(".slideIn").removeClass("active");
            c.lastObj.style.display = "none";
            c.inAction = false
        }
    };
    this.hide = function(a) {
        $(".slideIn").removeClass("active");
        c.slideOutObj = a;
        c.opacity = 1;
        c.header.style.opacity = c.opacity;
        c.header.style.display = "block";
        if (c.ressButton) {
            c.ressButton.style.display = "block"
        }
        if (c.areaMap) {
            c.areaMap.style.display = "block"
        }
        c.slideOutObj.style.display = "none";
        c.inAction = false;
        c.lastTid = 0;
        c.isOpen = false
    }
}
function rocketsDestroyed(b) {
    var b = $.parseJSON(b);
    errorBoxAsArray(b.errorbox);
    if (!b.errorbox.failed) {
        $(".rocketlayer").dialog("close");
        gfSlider.slideIn(getElementByIdWithCache("detail"), techID, true)
    }
}
function supplyFleet(b) {
    var b = $.parseJSON(b);
    if (b.status) {
        getAjaxResourcebox();
        supplyTimes[b.id] = b.time;
        new simpleCountdown($("#holdingTime-" + b.id), b.time)
    }
    errorBoxAsArray(b.errorbox)
}
function updateSupplyDetails(e, f, d) {
    $("#shipCount").html(gfNumberGetHumanReadable(e));
    $("#deutCosts").html(gfNumberGetHumanReadable(f));
    $("span.countdown").hide();
    $("#holdingTime-" + d).show()
}
function initAllianceDepot() {
    $(".overlayDiv[data-page='allydepotlayer'] select").ogameDropDown();
    $(".holdingTime:first-child").show();
    for (var b in supplyTimes) {
        new simpleCountdown($("#holdingTime-" + b), supplyTimes[b])
    }
    $("#supplyTimeInput").focus(function() {
        clearInput(this)
    }).keyup(function() {
        var a = getValue($("#resources_deuterium").text());
        var d = getValue($("#deutCosts").text());
        checkIntInput(this, 1, Math.floor(a / d))
    })
}
function tabletInitOverviewAdvice() {
    if (!isMobile) {
        return false
    }
    var f = $(".adviceWrapper");
    var d = f.find("#exodus-indicator, #exodus-timer");
    var e = f.find("#exodus-indicator-processed");
    f.prev().before(d);
    f.prev().before(e);
    $("#planetdata").after(f)
}
function tabletInitGalaxyDetails() {
    if (!isMobile) {
        return false
    }
    var b = ["js_planet", "js_moon", "js_debris", "js_playerName", "js_allyTag"];
    $(".js_detailRow").hide();
    $(".planetname, .planetname1").each(function() {
        $newNode = $('<div class="' + $(this).attr("class") + '"/>');
        $(this).prev().append($newNode);
        $newNode.html($(this).html());
        $(this).remove()
    });
    $(".js_detailRow").each(function(e) {
        e = $(this).attr("rel");
        for (var f = 0; f < b.length; f++) {
            var a = $("." + b[f] + e);
            if (a === undefined || a.length == 0) {
                if (e == 17) {
                    continue
                }
                return
            }
            if (a.attr("class").indexOf("js_no_action") >= 0) {
                continue
            }
            a.unbind();
            a.bind("click.planet", function(c) {
                if ($(this).hasClass("active")) {
                    $(".row *.active").removeClass("active");
                    $(".js_detailRow").hide()
                } else {
                    $(".row *.active").removeClass("active");
                    if ($(".bdaySlotBox")) {
                        $(".bdaySlotBox .name").removeClass("active")
                    }
                    $(".js_detailRow").hide();
                    if ($(this).html().trim()) {
                        $(this).addClass("active");
                        if ($(this).attr("class").indexOf("js_planet") >= 0) {
                            $(".js_detailRowPlanet" + e).toggle().find(".active_row_details_content")
                        } else {
                            if ($(this).attr("class").indexOf("js_moon") >= 0) {
                                $(".js_detailRowMoon" + e).toggle()
                            } else {
                                if ($(this).attr("class").indexOf("js_debris") >= 0) {
                                    $(".js_detailRowDebris" + e).toggle()
                                } else {
                                    if ($(this).attr("class").indexOf("js_playerName") >= 0) {
                                        $(".js_detailRowPlayer" + e).toggle()
                                    } else {
                                        if ($(this).attr("class").indexOf("js_allyTag") >= 0) {
                                            $(".js_detailRowAlliance" + e).toggle()
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            })
        }
    });
    $("a.planetMoveIcons").bind("click", function(a) {
        a.stopPropagation()
    })
}
function tabletToggleTechtreeInfos(f) {
    if (!isMobile) {
        return false
    }
    var e = $("div.techtree[data-id='" + f + "']");
    var d = e.find(".techImage a");
    d.each(function() {
        var b = $(this);
        var c = b.parent().hasClass("built") ? "undermark" : "overmark";
        var a = b.data("tech-name");
        var h = b.data("tech-type");
        b.append('<div class="short_info" style="display: none"><span class="' + c + '">' + a + "</span><br/>" + h + "</div>")
    });
    if (d.length) {
        e.append($('<a id="toggleDetails" href="javascript:void(0)" class="btn_blue">' + LocalizationStrings.moreDetails + "</a>").click(function() {
            var a = e.find(".short_info");
            if (a.is(":visible")) {
                $(this).text(LocalizationStrings.moreDetails)
            } else {
                $(this).text(LocalizationStrings.lessDetails)
            }
            a.toggle()
        }))
    }
}
function tabletInitEmpire() {
    if (!isMobile) {
        return false
    }
    var b = $("#mainWrapper").width();
    b = (b < 1024) ? "1024" : b;
    $("#outerWrapper").width(b);
    $(".reset").hide()
}
function tabletInitPayment() {
    if (!isMobile) {
        return false
    }
    $("#payment").parent(".overlayDiv").dialog("option", "title", paymentLoca.title);
    document.addEventListener("deviceready", function() {
        $("#mobilePayment a.js_buyPacket").unbind("click").bind("click", function() {
            HostApp.StartPayment($(this).attr("ref"), userData.id, constants.name, constants.language)
        });
        HostApp.OnPaymentFinished = function() {
            getAjaxResourcebox(function(b) {
                fadeBox(paymentLoca.success, false);
                $("#payment").parent().dialog("close");
                $("#planet #content .level span").attr("class", "undermark").text(b.darkmatter.string)
            })
        };
        HostApp.OnPaymentFailed = function() {
            fadeBox(paymentLoca.error, true)
        }
    }, false)
}
function tabletInitGalaxy() {
    if (!isMobile) {
        return false
    }
    $("#galaxyContent").wipetouch({wipeLeft: function(b) {
            if (!$("#galaxyLoading:visible").length) {
                submitOnKey(39)
            }
        }, wipeRight: function(b) {
            if (!$("#galaxyLoading:visible").length) {
                submitOnKey(37)
            }
        }, preventDefault: false, preventDefaultWhenTriggering: true, moveX: 180, moveY: 60})
}
function initRetinaImages() {
    if ($(".js_replace2x").css("font-size") == "1px") {
        $("img.js_replace2x").each(function() {
            $(this).attr("src", $(this).attr("rel"))
        })
    }
}
function setupOverlay(e, d, f) {
    $(".build-it_premium").addClass("overlay");
    $(".build-it_premium").attr("href", e);
    $(".build-it_premium").data("overlay-title", d);
    $(".build-it_premium").data("techid", f)
}
function setupBuildinglistForBuildItButton(e, f, d) {
    new baulisteCountdown(document.getElementById("possibleInTime"), buildableAt, pageToReload)
}
function drawErrorbox(p, n, l, h, o, m) {
    var m = m == undefined ? false : m;
    var k = m !== false ? $("." + m) : $(".build-it_disabled");
    if (typeof (o) == "undefined" || o == "") {
        o = document.location.href
    }
    k.click(function() {
        if (l !== undefined && h !== undefined && o !== undefined) {
            if (p == "notify") {
                errorBoxNotify(l, n, h.allOk, function() {
                    window.location.href = o
                })
            }
            if (p == "decision") {
                errorBoxDecision(l, n, h.allYes, h.allNo, function() {
                    window.location.href = o
                })
            }
        }
        if (p == "fadeBox") {
            fadeBox(n, true)
        }
    })
}
function initializeBuildItButton() {
    if (hasCommander && buildableAt > 0) {
        setupBuildinglistForBuildItButton(loca.allDetailNow, techID, showSlotWarning)
    }
    if (buttonState) {
        $(".build-it").on("click", function() {
            sendBuildRequest(null, null, showSlotWarning)
        })
    } else {
        if (couldBeBuild) {
            $errorCount = showErrors()
        } else {
            $errorCount = 99
        }
        if ((error == null || error == 0) && $errorCount == 0) {
            $(".build-it_premium").on("click", function() {
                var c = $("#number").val();
                if (typeof c == "undefined") {
                    c = 1
                }
                var d = links.overlay + "&amount=" + c;
                setupOverlay(d, overlayTitle, techID)
            })
        }
    }
    $(document).off("keypress.submitBuild").on("keypress.submitBuild", "#contentWrapper #inhalt #number", function(c) {
        if (c.keyCode != 13) {
            return
        }
        c.stopPropagation();
        var d = $(".build-it_premium");
        if (d.length) {
            d.trigger("click")
        } else {
            $(".build-it").trigger("click")
        }
    })
}
function showErrors() {
    var b = {allYes: loca.allYes, allNo: loca.allNo, allOk: loca.allOk};
    if (isBuildlistNeeded) {
        if (!hasCommander && !(isShip || isRocket)) {
            drawErrorbox("decision", loca.infoBuildlist, loca.allError, b, links.decisionCommander, "build-it_premium");
            return 1
        }
        if (isRocketAndStorageNotFree) {
            drawErrorbox("notify", loca.noRocketsiloCapacity, loca.allError, b, links.notify);
            return 1
        }
    } else {
        if (error !== null && error !== 0) {
            if (premiumerror) {
                if (showErrorOnPremiumbutton) {
                    drawErrorbox("decision", errorlist[error], loca.allError, b, links[error], buttonClass);
                    return 1
                } else {
                    drawErrorbox("decision", errorlist[error], loca.allError, b, links[error]);
                    return 1
                }
            } else {
                if (isRocketAndStorageNotFree) {
                    drawErrorbox("notify", loca.noRocketsiloCapacity, loca.allError, b, links.notify);
                    return 1
                } else {
                    if (isBusy) {
                        return 1
                    } else {
                        drawErrorbox("notify", errorlist[error], loca.allError, b, "");
                        return 1
                    }
                }
            }
        }
    }
    return 0
}
function initTechDetailsAjax() {
    initializeBuildItButton();
    refreshBars("bar_container", "filllevel_bar")
}
function initGlobalTechtree(c) {
    var d = $("div.techtree[data-id='" + c + "']");
    d.find(".headline").unbind("click").bind("click", function() {
        $(this).next().toggle(function() {
            var a = d.parents(".ui-dialog");
            a.hide();
            $(this).toggleClass("open");
            a.show()
        })
    });
    if (openTree == "all") {
        d.find(".techtree_content").show(0, function() {
            $(this).addClass("open")
        })
    } else {
        if (openTree != null) {
            d.find(".techtree_content_" + openTree).show(0, function() {
                $(this).addClass("open")
            })
        }
    }
}
function initOverlayName() {
    $("div.techtree").each(function() {
        if (typeof ($(this).attr("data-title")) != "undefined") {
            $(this).parent(".overlayDiv").dialog("option", "title", $(this).attr("data-title"))
        }
    })
}
function initTechtree(g) {
    var h = $("div.techtree[data-id='" + g + "']");
    var e = h.find(".techImage").outerHeight(true);
    var f = 20;
    h.find(".techWrapper.depth1").each(function() {
        f += $(this).outerWidth()
    });
    h.css("width", f);
    $(document).ready(function() {
        var d = jsPlumb.getInstance();
        d.Defaults.Container = h.find(".graph");
        d.Defaults.Connector = ["Flowchart", {cornerRadius: 20}];
        d.Defaults.Endpoint = ["Rectangle", {cssClass: "endpoint", width: 1, height: 1}];
        d.Defaults.Anchors = ["ContinuousTop", "ContinuousBottom"];
        var H = {};
        $.each(endpoints, function() {
            var m = h.find(".tech" + this.toString());
            d.addEndpoint(m);
            var k = Math.floor(m.find("a").offset().left);
            var l = Math.floor(m.find("a").offset().top);
            H[this] = [k, l]
        });
        var D;
        do {
            D = false;
            $.each(connections, function() {
                var k = h.find(".tech" + this.source + " a");
                var l = h.find(".tech" + this.target + " a");
                if (k.offset().top >= l.offset().top - 10 && k.offset().top <= l.offset().top + 10) {
                    k.parent().css("margin-top", parseInt(k.parent().css("margin-top").replace(/px/, "")) + e);
                    k.parent().parent().find("a[data-tech-id]").each(function() {
                        H[$(this).attr("data-tech-id")][1] += e
                    });
                    D = true
                }
            })
        } while (D);
        var B = [];
        var F = [];
        for (var C in H) {
            if (B.indexOf(H[C][0]) == -1) {
                B.push(H[C][0])
            }
            if (F.indexOf(H[C][1]) == -1) {
                F.push(H[C][1])
            }
        }
        B.sort(function(k, l) {
            return(k > l ? 1 : -1)
        });
        F.sort(function(k, l) {
            return(k > l ? 1 : -1)
        });
        var b = {};
        for (var G in H) {
            b[G] = {left: B.indexOf(H[G][0]), top: F.indexOf(H[G][1])}
        }
        connections.sort(function(k, l) {
            return(Math.abs(b[k.source]["left"] - b[k.target]["left"]) < Math.abs(b[l.source]["left"] - b[l.target]["left"])) ? -1 : 1
        });
        var w = {hasRequirements: {strokeStyle: "#015100", lineWidth: 3}, hasNotRequirements: {strokeStyle: " #510009", lineWidth: 3}};
        var x = [[0, 0.5, -1, 0], [0, 0.3, -1, 0], [0, 0.7, -1, 0], [0, 0.9, -1, 0]];
        var c = [[1, 0.5, 1, 0], [1, 0.3, 1, 0], [1, 0.7, 1, 0], [1, 0.9, 1, 0]];
        var E = [[0.5, 1, 0, 1], [0.3, 1, 0, 1], [0.7, 1, 0, 1], [0.9, 1, 0, 1]];
        var y = [[0.5, 0, 0, -1], [0.3, 0, 0, -1], [0.7, 0, 0, -1], [0.9, 0, 0, -1]];
        var A = {};
        function a(l, m, n, k) {
            if (!k[l]) {
                k[l] = {}
            }
            if (k[l][m] == undefined) {
                k[l][m] = 0
            }
            ++k[l][m];
            return n[k[l][m] - 1]
        }
        $.each(connections, function() {
            var m = h.find(".tech" + this.source + " a");
            var l = h.find(".tech" + this.target + " a");
            var k = {source: m, target: l, overlays: [["Arrow", {location: -5, paintStyle: w[this.paintStyle], width: 8, length: 8, foldback: 0.8}], ["Label", {label: this.label, cssClass: "label " + this.paintStyle, location: 0.85}]], paintStyle: w[this.paintStyle], hoverPaintStyle: {strokeStyle: "rgb(255, 255, 0)"}};
            if (b[this.target].left < b[this.source].left) {
                if (!lineInCoordinatesBlocked(b, b[this.source].left, b[this.source].top, b[this.source].left, b[this.target].top) && !positionInCoordinatesBlocked(b, b[this.source].left, b[this.target].top) && !lineInCoordinatesBlocked(b, b[this.source].left, b[this.target].top, b[this.target].left, b[this.target].top)) {
                    k.anchors = [a(this.source, "top", y, A), a(this.target, "right", c, A)]
                } else {
                    k.anchors = [a(this.source, "left", x, A), a(this.target, "bottom", E, A)];
                    k.overlays[1][1] = readableVersionOfLabel(k.overlays[1][1], A[this.target].bottom)
                }
            } else {
                if (b[this.target].left > b[this.source].left) {
                    if (!lineInCoordinatesBlocked(b, b[this.source].left, b[this.source].top, b[this.source].left, b[this.target].top) && !positionInCoordinatesBlocked(b, b[this.source].left, b[this.target].top) && !lineInCoordinatesBlocked(b, b[this.source].left, b[this.target].top, b[this.target].left, b[this.target].top)) {
                        k.anchors = [a(this.source, "top", y, A), a(this.target, "left", x, A)]
                    } else {
                        k.anchors = [a(this.source, "right", c, A), a(this.target, "bottom", E, A)];
                        k.overlays[1][1] = readableVersionOfLabel(k.overlays[1][1], A[this.target].bottom)
                    }
                } else {
                    if (b[this.target].top < b[this.source].top - 1 && lineInCoordinatesBlocked(b, b[this.source].left, b[this.source].top, b[this.target].left, b[this.target].top)) {
                        k.anchors = [a(this.source, "left", x, A), a(this.target, "left", x, A)]
                    } else {
                        k.anchors = [a(this.source, "top", y, A), a(this.target, "bottom", E, A)];
                        k.overlays[1][1] = readableVersionOfLabel(k.overlays[1][1], A[this.target].bottom)
                    }
                }
            }
            d.connect(k)
        })
    });
    tabletToggleTechtreeInfos(g)
}
function readableVersionOfLabel(e, f) {
    e.location = (-0.05 * f + 0.85);
    console.log(e);
    var d = e.label.indexOf("/");
    if (d) {
    }
    return e
}
function lineInCoordinatesBlocked(n, p, o, m, q) {
    if (p == m) {
        for (var r in n) {
            if (n[r].left == p && o > n[r].top && q < n[r].top) {
                return true
            }
        }
    } else {
        if (o == q && p > m) {
            for (var k in n) {
                if (n[k].top == o && p > n[k].left && m < n[k].left) {
                    return true
                }
            }
        } else {
            if (o == q && p < m) {
                for (var l in n) {
                    if (n[l].top == o && p < n[l].left && m > n[l].left) {
                        return true
                    }
                }
            }
        }
    }
    return false
}
function positionInCoordinatesBlocked(g, h, e) {
    for (var f in g) {
        if (g[f].left == h && g[f].top == e) {
            return true
        }
    }
    return false
}
var javascriptAvailable = true;
var days = new Array("Mon", "Tus", "Wed", "Thu", "Fri", "Sat", "Sun");
var months = new Array("Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec");
function getFormatedDate(d, f) {
    var e = new Date();
    e.setTime(d);
    str = f;
    str = str.replace("[d]", dezInt(e.getDate(), 2));
    str = str.replace("[D]", days[e.getDay()]);
    str = str.replace("[m]", dezInt(e.getMonth() + 1, 2));
    str = str.replace("[M]", months[e.getMonth()]);
    str = str.replace("[j]", parseInt(e.getDate()));
    str = str.replace("[Y]", e.getFullYear());
    str = str.replace("[y]", e.getFullYear().toString().substr(2, 4));
    str = str.replace("[G]", e.getHours());
    str = str.replace("[H]", dezInt(e.getHours(), 2));
    str = str.replace("[i]", dezInt(e.getMinutes(), 2));
    str = str.replace("[s]", dezInt(e.getSeconds(), 2));
    return str
}
function dezInt(g, m, k) {
    k = (k) ? k : "0";
    var l = (g < 0) ? "-" : "", h = (k == "0") ? l : "";
    g = Math.abs(parseInt(g, 10));
    m -= ("" + g).length;
    for (var n = 1; n <= m; n++) {
        h += "" + k
    }
    h += ((k != "0") ? l : "") + g;
    return h
}
function getFormatedTime(b) {
    hours = Math.floor(b / 3600);
    timeleft = b % 3600;
    minutes = Math.floor(timeleft / 60);
    timeleft = timeleft % 60;
    seconds = timeleft;
    return dezInt(hours, 2) + ":" + dezInt(minutes, 2) + ":" + dezInt(seconds, 2)
}
function tsdpkt(h) {
    var f = "";
    if (h < 0) {
        f = "-"
    }
    h = Math.abs(h);
    var e = h % 1000;
    while (h >= 1000) {
        var g = "";
        if ((h % 1000) < 100) {
            g = "0"
        }
        if ((h % 1000) < 10) {
            g = "00"
        }
        if ((h % 1000) == 0) {
            g = "00"
        }
        h = Math.abs((h - (h % 1000)) / 1000);
        e = h % 1000 + LocalizationStrings.thousandSeperator + g + e
    }
    e = f + e;
    return e
}
function formatTime(f) {
    var e = Math.floor(f / 3600);
    f -= e * 3600;
    var d = Math.floor(f / 60);
    f -= d * 60;
    if (d < 10) {
        d = "0" + d
    }
    if (f < 10) {
        f = "0" + f
    }
    return e + ":" + d + ":" + f
}
function round(f, g) {
    if (g < 1 || g > 14) {
        return false
    }
    var h = Math.pow(10, g);
    var e = (Math.round(f * h) / h).toString();
    if (e.indexOf(".") == -1) {
        e += "."
    }
    e += h.toString().substring(1);
    return e.substring(0, e.indexOf(".") + g + 1)
}
function show_hide_menus(b) {
    if ($(b).is(":visible")) {
        $(b).hide()
    } else {
        $(b).show()
    }
}
function change_class(b) {
    if (document.getElementById(b).className == "closed") {
        document.getElementById(b).className = "opened"
    } else {
        document.getElementById(b).className = "closed"
    }
}
function show_hide_tbl(f) {
    var e = document.getElementById(f);
    try {
        if (e) {
            e.style.display = (e.style.display == "none" ? "table-row" : "none")
        }
    } catch (d) {
        e.style.display = "block"
    }
}
function cntchar(f, d) {
    var e = $(f);
    if (e.val().length > d) {
        e.val(e.val().substr(0, d))
    }
    e.parents("form").find(".cntChars").text(e.val().length)
}
function getSession() {
    return $('meta[name="ogame-session"]').attr("content")
}
function showGalaxy(f, d, e) {
    openParentLocation("index.php?page=galaxy&no_header=1&galaxy=" + f + "&system=" + d + "&planet=" + e)
}
function openParentLocation(c) {
    try {
        window.opener.document.location.href = c
    } catch (d) {
        try {
            window.parent.document.location.href = c
        } catch (d) {
            document.location.href = c
        }
    }
}
function submitOnEnter(d) {
    var c;
    if (window.event) {
        c = window.event.keyCode
    } else {
        if (d) {
            c = d.which
        } else {
            return true
        }
    }
    if (c == 13) {
        trySubmit();
        return false
    } else {
        return true
    }
}
function formSubmitOnEnter(d, e) {
    var f;
    if (window.event) {
        f = window.event.keyCode
    } else {
        if (e) {
            f = e.which
        } else {
            return true
        }
    }
    if (f == 13) {
        document.forms[d].submit();
        return false
    } else {
        return true
    }
}
function setMaxIntInput(e, d) {
    for (var f in d) {
        if (!$(e).find("#ship_" + f).attr("disabled")) {
            $(e).find("#ship_" + f).val(d[f]);
            checkIntInput($(e).find("ship_" + f), 0, d[f])
        }
    }
}
function clearInput(b) {
    $(b).val("")
}
function checkIntInput(g, f, h) {
    var e = $(g).val();
    if (typeof e != "undefined" && e != "") {
        intVal = Math.abs(getValue(e));
        if (h != null) {
            intVal = Math.min(intVal, h)
        }
        $(g).val(intVal)
    }
}
function handlerToSubmitAjaxForm(c) {
    var d = "submit_" + String(c);
    if ($.isFunction(window[d])) {
        window[d]()
    }
    return false
}
function ajaxCall(d, c) {
    $("#" + c + " select").ogameDropDown("destroy");
    $("#" + c).html('<p class="ajaxLoad"></p>');
    $.post(d, function(a) {
        $("#" + c).html(a);
        $("#" + c + " select").ogameDropDown()
    })
}
function ajaxSumbit(e, d, f) {
    $("#" + f + " select").ogameDropDown("destroy");
    $("#" + f).html('<p class="ajaxLoad"><?=LOCA_ALL_AJAXLOAD ?></p>');
    $.post(e, $("#" + d).serialize(), function(a) {
        $("#" + f).html(a);
        $("#" + f + " select").ogameDropDown()
    })
}
Number.prototype.isBetween = function(c, d) {
    return this >= c && this <= d
};
function initLinks() {
    $(document).undelegate("a.bbcodeLink", "click").delegate("a.bbcodeLink", "click", function() {
        if (!isMobile) {
            var b = $(this).attr("href");
            if ($(this).hasClass("internal")) {
                openParentLocation(b);
                return false
            }
            window.location = "redir.php?url=" + escape(b);
            return false
        }
    }).undelegate("a.galaxylink", "click").delegate("a.galaxylink", "click", function() {
        var b = $(this).attr("href");
        openParentLocation(b);
        return false
    })
}
function getValue(b) {
    result = parseInt(b.toString().replace(/^k$/, "1000").replace(/k/, "000").replace(/^0+/, "").replace(/[^0-9]/g, ""));
    return isNaN(result) ? 0 : result
}
function loadScript(d, f) {
    var e = document.createElement("script");
    e.type = "text/javascript";
    if (e.readyState) {
        e.onreadystatechange = function() {
            if (e.readyState == "loaded" || e.readyState == "complete") {
                e.onreadystatechange = null;
                f()
            }
        }
    } else {
        e.onload = function() {
            f()
        }
    }
    e.src = d;
    document.getElementsByTagName("head")[0].appendChild(e)
}
function formatNumber(f, h) {
    var l = number_format(getValue(h), 0, LocalizationStrings.decimalPoint, LocalizationStrings.thousandsSeparator);
    var k = $(f);
    var g = k.getSelection();
    if (k.val() != l) {
        if (k.val().length != l.length) {
            g.start = g.start + (l.length - k.val().length);
            g.end = g.end + (l.length - k.val().length)
        }
    }
    k.val(l);
    if (k.is(":focus")) {
        k.setSelection(g)
    }
}
function initToggleHeader(b) {
    $("a.toggleHeader").click(function() {
        $("#planet").toggleClass("shortHeader");
        $(".c-left").toggleClass("shortCorner");
        $(".c-right").toggleClass("shortCorner");
        changeSetting("headerImage", b + "|" + ($("#planet.shortHeader").length == 1))
    })
}
function initFormValidation() {
    $("form.formValidation").validationEngine({validationEventTrigger: "keyup blur", promptPosition: "centerRight"})
}
Function.prototype.clone = function() {
    var e = this;
    var f = function() {
        return e.apply(this, arguments)
    };
    f.prototype = e.prototype;
    for (var d in e) {
        if (e.hasOwnProperty(d) && d !== "prototype") {
            f[d] = e[d]
        }
    }
    return f
};
function hideTipsOnTabChange() {
    $("select").ogameDropDown("hide");
    Tipped.hideAll()
}
jQuery.fn.slideFadeToggle = function(e, f, d) {
    return this.animate({opacity: "toggle", width: "toggle"}, e, f, d)
};
function focusOnTabChange(e, d) {
    var f = function() {
        $(e).focus()
    };
    if (d == true) {
        $(document).ready(f)
    }
    $(window).unbind("blur").bind("blur", f)
}
function getIEVersion() {
    var b = 999;
    if (navigator.appVersion.indexOf("MSIE") != -1) {
        b = parseFloat(navigator.appVersion.split("MSIE")[1])
    }
    return b
}
function refreshBars(f, h, e) {
    var g = $("." + f);
    g.each(function() {
        var a = $(this), o = a.data("currentAmount"), p = a.data("capacity"), n = o / p * 100, b = a.find("." + h);
        if (n > 100) {
            n = 100
        } else {
            if (n == 0) {
                n = 0
            } else {
                if (n < 1.3) {
                    n = 1.3
                }
            }
        }
        b.css("width", n + "%");
        if (n < 90) {
            b.attr("class", h + " filllevel_undermark")
        } else {
            if (n > 90 && n < 100) {
                b.attr("class", h + " filllevel_middlemark")
            } else {
                b.attr("class", h + " filllevel_overmark")
            }
        }
        if (e) {
            var c = a.find("." + e), d = c.data("premiumPercent");
            if ((n + d) > 100) {
                d = 100 - n
            }
            c.css("width", d + "%")
        }
    })
}
function changeTooltip(e, f) {
    var d = $(e);
    if (d.length == 0) {
        return
    }
    removeTooltip(d);
    d.attr("title", f);
    initTooltips(d)
}
function removeTooltip(d) {
    var c = $(d);
    c.each(function() {
        if ($(this).data("tooltipLoaded")) {
            $(this).data("tooltipLoaded", false);
            Tipped.remove($(this)[0])
        }
    })
}
function getTooltipOptions(d) {
    var f = $(d);
    var e = {skin: "cloud", maxWidth: 300, closeButton: false, hideOn: [{element: "self", event: "mouseleave"}, {element: "tooltip", event: "mouseenter"}]};
    if (window.location.href.indexOf("galaxy") !== -1) {
        e.maxWidth = 400
    }
    if (f.hasClass("tooltipPremium")) {
        e.skin = "premium"
    }
    if (f.hasClass("tooltipLeft")) {
        e.hook = {target: "leftmiddle", tooltip: "righttop"}
    } else {
        if (f.hasClass("tooltipRight")) {
            e.hook = {target: "rightmiddle", tooltip: "lefttop"}
        } else {
            if (f.hasClass("tooltipBottom")) {
                e.hook = {target: "bottommiddle", tooltip: "topmiddle"}
            }
        }
    }
    if (f.data("tooltip-width")) {
        e.maxWidth = f.data("tooltip-width")
    }
    if (isMobile || f.hasClass("tooltipClose")) {
        e.hideOthers = true;
        e.hideOn = false
    }
    e.afterUpdate = function(a, c) {
        if (isMobile && f.data("tooltip-button")) {
            var h = $(document.createElement("div")).addClass("tooltipButton");
            $(document.createElement("a")).addClass("btn_blue").attr("href", "javascript:void(0);").html(f.data("tooltip-button")).bind("click", function(g) {
                if ($(c).not("a") && $(c).find("a").length) {
                    c = $(c).find("a")[0]
                }
                var l = document.createEvent("MouseEvents");
                l.initMouseEvent("click", true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
                c.dispatchEvent(l)
            }).appendTo(h);
            $(a).append(h)
        }
        if (isMobile || f.hasClass("tooltipClose")) {
            var b = $(document.createElement("div")).addClass("close-tooltip");
            $(a).prepend(b)
        }
        Tipped.refresh(c)
    };
    return e
}
function getTooltipSelector(e) {
    var f = ".tooltipPremium, .tooltip, .tooltipRight, .tooltipLeft, .tooltipBottom, .tooltipClose, .tooltipHTML, .tooltipRel, .tooltipAJAX, .tooltipCustom, .markItUpButton a";
    if (typeof (e) == "undefined") {
        e = f
    } else {
        if (typeof (e) == "string" && !e.match(/\.tooltip/)) {
            var g = f.split(", ");
            var h = e;
            for (i in g) {
                e += ", " + h + " " + g[i]
            }
        }
    }
    return e
}
function sanitizeTooltip(b) {
    return b.replace(/<\s*script/g, "&lt;script")
}
function initTooltips(d) {
    initTooltipSkins();
    d = getTooltipSelector(d);
    function f(b) {
        var a = b.split("|");
        var c = $(document.createElement("h1")).html(a[0]);
        var k = $(document.createElement("div")).addClass("splitLine");
        var l = $(document.createElement("div")).css("display", "none").addClass("htmlTooltip").append(c).append(k).append(a[1]);
        return l[0]
    }
    removeTooltip(d);
    function e(b) {
        var a = $(b);
        if (a.data("tooltipLoaded")) {
            return
        }
        a.data("tooltipLoaded", true);
        if (isMobile && a.hasClass("js_hideTipOnMobile")) {
            a.attr("title", "");
            return
        }
        var c = getTooltipOptions(a);
        if (a.hasClass("tooltipCustom")) {
            if (c.hideOn != false) {
                c.hideOn = [{element: "self", event: "mouseleave"}, {element: "tooltip", event: "mouseleave"}]
            }
            c.afterUpdate = function(h) {
                $(h).find(".tooltipCustom").each(function(g, m) {
                    var n = getTooltipOptions(a);
                    if ($(this).hasClass("tooltipHTML")) {
                        n.inline = true;
                        n.hideOthers = false;
                        Tipped.create(this, f(sanitizeTooltip($(this).attr("title"))), n)
                    } else {
                        n.hideOthers = false;
                        Tipped.create(this, sanitizeTooltip($(this).attr("title")), n)
                    }
                })
            }
        }
        if (a.hasClass("tooltipHTML")) {
            if (typeof (a.attr("title")) == "undefined") {
                return
            }
            Tipped.create(a[0], f(sanitizeTooltip(a.attr("title"))), c);
            return
        }
        if (a.hasClass("tooltipRel")) {
            c.inline = true;
            Tipped.create(a[0], a.attr("rel"), c);
            return
        }
        if (a.hasClass("tooltipAJAX")) {
            $.get(a.attr("rel"), {}, function(h) {
                Tipped.create(a[0], h, c)
            });
            return
        }
        if (typeof (a.attr("title")) == "undefined" || a.attr("title").length == 0) {
            return
        }
        Tipped.create(a[0], sanitizeTooltip(a.attr("title")), c)
    }
    $(document).undelegate(d, "touchstart.tooltipClick").delegate(d, "touchstart.tooltipClick", function(a) {
        if (Tipped.visible(this)) {
            var b = document.createEvent("MouseEvents");
            b.initMouseEvent("click", true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 0, null);
            this.dispatchEvent(b);
            a.preventDefault();
            a.stopPropagation()
        }
    });
    if (typeof (d) == "string") {
        $(document).undelegate(d, "mouseenter.tooltipLoad touchstart.tooltipLoad").delegate(d, "mouseenter.tooltipLoad touchstart.tooltipLoad", function(a) {
            e(this)
        })
    } else {
        $(d).each(function() {
            e(this)
        })
    }
}
function initTooltipSkins() {
    jQuery.extend(Tipped.Skins, {cloud: {border: {size: 1, color: [{position: 0, color: "#44576b"}, {position: 1, color: "#2f3b47"}]}, background: {color: [{position: 0, color: "#303a46"}, {position: 0.49, color: "#242d38"}, {position: 0.81, color: "#10181f"}, {position: 1, color: "#0d1014"}]}, offset: {x: 0, y: -1, mouse: {x: -12, y: -12}}, stem: {height: 6, width: 11, offset: {x: 5, y: 5}, spacing: 0}}, premium: {border: {size: 1, color: [{position: 0, color: "#000"}, {position: 1, color: "#000"}]}, background: {color: [{position: 0, color: "#a3e4f0"}, {position: 0.15, color: "#1cbad7"}, {position: 1, color: "#0f78b1"}]}, offset: {x: 0, y: -1, mouse: {x: -12, y: -12}}, stem: {height: 6, width: 11, offset: {x: 5, y: 5}, spacing: 0}}})
}
function initTrader() {
    var d = false;
    var e = $.deparam.fragment();
    if (typeof (e.animation) != "undefined") {
        if (e.animation == "false") {
            d = true
        }
    }
    var f = {$link: null, $panel: null, close: function() {
            this.$panel.hide()
        }, setPanel: function() {
            this.$panel = $("#js_togglePanel" + traderObj.traderId.replace(/#div_trader/, ""))
        }, init: function(k) {
            var c = $(k + " .selectWrapper");
            k = k.replace(/#div_trader/, "");
            if (!c) {
                return
            }
            this.$link = $("#js_toggleLink" + k);
            this.$panel = $("#js_togglePanel" + k);
            var a = this.$panel;
            a.hide();
            this.$link.unbind("click.selectLink").bind("click.selectLink", function(g) {
                k = traderObj.traderId.replace(/#div_trader/, "");
                if ($(this).hasClass("honor")) {
                    return false
                }
                if (a.find("ul.active").has("li").length) {
                    a.toggle()
                }
                return false
            });
            $(".selectWrapper .source").unbind("click.selectPlanetOrMoon").bind("click.selectPlanetOrMoon", function(g) {
                f.selectPlanetOrMoon(this)
            });
            $("#" + a.attr("id")).find("li").unbind("click.selectSource").bind("click.selectSource", function(g) {
                traderObj.selectSource(this);
                return false
            });
            f.outerClick(c, a);
            var b = null, l = 8000;
            c.unbind("mouseout.closeSelect").bind("mouseout.closeSelect", function(g) {
                g = g || window.event;
                var h = (g.relatedTarget) ? g.relatedTarget : g.toElement;
                if (h == c || f.isChildOf(h, c)) {
                    return
                }
                b = setTimeout(function() {
                    a.hide()
                }, l)
            }).unbind("mouseover.clearTimeout").bind("mouseover.clearTimeout", function() {
                if (b) {
                    clearTimeout(b)
                }
            })
        }, isChildOf: function(a, b) {
            b = b[0];
            while (a && a != b) {
                a = a.parentNode
            }
            return a == b
        }, outerClick: function(b, a) {
            $("body").bind("click.outerClick", function(c) {
                if (!c) {
                    c = window.event
                }
                if (!($(c.target).closest(".selectWrapper") == b) && a.is(":visible") != false) {
                    a.toggle()
                }
            })
        }, selectPlanetOrMoon: function(b) {
            var o;
            if ($(b).hasClass("selected")) {
                return false
            }
            var p = "", a = null;
            if ($(b).hasClass("js_honor")) {
                $(traderObj.traderId + " .selectWrapper .source").removeClass("selected");
                $(traderObj.traderId + " .js_honor").addClass("selected");
                $(traderObj.traderId + " .toggleLink").addClass("honor");
                var p = '<img height="18" src="http://gf1.geo.gfsrv.net/cdnfc/f35675179214f8f6f0f8d75740d7db.png" alt="' + loca.honorPoints + '"/><span class="option_source">' + loca.honorPoints + "</span>";
                $(traderObj.traderId + " .js_valSourcePlanet").html(p);
                $(traderObj.traderId + " .normalResource").hide();
                $(traderObj.traderId + " .honorResource").show();
                return false
            }
            var q = $(traderObj.traderId + " .togglePanel");
            var c = "planet";
            if ($(b).hasClass("js_moon")) {
                var n = 0;
                c = "moon";
                for (o in traderObj.planets) {
                    if (traderObj.planets[o].isMoon) {
                        n++
                    }
                }
                if (n == 0) {
                    return false
                }
            }
            var r = traderObj.planets[traderObj.current.planet];
            q.find("ul").hide().removeClass("active");
            q.find("ul." + c).show().addClass("active");
            $(traderObj.traderId + " .toggleLink").removeClass("honor");
            $(traderObj.traderId + " .selectWrapper .source").removeClass("selected");
            $(traderObj.traderId + " .js_" + c).addClass("selected");
            if ($(b).hasClass("js_moon") ? r.isMoon : !r.isMoon) {
                a = traderObj.current.planet
            } else {
                if (r.otherPlanet != null && typeof (traderObj.planets[r.otherPlanet]) != "undefined") {
                    a = r.otherPlanet
                } else {
                    a = q.find("ul." + c + " li:first").attr("id")
                }
            }
            $(traderObj.traderId + " .normalResource").show();
            $(traderObj.traderId + " .honorResource").hide();
            q.find("ul li#" + a).click();
            return false
        }, setToggleLink: function(b) {
            var c = traderObj.traderId.replace(/#div_trader/, ""), h = $(b).find("span"), a = traderObj.planets[$(b).attr("id")].name;
            if (a != h.text()) {
                h.attr("title", a.replace(/\|/g, "&#124;"))
            }
            this.$link = $("#js_toggleLink" + c);
            this.$link.html($(b).html())
        }};
    traderObj = {traderBGPos: {"#div_traderResources": "0px 0px", "#div_traderAuctioneer": "-546px 0px", "#div_traderScrap": "0px -220px", "#div_traderImportExport": "-546px -220px"}, timer: 500, planets: {}, honorOutput: 0, price: 0, deficit: 0, priceImportExport: 0, sumResources: 0, traderId: null, resources: ["Metal", "Crystal", "Deuterium"], current: {planet: currentPlanetId, resource: "", sliderValue: ""}, barXPos: -180, barYPos: 0, percentPaid: 0, switchingTrader: false, checkOverbidden: function() {
            if (playerBid == false || playerBid >= getValue($(".detail_value.currentSum").html())) {
                $(".overbid_text").hide()
            } else {
                $(".overbid_text").show()
            }
        }, refresh: function() {
            var c = traderObj.traderId;
            if ("#" + $(this).closest(".div_trader").attr("id") !== c) {
                return
            }
            var b = $(this).attr("class");
            var a = new RegExp(/\b(js_slider\w*)\b/);
            b = (a.test(b)) ? RegExp.$1 : false;
            if (!b) {
                return
            }
            traderObj.current.sliderValue = $(this).slider("value");
            traderObj.current.resource = b.replace("js_slider", "").toLowerCase();
            if (traderObj.current.resource == "honor") {
                traderObj.honorOutput = traderObj.current.sliderValue
            } else {
                traderObj.planets[traderObj.current.planet].output[traderObj.current.resource] = traderObj.current.sliderValue
            }
            formatNumber($(c + " .js_amount.js_" + traderObj.current.resource), traderObj.current.sliderValue);
            if (c == "#div_traderAuctioneer") {
                traderObj.price = getValue($(c + " .js_price").html());
                traderObj.sumAuctioneer();
                traderObj.checkOverbidden()
            } else {
                if (c == "#div_traderImportExport") {
                    traderObj.sumImportExport()
                }
            }
        }, resetValues: function(b, c) {
            b = b || traderObj.traderId;
            c = c || false;
            for (var h in traderObj.planets) {
                for (var a in traderObj.planets[h].output) {
                    traderObj.planets[h].output[a] = 0
                }
            }
            traderObj.honorOutput = 0;
            $(".js_amount").val(0);
            if (traderObj.traderId == "#div_traderAuctioneer") {
                traderObj.sumAuctioneer()
            } else {
                if (traderObj.traderId == "#div_traderImportExport") {
                    traderObj.sumImportExport()
                }
            }
            if (c) {
                b = b.replace(/#div_trader/, "");
                $("#js_togglePanel" + b).find("li#" + currentPlanetId).click()
            }
            f.close()
        }, resetMaxAmount: function(c, r) {
            var b = traderObj.traderId;
            var s = traderObj.resources;
            for (var o in traderObj.planets) {
                for (var p = 0; p < s.length; p++) {
                    var a = s[p].toLowerCase();
                    traderObj.planets[o].input[a] = c[o][a]
                }
            }
            for (var q = 0; q < s.length; q++) {
                a = s[q].toLowerCase();
                var u = traderObj.planets[traderObj.current.planet].input[a];
                $(b + " .max_planet_" + a).html(number_format(u, 0))
            }
            honorScore = r;
            $(b + " .max_planet_honor").html(number_format(Math.max(0, r), 0));
            f.close()
        }, selectSource: function(a) {
            traderObj.current.planet = $(a).attr("id");
            f.close();
            f.setToggleLink($(a));
            var o = traderObj.traderId;
            var r = traderObj.current.planet;
            var s = traderObj.resources;
            for (var q = 0; q < s.length; q++) {
                var b = s[q].toLowerCase();
                var u = traderObj.planets[r].input[b];
                if (o == "#div_traderImportExport") {
                    var c = (traderObj.priceImportExport / multiplier[b]) - traderObj.sumResources + traderObj.planets[r].output[b];
                    var p = Math.min(u, c)
                }
                $(o + " .max_planet_" + b).html(number_format(u, 0));
                $(o + " .js_amount.js_" + b).val(number_format(traderObj.planets[r].output[b], 0))
            }
        }, selectTrader: function(o, a, m) {
            a = a || traderObj.timer;
            $.bbq.pushState({page: o, animation: "false"});
            $(".planetlink, .moonlink").fragment({page: o, animation: "false"});
            traderObj.traderId = "#div_" + o;
            var n = traderObj.traderId, p = $(".back_to_overview");
            var c = function() {
                if (n == "#div_traderAuctioneer" || n == "#div_traderImportExport") {
                    traderObj.resetValues(null, true)
                }
                var g = function() {
                    $("#traderOverview").find(".c-left, .c-right").addClass("c-small");
                    p.show();
                    if (n == "#div_traderAuctioneer" || n == "#div_traderImportExport") {
                        p.addClass("left");
                        p.removeClass("right")
                    } else {
                        if (n == "#div_traderResources" || n == "#div_traderScrap") {
                            p.addClass("right");
                            p.removeClass("left")
                        }
                    }
                    $("#planet #header_text h2").html(loca[o]).parent().show()
                };
                if (animation && !d) {
                    $("#traderOverview").find(".c-left, .c-right").hide();
                    $("#planet").animate({backgroundPosition: traderObj.traderBGPos[n], height: "250px"}, a, function() {
                        $("#planet").addClass("detail");
                        $("#traderOverview").find(".c-left, .c-right").show();
                        g();
                        if (n == "#div_traderResources") {
                            showTradeNowButton()
                        }
                    })
                } else {
                    d = false;
                    $("#planet").css("background-position", traderObj.traderBGPos[n]).css("height", "250px");
                    g();
                    if (n == "#div_traderResources") {
                        showTradeNowButton()
                    }
                }
                f.setPanel();
                $("#planet").addClass("detail");
                $(".js_trader").hide();
                $(n).show();
                if (n == "#div_traderResources" && typeof (m) != "undefined") {
                    $(n + " .ui-tabs").tabs("option", "active", m)
                }
                traderObj.switchingTrader = false
            };
            if ($(traderObj.traderId).length == 0) {
                var b = o.toLowerCase().replace(/^trader/, "");
                $.ajax({url: traderUrl, type: "POST", data: {show: b, ajax: 1}, beforeSend: function() {
                        $("#loadingOverlay").addClass(b).show()
                    }, success: function(g) {
                        $("#inhalt").append(g);
                        $("#loadingOverlay").hide().removeClass(b);
                        c()
                    }, error: function() {
                        fadeBox(loca.error, true);
                        $("#loadingOverlay").hide().removeClass(b)
                    }})
            } else {
                c()
            }
        }, submitAuction: function() {
            var c = traderObj.traderId;
            var b = getValue($(c + " .js_auctioneerSum").html());
            if (!$(c + " .right_box .pay").hasClass("disabled") && traderObj.price > 0 && traderObj.deficit <= 0) {
                $(c + " .right_box .pay").addClass("disabled");
                var h = {planets: {}, honor: traderObj.honorOutput};
                for (var a in traderObj.planets) {
                    h.planets[a] = traderObj.planets[a].output
                }
                $.ajax({url: auctionUrl, type: "POST", data: {bid: h, token: auctioneerToken, ajax: 1}, dataType: "json", success: function(g) {
                        auctioneerToken = g.newToken;
                        fadeBox(g.message, g.error);
                        if (!g.error) {
                            traderObj.resetValues(c, false);
                            traderObj.resetMaxAmount(g.planetResources, g.honor);
                            traderObj.reloadResources()
                        }
                    }, error: function() {
                        fadeBox(loca.error, true)
                    }})
            }
            return false
        }, submitImportExport: function() {
            if (!$(traderObj.traderId + " .right_box .pay").hasClass("disabled")) {
                $(traderObj.traderId + " .right_box .pay").addClass("disabled");
                var a = {planets: {}, honor: traderObj.honorOutput};
                for (planetId in traderObj.planets) {
                    a.planets[planetId] = traderObj.planets[planetId].output
                }
                $.ajax({url: importUrl, type: "POST", data: {action: "trade", bid: a, token: importToken, ajax: 1}, dataType: "json", success: function(b) {
                        importToken = b.newToken;
                        fadeBox(b.message, b.error);
                        if (!b.error) {
                            for (planetId in traderObj.planets) {
                                traderObj.planets[planetId].output = {metal: 0, crystal: 0, deuterium: 0}
                            }
                            $(traderObj.traderId + " .bargain_overlay").show();
                            $(traderObj.traderId + " .payment").hide();
                            $(traderObj.traderId + " .image_140px a").addClass("slideIn");
                            traderObj.reloadResources();
                            traderObj.updateImportItem(b.item);
                            traderObj.refresh()
                        }
                    }, error: function() {
                        fadeBox(loca.error, true)
                    }})
            }
            return false
        }, reloadResources: function(a) {
            getAjaxResourcebox(a)
        }, changeImportItem: function() {
            if ($(traderObj.traderId + " .import_bargain.change").hasClass("disabled")) {
                if (darkMatter < importChangeCost) {
                    errorBoxDecision(LocalizationStrings.error, loca.errorNotEnoughDM, LocalizationStrings.yes, LocalizationStrings.no, redirectPremium)
                }
            } else {
                $(traderObj.traderId + " .import_bargain.change").addClass("disabled");
                $.ajax({url: importUrl, type: "POST", data: {action: "bargain", token: importToken, ajax: 1}, dataType: "json", success: function(a) {
                        importToken = a.newToken;
                        fadeBox(a.message, a.error);
                        if (!a.error) {
                            traderObj.updateImportItem(a.item);
                            traderObj.reloadResources(function() {
                                if (a.item.offersLeft > 0 && darkMatter >= importChangeCost) {
                                    $(traderObj.traderId + " .import_bargain.change").removeClass("disabled")
                                } else {
                                    $(traderObj.traderId + " .import_bargain.change").addClass("disabled")
                                }
                            });
                            traderObj.refresh()
                        }
                    }, error: function() {
                        fadeBox(loca.error, true)
                    }})
            }
            return false
        }, updateImportItem: function(a) {
            $(traderObj.traderId + " .got_item_text").html(a.itemText);
            $(traderObj.traderId + " .bargain_text").html(a.bargainText);
            $(traderObj.traderId + " .bargain_cost").html(a.bargainCostText);
            importChangeCost = a.bargainCost;
            $(traderObj.traderId + " .image_140px img").attr("src", "/cdn/img/item-images/" + a.image + "-140x.png");
            removeTooltip($(traderObj.traderId + " .image_140px a"));
            $(traderObj.traderId + " .image_140px a").attr("ref", a.uuid).removeClass("tooltip").addClass("tooltipHTML").attr("title", a.tooltip);
            initTooltips($(traderObj.traderId + " .image_140px a"));
            $(traderObj.traderId + " .detail_button .amount").text(a.amount)
        }, takeImportItem: function() {
            if (!$(traderObj.traderId + " .import_bargain.take").hasClass("disabled")) {
                $(traderObj.traderId + " .import_bargain.change").addClass("disabled");
                $(traderObj.traderId + " .import_bargain.take").addClass("disabled");
                $(traderObj.traderId + " .import_bargain.change").addClass("hidden");
                $(traderObj.traderId + " .import_bargain.take").addClass("hidden");
                $(traderObj.traderId + " .bargain_cost").addClass("hidden");
                $.ajax({url: importUrl, type: "POST", data: {action: "takeItem", token: importToken, ajax: 1}, dataType: "json", success: function(a) {
                        importToken = a.newToken;
                        fadeBox(a.message, a.error);
                        if (!a.error) {
                            var b = a.item.ref;
                            changeTooltip($(".detail_button[ref='" + b + "']"), a.item.title);
                            $(".detail_button[ref='" + b + "'] span.amount, #itemDetails[data-uuid='" + b + "'] span.amount").html(tsdpkt(a.item.amount));
                            if (a.item.canBeActivated) {
                                $('#itemDetails[data-uuid="' + b + '"] a.activateItem').removeClass("build-it_disabled").addClass("build-it")
                            } else {
                                $('#itemDetails[data-uuid="' + b + '"] a.activateItem').addClass("build-it_disabled").removeClass("build-it")
                            }
                            if (a.item.newOffer == false) {
                                $(traderObj.traderId + " .bargain_text").html(a.item.noOfferMessage)
                            } else {
                                traderObj.resetImport(a.item.newOffer)
                            }
                        }
                    }, error: function() {
                        fadeBox(loca.error, true)
                    }})
            }
            return false
        }, resetImport: function(a) {
            importChangeCost = a.bargainCost;
            if (darkMatter >= importChangeCost) {
                $(traderObj.traderId + " .import_bargain.change").removeClass("disabled")
            } else {
                $(traderObj.traderId + " .import_bargain.change").addClass("disabled")
            }
            $(traderObj.traderId + " .import_bargain.take").removeClass("disabled");
            $(traderObj.traderId + " .import_bargain.change").removeClass("hidden");
            $(traderObj.traderId + " .import_bargain.take").removeClass("hidden");
            $(traderObj.traderId + " .bargain_cost").removeClass("hidden");
            $(traderObj.traderId + " .bargain_overlay").hide();
            $(traderObj.traderId + " .payment").show();
            $(traderObj.traderId + " .image_140px img").attr("src", "/cdn/img/trader/container_" + a.rarity + ".jpg");
            $(traderObj.traderId + " .image_140px a").removeClass("slideIn").attr("ref", "").removeClass("tooltipHTML").addClass("tooltip").removeClass("r_common_140px").removeClass("r_uncommon_140px").removeClass("r_rare_140px").removeClass("r_epic_140px").removeClass("r_buddy_140px").addClass("r_" + a.rarity + "_140px");
            changeTooltip($(traderObj.traderId + " .image_140px a"), a.tooltip);
            $(traderObj.traderId + " .js_import_price").removeClass("green_text").text(number_format(a.price, 0));
            $(traderObj.traderId + " .image_140px .amount").text("?");
            traderObj.priceImportExport = getValue($(".js_import_price").html());
            traderObj.resetValues(null, true);
            traderObj.init()
        }, sumAuctioneer: function() {
            var k = traderObj.traderId;
            var a = traderObj.price;
            if (a == 0) {
                $("#div_traderAuctioneer .js_amount").attr("disabled", "disabled")
            } else {
                $("#div_traderAuctioneer .js_amount").removeAttr("disabled")
            }
            var c = 0;
            for (var b in traderObj.planets) {
                var l = traderObj.planets[b].output;
                c += parseInt(l.metal) * multiplier.metal + parseInt(l.crystal) * multiplier.crystal + parseInt(l.deuterium) * multiplier.deuterium
            }
            c += parseInt(traderObj.honorOutput) * multiplier.honor;
            c = Math.floor(c);
            traderObj.deficit = (Number(auctioneer.calculateDeficit()) - Number(c));
            if (traderObj.deficit > 0) {
                $(" .js_deficit").html(number_format(traderObj.deficit, 0))
            } else {
                $(" .js_deficit").html(number_format(0, 0))
            }
            if (c > 0) {
                $("#div_traderAuctioneer .js_auctioneerSum").html("+ " + number_format(c, 0))
            } else {
                $("#div_traderAuctioneer .js_auctioneerSum").html("")
            }
            $("#div_traderAuctioneer .js_alreadyBidden").html(number_format(Math.floor(playerBid + c), 0));
            if (a > 0 && traderObj.deficit <= 0) {
                $("#div_traderAuctioneer .right_box .pay").removeClass("disabled")
            } else {
                $("#div_traderAuctioneer .right_box .pay").addClass("disabled")
            }
        }, sumImportExport: function() {
            var n = traderObj.traderId;
            var m = 0;
            var a = 0;
            var b = 0;
            traderObj.sumResources = 0;
            for (var c in traderObj.planets) {
                var o = traderObj.planets[c].output;
                m += parseInt(o.metal) * multiplier.metal;
                a += parseInt(o.crystal) * multiplier.crystal;
                b += parseInt(o.deuterium) * multiplier.deuterium
            }
            var p = traderObj.honorOutput * multiplier.honor;
            traderObj.sumResources += m + a + b + p;
            if (traderObj.sumResources >= traderObj.priceImportExport) {
                traderObj.sumResources = traderObj.priceImportExport
            }
            $(n + " .js_sum_price").html(number_format(Math.floor(traderObj.sumResources), 0));
            if (traderObj.sumResources >= traderObj.priceImportExport) {
                $(n + " .js_import_price").addClass("green_text");
                $(n + " .right_box .pay").removeClass("disabled")
            } else {
                $(n + " .js_import_price").removeClass("green_text");
                $(n + " .right_box .pay").addClass("disabled")
            }
        }, updateValues: function(w) {
            var c = traderObj.traderId;
            if (c !== "#" + w.closest(".div_trader").attr("id")) {
                return
            }
            var r = w.attr("class");
            var a = new RegExp(/\b(js_slider\w*)\b/);
            r = (a.test(r)) ? RegExp.$1 : false;
            if (!r) {
                return
            }
            var s = traderObj.current.planet;
            var p, b, v;
            if (r.indexOf("More") != -1) {
                v = r.replace("More", "");
                p = "More"
            } else {
                if (r.indexOf("Max") != -1) {
                    v = r.replace("Max", "");
                    p = "Max"
                }
            }
            traderObj.current.resource = v.replace("js_slider", "").toLowerCase() || null;
            var u = traderObj.current.resource;
            var q = 0;
            if (u == "honor") {
                q = Math.max(0, honorScore)
            } else {
                q = traderObj.planets[s].input[u]
            }
            b = getValue($(c + " ." + v + "Input").val());
            if (p == "More") {
                if (c == "#div_traderImportExport") {
                    if (traderObj.sumResources <= traderObj.priceImportExport - 1000 * multiplier[u]) {
                        b += 1000
                    } else {
                        if (traderObj.sumResources < traderObj.priceImportExport) {
                            b += Math.ceil((traderObj.priceImportExport - traderObj.sumResources) / multiplier[u])
                        }
                    }
                } else {
                    if (c == "#div_traderAuctioneer" && traderObj.price > 0) {
                        b += 1000
                    }
                }
                if (b >= q) {
                    b = Math.max(0, q)
                }
            } else {
                if (p == "Max") {
                    if (c == "#div_traderImportExport") {
                        if (traderObj.sumResources == 0) {
                            b = Math.min(q, Math.ceil(traderObj.priceImportExport / multiplier[u]))
                        } else {
                            if (traderObj.sumResources.isBetween(0, traderObj.priceImportExport - 1)) {
                                b = Math.min(q, b + Math.ceil((traderObj.priceImportExport - traderObj.sumResources) / multiplier[u]));
                                b = Math.max(0, b)
                            }
                        }
                    } else {
                        if (c == "#div_traderAuctioneer" && traderObj.price > 0) {
                            b = Math.min(q, Math.ceil(getValue($(c + " .js_deficit").html()) / multiplier[u] + b))
                        }
                    }
                    if (u == "honor" && b < 0) {
                        b = 0
                    }
                }
            }
            $(c + " .js_amount." + v + "Input").val(number_format(b, 0));
            if (u == "honor") {
                traderObj.honorOutput = b
            } else {
                traderObj.planets[s].output[u] = b
            }
            if (c == "#div_traderImportExport") {
                traderObj.sumImportExport()
            } else {
                if (c == "#div_traderAuctioneer" && traderObj.price > 0) {
                    traderObj.sumAuctioneer();
                    traderObj.checkOverbidden()
                }
            }
        }, updateValuesInputCanged: function(B) {
            var c = traderObj.traderId;
            if (c !== "#" + B.closest(".div_trader").attr("id")) {
                return
            }
            var v = B.attr("class");
            var a = new RegExp(/\b(js_slider\w*)\b/);
            v = (a.test(v)) ? RegExp.$1 : false;
            if (!v) {
                return
            }
            var A = v.replace("Input", "");
            var x = A.replace("js_slider", "").toLowerCase();
            var w = traderObj.current.planet;
            var u = 0;
            if (x == "honor") {
                u = Math.max(0, honorScore)
            } else {
                u = parseInt(traderObj.planets[w].input[x])
            }
            var b = 0;
            if (c == "#div_traderImportExport") {
                var s = 0;
                for (var r in traderObj.planets) {
                    var y = traderObj.planets[r].output;
                    if (x != "metal") {
                        s += Math.floor(parseInt(y.metal) * multiplier.metal)
                    }
                    if (x != "crystal") {
                        s += Math.floor(parseInt(y.crystal) * multiplier.crystal)
                    }
                    if (x != "deuterium") {
                        s += Math.floor(parseInt(y.deuterium) * multiplier.deuterium)
                    }
                }
                b = Math.min(getValue(B.val()), Math.ceil((traderObj.priceImportExport - s) / multiplier[x]))
            } else {
                if (c == "#div_traderAuctioneer") {
                    b = getValue(B.val())
                }
            }
            b = Math.min(b, u);
            traderObj.planets[w].output[x] = b;
            if (x == "honor") {
                traderObj.honorOutput = b
            } else {
                traderObj.planets[w].output[x] = b
            }
            if (c == "#div_traderImportExport") {
                traderObj.sumImportExport()
            } else {
                if (c == "#div_traderAuctioneer") {
                    traderObj.sumAuctioneer();
                    traderObj.checkOverbidden()
                }
            }
            formatNumber(c + " .js_amount." + A + "Input", b)
        }, init: function() {
            $(".honorResource").hide();
            $("#menuTable a.trader").unbind("click.gotoTrader").bind("click.gotoTrader", function(a) {
                a.preventDefault();
                traderObj.switchTrader("traderResources")
            });
            $(window).unbind("hashchange.switchTrader").bind("hashchange.switchTrader", function(a) {
                var b = $.deparam.fragment(a.fragment);
                if (typeof (b.page) == "undefined" || b.page == "" && traderObj.traderId != null) {
                    traderObj.returnToOverview()
                } else {
                    traderObj.switchTrader(b.page)
                }
            });
            $(".small_back_to_overview").unbind("mouseenter").unbind("mouseout").bind("mouseenter", function() {
                $("#header_text").css("background-position", "0 -250px")
            }).bind("mouseout", function() {
                $("#header_text").css("background-position", "0 0")
            })
        }, initSliderTrader: function(a) {
            $(a + " .js_valButton").unbind("click.valControl");
            $(a + " .js_amount").unbind("keyup.inputVal");
            f.init(a);
            $(a + " .js_valButton").bind("click.valControl", function(b) {
                traderObj.updateValues($(this));
                b.stopPropagation()
            });
            $(a + " .js_amount").bind("keyup.inputVal", function(b) {
                traderObj.updateValuesInputCanged($(this));
                b.stopPropagation()
            })
        }, initImportExport: function() {
            traderObj.planets = planetResources;
            traderObj.priceImportExport = getValue($(".js_import_price").html());
            traderObj.initSliderTrader("#div_traderImportExport");
            $("#div_traderImportExport .right_box .pay").bind("click", function() {
                traderObj.submitImportExport()
            });
            $("#div_traderImportExport .import_bargain.change").bind("click", function() {
                traderObj.changeImportItem()
            });
            $("#div_traderImportExport .import_bargain.take").bind("click", function() {
                traderObj.takeImportItem()
            })
        }, switchTrader: function(a) {
            if (traderObj.switchingTrader) {
                return
            }
            traderObj.switchingTrader = true;
            Tipped.hideAll();
            $("#planet .close_details:visible").click();
            if ("#div_" + a == traderObj.traderId) {
                return
            }
            if (traderObj.traderId != null || a == "" || a == null) {
                traderObj.returnToOverview();
                if (animation && !d) {
                    setTimeout(function() {
                        traderObj.selectTrader(a)
                    }, 500)
                } else {
                    traderObj.selectTrader(a)
                }
            } else {
                traderObj.selectTrader(a)
            }
        }, returnToOverview: function() {
            Tipped.hideAll();
            $("#planet #header_text h2").empty().parent().hide();
            $("#traderOverview").find(".c-left, .c-right").hide();
            var a = traderObj.traderId;
            if (!a) {
                return
            }
            $(a).hide();
            $("#callTrader").hide();
            if (animation && !d) {
                $("#planet h2").hide();
                $("#planet").animate({backgroundPosition: "-273px 0px", height: "470px"}, 500, function() {
                    $("#planet h2").show();
                    $("#planet").removeClass("detail");
                    $("#traderOverview").find(".c-left, .c-right").show();
                    $(".js_trader").show()
                })
            } else {
                $("#planet").removeClass("detail").css("background-position", "-273px 0px").css("height", "470px");
                $(".js_trader").show()
            }
            $("#planet a").show();
            $("#planet .back_to_overview").hide();
            removeTooltip($("#planet .back_to_overview"));
            $("#traderOverview").find(".c-left, .c-right").removeClass("c-small");
            traderObj.traderId = null;
            traderObj.switchingTrader = false
        }};
    breakerObj = {costs: null, offer: null, ships: {}, locked: false, lastTechId: null, initialize: function() {
            this.offer = parseInt($(".scrap_offer_amount").html());
            this.costs = breakerCosts;
            var a = this;
            $("#js_anythingSliderShips, #js_anythingSliderDefense").anythingSlider({startStopped: true, buildStartStop: false, expand: true, resizeContents: false, theme: "default", infiniteSlides: false, autoPlay: false, easing: "swing", resizeContents:true, stopAtEnd: true, playRtl: isRTLEnabled, buildNavigation: false, onInitialized: function(u, y) {
                    if (isMobile) {
                        var x = 1000, v = 50, s = 0, c = 0, w = "ontouchend" in document, b = (w) ? "touchstart" : "mousedown", r = (w) ? "touchmove" : "mousemove", A = (w) ? "touchend" : "mouseup";
                        y.$window.bind(b, function(g) {
                            c = (new Date()).getTime();
                            s = g.originalEvent.touches ? g.originalEvent.touches[0].pageX : g.pageX
                        }).bind(A, function(g) {
                            c = 0;
                            s = 0
                        }).bind(r, function(h) {
                            h.preventDefault();
                            var g = h.originalEvent.touches ? h.originalEvent.touches[0].pageX : h.pageX, k = (s === 0) ? 0 : Math.abs(g - s), l = (new Date()).getTime();
                            if (c !== 0 && l - c < x && k > v) {
                                if (g < s) {
                                    y.goForward()
                                }
                                if (g > s) {
                                    y.goBack()
                                }
                                c = 0;
                                s = 0
                            }
                        })
                    }
                }});
            $("#js_anythingSliderDefense").parent().parent().hide();
            $(".scrap_defense").bind("click.tabDefense", function() {
                $(".scrap_ships").removeClass("selected");
                $(this).addClass("selected");
                $("#js_anythingSliderShips").parent().parent().hide();
                $("#js_anythingSliderDefense").parent().parent().show()
            });
            $(".scrap_ships").bind("click.tabShips", function() {
                $(".scrap_defense").removeClass("selected");
                $(this).addClass("selected");
                $("#js_anythingSliderDefense").parent().parent().hide();
                $("#js_anythingSliderShips").parent().parent().show()
            });
            $(".buildingimg a").each(function() {
                var h = $(this).attr("ref").substr(6, 3);
                var b = $(this).find(".level");
                var c = b.contents().filter(function() {
                    return this.nodeType == 3
                });
                a.ships[h] = c.text().replace(/^\s+|\s+$/g, "");
                c.remove();
                b.append(tsdpkt(a.ships[h]))
            });
            $("#js_scrapBargain").unbind("click").bind("click", function() {
                if (!$(this).hasClass("disabled")) {
                    a.bargain(a)
                }
                return false
            });
            $("#js_scrapScrapIT").unbind("click").bind("click", function() {
                if (!$(this).hasClass("disabled")) {
                    a.trade(a)
                }
                return false
            });
            $("input.ship_amount").unbind("focus").bind("focus", function() {
                a.lastTechId = $(this).attr("name").substr(2, 3);
                $(this).val("")
            });
            $("input.ship_amount").unbind("keyup change").bind("keyup change", function(c) {
                a.lastTechId = $(this).attr("name").substr(2, 3);
                formatNumber(this, $(this).val());
                var b = $(this);
                clearTimeout(b.data("timer"));
                b.data("timer", setTimeout(function() {
                    b.removeData("timer");
                    a.updateResources(a)
                }, 300))
            });
            $(".buildingimg a").unbind("click").bind("click", function() {
                return false
            });
            $(".js_maxShips").unbind("click").bind("click", function() {
                if (!isMobile) {
                    $($(this).attr("ref")).focus()
                }
                var b = a.ships[$(this).attr("ref").substr(6, 3)];
                $($(this).attr("ref")).val(tsdpkt(b)).trigger("change");
                a.updateResources(a);
                return false
            });
            $(".sendAll").unbind("click").bind("click", function() {
                $(".anythingSlider ul:visible input").each(function() {
                    a.lastTechId = $(this).attr("name").substr(2, 3);
                    var b = a.ships[a.lastTechId];
                    $(this).val(tsdpkt(b))
                });
                a.updateResources(a, function(b) {
                    if (b.error) {
                        $(".anythingSlider ul:visible input").val("");
                        $("#div_traderScrap .resource_amount").text(0);
                        a.checkShips(a)
                    }
                })
            });
            $(".sendNone").unbind("click").bind("click", function() {
                $(".anythingSlider ul:visible input").each(function() {
                    a.lastTechId = $(this).attr("name").substr(2, 3);
                    $(this).val("")
                });
                a.updateResources(a)
            });
            $("#js_bargainCost").text(tsdpkt(this.costs));
            this.checkMoney(this);
            this.checkShips(this);
            this.updateBargain(this)
        }, bargain: function(a) {
            $("#js_scrapBargain").addClass("disabled");
            $.ajax({url: breakerCallLink, type: "POST", dataType: "json", data: {bargain: 1, token: breakerToken}, beforeSend: function() {
                    a.lock(a)
                }, success: function(b) {
                    a.unlock(a);
                    breakerToken = b.newToken;
                    fadeBox(b.message, b.error);
                    if (!b.error) {
                        a.costs = b.bargainPrice;
                        a.offer = b.percentage;
                        darkMatter = b.resources.dm;
                        a.updateBargain(a);
                        a.updateResources(a);
                        traderObj.reloadResources(function() {
                            a.checkMoney(a);
                            Tipped.show($("#js_scrapBargain")[0])
                        })
                    }
                    $(".scrap_trader_quote").text(b.quote)
                }, error: function() {
                    a.unlock(a)
                }})
        }, trade: function(a) {
            a.lock(a);
            var b = a.getTradeArray();
            var c = function c() {
                var k = loca.breakerQuestion + '<br/><br/><div style="text-align: left; margin-left: 30px">';
                var l = 0;
                $.each(b, function(g) {
                    k += this + "x " + loca.shipNames[g] + ", ";
                    l++;
                    if (l % 2 == 0) {
                        k += "<br/>"
                    }
                });
                k = k.replace(/, (<br\/>)?$/, "");
                k += "</div>";
                return k
            };
            errorBoxDecision(loca.breaker, c(), LocalizationStrings.yes, LocalizationStrings.no, function() {
                $.ajax({url: breakerCallLink, type: "POST", dataType: "json", data: {lastTechId: a.lastTechId, finishTrade: 1, trade: b, token: breakerToken}, success: function(h) {
                        a.unlock(a);
                        breakerToken = h.newToken;
                        if (h.error) {
                            fadeBox(h.message, true)
                        } else {
                            fadeBox(h.message, false);
                            a.offer = h.percentage;
                            a.costs = h.bargainPrice;
                            a.resetForm();
                            a.updateBargain(a);
                            $("#js_scrapAmountMetal").html(0);
                            $("#js_scrapAmountCrystal").html(0);
                            $("#js_scrapAmountDeuterium").html(0);
                            traderObj.reloadResources(function() {
                                a.updateShips(a)
                            })
                        }
                        $(".scrap_trader_quote").text(h.quote)
                    }, error: function() {
                        a.unlock(a);
                        fadeBox(loca.error, true)
                    }})
            }, function() {
                a.unlock(a)
            })
        }, updateResources: function(b, a) {
            if (b.locked) {
                return
            }
            $.ajax({url: breakerCallLink, type: "POST", dataType: "json", data: {lastTechId: b.lastTechId, trade: b.getTradeArray(), token: breakerToken}, beforeSend: function() {
                    b.lock(b)
                }, success: function(c) {
                    breakerToken = c.newToken;
                    if (c.error) {
                        fadeBox(c.message, true)
                    }
                    b.locked = false;
                    var k = false;
                    for (var l in c.techAmount) {
                        $("#ship_" + l).val(tsdpkt(c.techAmount[l]));
                        if (!k && $("#ship_" + l).val() != b.ships[l]) {
                            k = true
                        }
                    }
                    $("#js_scrapAmountMetal").html(tsdpkt(c.resources.metal));
                    $("#js_scrapAmountCrystal").html(tsdpkt(c.resources.crystal));
                    $("#js_scrapAmountDeuterium").html(tsdpkt(c.resources.deuterium));
                    if (!b.notFirstOffer) {
                        $(".scrap_trader_quote").text(loca.breakerFirstOffer);
                        b.notFirstOffer = true
                    }
                    if (k) {
                        b.updateShips(b)
                    } else {
                        b.unlock(b)
                    }
                    if (typeof (a) == "function") {
                        a(c)
                    }
                }, error: function() {
                    b.unlock(b)
                }})
        }, updateShips: function(a) {
            $.ajax({url: techUrl, type: "POST", dataType: "json", beforeSend: function() {
                    a.lock(a)
                }, success: function(b) {
                    $("#div_traderScrap .item").each(function() {
                        var n = $(this).attr("id").substr(6, 3);
                        if (typeof (b[n]) != "undefined") {
                            var m = 0;
                            if (b[n] != null) {
                                m = getValue(b[n])
                            }
                            a.ships[n] = m;
                            var c = $(this).find(".level");
                            c.contents().filter(function() {
                                return this.nodeType == 3
                            }).remove();
                            c.append(tsdpkt(m));
                            if (b[n] != null) {
                                var l = $("#button" + n);
                                l.removeClass("on").removeClass("off");
                                if (m > 0) {
                                    l.addClass("on")
                                } else {
                                    l.addClass("off")
                                }
                            }
                        }
                    });
                    a.unlock(a)
                }, error: function() {
                    a.unlock(a)
                }})
        }, getTradeArray: function() {
            var a = {};
            $("input.ship_amount").each(function() {
                var b = $(this).attr("name").substr(2, 3);
                if (getValue($(this).val()) != 0) {
                    a[b] = getValue($(this).val())
                }
            });
            return a
        }, resetForm: function() {
            $("input.ship_amount").each(function() {
                $(this).val("0")
            });
            removeTooltip($("#js_scrapBargain"));
            $("#js_scrapBargain").removeClass("tooltip").removeAttr("title")
        }, checkMoney: function(a) {
            if (darkMatter < a.costs) {
                $("#js_scrapBargain").addClass("disabled")
            } else {
                if (breakerMaximumPercent <= a.offer) {
                    $("#js_scrapBargain").addClass("disabled").addClass("tooltip").attr("title", loca.infoMaxBargain);
                    initTooltips($("#js_scrapBargain"))
                } else {
                    $("#js_scrapBargain").removeClass("disabled")
                }
            }
        }, checkShips: function(a) {
            var b = false;
            $("input.ship_amount").each(function() {
                if ($(this).val().length > 0 && getValue($(this).val()) > 0) {
                    b = true
                }
            });
            if (!b) {
                $("#js_scrapScrapIT").addClass("disabled")
            } else {
                $("#js_scrapScrapIT").removeClass("disabled")
            }
        }, updateBargain: function(a) {
            $(".scrap_offer_amount").css("height", a.offer / 100 * $(".scrap_offer_amount").parent().css("height").replace("px", ""));
            $(".scrap_offer_amount").html(a.offer + "%");
            $(".js_bargainCost").text(tsdpkt(a.costs))
        }, lock: function(a) {
            $("#js_scrapBargain").addClass("disabled");
            $("#js_scrapScrapIT").addClass("disabled");
            a.locked = true
        }, unlock: function(a) {
            a.locked = false;
            a.checkShips(a);
            a.checkMoney(a)
        }};
    auctioneer = {socket: null, connected: false, timeout: null, retryInterval: 5000, historyShown: false, initConnection: function() {
            try {
                var a = auctioneer;
                this.socket = new io.connect("/auctioneer", {port: auctioneerPort});
                this.socket.on("connect", function() {
                    a.connected = true;
                    clearTimeout(this.timeout)
                });
                this.socket.on("disconnect", function() {
                    a.connected = false;
                    a.retryConnection()
                });
                this.socket.on("new auction", function(n) {
                    auctionId = n.auctionId;
                    var o = $("#div_traderAuctioneer .detail_value.currentPlayer").html();
                    if (n.oldAuction.player == null) {
                        o = loca.auctionNotSold
                    } else {
                        o = '<a href="' + n.oldAuction.player.link + '">' + n.oldAuction.player.name + "</a>"
                    }
                    removeTooltip($("#div_traderAuctioneer .image_140px .detail_button"));
                    var c = $("#div_traderAuctioneer .image_140px .detail_button").attr("title");
                    var p = $(".auction_history li:first").hasClass("even") ? "odd" : "even";
                    var q = '                        <li class="' + p + '" style="display: none">                            <a href="javascript:void(0);"                               class="slideIn"                               ref="' + n.oldAuction.item.uuid + '">                                <img height="30" width="30"                                     src="/cdn/img/item-images/' + n.oldAuction.item.imageSmall + '-small.png"                                     alt="" title="' + c + '"                                     class="item_img tooltipHTML tooltipLeft r_' + n.oldAuction.item.rarity + '"/>                            </a>                            <span class="detail sum">' + number_format(n.oldAuction.sum, 0) + '</span>                            <span class="detail player">' + o + '</span>                            <span class="detail date_time">' + n.oldAuction.time + "</span>                        </li>";
                    $(".auction_history .history_content ul").prepend(q);
                    $(".auction_history .history_content li:first").slideDown("slow");
                    var r = $("#div_traderAuctioneer .auction_history li").length;
                    if (r > 3) {
                        $(".auction_history .history_content li:last").slideUp("slow", function() {
                            $(".auction_history .history_content li:eq(21)").remove();
                            var g = $(".auction_history .history_content li:eq(3)");
                            g.addClass("more_auctions_li");
                            if (auctioneer.historyShown) {
                                g.show()
                            }
                        });
                        $("#div_traderAuctioneer .auction_history .more").show()
                    }
                    $("#div_traderAuctioneer .image_140px .detail_button").attr("ref", n.item.uuid).attr("title", "").removeClass("r_common_140px").removeClass("r_uncommon_140px").removeClass("r_rare_140px").removeClass("r_epic_140px").addClass("r_" + n.item.rarity + "_140px");
                    $("#div_traderAuctioneer .image_140px img").attr("src", "/cdn/img/item-images/" + n.item.image + "-140x.png");
                    $("#div_traderAuctioneer .left_header h2").html(loca.auctionRunning);
                    a.setItemTooltip($("#div_traderAuctioneer .image_140px .detail_button"));
                    a.setData({price: 1000, sum: 0, player: null, bids: 0, info: n.info});
                    $("#div_traderAuctioneer .js_alreadyBidden").html(number_format(0, 0));
                    $(".noAuctionOverlay").hide();
                    traderObj.resetValues("#div_traderAuctioneer", false);
                    traderObj.checkOverbidden()
                });
                this.socket.on("new bid", function(c) {
                    if (c.player.id == playerId) {
                        playerBid = c.sum;
                        AuctionIdOflastPlayerBid = c.auctionId;
                        $("#div_traderAuctioneer .js_alreadyBidden").html(number_format(Math.floor(playerBid), 0))
                    }
                    a.setData({price: c.price, sum: c.sum, player: c.player, bids: c.bids});
                    traderObj.checkOverbidden()
                });
                this.socket.on("auction finished", function(c) {
                    a.setData({price: 0, player: c.player, bids: c.bids, info: c.info});
                    traderObj.resetValues("#div_traderAuctioneer", false);
                    $("#div_traderAuctioneer .js_alreadyBidden").html(number_format(0, 0));
                    $("#div_traderAuctioneer .js_auctioneerSum").html("");
                    $("#div_traderAuctioneer .left_header h2").html(loca.auctionFinished);
                    if (c.player != null) {
                        if (c.player.id == playerId) {
                            a.setItemTooltip($("#div_traderAuctioneer .image_140px .detail_button"))
                        }
                    }
                    $(".noAuctionOverlay").show();
                    traderObj.checkOverbidden()
                });
                this.socket.on("timeLeft", function(c) {
                    a.setData({info: c})
                })
            } catch (b) {
            }
        }, setItemTooltip: function(a) {
            $.ajax({url: detailUrl, data: {getDetails: 1, type: $(a).attr("ref"), ajax: 1}, dataType: "json", success: function(b) {
                    changeTooltip(a, b.title);
                    $("#itemDetails[data-uuid='" + $(a).attr("ref") + "'] .amount,a.detail_button[ref='" + $(a).attr("ref") + "'] .amount").html(tsdpkt(b.amount))
                }, error: function() {
                    fadeBox(loca.error, true)
                }})
        }, initialize: function() {
            traderObj.initSliderTrader("#div_traderAuctioneer");
            traderObj.planets = planetResources;
            traderObj.price = getValue($(".js_price").html());
            $("#div_traderAuctioneer .right_box .pay").bind("click", function() {
                traderObj.submitAuction()
            });
            $("#div_traderAuctioneer .auction_history .more").bind("click", function() {
                if (auctioneer.historyShown) {
                    $(this).text("[" + loca.auctionShowMore + "]")
                } else {
                    $(this).text("[" + loca.auctionShowLess + "]")
                }
                auctioneer.historyShown = !auctioneer.historyShown;
                $("#div_traderAuctioneer .auction_history .more_auctions_li").slideToggle("slow")
            });
            traderObj.sumAuctioneer();
            traderObj.checkOverbidden();
            this.initCountdown();
            loadScript(scriptUrl, this.initConnection)
        }, retryConnection: function() {
            var a = this;
            setTimeout(function() {
                a.initConnection()
            }, 5000)
        }, setData: function(a) {
            var b = false;
            if (typeof (a.player) != "undefined") {
                if (a.player == null) {
                    $("#div_traderAuctioneer .detail_value.currentPlayer").text("");
                    $("#div_traderAuctioneer .detail_value.currentPlayer").attr("href", "")
                } else {
                    $("#div_traderAuctioneer .detail_value.currentPlayer").text(a.player.name);
                    $("#div_traderAuctioneer .detail_value.currentPlayer").attr("href", a.player.link);
                    $("#div_traderAuctioneer .detail_value.currentPlayer").attr("data-player-id", a.player.id);
                    $("#div_traderAuctioneer .detail_value.currentPlayer").data("playerId", a.player.id)
                }
                b = true
            }
            if (typeof (a.price) !== "undefined") {
                traderObj.price = a.price;
                $("#div_traderAuctioneer .js_price").html(number_format(Math.floor(a.price), 0));
                b = true
            }
            if (typeof (a.sum) !== "undefined") {
                $("#div_traderAuctioneer .detail_value.currentSum").html(number_format(Math.floor(a.sum), 0));
                b = true
            }
            if (typeof (a.bids) !== "undefined") {
                $("#div_traderAuctioneer .detail_value.numberOfBids").html(number_format(a.bids, 0));
                b = true
            }
            if (typeof (a.info) !== "undefined" && $.trim($("#div_traderAuctioneer .auction_info").html()) != a.info) {
                $("#div_traderAuctioneer .auction_info").html(a.info);
                this.initCountdown();
                b = true
            }
            if (b) {
                this.flash();
                traderObj.sumAuctioneer()
            }
        }, initCountdown: function() {
            if (typeof (this.nextAuctionTimer) == "object") {
                timerHandler.removeCallback(this.nextAuctionTimer.timer)
            }
            if ($(".nextAuction").length > 0) {
                this.nextAuctionTimer = new simpleCountdown($(".nextAuction").get(0), $(".nextAuction").text())
            }
        }, flash: function() {
            if (traderObj.traderId == "#div_traderAuctioneer") {
                $("#div_traderAuctioneer .overlay").fadeIn("normal", function() {
                    $(this).fadeOut("normal")
                })
            }
        }, calculateDeficit: function() {
            var a = 0;
            if (Math.floor(traderObj.price) == 0) {
                a = 0
            } else {
                if (auctionId != AuctionIdOflastPlayerBid) {
                    a = Math.floor(traderObj.price)
                } else {
                    a = Math.floor(traderObj.price) - Math.floor(playerBid)
                }
            }
            return Math.floor(a)
        }};
    $(".js_trader").hover(function() {
        var a = $(this).attr("id").replace("js_trader", "").toLowerCase();
        $(this).addClass(a + "_link_hover")
    }, function() {
        var a = $(this).attr("id").replace("js_trader", "").toLowerCase();
        $(".trader_link").each(function(c, b) {
            $(this).removeClass(a + "_link_hover")
        })
    });
    $(".right_box .pay, .value-control, .ui-slider-handle, .bargain, .scrap_it, .source").hover(function() {
        $(this).addClass("hover")
    }, function() {
        $(this).removeClass("hover")
    });
    traderObj.init();
    $(document).undelegate(".js_trader", "click").delegate(".js_trader", "click", function() {
        var a = $(this).attr("id").replace("js_", "");
        traderObj.switchTrader(a)
    }).undelegate("#planet .js_backToOverview", "click").delegate("#planet .js_backToOverview", "click", function() {
        $.bbq.pushState({page: "", animation: ""});
        $(".planetlink, .moonlink").fragment({page: "", animation: ""})
    });
    var e = $.deparam.fragment();
    if (typeof (e.page) != "undefined" && e.page != "") {
        traderObj.selectTrader(e.page, undefined, e.tab)
    }
}
;